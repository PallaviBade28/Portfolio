(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function gE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vL={exports:{}},v0={},xL={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm=Symbol.for("react.element"),XH=Symbol.for("react.portal"),JH=Symbol.for("react.fragment"),YH=Symbol.for("react.strict_mode"),KH=Symbol.for("react.profiler"),qH=Symbol.for("react.provider"),QH=Symbol.for("react.context"),ZH=Symbol.for("react.forward_ref"),$H=Symbol.for("react.suspense"),eG=Symbol.for("react.memo"),tG=Symbol.for("react.lazy"),QT=Symbol.iterator;function nG(n){return n===null||typeof n!="object"?null:(n=QT&&n[QT]||n["@@iterator"],typeof n=="function"?n:null)}var _L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AL=Object.assign,SL={};function If(n,e,t){this.props=n,this.context=e,this.refs=SL,this.updater=t||_L}If.prototype.isReactComponent={};If.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};If.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function ML(){}ML.prototype=If.prototype;function yE(n,e,t){this.props=n,this.context=e,this.refs=SL,this.updater=t||_L}var vE=yE.prototype=new ML;vE.constructor=yE;AL(vE,If.prototype);vE.isPureReactComponent=!0;var ZT=Array.isArray,bL=Object.prototype.hasOwnProperty,xE={current:null},EL={key:!0,ref:!0,__self:!0,__source:!0};function wL(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)bL.call(e,i)&&!EL.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),h=0;h<a;h++)l[h]=arguments[h+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:sm,type:n,key:r,ref:o,props:s,_owner:xE.current}}function iG(n,e){return{$$typeof:sm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function _E(n){return typeof n=="object"&&n!==null&&n.$$typeof===sm}function sG(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var $T=/\/+/g;function j_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?sG(""+n.key):e.toString(36)}function Vy(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case sm:case XH:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+j_(o,0):i,ZT(s)?(t="",n!=null&&(t=n.replace($T,"$&/")+"/"),Vy(s,e,t,"",function(h){return h})):s!=null&&(_E(s)&&(s=iG(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($T,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",ZT(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+j_(r,a);o+=Vy(r,e,t,l,s)}else if(l=nG(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+j_(r,a++),o+=Vy(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gg(n,e,t){if(n==null)return n;var i=[],s=0;return Vy(n,i,"","",function(r){return e.call(t,r,s++)}),i}function rG(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ns={current:null},Wy={transition:null},oG={ReactCurrentDispatcher:ns,ReactCurrentBatchConfig:Wy,ReactCurrentOwner:xE};It.Children={map:gg,forEach:function(n,e,t){gg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return gg(n,function(){e++}),e},toArray:function(n){return gg(n,function(e){return e})||[]},only:function(n){if(!_E(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};It.Component=If;It.Fragment=JH;It.Profiler=KH;It.PureComponent=yE;It.StrictMode=YH;It.Suspense=$H;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oG;It.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=AL({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=xE.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)bL.call(e,l)&&!EL.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var h=0;h<l;h++)a[h]=arguments[h+2];i.children=a}return{$$typeof:sm,type:n.type,key:s,ref:r,props:i,_owner:o}};It.createContext=function(n){return n={$$typeof:QH,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:qH,_context:n},n.Consumer=n};It.createElement=wL;It.createFactory=function(n){var e=wL.bind(null,n);return e.type=n,e};It.createRef=function(){return{current:null}};It.forwardRef=function(n){return{$$typeof:ZH,render:n}};It.isValidElement=_E;It.lazy=function(n){return{$$typeof:tG,_payload:{_status:-1,_result:n},_init:rG}};It.memo=function(n,e){return{$$typeof:eG,type:n,compare:e===void 0?null:e}};It.startTransition=function(n){var e=Wy.transition;Wy.transition={};try{n()}finally{Wy.transition=e}};It.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};It.useCallback=function(n,e){return ns.current.useCallback(n,e)};It.useContext=function(n){return ns.current.useContext(n)};It.useDebugValue=function(){};It.useDeferredValue=function(n){return ns.current.useDeferredValue(n)};It.useEffect=function(n,e){return ns.current.useEffect(n,e)};It.useId=function(){return ns.current.useId()};It.useImperativeHandle=function(n,e,t){return ns.current.useImperativeHandle(n,e,t)};It.useInsertionEffect=function(n,e){return ns.current.useInsertionEffect(n,e)};It.useLayoutEffect=function(n,e){return ns.current.useLayoutEffect(n,e)};It.useMemo=function(n,e){return ns.current.useMemo(n,e)};It.useReducer=function(n,e,t){return ns.current.useReducer(n,e,t)};It.useRef=function(n){return ns.current.useRef(n)};It.useState=function(n){return ns.current.useState(n)};It.useSyncExternalStore=function(n,e,t){return ns.current.useSyncExternalStore(n,e,t)};It.useTransition=function(){return ns.current.useTransition()};It.version="18.2.0";xL.exports=It;var fe=xL.exports;const io=gE(fe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aG=fe,lG=Symbol.for("react.element"),cG=Symbol.for("react.fragment"),uG=Object.prototype.hasOwnProperty,hG=aG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fG={key:!0,ref:!0,__self:!0,__source:!0};function CL(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)uG.call(e,i)&&!fG.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:lG,type:n,key:r,ref:o,props:s,_owner:hG.current}}v0.Fragment=cG;v0.jsx=CL;v0.jsxs=CL;vL.exports=v0;var re=vL.exports,qS={},TL={exports:{}},ks={},RL={exports:{}},BL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,X){var J=V.length;V.push(X);e:for(;0<J;){var K=J-1>>>1,ae=V[K];if(0<s(ae,X))V[K]=X,V[J]=ae,J=K;else break e}}function t(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var X=V[0],J=V.pop();if(J!==X){V[0]=J;e:for(var K=0,ae=V.length,Be=ae>>>1;K<Be;){var Q=2*(K+1)-1,de=V[Q],Ce=Q+1,ze=V[Ce];if(0>s(de,J))Ce<ae&&0>s(ze,de)?(V[K]=ze,V[Ce]=J,K=Ce):(V[K]=de,V[Q]=J,K=Q);else if(Ce<ae&&0>s(ze,J))V[K]=ze,V[Ce]=J,K=Ce;else break e}}return X}function s(V,X){var J=V.sortIndex-X.sortIndex;return J!==0?J:V.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],h=[],f=1,d=null,p=3,g=!1,v=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(V){for(var X=t(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=V)i(h),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(h)}}function E(V){if(S=!1,M(V),!v)if(t(l)!==null)v=!0,H(R);else{var X=t(h);X!==null&&Y(E,X.startTime-V)}}function R(V,X){v=!1,S&&(S=!1,y(L),L=-1),g=!0;var J=p;try{for(M(X),d=t(l);d!==null&&(!(d.expirationTime>X)||V&&!D());){var K=d.callback;if(typeof K=="function"){d.callback=null,p=d.priorityLevel;var ae=K(d.expirationTime<=X);X=n.unstable_now(),typeof ae=="function"?d.callback=ae:d===t(l)&&i(l),M(X)}else i(l);d=t(l)}if(d!==null)var Be=!0;else{var Q=t(h);Q!==null&&Y(E,Q.startTime-X),Be=!1}return Be}finally{d=null,p=J,g=!1}}var T=!1,B=null,L=-1,F=5,C=-1;function D(){return!(n.unstable_now()-C<F)}function te(){if(B!==null){var V=n.unstable_now();C=V;var X=!0;try{X=B(!0,V)}finally{X?$():(T=!1,B=null)}}else T=!1}var $;if(typeof A=="function")$=function(){A(te)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,q=k.port2;k.port1.onmessage=te,$=function(){q.postMessage(null)}}else $=function(){_(te,0)};function H(V){B=V,T||(T=!0,$())}function Y(V,X){L=_(function(){V(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,H(R))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var J=p;p=X;try{return V()}finally{p=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var J=p;p=V;try{return X()}finally{p=J}},n.unstable_scheduleCallback=function(V,X,J){var K=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?K+J:K):J=K,V){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=J+ae,V={id:f++,callback:X,priorityLevel:V,startTime:J,expirationTime:ae,sortIndex:-1},J>K?(V.sortIndex=J,e(h,V),t(l)===null&&V===t(h)&&(S?(y(L),L=-1):S=!0,Y(E,J-K))):(V.sortIndex=ae,e(l,V),v||g||(v=!0,H(R))),V},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(V){var X=p;return function(){var J=p;p=X;try{return V.apply(this,arguments)}finally{p=J}}}})(BL);RL.exports=BL;var dG=RL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PL=fe,Us=dG;function we(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DL=new Set,xp={};function uu(n,e){df(n,e),df(n+"Capture",e)}function df(n,e){for(xp[n]=e,n=0;n<e.length;n++)DL.add(e[n])}var $o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QS=Object.prototype.hasOwnProperty,pG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eR={},tR={};function mG(n){return QS.call(tR,n)?!0:QS.call(eR,n)?!1:pG.test(n)?tR[n]=!0:(eR[n]=!0,!1)}function gG(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function yG(n,e,t,i){if(e===null||typeof e>"u"||gG(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function is(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xi[n]=new is(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];xi[e]=new is(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xi[n]=new is(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xi[n]=new is(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xi[n]=new is(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xi[n]=new is(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xi[n]=new is(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xi[n]=new is(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xi[n]=new is(n,5,!1,n.toLowerCase(),null,!1,!1)});var AE=/[\-:]([a-z])/g;function SE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(AE,SE);xi[e]=new is(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(AE,SE);xi[e]=new is(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(AE,SE);xi[e]=new is(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xi[n]=new is(n,1,!1,n.toLowerCase(),null,!1,!1)});xi.xlinkHref=new is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xi[n]=new is(n,1,!1,n.toLowerCase(),null,!0,!0)});function ME(n,e,t,i){var s=xi.hasOwnProperty(e)?xi[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yG(e,t,s,i)&&(t=null),i||s===null?mG(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var aa=PL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yg=Symbol.for("react.element"),bh=Symbol.for("react.portal"),Eh=Symbol.for("react.fragment"),bE=Symbol.for("react.strict_mode"),ZS=Symbol.for("react.profiler"),LL=Symbol.for("react.provider"),OL=Symbol.for("react.context"),EE=Symbol.for("react.forward_ref"),$S=Symbol.for("react.suspense"),eM=Symbol.for("react.suspense_list"),wE=Symbol.for("react.memo"),Ia=Symbol.for("react.lazy"),IL=Symbol.for("react.offscreen"),nR=Symbol.iterator;function vd(n){return n===null||typeof n!="object"?null:(n=nR&&n[nR]||n["@@iterator"],typeof n=="function"?n:null)}var wn=Object.assign,X_;function jd(n){if(X_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);X_=e&&e[1]||""}return`
`+X_+n}var J_=!1;function Y_(n,e){if(!n||J_)return"";J_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(n,[],e)}else{try{e.call()}catch(h){i=h}n.call(e.prototype)}else{try{throw Error()}catch(h){i=h}n()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{J_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?jd(n):""}function vG(n){switch(n.tag){case 5:return jd(n.type);case 16:return jd("Lazy");case 13:return jd("Suspense");case 19:return jd("SuspenseList");case 0:case 2:case 15:return n=Y_(n.type,!1),n;case 11:return n=Y_(n.type.render,!1),n;case 1:return n=Y_(n.type,!0),n;default:return""}}function tM(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Eh:return"Fragment";case bh:return"Portal";case ZS:return"Profiler";case bE:return"StrictMode";case $S:return"Suspense";case eM:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case OL:return(n.displayName||"Context")+".Consumer";case LL:return(n._context.displayName||"Context")+".Provider";case EE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case wE:return e=n.displayName||null,e!==null?e:tM(n.type)||"Memo";case Ia:e=n._payload,n=n._init;try{return tM(n(e))}catch{}}return null}function xG(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tM(e);case 8:return e===bE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function NL(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _G(n){var e=NL(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function vg(n){n._valueTracker||(n._valueTracker=_G(n))}function UL(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=NL(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function yv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function nM(n,e){var t=e.checked;return wn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function iR(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=cl(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FL(n,e){e=e.checked,e!=null&&ME(n,"checked",e,!1)}function iM(n,e){FL(n,e);var t=cl(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?sM(n,e.type,t):e.hasOwnProperty("defaultValue")&&sM(n,e.type,cl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function sR(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function sM(n,e,t){(e!=="number"||yv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Xd=Array.isArray;function qh(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+cl(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function rM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return wn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function rR(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(we(92));if(Xd(t)){if(1<t.length)throw Error(we(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:cl(t)}}function zL(n,e){var t=cl(e.value),i=cl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function oR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function kL(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oM(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?kL(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var xg,HL=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(xg=xg||document.createElement("div"),xg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function _p(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Zd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AG=["Webkit","ms","Moz","O"];Object.keys(Zd).forEach(function(n){AG.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Zd[e]=Zd[n]})});function GL(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Zd.hasOwnProperty(n)&&Zd[n]?(""+e).trim():e+"px"}function VL(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=GL(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var SG=wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aM(n,e){if(e){if(SG[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function lM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cM=null;function CE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var uM=null,Qh=null,Zh=null;function aR(n){if(n=am(n)){if(typeof uM!="function")throw Error(we(280));var e=n.stateNode;e&&(e=M0(e),uM(n.stateNode,n.type,e))}}function WL(n){Qh?Zh?Zh.push(n):Zh=[n]:Qh=n}function jL(){if(Qh){var n=Qh,e=Zh;if(Zh=Qh=null,aR(n),e)for(n=0;n<e.length;n++)aR(e[n])}}function XL(n,e){return n(e)}function JL(){}var K_=!1;function YL(n,e,t){if(K_)return n(e,t);K_=!0;try{return XL(n,e,t)}finally{K_=!1,(Qh!==null||Zh!==null)&&(JL(),jL())}}function Ap(n,e){var t=n.stateNode;if(t===null)return null;var i=M0(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(we(231,e,typeof t));return t}var hM=!1;if($o)try{var xd={};Object.defineProperty(xd,"passive",{get:function(){hM=!0}}),window.addEventListener("test",xd,xd),window.removeEventListener("test",xd,xd)}catch{hM=!1}function MG(n,e,t,i,s,r,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(t,h)}catch(f){this.onError(f)}}var $d=!1,vv=null,xv=!1,fM=null,bG={onError:function(n){$d=!0,vv=n}};function EG(n,e,t,i,s,r,o,a,l){$d=!1,vv=null,MG.apply(bG,arguments)}function wG(n,e,t,i,s,r,o,a,l){if(EG.apply(this,arguments),$d){if($d){var h=vv;$d=!1,vv=null}else throw Error(we(198));xv||(xv=!0,fM=h)}}function hu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function KL(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function lR(n){if(hu(n)!==n)throw Error(we(188))}function CG(n){var e=n.alternate;if(!e){if(e=hu(n),e===null)throw Error(we(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return lR(s),n;if(r===i)return lR(s),e;r=r.sibling}throw Error(we(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(we(189))}}if(t.alternate!==i)throw Error(we(190))}if(t.tag!==3)throw Error(we(188));return t.stateNode.current===t?n:e}function qL(n){return n=CG(n),n!==null?QL(n):null}function QL(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=QL(n);if(e!==null)return e;n=n.sibling}return null}var ZL=Us.unstable_scheduleCallback,cR=Us.unstable_cancelCallback,TG=Us.unstable_shouldYield,RG=Us.unstable_requestPaint,zn=Us.unstable_now,BG=Us.unstable_getCurrentPriorityLevel,TE=Us.unstable_ImmediatePriority,$L=Us.unstable_UserBlockingPriority,_v=Us.unstable_NormalPriority,PG=Us.unstable_LowPriority,eO=Us.unstable_IdlePriority,x0=null,ao=null;function DG(n){if(ao&&typeof ao.onCommitFiberRoot=="function")try{ao.onCommitFiberRoot(x0,n,void 0,(n.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:IG,LG=Math.log,OG=Math.LN2;function IG(n){return n>>>=0,n===0?32:31-(LG(n)/OG|0)|0}var _g=64,Ag=4194304;function Jd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Av(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=Jd(a):(r&=o,r!==0&&(i=Jd(r)))}else o=t&~s,o!==0?i=Jd(o):r!==0&&(i=Jd(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Dr(e),s=1<<t,i|=n[t],e&=~s;return i}function NG(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UG(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-Dr(r),a=1<<o,l=s[o];l===-1?(!(a&t)||a&i)&&(s[o]=NG(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function dM(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function tO(){var n=_g;return _g<<=1,!(_g&4194240)&&(_g=64),n}function q_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function rm(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Dr(e),n[e]=t}function FG(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Dr(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function RE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Dr(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Kt=0;function nO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var iO,BE,sO,rO,oO,pM=!1,Sg=[],Ya=null,Ka=null,qa=null,Sp=new Map,Mp=new Map,Fa=[],zG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uR(n,e){switch(n){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Sp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mp.delete(e.pointerId)}}function _d(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=am(e),e!==null&&BE(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function kG(n,e,t,i,s){switch(e){case"focusin":return Ya=_d(Ya,n,e,t,i,s),!0;case"dragenter":return Ka=_d(Ka,n,e,t,i,s),!0;case"mouseover":return qa=_d(qa,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Sp.set(r,_d(Sp.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Mp.set(r,_d(Mp.get(r)||null,n,e,t,i,s)),!0}return!1}function aO(n){var e=Cc(n.target);if(e!==null){var t=hu(e);if(t!==null){if(e=t.tag,e===13){if(e=KL(t),e!==null){n.blockedOn=e,oO(n.priority,function(){sO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=mM(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);cM=i,t.target.dispatchEvent(i),cM=null}else return e=am(t),e!==null&&BE(e),n.blockedOn=t,!1;e.shift()}return!0}function hR(n,e,t){jy(n)&&t.delete(e)}function HG(){pM=!1,Ya!==null&&jy(Ya)&&(Ya=null),Ka!==null&&jy(Ka)&&(Ka=null),qa!==null&&jy(qa)&&(qa=null),Sp.forEach(hR),Mp.forEach(hR)}function Ad(n,e){n.blockedOn===e&&(n.blockedOn=null,pM||(pM=!0,Us.unstable_scheduleCallback(Us.unstable_NormalPriority,HG)))}function bp(n){function e(s){return Ad(s,n)}if(0<Sg.length){Ad(Sg[0],n);for(var t=1;t<Sg.length;t++){var i=Sg[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Ya!==null&&Ad(Ya,n),Ka!==null&&Ad(Ka,n),qa!==null&&Ad(qa,n),Sp.forEach(e),Mp.forEach(e),t=0;t<Fa.length;t++)i=Fa[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Fa.length&&(t=Fa[0],t.blockedOn===null);)aO(t),t.blockedOn===null&&Fa.shift()}var $h=aa.ReactCurrentBatchConfig,Sv=!0;function GG(n,e,t,i){var s=Kt,r=$h.transition;$h.transition=null;try{Kt=1,PE(n,e,t,i)}finally{Kt=s,$h.transition=r}}function VG(n,e,t,i){var s=Kt,r=$h.transition;$h.transition=null;try{Kt=4,PE(n,e,t,i)}finally{Kt=s,$h.transition=r}}function PE(n,e,t,i){if(Sv){var s=mM(n,e,t,i);if(s===null)oA(n,e,i,Mv,t),uR(n,i);else if(kG(s,n,e,t,i))i.stopPropagation();else if(uR(n,i),e&4&&-1<zG.indexOf(n)){for(;s!==null;){var r=am(s);if(r!==null&&iO(r),r=mM(n,e,t,i),r===null&&oA(n,e,i,Mv,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else oA(n,e,i,null,t)}}var Mv=null;function mM(n,e,t,i){if(Mv=null,n=CE(i),n=Cc(n),n!==null)if(e=hu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=KL(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Mv=n,null}function lO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BG()){case TE:return 1;case $L:return 4;case _v:case PG:return 16;case eO:return 536870912;default:return 16}default:return 16}}var ja=null,DE=null,Xy=null;function cO(){if(Xy)return Xy;var n,e=DE,t=e.length,i,s="value"in ja?ja.value:ja.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return Xy=s.slice(n,1<i?1-i:void 0)}function Jy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Mg(){return!0}function fR(){return!1}function Hs(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Mg:fR,this.isPropagationStopped=fR,this}return wn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Mg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Mg)},persist:function(){},isPersistent:Mg}),e}var Nf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LE=Hs(Nf),om=wn({},Nf,{view:0,detail:0}),WG=Hs(om),Q_,Z_,Sd,_0=wn({},om,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sd&&(Sd&&n.type==="mousemove"?(Q_=n.screenX-Sd.screenX,Z_=n.screenY-Sd.screenY):Z_=Q_=0,Sd=n),Q_)},movementY:function(n){return"movementY"in n?n.movementY:Z_}}),dR=Hs(_0),jG=wn({},_0,{dataTransfer:0}),XG=Hs(jG),JG=wn({},om,{relatedTarget:0}),$_=Hs(JG),YG=wn({},Nf,{animationName:0,elapsedTime:0,pseudoElement:0}),KG=Hs(YG),qG=wn({},Nf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),QG=Hs(qG),ZG=wn({},Nf,{data:0}),pR=Hs(ZG),$G={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=t4[n])?!!e[n]:!1}function OE(){return n4}var i4=wn({},om,{key:function(n){if(n.key){var e=$G[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Jy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?e4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OE,charCode:function(n){return n.type==="keypress"?Jy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),s4=Hs(i4),r4=wn({},_0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mR=Hs(r4),o4=wn({},om,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OE}),a4=Hs(o4),l4=wn({},Nf,{propertyName:0,elapsedTime:0,pseudoElement:0}),c4=Hs(l4),u4=wn({},_0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),h4=Hs(u4),f4=[9,13,27,32],IE=$o&&"CompositionEvent"in window,ep=null;$o&&"documentMode"in document&&(ep=document.documentMode);var d4=$o&&"TextEvent"in window&&!ep,uO=$o&&(!IE||ep&&8<ep&&11>=ep),gR=" ",yR=!1;function hO(n,e){switch(n){case"keyup":return f4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wh=!1;function p4(n,e){switch(n){case"compositionend":return fO(e);case"keypress":return e.which!==32?null:(yR=!0,gR);case"textInput":return n=e.data,n===gR&&yR?null:n;default:return null}}function m4(n,e){if(wh)return n==="compositionend"||!IE&&hO(n,e)?(n=cO(),Xy=DE=ja=null,wh=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uO&&e.locale!=="ko"?null:e.data;default:return null}}var g4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!g4[n.type]:e==="textarea"}function dO(n,e,t,i){WL(i),e=bv(e,"onChange"),0<e.length&&(t=new LE("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var tp=null,Ep=null;function y4(n){bO(n,0)}function A0(n){var e=Rh(n);if(UL(e))return n}function v4(n,e){if(n==="change")return e}var pO=!1;if($o){var eA;if($o){var tA="oninput"in document;if(!tA){var xR=document.createElement("div");xR.setAttribute("oninput","return;"),tA=typeof xR.oninput=="function"}eA=tA}else eA=!1;pO=eA&&(!document.documentMode||9<document.documentMode)}function _R(){tp&&(tp.detachEvent("onpropertychange",mO),Ep=tp=null)}function mO(n){if(n.propertyName==="value"&&A0(Ep)){var e=[];dO(e,Ep,n,CE(n)),YL(y4,e)}}function x4(n,e,t){n==="focusin"?(_R(),tp=e,Ep=t,tp.attachEvent("onpropertychange",mO)):n==="focusout"&&_R()}function _4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return A0(Ep)}function A4(n,e){if(n==="click")return A0(e)}function S4(n,e){if(n==="input"||n==="change")return A0(e)}function M4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Nr=typeof Object.is=="function"?Object.is:M4;function wp(n,e){if(Nr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!QS.call(e,s)||!Nr(n[s],e[s]))return!1}return!0}function AR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function SR(n,e){var t=AR(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=AR(t)}}function gO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?gO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function yO(){for(var n=window,e=yv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=yv(n.document)}return e}function NE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function b4(n){var e=yO(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&gO(t.ownerDocument.documentElement,t)){if(i!==null&&NE(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=SR(t,r);var o=SR(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var E4=$o&&"documentMode"in document&&11>=document.documentMode,Ch=null,gM=null,np=null,yM=!1;function MR(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;yM||Ch==null||Ch!==yv(i)||(i=Ch,"selectionStart"in i&&NE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),np&&wp(np,i)||(np=i,i=bv(gM,"onSelect"),0<i.length&&(e=new LE("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Ch)))}function bg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Th={animationend:bg("Animation","AnimationEnd"),animationiteration:bg("Animation","AnimationIteration"),animationstart:bg("Animation","AnimationStart"),transitionend:bg("Transition","TransitionEnd")},nA={},vO={};$o&&(vO=document.createElement("div").style,"AnimationEvent"in window||(delete Th.animationend.animation,delete Th.animationiteration.animation,delete Th.animationstart.animation),"TransitionEvent"in window||delete Th.transitionend.transition);function S0(n){if(nA[n])return nA[n];if(!Th[n])return n;var e=Th[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in vO)return nA[n]=e[t];return n}var xO=S0("animationend"),_O=S0("animationiteration"),AO=S0("animationstart"),SO=S0("transitionend"),MO=new Map,bR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Al(n,e){MO.set(n,e),uu(e,[n])}for(var iA=0;iA<bR.length;iA++){var sA=bR[iA],w4=sA.toLowerCase(),C4=sA[0].toUpperCase()+sA.slice(1);Al(w4,"on"+C4)}Al(xO,"onAnimationEnd");Al(_O,"onAnimationIteration");Al(AO,"onAnimationStart");Al("dblclick","onDoubleClick");Al("focusin","onFocus");Al("focusout","onBlur");Al(SO,"onTransitionEnd");df("onMouseEnter",["mouseout","mouseover"]);df("onMouseLeave",["mouseout","mouseover"]);df("onPointerEnter",["pointerout","pointerover"]);df("onPointerLeave",["pointerout","pointerover"]);uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yd));function ER(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,wG(i,e,void 0,n),n.currentTarget=null}function bO(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;ER(s,a,h),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,h=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;ER(s,a,h),r=l}}}if(xv)throw n=fM,xv=!1,fM=null,n}function cn(n,e){var t=e[SM];t===void 0&&(t=e[SM]=new Set);var i=n+"__bubble";t.has(i)||(EO(e,n,2,!1),t.add(i))}function rA(n,e,t){var i=0;e&&(i|=4),EO(t,n,i,e)}var Eg="_reactListening"+Math.random().toString(36).slice(2);function Cp(n){if(!n[Eg]){n[Eg]=!0,DL.forEach(function(t){t!=="selectionchange"&&(T4.has(t)||rA(t,!1,n),rA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Eg]||(e[Eg]=!0,rA("selectionchange",!1,e))}}function EO(n,e,t,i){switch(lO(e)){case 1:var s=GG;break;case 4:s=VG;break;default:s=PE}t=s.bind(null,e,t,n),s=void 0,!hM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function oA(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Cc(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}YL(function(){var h=r,f=CE(t),d=[];e:{var p=MO.get(n);if(p!==void 0){var g=LE,v=n;switch(n){case"keypress":if(Jy(t)===0)break e;case"keydown":case"keyup":g=s4;break;case"focusin":v="focus",g=$_;break;case"focusout":v="blur",g=$_;break;case"beforeblur":case"afterblur":g=$_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=dR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=XG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=a4;break;case xO:case _O:case AO:g=KG;break;case SO:g=c4;break;case"scroll":g=WG;break;case"wheel":g=h4;break;case"copy":case"cut":case"paste":g=QG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=mR}var S=(e&4)!==0,_=!S&&n==="scroll",y=S?p!==null?p+"Capture":null:p;S=[];for(var A=h,M;A!==null;){M=A;var E=M.stateNode;if(M.tag===5&&E!==null&&(M=E,y!==null&&(E=Ap(A,y),E!=null&&S.push(Tp(A,E,M)))),_)break;A=A.return}0<S.length&&(p=new g(p,v,null,t,f),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==cM&&(v=t.relatedTarget||t.fromElement)&&(Cc(v)||v[ea]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=h,v=v?Cc(v):null,v!==null&&(_=hu(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=h),g!==v)){if(S=dR,E="onMouseLeave",y="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(S=mR,E="onPointerLeave",y="onPointerEnter",A="pointer"),_=g==null?p:Rh(g),M=v==null?p:Rh(v),p=new S(E,A+"leave",g,t,f),p.target=_,p.relatedTarget=M,E=null,Cc(f)===h&&(S=new S(y,A+"enter",v,t,f),S.target=M,S.relatedTarget=_,E=S),_=E,g&&v)t:{for(S=g,y=v,A=0,M=S;M;M=Ku(M))A++;for(M=0,E=y;E;E=Ku(E))M++;for(;0<A-M;)S=Ku(S),A--;for(;0<M-A;)y=Ku(y),M--;for(;A--;){if(S===y||y!==null&&S===y.alternate)break t;S=Ku(S),y=Ku(y)}S=null}else S=null;g!==null&&wR(d,p,g,S,!1),v!==null&&_!==null&&wR(d,_,v,S,!0)}}e:{if(p=h?Rh(h):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var R=v4;else if(vR(p))if(pO)R=S4;else{R=_4;var T=x4}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=A4);if(R&&(R=R(n,h))){dO(d,R,t,f);break e}T&&T(n,p,h),n==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&sM(p,"number",p.value)}switch(T=h?Rh(h):window,n){case"focusin":(vR(T)||T.contentEditable==="true")&&(Ch=T,gM=h,np=null);break;case"focusout":np=gM=Ch=null;break;case"mousedown":yM=!0;break;case"contextmenu":case"mouseup":case"dragend":yM=!1,MR(d,t,f);break;case"selectionchange":if(E4)break;case"keydown":case"keyup":MR(d,t,f)}var B;if(IE)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else wh?hO(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(uO&&t.locale!=="ko"&&(wh||L!=="onCompositionStart"?L==="onCompositionEnd"&&wh&&(B=cO()):(ja=f,DE="value"in ja?ja.value:ja.textContent,wh=!0)),T=bv(h,L),0<T.length&&(L=new pR(L,n,null,t,f),d.push({event:L,listeners:T}),B?L.data=B:(B=fO(t),B!==null&&(L.data=B)))),(B=d4?p4(n,t):m4(n,t))&&(h=bv(h,"onBeforeInput"),0<h.length&&(f=new pR("onBeforeInput","beforeinput",null,t,f),d.push({event:f,listeners:h}),f.data=B))}bO(d,e)})}function Tp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function bv(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Ap(n,t),r!=null&&i.unshift(Tp(n,r,s)),r=Ap(n,e),r!=null&&i.push(Tp(n,r,s))),n=n.return}return i}function Ku(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function wR(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,h=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&h!==null&&(a=h,s?(l=Ap(t,r),l!=null&&o.unshift(Tp(t,l,a))):s||(l=Ap(t,r),l!=null&&o.push(Tp(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var R4=/\r\n?/g,B4=/\u0000|\uFFFD/g;function CR(n){return(typeof n=="string"?n:""+n).replace(R4,`
`).replace(B4,"")}function wg(n,e,t){if(e=CR(e),CR(n)!==e&&t)throw Error(we(425))}function Ev(){}var vM=null,xM=null;function _M(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var AM=typeof setTimeout=="function"?setTimeout:void 0,P4=typeof clearTimeout=="function"?clearTimeout:void 0,TR=typeof Promise=="function"?Promise:void 0,D4=typeof queueMicrotask=="function"?queueMicrotask:typeof TR<"u"?function(n){return TR.resolve(null).then(n).catch(L4)}:AM;function L4(n){setTimeout(function(){throw n})}function aA(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),bp(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);bp(e)}function Qa(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function RR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Uf=Math.random().toString(36).slice(2),no="__reactFiber$"+Uf,Rp="__reactProps$"+Uf,ea="__reactContainer$"+Uf,SM="__reactEvents$"+Uf,O4="__reactListeners$"+Uf,I4="__reactHandles$"+Uf;function Cc(n){var e=n[no];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ea]||t[no]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=RR(n);n!==null;){if(t=n[no])return t;n=RR(n)}return e}n=t,t=n.parentNode}return null}function am(n){return n=n[no]||n[ea],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Rh(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(we(33))}function M0(n){return n[Rp]||null}var MM=[],Bh=-1;function Sl(n){return{current:n}}function hn(n){0>Bh||(n.current=MM[Bh],MM[Bh]=null,Bh--)}function rn(n,e){Bh++,MM[Bh]=n.current,n.current=e}var ul={},Fi=Sl(ul),fs=Sl(!1),Kc=ul;function pf(n,e){var t=n.type.contextTypes;if(!t)return ul;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function ds(n){return n=n.childContextTypes,n!=null}function wv(){hn(fs),hn(Fi)}function BR(n,e,t){if(Fi.current!==ul)throw Error(we(168));rn(Fi,e),rn(fs,t)}function wO(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(we(108,xG(n)||"Unknown",s));return wn({},t,i)}function Cv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ul,Kc=Fi.current,rn(Fi,n),rn(fs,fs.current),!0}function PR(n,e,t){var i=n.stateNode;if(!i)throw Error(we(169));t?(n=wO(n,e,Kc),i.__reactInternalMemoizedMergedChildContext=n,hn(fs),hn(Fi),rn(Fi,n)):hn(fs),rn(fs,t)}var Fo=null,b0=!1,lA=!1;function CO(n){Fo===null?Fo=[n]:Fo.push(n)}function N4(n){b0=!0,CO(n)}function Ml(){if(!lA&&Fo!==null){lA=!0;var n=0,e=Kt;try{var t=Fo;for(Kt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Fo=null,b0=!1}catch(s){throw Fo!==null&&(Fo=Fo.slice(n+1)),ZL(TE,Ml),s}finally{Kt=e,lA=!1}}return null}var Ph=[],Dh=0,Tv=null,Rv=0,ir=[],sr=0,qc=null,Ho=1,Go="";function mc(n,e){Ph[Dh++]=Rv,Ph[Dh++]=Tv,Tv=n,Rv=e}function TO(n,e,t){ir[sr++]=Ho,ir[sr++]=Go,ir[sr++]=qc,qc=n;var i=Ho;n=Go;var s=32-Dr(i)-1;i&=~(1<<s),t+=1;var r=32-Dr(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Ho=1<<32-Dr(e)+s|t<<s|i,Go=r+n}else Ho=1<<r|t<<s|i,Go=n}function UE(n){n.return!==null&&(mc(n,1),TO(n,1,0))}function FE(n){for(;n===Tv;)Tv=Ph[--Dh],Ph[Dh]=null,Rv=Ph[--Dh],Ph[Dh]=null;for(;n===qc;)qc=ir[--sr],ir[sr]=null,Go=ir[--sr],ir[sr]=null,Ho=ir[--sr],ir[sr]=null}var Os=null,Ds=null,yn=!1,Rr=null;function RO(n,e){var t=ar(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function DR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Os=n,Ds=Qa(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Os=n,Ds=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=qc!==null?{id:Ho,overflow:Go}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ar(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Os=n,Ds=null,!0):!1;default:return!1}}function bM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function EM(n){if(yn){var e=Ds;if(e){var t=e;if(!DR(n,e)){if(bM(n))throw Error(we(418));e=Qa(t.nextSibling);var i=Os;e&&DR(n,e)?RO(i,t):(n.flags=n.flags&-4097|2,yn=!1,Os=n)}}else{if(bM(n))throw Error(we(418));n.flags=n.flags&-4097|2,yn=!1,Os=n}}}function LR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Os=n}function Cg(n){if(n!==Os)return!1;if(!yn)return LR(n),yn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!_M(n.type,n.memoizedProps)),e&&(e=Ds)){if(bM(n))throw BO(),Error(we(418));for(;e;)RO(n,e),e=Qa(e.nextSibling)}if(LR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(we(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ds=Qa(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ds=null}}else Ds=Os?Qa(n.stateNode.nextSibling):null;return!0}function BO(){for(var n=Ds;n;)n=Qa(n.nextSibling)}function mf(){Ds=Os=null,yn=!1}function zE(n){Rr===null?Rr=[n]:Rr.push(n)}var U4=aa.ReactCurrentBatchConfig;function Er(n,e){if(n&&n.defaultProps){e=wn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Bv=Sl(null),Pv=null,Lh=null,kE=null;function HE(){kE=Lh=Pv=null}function GE(n){var e=Bv.current;hn(Bv),n._currentValue=e}function wM(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function ef(n,e){Pv=n,kE=Lh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(hs=!0),n.firstContext=null)}function ur(n){var e=n._currentValue;if(kE!==n)if(n={context:n,memoizedValue:e,next:null},Lh===null){if(Pv===null)throw Error(we(308));Lh=n,Pv.dependencies={lanes:0,firstContext:n}}else Lh=Lh.next=n;return e}var Tc=null;function VE(n){Tc===null?Tc=[n]:Tc.push(n)}function PO(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,VE(e)):(t.next=s.next,s.next=t),e.interleaved=t,ta(n,i)}function ta(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Na=!1;function WE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Yo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Za(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ht&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ta(n,t)}return s=i.interleaved,s===null?(e.next=e,VE(i)):(e.next=s.next,s.next=e),i.interleaved=e,ta(n,t)}function Yy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,RE(n,t)}}function OR(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Dv(n,e,t,i){var s=n.updateQueue;Na=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,h=l.next;l.next=null,o===null?r=h:o.next=h,o=l;var f=n.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=h:a.next=h,f.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;o=0,f=h=l=null,a=r;do{var p=a.lane,g=a.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,S=a;switch(p=e,g=t,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(g,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(g,d,p):v,p==null)break e;d=wn({},d,p);break e;case 2:Na=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(h=f=g,l=d):f=f.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(l=d),s.baseState=l,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Zc|=o,n.lanes=o,n.memoizedState=d}}function IR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(we(191,s));s.call(i)}}}var LO=new PL.Component().refs;function CM(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:wn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var E0={isMounted:function(n){return(n=n._reactInternals)?hu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=$i(),s=el(n),r=Yo(i,s);r.payload=e,t!=null&&(r.callback=t),e=Za(n,r,s),e!==null&&(Lr(e,n,s,i),Yy(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=$i(),s=el(n),r=Yo(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Za(n,r,s),e!==null&&(Lr(e,n,s,i),Yy(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=$i(),i=el(n),s=Yo(t,i);s.tag=2,e!=null&&(s.callback=e),e=Za(n,s,i),e!==null&&(Lr(e,n,i,t),Yy(e,n,i))}};function NR(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!wp(t,i)||!wp(s,r):!0}function OO(n,e,t){var i=!1,s=ul,r=e.contextType;return typeof r=="object"&&r!==null?r=ur(r):(s=ds(e)?Kc:Fi.current,i=e.contextTypes,r=(i=i!=null)?pf(n,s):ul),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=E0,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function UR(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&E0.enqueueReplaceState(e,e.state,null)}function TM(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs=LO,WE(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=ur(r):(r=ds(e)?Kc:Fi.current,s.context=pf(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(CM(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&E0.enqueueReplaceState(s,s.state,null),Dv(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Md(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(we(309));var i=t.stateNode}if(!i)throw Error(we(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;a===LO&&(a=s.refs={}),o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(we(284));if(!t._owner)throw Error(we(290,n))}return n}function Tg(n,e){throw n=Object.prototype.toString.call(e),Error(we(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function FR(n){var e=n._init;return e(n._payload)}function IO(n){function e(y,A){if(n){var M=y.deletions;M===null?(y.deletions=[A],y.flags|=16):M.push(A)}}function t(y,A){if(!n)return null;for(;A!==null;)e(y,A),A=A.sibling;return null}function i(y,A){for(y=new Map;A!==null;)A.key!==null?y.set(A.key,A):y.set(A.index,A),A=A.sibling;return y}function s(y,A){return y=tl(y,A),y.index=0,y.sibling=null,y}function r(y,A,M){return y.index=M,n?(M=y.alternate,M!==null?(M=M.index,M<A?(y.flags|=2,A):M):(y.flags|=2,A)):(y.flags|=1048576,A)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,A,M,E){return A===null||A.tag!==6?(A=mA(M,y.mode,E),A.return=y,A):(A=s(A,M),A.return=y,A)}function l(y,A,M,E){var R=M.type;return R===Eh?f(y,A,M.props.children,E,M.key):A!==null&&(A.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ia&&FR(R)===A.type)?(E=s(A,M.props),E.ref=Md(y,A,M),E.return=y,E):(E=ev(M.type,M.key,M.props,null,y.mode,E),E.ref=Md(y,A,M),E.return=y,E)}function h(y,A,M,E){return A===null||A.tag!==4||A.stateNode.containerInfo!==M.containerInfo||A.stateNode.implementation!==M.implementation?(A=gA(M,y.mode,E),A.return=y,A):(A=s(A,M.children||[]),A.return=y,A)}function f(y,A,M,E,R){return A===null||A.tag!==7?(A=Hc(M,y.mode,E,R),A.return=y,A):(A=s(A,M),A.return=y,A)}function d(y,A,M){if(typeof A=="string"&&A!==""||typeof A=="number")return A=mA(""+A,y.mode,M),A.return=y,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case yg:return M=ev(A.type,A.key,A.props,null,y.mode,M),M.ref=Md(y,null,A),M.return=y,M;case bh:return A=gA(A,y.mode,M),A.return=y,A;case Ia:var E=A._init;return d(y,E(A._payload),M)}if(Xd(A)||vd(A))return A=Hc(A,y.mode,M,null),A.return=y,A;Tg(y,A)}return null}function p(y,A,M,E){var R=A!==null?A.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return R!==null?null:a(y,A,""+M,E);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case yg:return M.key===R?l(y,A,M,E):null;case bh:return M.key===R?h(y,A,M,E):null;case Ia:return R=M._init,p(y,A,R(M._payload),E)}if(Xd(M)||vd(M))return R!==null?null:f(y,A,M,E,null);Tg(y,M)}return null}function g(y,A,M,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(M)||null,a(A,y,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case yg:return y=y.get(E.key===null?M:E.key)||null,l(A,y,E,R);case bh:return y=y.get(E.key===null?M:E.key)||null,h(A,y,E,R);case Ia:var T=E._init;return g(y,A,M,T(E._payload),R)}if(Xd(E)||vd(E))return y=y.get(M)||null,f(A,y,E,R,null);Tg(A,E)}return null}function v(y,A,M,E){for(var R=null,T=null,B=A,L=A=0,F=null;B!==null&&L<M.length;L++){B.index>L?(F=B,B=null):F=B.sibling;var C=p(y,B,M[L],E);if(C===null){B===null&&(B=F);break}n&&B&&C.alternate===null&&e(y,B),A=r(C,A,L),T===null?R=C:T.sibling=C,T=C,B=F}if(L===M.length)return t(y,B),yn&&mc(y,L),R;if(B===null){for(;L<M.length;L++)B=d(y,M[L],E),B!==null&&(A=r(B,A,L),T===null?R=B:T.sibling=B,T=B);return yn&&mc(y,L),R}for(B=i(y,B);L<M.length;L++)F=g(B,y,L,M[L],E),F!==null&&(n&&F.alternate!==null&&B.delete(F.key===null?L:F.key),A=r(F,A,L),T===null?R=F:T.sibling=F,T=F);return n&&B.forEach(function(D){return e(y,D)}),yn&&mc(y,L),R}function S(y,A,M,E){var R=vd(M);if(typeof R!="function")throw Error(we(150));if(M=R.call(M),M==null)throw Error(we(151));for(var T=R=null,B=A,L=A=0,F=null,C=M.next();B!==null&&!C.done;L++,C=M.next()){B.index>L?(F=B,B=null):F=B.sibling;var D=p(y,B,C.value,E);if(D===null){B===null&&(B=F);break}n&&B&&D.alternate===null&&e(y,B),A=r(D,A,L),T===null?R=D:T.sibling=D,T=D,B=F}if(C.done)return t(y,B),yn&&mc(y,L),R;if(B===null){for(;!C.done;L++,C=M.next())C=d(y,C.value,E),C!==null&&(A=r(C,A,L),T===null?R=C:T.sibling=C,T=C);return yn&&mc(y,L),R}for(B=i(y,B);!C.done;L++,C=M.next())C=g(B,y,L,C.value,E),C!==null&&(n&&C.alternate!==null&&B.delete(C.key===null?L:C.key),A=r(C,A,L),T===null?R=C:T.sibling=C,T=C);return n&&B.forEach(function(te){return e(y,te)}),yn&&mc(y,L),R}function _(y,A,M,E){if(typeof M=="object"&&M!==null&&M.type===Eh&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case yg:e:{for(var R=M.key,T=A;T!==null;){if(T.key===R){if(R=M.type,R===Eh){if(T.tag===7){t(y,T.sibling),A=s(T,M.props.children),A.return=y,y=A;break e}}else if(T.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ia&&FR(R)===T.type){t(y,T.sibling),A=s(T,M.props),A.ref=Md(y,T,M),A.return=y,y=A;break e}t(y,T);break}else e(y,T);T=T.sibling}M.type===Eh?(A=Hc(M.props.children,y.mode,E,M.key),A.return=y,y=A):(E=ev(M.type,M.key,M.props,null,y.mode,E),E.ref=Md(y,A,M),E.return=y,y=E)}return o(y);case bh:e:{for(T=M.key;A!==null;){if(A.key===T)if(A.tag===4&&A.stateNode.containerInfo===M.containerInfo&&A.stateNode.implementation===M.implementation){t(y,A.sibling),A=s(A,M.children||[]),A.return=y,y=A;break e}else{t(y,A);break}else e(y,A);A=A.sibling}A=gA(M,y.mode,E),A.return=y,y=A}return o(y);case Ia:return T=M._init,_(y,A,T(M._payload),E)}if(Xd(M))return v(y,A,M,E);if(vd(M))return S(y,A,M,E);Tg(y,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,A!==null&&A.tag===6?(t(y,A.sibling),A=s(A,M),A.return=y,y=A):(t(y,A),A=mA(M,y.mode,E),A.return=y,y=A),o(y)):t(y,A)}return _}var gf=IO(!0),NO=IO(!1),lm={},lo=Sl(lm),Bp=Sl(lm),Pp=Sl(lm);function Rc(n){if(n===lm)throw Error(we(174));return n}function jE(n,e){switch(rn(Pp,e),rn(Bp,n),rn(lo,lm),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oM(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=oM(e,n)}hn(lo),rn(lo,e)}function yf(){hn(lo),hn(Bp),hn(Pp)}function UO(n){Rc(Pp.current);var e=Rc(lo.current),t=oM(e,n.type);e!==t&&(rn(Bp,n),rn(lo,t))}function XE(n){Bp.current===n&&(hn(lo),hn(Bp))}var Sn=Sl(0);function Lv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cA=[];function JE(){for(var n=0;n<cA.length;n++)cA[n]._workInProgressVersionPrimary=null;cA.length=0}var Ky=aa.ReactCurrentDispatcher,uA=aa.ReactCurrentBatchConfig,Qc=0,En=null,Kn=null,ri=null,Ov=!1,ip=!1,Dp=0,F4=0;function Ei(){throw Error(we(321))}function YE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Nr(n[t],e[t]))return!1;return!0}function KE(n,e,t,i,s,r){if(Qc=r,En=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ky.current=n===null||n.memoizedState===null?G4:V4,n=t(i,s),ip){r=0;do{if(ip=!1,Dp=0,25<=r)throw Error(we(301));r+=1,ri=Kn=null,e.updateQueue=null,Ky.current=W4,n=t(i,s)}while(ip)}if(Ky.current=Iv,e=Kn!==null&&Kn.next!==null,Qc=0,ri=Kn=En=null,Ov=!1,e)throw Error(we(300));return n}function qE(){var n=Dp!==0;return Dp=0,n}function eo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?En.memoizedState=ri=n:ri=ri.next=n,ri}function hr(){if(Kn===null){var n=En.alternate;n=n!==null?n.memoizedState:null}else n=Kn.next;var e=ri===null?En.memoizedState:ri.next;if(e!==null)ri=e,Kn=n;else{if(n===null)throw Error(we(310));Kn=n,n={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},ri===null?En.memoizedState=ri=n:ri=ri.next=n}return ri}function Lp(n,e){return typeof e=="function"?e(n):e}function hA(n){var e=hr(),t=e.queue;if(t===null)throw Error(we(311));t.lastRenderedReducer=n;var i=Kn,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,h=r;do{var f=h.lane;if((Qc&f)===f)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:n(i,h.action);else{var d={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,En.lanes|=f,Zc|=f}h=h.next}while(h!==null&&h!==r);l===null?o=i:l.next=a,Nr(i,e.memoizedState)||(hs=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,En.lanes|=r,Zc|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function fA(n){var e=hr(),t=e.queue;if(t===null)throw Error(we(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Nr(r,e.memoizedState)||(hs=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function FO(){}function zO(n,e){var t=En,i=hr(),s=e(),r=!Nr(i.memoizedState,s);if(r&&(i.memoizedState=s,hs=!0),i=i.queue,QE(GO.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||ri!==null&&ri.memoizedState.tag&1){if(t.flags|=2048,Op(9,HO.bind(null,t,i,s,e),void 0,null),ai===null)throw Error(we(349));Qc&30||kO(t,e,s)}return s}function kO(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function HO(n,e,t,i){e.value=t,e.getSnapshot=i,VO(e)&&WO(n)}function GO(n,e,t){return t(function(){VO(e)&&WO(n)})}function VO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Nr(n,t)}catch{return!0}}function WO(n){var e=ta(n,1);e!==null&&Lr(e,n,1,-1)}function zR(n){var e=eo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:n},e.queue=n,n=n.dispatch=H4.bind(null,En,n),[e.memoizedState,n]}function Op(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function jO(){return hr().memoizedState}function qy(n,e,t,i){var s=eo();En.flags|=n,s.memoizedState=Op(1|e,t,void 0,i===void 0?null:i)}function w0(n,e,t,i){var s=hr();i=i===void 0?null:i;var r=void 0;if(Kn!==null){var o=Kn.memoizedState;if(r=o.destroy,i!==null&&YE(i,o.deps)){s.memoizedState=Op(e,t,r,i);return}}En.flags|=n,s.memoizedState=Op(1|e,t,r,i)}function kR(n,e){return qy(8390656,8,n,e)}function QE(n,e){return w0(2048,8,n,e)}function XO(n,e){return w0(4,2,n,e)}function JO(n,e){return w0(4,4,n,e)}function YO(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function KO(n,e,t){return t=t!=null?t.concat([n]):null,w0(4,4,YO.bind(null,e,n),t)}function ZE(){}function qO(n,e){var t=hr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&YE(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function QO(n,e){var t=hr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&YE(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function ZO(n,e,t){return Qc&21?(Nr(t,e)||(t=tO(),En.lanes|=t,Zc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,hs=!0),n.memoizedState=t)}function z4(n,e){var t=Kt;Kt=t!==0&&4>t?t:4,n(!0);var i=uA.transition;uA.transition={};try{n(!1),e()}finally{Kt=t,uA.transition=i}}function $O(){return hr().memoizedState}function k4(n,e,t){var i=el(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},eI(n))tI(e,t);else if(t=PO(n,e,t,i),t!==null){var s=$i();Lr(t,n,i,s),nI(t,e,i)}}function H4(n,e,t){var i=el(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(eI(n))tI(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,Nr(a,o)){var l=e.interleaved;l===null?(s.next=s,VE(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=PO(n,e,s,i),t!==null&&(s=$i(),Lr(t,n,i,s),nI(t,e,i))}}function eI(n){var e=n.alternate;return n===En||e!==null&&e===En}function tI(n,e){ip=Ov=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function nI(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,RE(n,t)}}var Iv={readContext:ur,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},G4={readContext:ur,useCallback:function(n,e){return eo().memoizedState=[n,e===void 0?null:e],n},useContext:ur,useEffect:kR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,qy(4194308,4,YO.bind(null,e,n),t)},useLayoutEffect:function(n,e){return qy(4194308,4,n,e)},useInsertionEffect:function(n,e){return qy(4,2,n,e)},useMemo:function(n,e){var t=eo();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=eo();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=k4.bind(null,En,n),[i.memoizedState,n]},useRef:function(n){var e=eo();return n={current:n},e.memoizedState=n},useState:zR,useDebugValue:ZE,useDeferredValue:function(n){return eo().memoizedState=n},useTransition:function(){var n=zR(!1),e=n[0];return n=z4.bind(null,n[1]),eo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=En,s=eo();if(yn){if(t===void 0)throw Error(we(407));t=t()}else{if(t=e(),ai===null)throw Error(we(349));Qc&30||kO(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,kR(GO.bind(null,i,r,n),[n]),i.flags|=2048,Op(9,HO.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=eo(),e=ai.identifierPrefix;if(yn){var t=Go,i=Ho;t=(i&~(1<<32-Dr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Dp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=F4++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},V4={readContext:ur,useCallback:qO,useContext:ur,useEffect:QE,useImperativeHandle:KO,useInsertionEffect:XO,useLayoutEffect:JO,useMemo:QO,useReducer:hA,useRef:jO,useState:function(){return hA(Lp)},useDebugValue:ZE,useDeferredValue:function(n){var e=hr();return ZO(e,Kn.memoizedState,n)},useTransition:function(){var n=hA(Lp)[0],e=hr().memoizedState;return[n,e]},useMutableSource:FO,useSyncExternalStore:zO,useId:$O,unstable_isNewReconciler:!1},W4={readContext:ur,useCallback:qO,useContext:ur,useEffect:QE,useImperativeHandle:KO,useInsertionEffect:XO,useLayoutEffect:JO,useMemo:QO,useReducer:fA,useRef:jO,useState:function(){return fA(Lp)},useDebugValue:ZE,useDeferredValue:function(n){var e=hr();return Kn===null?e.memoizedState=n:ZO(e,Kn.memoizedState,n)},useTransition:function(){var n=fA(Lp)[0],e=hr().memoizedState;return[n,e]},useMutableSource:FO,useSyncExternalStore:zO,useId:$O,unstable_isNewReconciler:!1};function vf(n,e){try{var t="",i=e;do t+=vG(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function dA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function RM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var j4=typeof WeakMap=="function"?WeakMap:Map;function iI(n,e,t){t=Yo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Uv||(Uv=!0,zM=i),RM(n,e)},t}function sI(n,e,t){t=Yo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){RM(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){RM(n,e),typeof i!="function"&&($a===null?$a=new Set([this]):$a.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function HR(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new j4;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=rV.bind(null,n,e,t),e.then(n,n))}function GR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function VR(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Yo(-1,1),e.tag=2,Za(t,e,1))),t.lanes|=1),n)}var X4=aa.ReactCurrentOwner,hs=!1;function Yi(n,e,t,i){e.child=n===null?NO(e,null,t,i):gf(e,n.child,t,i)}function WR(n,e,t,i,s){t=t.render;var r=e.ref;return ef(e,s),i=KE(n,e,t,i,r,s),t=qE(),n!==null&&!hs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,na(n,e,s)):(yn&&t&&UE(e),e.flags|=1,Yi(n,e,i,s),e.child)}function jR(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!o1(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,rI(n,e,r,i,s)):(n=ev(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:wp,t(o,i)&&n.ref===e.ref)return na(n,e,s)}return e.flags|=1,n=tl(r,i),n.ref=e.ref,n.return=e,e.child=n}function rI(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(wp(r,i)&&n.ref===e.ref)if(hs=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(hs=!0);else return e.lanes=n.lanes,na(n,e,s)}return BM(n,e,t,i,s)}function oI(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Ih,Rs),Rs|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,rn(Ih,Rs),Rs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,rn(Ih,Rs),Rs|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,rn(Ih,Rs),Rs|=i;return Yi(n,e,s,t),e.child}function aI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function BM(n,e,t,i,s){var r=ds(t)?Kc:Fi.current;return r=pf(e,r),ef(e,s),t=KE(n,e,t,i,r,s),i=qE(),n!==null&&!hs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,na(n,e,s)):(yn&&i&&UE(e),e.flags|=1,Yi(n,e,t,s),e.child)}function XR(n,e,t,i,s){if(ds(t)){var r=!0;Cv(e)}else r=!1;if(ef(e,s),e.stateNode===null)Qy(n,e),OO(e,t,i),TM(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,h=t.contextType;typeof h=="object"&&h!==null?h=ur(h):(h=ds(t)?Kc:Fi.current,h=pf(e,h));var f=t.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==h)&&UR(e,o,i,h),Na=!1;var p=e.memoizedState;o.state=p,Dv(e,i,o,s),l=e.memoizedState,a!==i||p!==l||fs.current||Na?(typeof f=="function"&&(CM(e,t,f,i),l=e.memoizedState),(a=Na||NR(e,t,a,i,p,l,h))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=h,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,DO(n,e),a=e.memoizedProps,h=e.type===e.elementType?a:Er(e.type,a),o.props=h,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ur(l):(l=ds(t)?Kc:Fi.current,l=pf(e,l));var g=t.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&UR(e,o,i,l),Na=!1,p=e.memoizedState,o.state=p,Dv(e,i,o,s);var v=e.memoizedState;a!==d||p!==v||fs.current||Na?(typeof g=="function"&&(CM(e,t,g,i),v=e.memoizedState),(h=Na||NR(e,t,h,i,p,v,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=h):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return PM(n,e,t,i,r,s)}function PM(n,e,t,i,s,r){aI(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&PR(e,t,!1),na(n,e,r);i=e.stateNode,X4.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=gf(e,n.child,null,r),e.child=gf(e,null,a,r)):Yi(n,e,a,r),e.memoizedState=i.state,s&&PR(e,t,!0),e.child}function lI(n){var e=n.stateNode;e.pendingContext?BR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&BR(n,e.context,!1),jE(n,e.containerInfo)}function JR(n,e,t,i,s){return mf(),zE(s),e.flags|=256,Yi(n,e,t,i),e.child}var DM={dehydrated:null,treeContext:null,retryLane:0};function LM(n){return{baseLanes:n,cachePool:null,transitions:null}}function cI(n,e,t){var i=e.pendingProps,s=Sn.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),rn(Sn,s&1),n===null)return EM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=R0(o,i,0,null),n=Hc(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=LM(t),e.memoizedState=DM,n):$E(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return J4(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=tl(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=tl(a,r):(r=Hc(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?LM(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=DM,i}return r=n.child,n=r.sibling,i=tl(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function $E(n,e){return e=R0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Rg(n,e,t,i){return i!==null&&zE(i),gf(e,n.child,null,t),n=$E(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function J4(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=dA(Error(we(422))),Rg(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=R0({mode:"visible",children:i.children},s,0,null),r=Hc(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&gf(e,n.child,null,o),e.child.memoizedState=LM(o),e.memoizedState=DM,r);if(!(e.mode&1))return Rg(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(we(419)),i=dA(r,i,void 0),Rg(n,e,o,i)}if(a=(o&n.childLanes)!==0,hs||a){if(i=ai,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,ta(n,s),Lr(i,n,s,-1))}return r1(),i=dA(Error(we(421))),Rg(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=oV.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,Ds=Qa(s.nextSibling),Os=e,yn=!0,Rr=null,n!==null&&(ir[sr++]=Ho,ir[sr++]=Go,ir[sr++]=qc,Ho=n.id,Go=n.overflow,qc=e),e=$E(e,i.children),e.flags|=4096,e)}function YR(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),wM(n.return,e,t)}function pA(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function uI(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Yi(n,e,i.children,t),i=Sn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&YR(n,t,e);else if(n.tag===19)YR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(rn(Sn,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Lv(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),pA(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Lv(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}pA(e,!0,t,null,r);break;case"together":pA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function na(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Zc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(we(153));if(e.child!==null){for(n=e.child,t=tl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=tl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Y4(n,e,t){switch(e.tag){case 3:lI(e),mf();break;case 5:UO(e);break;case 1:ds(e.type)&&Cv(e);break;case 4:jE(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;rn(Bv,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(rn(Sn,Sn.current&1),e.flags|=128,null):t&e.child.childLanes?cI(n,e,t):(rn(Sn,Sn.current&1),n=na(n,e,t),n!==null?n.sibling:null);rn(Sn,Sn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return uI(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rn(Sn,Sn.current),i)break;return null;case 22:case 23:return e.lanes=0,oI(n,e,t)}return na(n,e,t)}var hI,OM,fI,dI;hI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};OM=function(){};fI=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Rc(lo.current);var r=null;switch(t){case"input":s=nM(n,s),i=nM(n,i),r=[];break;case"select":s=wn({},s,{value:void 0}),i=wn({},i,{value:void 0}),r=[];break;case"textarea":s=rM(n,s),i=rM(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Ev)}aM(t,i);var o;t=null;for(h in s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var a=s[h];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(xp.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in i){var l=i[h];if(a=s!=null?s[h]:void 0,i.hasOwnProperty(h)&&l!==a&&(l!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(h,t)),t=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(xp.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&cn("scroll",n),r||a===l||(r=[])):(r=r||[]).push(h,l))}t&&(r=r||[]).push("style",t);var h=r;(e.updateQueue=h)&&(e.flags|=4)}};dI=function(n,e,t,i){t!==i&&(e.flags|=4)};function bd(n,e){if(!yn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function wi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function K4(n,e,t){var i=e.pendingProps;switch(FE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wi(e),null;case 1:return ds(e.type)&&wv(),wi(e),null;case 3:return i=e.stateNode,yf(),hn(fs),hn(Fi),JE(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Cg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rr!==null&&(GM(Rr),Rr=null))),OM(n,e),wi(e),null;case 5:XE(e);var s=Rc(Pp.current);if(t=e.type,n!==null&&e.stateNode!=null)fI(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(we(166));return wi(e),null}if(n=Rc(lo.current),Cg(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[no]=e,i[Rp]=r,n=(e.mode&1)!==0,t){case"dialog":cn("cancel",i),cn("close",i);break;case"iframe":case"object":case"embed":cn("load",i);break;case"video":case"audio":for(s=0;s<Yd.length;s++)cn(Yd[s],i);break;case"source":cn("error",i);break;case"img":case"image":case"link":cn("error",i),cn("load",i);break;case"details":cn("toggle",i);break;case"input":iR(i,r),cn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},cn("invalid",i);break;case"textarea":rR(i,r),cn("invalid",i)}aM(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&wg(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&wg(i.textContent,a,n),s=["children",""+a]):xp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&cn("scroll",i)}switch(t){case"input":vg(i),sR(i,r,!0);break;case"textarea":vg(i),oR(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Ev)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=kL(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[no]=e,n[Rp]=i,hI(n,e,!1,!1),e.stateNode=n;e:{switch(o=lM(t,i),t){case"dialog":cn("cancel",n),cn("close",n),s=i;break;case"iframe":case"object":case"embed":cn("load",n),s=i;break;case"video":case"audio":for(s=0;s<Yd.length;s++)cn(Yd[s],n);s=i;break;case"source":cn("error",n),s=i;break;case"img":case"image":case"link":cn("error",n),cn("load",n),s=i;break;case"details":cn("toggle",n),s=i;break;case"input":iR(n,i),s=nM(n,i),cn("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=wn({},i,{value:void 0}),cn("invalid",n);break;case"textarea":rR(n,i),s=rM(n,i),cn("invalid",n);break;default:s=i}aM(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?VL(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&HL(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&_p(n,l):typeof l=="number"&&_p(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(xp.hasOwnProperty(r)?l!=null&&r==="onScroll"&&cn("scroll",n):l!=null&&ME(n,r,l,o))}switch(t){case"input":vg(n),sR(n,i,!1);break;case"textarea":vg(n),oR(n);break;case"option":i.value!=null&&n.setAttribute("value",""+cl(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?qh(n,!!i.multiple,r,!1):i.defaultValue!=null&&qh(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Ev)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wi(e),null;case 6:if(n&&e.stateNode!=null)dI(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(we(166));if(t=Rc(Pp.current),Rc(lo.current),Cg(e)){if(i=e.stateNode,t=e.memoizedProps,i[no]=e,(r=i.nodeValue!==t)&&(n=Os,n!==null))switch(n.tag){case 3:wg(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&wg(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[no]=e,e.stateNode=i}return wi(e),null;case 13:if(hn(Sn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yn&&Ds!==null&&e.mode&1&&!(e.flags&128))BO(),mf(),e.flags|=98560,r=!1;else if(r=Cg(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(we(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(we(317));r[no]=e}else mf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wi(e),r=!1}else Rr!==null&&(GM(Rr),Rr=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Sn.current&1?qn===0&&(qn=3):r1())),e.updateQueue!==null&&(e.flags|=4),wi(e),null);case 4:return yf(),OM(n,e),n===null&&Cp(e.stateNode.containerInfo),wi(e),null;case 10:return GE(e.type._context),wi(e),null;case 17:return ds(e.type)&&wv(),wi(e),null;case 19:if(hn(Sn),r=e.memoizedState,r===null)return wi(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)bd(r,!1);else{if(qn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Lv(n),o!==null){for(e.flags|=128,bd(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rn(Sn,Sn.current&1|2),e.child}n=n.sibling}r.tail!==null&&zn()>xf&&(e.flags|=128,i=!0,bd(r,!1),e.lanes=4194304)}else{if(!i)if(n=Lv(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),bd(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!yn)return wi(e),null}else 2*zn()-r.renderingStartTime>xf&&t!==1073741824&&(e.flags|=128,i=!0,bd(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=zn(),e.sibling=null,t=Sn.current,rn(Sn,i?t&1|2:t&1),e):(wi(e),null);case 22:case 23:return s1(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Rs&1073741824&&(wi(e),e.subtreeFlags&6&&(e.flags|=8192)):wi(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function q4(n,e){switch(FE(e),e.tag){case 1:return ds(e.type)&&wv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return yf(),hn(fs),hn(Fi),JE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return XE(e),null;case 13:if(hn(Sn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(we(340));mf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return hn(Sn),null;case 4:return yf(),null;case 10:return GE(e.type._context),null;case 22:case 23:return s1(),null;case 24:return null;default:return null}}var Bg=!1,Pi=!1,Q4=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Oh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Pn(n,e,i)}else t.current=null}function IM(n,e,t){try{t()}catch(i){Pn(n,e,i)}}var KR=!1;function Z4(n,e){if(vM=Sv,n=yO(),NE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,h=0,f=0,d=n,p=null;t:for(;;){for(var g;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===n)break t;if(p===t&&++h===s&&(a=o),p===r&&++f===i&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(xM={focusedElem:n,selectionRange:t},Sv=!1,Qe=e;Qe!==null;)if(e=Qe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Qe=n;else for(;Qe!==null;){e=Qe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,_=v.memoizedState,y=e.stateNode,A=y.getSnapshotBeforeUpdate(e.elementType===e.type?S:Er(e.type,S),_);y.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(E){Pn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}return v=KR,KR=!1,v}function sp(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&IM(e,t,r)}s=s.next}while(s!==i)}}function C0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function NM(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function pI(n){var e=n.alternate;e!==null&&(n.alternate=null,pI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[no],delete e[Rp],delete e[SM],delete e[O4],delete e[I4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function mI(n){return n.tag===5||n.tag===3||n.tag===4}function qR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function UM(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ev));else if(i!==4&&(n=n.child,n!==null))for(UM(n,e,t),n=n.sibling;n!==null;)UM(n,e,t),n=n.sibling}function FM(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(FM(n,e,t),n=n.sibling;n!==null;)FM(n,e,t),n=n.sibling}var di=null,Tr=!1;function ba(n,e,t){for(t=t.child;t!==null;)gI(n,e,t),t=t.sibling}function gI(n,e,t){if(ao&&typeof ao.onCommitFiberUnmount=="function")try{ao.onCommitFiberUnmount(x0,t)}catch{}switch(t.tag){case 5:Pi||Oh(t,e);case 6:var i=di,s=Tr;di=null,ba(n,e,t),di=i,Tr=s,di!==null&&(Tr?(n=di,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):di.removeChild(t.stateNode));break;case 18:di!==null&&(Tr?(n=di,t=t.stateNode,n.nodeType===8?aA(n.parentNode,t):n.nodeType===1&&aA(n,t),bp(n)):aA(di,t.stateNode));break;case 4:i=di,s=Tr,di=t.stateNode.containerInfo,Tr=!0,ba(n,e,t),di=i,Tr=s;break;case 0:case 11:case 14:case 15:if(!Pi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&IM(t,e,o),s=s.next}while(s!==i)}ba(n,e,t);break;case 1:if(!Pi&&(Oh(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Pn(t,e,a)}ba(n,e,t);break;case 21:ba(n,e,t);break;case 22:t.mode&1?(Pi=(i=Pi)||t.memoizedState!==null,ba(n,e,t),Pi=i):ba(n,e,t);break;default:ba(n,e,t)}}function QR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Q4),e.forEach(function(i){var s=aV.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function _r(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:di=a.stateNode,Tr=!1;break e;case 3:di=a.stateNode.containerInfo,Tr=!0;break e;case 4:di=a.stateNode.containerInfo,Tr=!0;break e}a=a.return}if(di===null)throw Error(we(160));gI(r,o,s),di=null,Tr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(h){Pn(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yI(e,n),e=e.sibling}function yI(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(_r(e,n),Zr(n),i&4){try{sp(3,n,n.return),C0(3,n)}catch(S){Pn(n,n.return,S)}try{sp(5,n,n.return)}catch(S){Pn(n,n.return,S)}}break;case 1:_r(e,n),Zr(n),i&512&&t!==null&&Oh(t,t.return);break;case 5:if(_r(e,n),Zr(n),i&512&&t!==null&&Oh(t,t.return),n.flags&32){var s=n.stateNode;try{_p(s,"")}catch(S){Pn(n,n.return,S)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&FL(s,r),lM(a,o);var h=lM(a,r);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?VL(s,d):f==="dangerouslySetInnerHTML"?HL(s,d):f==="children"?_p(s,d):ME(s,f,d,h)}switch(a){case"input":iM(s,r);break;case"textarea":zL(s,r);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?qh(s,!!r.multiple,g,!1):p!==!!r.multiple&&(r.defaultValue!=null?qh(s,!!r.multiple,r.defaultValue,!0):qh(s,!!r.multiple,r.multiple?[]:"",!1))}s[Rp]=r}catch(S){Pn(n,n.return,S)}}break;case 6:if(_r(e,n),Zr(n),i&4){if(n.stateNode===null)throw Error(we(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(S){Pn(n,n.return,S)}}break;case 3:if(_r(e,n),Zr(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{bp(e.containerInfo)}catch(S){Pn(n,n.return,S)}break;case 4:_r(e,n),Zr(n);break;case 13:_r(e,n),Zr(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(n1=zn())),i&4&&QR(n);break;case 22:if(f=t!==null&&t.memoizedState!==null,n.mode&1?(Pi=(h=Pi)||f,_r(e,n),Pi=h):_r(e,n),Zr(n),i&8192){if(h=n.memoizedState!==null,(n.stateNode.isHidden=h)&&!f&&n.mode&1)for(Qe=n,f=n.child;f!==null;){for(d=Qe=f;Qe!==null;){switch(p=Qe,g=p.child,p.tag){case 0:case 11:case 14:case 15:sp(4,p,p.return);break;case 1:Oh(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Pn(i,t,S)}}break;case 5:Oh(p,p.return);break;case 22:if(p.memoizedState!==null){$R(d);continue}}g!==null?(g.return=p,Qe=g):$R(d)}f=f.sibling}e:for(f=null,d=n;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,h?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=GL("display",o))}catch(S){Pn(n,n.return,S)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(S){Pn(n,n.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_r(e,n),Zr(n),i&4&&QR(n);break;case 21:break;default:_r(e,n),Zr(n)}}function Zr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(mI(t)){var i=t;break e}t=t.return}throw Error(we(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(_p(s,""),i.flags&=-33);var r=qR(n);FM(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=qR(n);UM(n,a,o);break;default:throw Error(we(161))}}catch(l){Pn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function $4(n,e,t){Qe=n,vI(n)}function vI(n,e,t){for(var i=(n.mode&1)!==0;Qe!==null;){var s=Qe,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Bg;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Pi;a=Bg;var h=Pi;if(Bg=o,(Pi=l)&&!h)for(Qe=s;Qe!==null;)o=Qe,l=o.child,o.tag===22&&o.memoizedState!==null?e2(s):l!==null?(l.return=o,Qe=l):e2(s);for(;r!==null;)Qe=r,vI(r),r=r.sibling;Qe=s,Bg=a,Pi=h}ZR(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,Qe=r):ZR(n)}}function ZR(n){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pi||C0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Pi)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Er(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&IR(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}IR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&bp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}Pi||e.flags&512&&NM(e)}catch(p){Pn(e,e.return,p)}}if(e===n){Qe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function $R(n){for(;Qe!==null;){var e=Qe;if(e===n){Qe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function e2(n){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{C0(4,e)}catch(l){Pn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Pn(e,s,l)}}var r=e.return;try{NM(e)}catch(l){Pn(e,r,l)}break;case 5:var o=e.return;try{NM(e)}catch(l){Pn(e,o,l)}}}catch(l){Pn(e,e.return,l)}if(e===n){Qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Qe=a;break}Qe=e.return}}var eV=Math.ceil,Nv=aa.ReactCurrentDispatcher,e1=aa.ReactCurrentOwner,cr=aa.ReactCurrentBatchConfig,Ht=0,ai=null,Xn=null,yi=0,Rs=0,Ih=Sl(0),qn=0,Ip=null,Zc=0,T0=0,t1=0,rp=null,us=null,n1=0,xf=1/0,No=null,Uv=!1,zM=null,$a=null,Pg=!1,Xa=null,Fv=0,op=0,kM=null,Zy=-1,$y=0;function $i(){return Ht&6?zn():Zy!==-1?Zy:Zy=zn()}function el(n){return n.mode&1?Ht&2&&yi!==0?yi&-yi:U4.transition!==null?($y===0&&($y=tO()),$y):(n=Kt,n!==0||(n=window.event,n=n===void 0?16:lO(n.type)),n):1}function Lr(n,e,t,i){if(50<op)throw op=0,kM=null,Error(we(185));rm(n,t,i),(!(Ht&2)||n!==ai)&&(n===ai&&(!(Ht&2)&&(T0|=t),qn===4&&za(n,yi)),ps(n,i),t===1&&Ht===0&&!(e.mode&1)&&(xf=zn()+500,b0&&Ml()))}function ps(n,e){var t=n.callbackNode;UG(n,e);var i=Av(n,n===ai?yi:0);if(i===0)t!==null&&cR(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&cR(t),e===1)n.tag===0?N4(t2.bind(null,n)):CO(t2.bind(null,n)),D4(function(){!(Ht&6)&&Ml()}),t=null;else{switch(nO(i)){case 1:t=TE;break;case 4:t=$L;break;case 16:t=_v;break;case 536870912:t=eO;break;default:t=_v}t=wI(t,xI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function xI(n,e){if(Zy=-1,$y=0,Ht&6)throw Error(we(327));var t=n.callbackNode;if(tf()&&n.callbackNode!==t)return null;var i=Av(n,n===ai?yi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=zv(n,i);else{e=i;var s=Ht;Ht|=2;var r=AI();(ai!==n||yi!==e)&&(No=null,xf=zn()+500,kc(n,e));do try{iV();break}catch(a){_I(n,a)}while(!0);HE(),Nv.current=r,Ht=s,Xn!==null?e=0:(ai=null,yi=0,e=qn)}if(e!==0){if(e===2&&(s=dM(n),s!==0&&(i=s,e=HM(n,s))),e===1)throw t=Ip,kc(n,0),za(n,i),ps(n,zn()),t;if(e===6)za(n,i);else{if(s=n.current.alternate,!(i&30)&&!tV(s)&&(e=zv(n,i),e===2&&(r=dM(n),r!==0&&(i=r,e=HM(n,r))),e===1))throw t=Ip,kc(n,0),za(n,i),ps(n,zn()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(we(345));case 2:gc(n,us,No);break;case 3:if(za(n,i),(i&130023424)===i&&(e=n1+500-zn(),10<e)){if(Av(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){$i(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=AM(gc.bind(null,n,us,No),e);break}gc(n,us,No);break;case 4:if(za(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-Dr(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=zn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*eV(i/1960))-i,10<i){n.timeoutHandle=AM(gc.bind(null,n,us,No),i);break}gc(n,us,No);break;case 5:gc(n,us,No);break;default:throw Error(we(329))}}}return ps(n,zn()),n.callbackNode===t?xI.bind(null,n):null}function HM(n,e){var t=rp;return n.current.memoizedState.isDehydrated&&(kc(n,e).flags|=256),n=zv(n,e),n!==2&&(e=us,us=t,e!==null&&GM(e)),n}function GM(n){us===null?us=n:us.push.apply(us,n)}function tV(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!Nr(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function za(n,e){for(e&=~t1,e&=~T0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Dr(e),i=1<<t;n[t]=-1,e&=~i}}function t2(n){if(Ht&6)throw Error(we(327));tf();var e=Av(n,0);if(!(e&1))return ps(n,zn()),null;var t=zv(n,e);if(n.tag!==0&&t===2){var i=dM(n);i!==0&&(e=i,t=HM(n,i))}if(t===1)throw t=Ip,kc(n,0),za(n,e),ps(n,zn()),t;if(t===6)throw Error(we(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,gc(n,us,No),ps(n,zn()),null}function i1(n,e){var t=Ht;Ht|=1;try{return n(e)}finally{Ht=t,Ht===0&&(xf=zn()+500,b0&&Ml())}}function $c(n){Xa!==null&&Xa.tag===0&&!(Ht&6)&&tf();var e=Ht;Ht|=1;var t=cr.transition,i=Kt;try{if(cr.transition=null,Kt=1,n)return n()}finally{Kt=i,cr.transition=t,Ht=e,!(Ht&6)&&Ml()}}function s1(){Rs=Ih.current,hn(Ih)}function kc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,P4(t)),Xn!==null)for(t=Xn.return;t!==null;){var i=t;switch(FE(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wv();break;case 3:yf(),hn(fs),hn(Fi),JE();break;case 5:XE(i);break;case 4:yf();break;case 13:hn(Sn);break;case 19:hn(Sn);break;case 10:GE(i.type._context);break;case 22:case 23:s1()}t=t.return}if(ai=n,Xn=n=tl(n.current,null),yi=Rs=e,qn=0,Ip=null,t1=T0=Zc=0,us=rp=null,Tc!==null){for(e=0;e<Tc.length;e++)if(t=Tc[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}Tc=null}return n}function _I(n,e){do{var t=Xn;try{if(HE(),Ky.current=Iv,Ov){for(var i=En.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ov=!1}if(Qc=0,ri=Kn=En=null,ip=!1,Dp=0,e1.current=null,t===null||t.return===null){qn=1,Ip=e,Xn=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=yi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=GR(o);if(g!==null){g.flags&=-257,VR(g,o,a,r,e),g.mode&1&&HR(r,h,e),e=g,l=h;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){HR(r,h,e),r1();break e}l=Error(we(426))}}else if(yn&&a.mode&1){var _=GR(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),VR(_,o,a,r,e),zE(vf(l,a));break e}}r=l=vf(l,a),qn!==4&&(qn=2),rp===null?rp=[r]:rp.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=iI(r,l,e);OR(r,y);break e;case 1:a=l;var A=r.type,M=r.stateNode;if(!(r.flags&128)&&(typeof A.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&($a===null||!$a.has(M)))){r.flags|=65536,e&=-e,r.lanes|=e;var E=sI(r,a,e);OR(r,E);break e}}r=r.return}while(r!==null)}MI(t)}catch(R){e=R,Xn===t&&t!==null&&(Xn=t=t.return);continue}break}while(!0)}function AI(){var n=Nv.current;return Nv.current=Iv,n===null?Iv:n}function r1(){(qn===0||qn===3||qn===2)&&(qn=4),ai===null||!(Zc&268435455)&&!(T0&268435455)||za(ai,yi)}function zv(n,e){var t=Ht;Ht|=2;var i=AI();(ai!==n||yi!==e)&&(No=null,kc(n,e));do try{nV();break}catch(s){_I(n,s)}while(!0);if(HE(),Ht=t,Nv.current=i,Xn!==null)throw Error(we(261));return ai=null,yi=0,qn}function nV(){for(;Xn!==null;)SI(Xn)}function iV(){for(;Xn!==null&&!TG();)SI(Xn)}function SI(n){var e=EI(n.alternate,n,Rs);n.memoizedProps=n.pendingProps,e===null?MI(n):Xn=e,e1.current=null}function MI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=q4(t,e),t!==null){t.flags&=32767,Xn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{qn=6,Xn=null;return}}else if(t=K4(t,e,Rs),t!==null){Xn=t;return}if(e=e.sibling,e!==null){Xn=e;return}Xn=e=n}while(e!==null);qn===0&&(qn=5)}function gc(n,e,t){var i=Kt,s=cr.transition;try{cr.transition=null,Kt=1,sV(n,e,t,i)}finally{cr.transition=s,Kt=i}return null}function sV(n,e,t,i){do tf();while(Xa!==null);if(Ht&6)throw Error(we(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(we(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(FG(n,r),n===ai&&(Xn=ai=null,yi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Pg||(Pg=!0,wI(_v,function(){return tf(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=cr.transition,cr.transition=null;var o=Kt;Kt=1;var a=Ht;Ht|=4,e1.current=null,Z4(n,t),yI(t,n),b4(xM),Sv=!!vM,xM=vM=null,n.current=t,$4(t),RG(),Ht=a,Kt=o,cr.transition=r}else n.current=t;if(Pg&&(Pg=!1,Xa=n,Fv=s),r=n.pendingLanes,r===0&&($a=null),DG(t.stateNode),ps(n,zn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(Uv)throw Uv=!1,n=zM,zM=null,n;return Fv&1&&n.tag!==0&&tf(),r=n.pendingLanes,r&1?n===kM?op++:(op=0,kM=n):op=0,Ml(),null}function tf(){if(Xa!==null){var n=nO(Fv),e=cr.transition,t=Kt;try{if(cr.transition=null,Kt=16>n?16:n,Xa===null)var i=!1;else{if(n=Xa,Xa=null,Fv=0,Ht&6)throw Error(we(331));var s=Ht;for(Ht|=4,Qe=n.current;Qe!==null;){var r=Qe,o=r.child;if(Qe.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var h=a[l];for(Qe=h;Qe!==null;){var f=Qe;switch(f.tag){case 0:case 11:case 15:sp(8,f,r)}var d=f.child;if(d!==null)d.return=f,Qe=d;else for(;Qe!==null;){f=Qe;var p=f.sibling,g=f.return;if(pI(f),f===h){Qe=null;break}if(p!==null){p.return=g,Qe=p;break}Qe=g}}}var v=r.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var _=S.sibling;S.sibling=null,S=_}while(S!==null)}}Qe=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,Qe=o;else e:for(;Qe!==null;){if(r=Qe,r.flags&2048)switch(r.tag){case 0:case 11:case 15:sp(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,Qe=y;break e}Qe=r.return}}var A=n.current;for(Qe=A;Qe!==null;){o=Qe;var M=o.child;if(o.subtreeFlags&2064&&M!==null)M.return=o,Qe=M;else e:for(o=A;Qe!==null;){if(a=Qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:C0(9,a)}}catch(R){Pn(a,a.return,R)}if(a===o){Qe=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Qe=E;break e}Qe=a.return}}if(Ht=s,Ml(),ao&&typeof ao.onPostCommitFiberRoot=="function")try{ao.onPostCommitFiberRoot(x0,n)}catch{}i=!0}return i}finally{Kt=t,cr.transition=e}}return!1}function n2(n,e,t){e=vf(t,e),e=iI(n,e,1),n=Za(n,e,1),e=$i(),n!==null&&(rm(n,1,e),ps(n,e))}function Pn(n,e,t){if(n.tag===3)n2(n,n,t);else for(;e!==null;){if(e.tag===3){n2(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($a===null||!$a.has(i))){n=vf(t,n),n=sI(e,n,1),e=Za(e,n,1),n=$i(),e!==null&&(rm(e,1,n),ps(e,n));break}}e=e.return}}function rV(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=$i(),n.pingedLanes|=n.suspendedLanes&t,ai===n&&(yi&t)===t&&(qn===4||qn===3&&(yi&130023424)===yi&&500>zn()-n1?kc(n,0):t1|=t),ps(n,e)}function bI(n,e){e===0&&(n.mode&1?(e=Ag,Ag<<=1,!(Ag&130023424)&&(Ag=4194304)):e=1);var t=$i();n=ta(n,e),n!==null&&(rm(n,e,t),ps(n,t))}function oV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),bI(n,t)}function aV(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(we(314))}i!==null&&i.delete(e),bI(n,t)}var EI;EI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||fs.current)hs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return hs=!1,Y4(n,e,t);hs=!!(n.flags&131072)}else hs=!1,yn&&e.flags&1048576&&TO(e,Rv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Qy(n,e),n=e.pendingProps;var s=pf(e,Fi.current);ef(e,t),s=KE(null,e,i,n,s,t);var r=qE();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ds(i)?(r=!0,Cv(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,WE(e),s.updater=E0,e.stateNode=s,s._reactInternals=e,TM(e,i,n,t),e=PM(null,e,i,!0,r,t)):(e.tag=0,yn&&r&&UE(e),Yi(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Qy(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=cV(i),n=Er(i,n),s){case 0:e=BM(null,e,i,n,t);break e;case 1:e=XR(null,e,i,n,t);break e;case 11:e=WR(null,e,i,n,t);break e;case 14:e=jR(null,e,i,Er(i.type,n),t);break e}throw Error(we(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Er(i,s),BM(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Er(i,s),XR(n,e,i,s,t);case 3:e:{if(lI(e),n===null)throw Error(we(387));i=e.pendingProps,r=e.memoizedState,s=r.element,DO(n,e),Dv(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=vf(Error(we(423)),e),e=JR(n,e,i,t,s);break e}else if(i!==s){s=vf(Error(we(424)),e),e=JR(n,e,i,t,s);break e}else for(Ds=Qa(e.stateNode.containerInfo.firstChild),Os=e,yn=!0,Rr=null,t=NO(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(mf(),i===s){e=na(n,e,t);break e}Yi(n,e,i,t)}e=e.child}return e;case 5:return UO(e),n===null&&EM(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,_M(i,s)?o=null:r!==null&&_M(i,r)&&(e.flags|=32),aI(n,e),Yi(n,e,o,t),e.child;case 6:return n===null&&EM(e),null;case 13:return cI(n,e,t);case 4:return jE(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=gf(e,null,i,t):Yi(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Er(i,s),WR(n,e,i,s,t);case 7:return Yi(n,e,e.pendingProps,t),e.child;case 8:return Yi(n,e,e.pendingProps.children,t),e.child;case 12:return Yi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,rn(Bv,i._currentValue),i._currentValue=o,r!==null)if(Nr(r.value,o)){if(r.children===s.children&&!fs.current){e=na(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Yo(-1,t&-t),l.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?l.next=l:(l.next=f.next,f.next=l),h.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),wM(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(we(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),wM(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Yi(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ef(e,t),s=ur(s),i=i(s),e.flags|=1,Yi(n,e,i,t),e.child;case 14:return i=e.type,s=Er(i,e.pendingProps),s=Er(i.type,s),jR(n,e,i,s,t);case 15:return rI(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Er(i,s),Qy(n,e),e.tag=1,ds(i)?(n=!0,Cv(e)):n=!1,ef(e,t),OO(e,i,s),TM(e,i,s,t),PM(null,e,i,!0,n,t);case 19:return uI(n,e,t);case 22:return oI(n,e,t)}throw Error(we(156,e.tag))};function wI(n,e){return ZL(n,e)}function lV(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(n,e,t,i){return new lV(n,e,t,i)}function o1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cV(n){if(typeof n=="function")return o1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===EE)return 11;if(n===wE)return 14}return 2}function tl(n,e){var t=n.alternate;return t===null?(t=ar(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ev(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")o1(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Eh:return Hc(t.children,s,r,e);case bE:o=8,s|=8;break;case ZS:return n=ar(12,t,e,s|2),n.elementType=ZS,n.lanes=r,n;case $S:return n=ar(13,t,e,s),n.elementType=$S,n.lanes=r,n;case eM:return n=ar(19,t,e,s),n.elementType=eM,n.lanes=r,n;case IL:return R0(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case LL:o=10;break e;case OL:o=9;break e;case EE:o=11;break e;case wE:o=14;break e;case Ia:o=16,i=null;break e}throw Error(we(130,n==null?n:typeof n,""))}return e=ar(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function Hc(n,e,t,i){return n=ar(7,n,i,e),n.lanes=t,n}function R0(n,e,t,i){return n=ar(22,n,i,e),n.elementType=IL,n.lanes=t,n.stateNode={isHidden:!1},n}function mA(n,e,t){return n=ar(6,n,null,e),n.lanes=t,n}function gA(n,e,t){return e=ar(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function uV(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q_(0),this.expirationTimes=q_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q_(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function a1(n,e,t,i,s,r,o,a,l){return n=new uV(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=ar(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},WE(r),n}function hV(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bh,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function CI(n){if(!n)return ul;n=n._reactInternals;e:{if(hu(n)!==n||n.tag!==1)throw Error(we(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ds(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(n.tag===1){var t=n.type;if(ds(t))return wO(n,t,e)}return e}function TI(n,e,t,i,s,r,o,a,l){return n=a1(t,i,!0,n,s,r,o,a,l),n.context=CI(null),t=n.current,i=$i(),s=el(t),r=Yo(i,s),r.callback=e??null,Za(t,r,s),n.current.lanes=s,rm(n,s,i),ps(n,i),n}function B0(n,e,t,i){var s=e.current,r=$i(),o=el(s);return t=CI(t),e.context===null?e.context=t:e.pendingContext=t,e=Yo(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Za(s,e,o),n!==null&&(Lr(n,s,o,r),Yy(n,s,o)),o}function kv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function i2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function l1(n,e){i2(n,e),(n=n.alternate)&&i2(n,e)}function fV(){return null}var RI=typeof reportError=="function"?reportError:function(n){console.error(n)};function c1(n){this._internalRoot=n}P0.prototype.render=c1.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(we(409));B0(n,e,null,null)};P0.prototype.unmount=c1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;$c(function(){B0(null,n,null,null)}),e[ea]=null}};function P0(n){this._internalRoot=n}P0.prototype.unstable_scheduleHydration=function(n){if(n){var e=rO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Fa.length&&e!==0&&e<Fa[t].priority;t++);Fa.splice(t,0,n),t===0&&aO(n)}};function u1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function D0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function s2(){}function dV(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var h=kv(o);r.call(h)}}var o=TI(e,i,n,0,null,!1,!1,"",s2);return n._reactRootContainer=o,n[ea]=o.current,Cp(n.nodeType===8?n.parentNode:n),$c(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var h=kv(l);a.call(h)}}var l=a1(n,0,!1,null,null,!1,!1,"",s2);return n._reactRootContainer=l,n[ea]=l.current,Cp(n.nodeType===8?n.parentNode:n),$c(function(){B0(e,l,t,i)}),l}function L0(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=kv(o);a.call(l)}}B0(e,o,n,s)}else o=dV(t,e,n,s,i);return kv(o)}iO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Jd(e.pendingLanes);t!==0&&(RE(e,t|1),ps(e,zn()),!(Ht&6)&&(xf=zn()+500,Ml()))}break;case 13:$c(function(){var i=ta(n,1);if(i!==null){var s=$i();Lr(i,n,1,s)}}),l1(n,1)}};BE=function(n){if(n.tag===13){var e=ta(n,134217728);if(e!==null){var t=$i();Lr(e,n,134217728,t)}l1(n,134217728)}};sO=function(n){if(n.tag===13){var e=el(n),t=ta(n,e);if(t!==null){var i=$i();Lr(t,n,e,i)}l1(n,e)}};rO=function(){return Kt};oO=function(n,e){var t=Kt;try{return Kt=n,e()}finally{Kt=t}};uM=function(n,e,t){switch(e){case"input":if(iM(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=M0(i);if(!s)throw Error(we(90));UL(i),iM(i,s)}}}break;case"textarea":zL(n,t);break;case"select":e=t.value,e!=null&&qh(n,!!t.multiple,e,!1)}};XL=i1;JL=$c;var pV={usingClientEntryPoint:!1,Events:[am,Rh,M0,WL,jL,i1]},Ed={findFiberByHostInstance:Cc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mV={bundleType:Ed.bundleType,version:Ed.version,rendererPackageName:Ed.rendererPackageName,rendererConfig:Ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:aa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qL(n),n===null?null:n.stateNode},findFiberByHostInstance:Ed.findFiberByHostInstance||fV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dg.isDisabled&&Dg.supportsFiber)try{x0=Dg.inject(mV),ao=Dg}catch{}}ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pV;ks.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u1(e))throw Error(we(200));return hV(n,e,null,t)};ks.createRoot=function(n,e){if(!u1(n))throw Error(we(299));var t=!1,i="",s=RI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=a1(n,1,!1,null,null,t,!1,i,s),n[ea]=e.current,Cp(n.nodeType===8?n.parentNode:n),new c1(e)};ks.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(we(188)):(n=Object.keys(n).join(","),Error(we(268,n)));return n=qL(e),n=n===null?null:n.stateNode,n};ks.flushSync=function(n){return $c(n)};ks.hydrate=function(n,e,t){if(!D0(e))throw Error(we(200));return L0(null,n,e,!0,t)};ks.hydrateRoot=function(n,e,t){if(!u1(n))throw Error(we(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=RI;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=TI(e,null,n,1,t??null,s,!1,r,o),n[ea]=e.current,Cp(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new P0(e)};ks.render=function(n,e,t){if(!D0(e))throw Error(we(200));return L0(null,n,e,!1,t)};ks.unmountComponentAtNode=function(n){if(!D0(n))throw Error(we(40));return n._reactRootContainer?($c(function(){L0(null,null,n,!1,function(){n._reactRootContainer=null,n[ea]=null})}),!0):!1};ks.unstable_batchedUpdates=i1;ks.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!D0(t))throw Error(we(200));if(n==null||n._reactInternals===void 0)throw Error(we(38));return L0(n,e,t,!1,i)};ks.version="18.2.0-next-9e3b772b8-20220608";function BI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BI)}catch(n){console.error(n)}}BI(),TL.exports=ks;var gV=TL.exports,PI,r2=gV;PI=qS.createRoot=r2.createRoot,qS.hydrateRoot=r2.hydrateRoot;var yV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fu=(n,e)=>{const t=fe.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,children:a,...l},h)=>fe.createElement("svg",{ref:h,...yV,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:`lucide lucide-${vV(n)}`,...l},[...e.map(([f,d])=>fe.createElement(f,d)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},DI=fu("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),xV=fu("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),_V=fu("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),LI=fu("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),OI=fu("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),AV=fu("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),SV=fu("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),II=fe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),O0=fe.createContext({}),h1=fe.createContext(null),I0=typeof document<"u",MV=I0?fe.useLayoutEffect:fe.useEffect,NI=fe.createContext({strict:!1}),f1=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),bV="framerAppearId",UI="data-"+f1(bV);function EV(n,e,t,i){const{visualElement:s}=fe.useContext(O0),r=fe.useContext(NI),o=fe.useContext(h1),a=fe.useContext(II).reducedMotion,l=fe.useRef();i=i||r.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const h=l.current;fe.useInsertionEffect(()=>{h&&h.update(t,o)});const f=fe.useRef(!!(t[UI]&&!window.HandoffComplete));return MV(()=>{h&&(h.render(),f.current&&h.animationState&&h.animationState.animateChanges())}),fe.useEffect(()=>{h&&(h.updateFeatures(),!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),h}function Nh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function wV(n,e,t){return fe.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Nh(t)&&(t.current=i))},[e])}function Np(n){return typeof n=="string"||Array.isArray(n)}function N0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const d1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],p1=["initial",...d1];function U0(n){return N0(n.animate)||p1.some(e=>Np(n[e]))}function FI(n){return!!(U0(n)||n.variants)}function CV(n,e){if(U0(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Np(t)?t:void 0,animate:Np(i)?i:void 0}}return n.inherit!==!1?e:{}}function TV(n){const{initial:e,animate:t}=CV(n,fe.useContext(O0));return fe.useMemo(()=>({initial:e,animate:t}),[o2(e),o2(t)])}function o2(n){return Array.isArray(n)?n.join(" "):n}const a2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Up={};for(const n in a2)Up[n]={isEnabled:e=>a2[n].some(t=>!!e[t])};function RV(n){for(const e in n)Up[e]={...Up[e],...n[e]}}const zI=fe.createContext({}),kI=fe.createContext({}),BV=Symbol.for("motionComponentSymbol");function PV({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:s}){n&&RV(n);function r(a,l){let h;const f={...fe.useContext(II),...a,layoutId:DV(a)},{isStatic:d}=f,p=TV(a),g=i(a,d);if(!d&&I0){p.visualElement=EV(s,g,f,e);const v=fe.useContext(kI),S=fe.useContext(NI).strict;p.visualElement&&(h=p.visualElement.loadFeatures(f,S,n,v))}return fe.createElement(O0.Provider,{value:p},h&&p.visualElement?fe.createElement(h,{visualElement:p.visualElement,...f}):null,t(s,a,wV(g,p.visualElement,l),g,d,p.visualElement))}const o=fe.forwardRef(r);return o[BV]=s,o}function DV({layoutId:n}){const e=fe.useContext(zI).id;return e&&n!==void 0?e+"-"+n:n}function LV(n){function e(i,s={}){return PV(n(i,s))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,s)=>(t.has(s)||t.set(s,e(s)),t.get(s))})}const OV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function m1(n){return typeof n!="string"||n.includes("-")?!1:!!(OV.indexOf(n)>-1||/[A-Z]/.test(n))}const Hv={};function IV(n){Object.assign(Hv,n)}const cm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],du=new Set(cm);function HI(n,{layout:e,layoutId:t}){return du.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Hv[n]||n==="opacity")}const gs=n=>!!(n&&n.getVelocity),NV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UV=cm.length;function FV(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,s){let r="";for(let o=0;o<UV;o++){const a=cm[o];if(n[a]!==void 0){const l=NV[a]||a;r+=`${l}(${n[a]}) `}}return e&&!n.z&&(r+="translateZ(0)"),r=r.trim(),s?r=s(n,i?"":r):t&&i&&(r="none"),r}const GI=n=>e=>typeof e=="string"&&e.startsWith(n),VI=GI("--"),VM=GI("var(--"),zV=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,kV=(n,e)=>e&&typeof n=="number"?e.transform(n):n,hl=(n,e,t)=>Math.min(Math.max(t,n),e),pu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ap={...pu,transform:n=>hl(0,1,n)},Lg={...pu,default:1},lp=n=>Math.round(n*1e5)/1e5,F0=/(-)?([\d]*\.?[\d])+/g,WI=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,HV=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function um(n){return typeof n=="string"}const hm=n=>({test:e=>um(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Oa=hm("deg"),co=hm("%"),dt=hm("px"),GV=hm("vh"),VV=hm("vw"),l2={...co,parse:n=>co.parse(n)/100,transform:n=>co.transform(n*100)},c2={...pu,transform:Math.round},jI={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,size:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,rotate:Oa,rotateX:Oa,rotateY:Oa,rotateZ:Oa,scale:Lg,scaleX:Lg,scaleY:Lg,scaleZ:Lg,skew:Oa,skewX:Oa,skewY:Oa,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:ap,originX:l2,originY:l2,originZ:dt,zIndex:c2,fillOpacity:ap,strokeOpacity:ap,numOctaves:c2};function g1(n,e,t,i){const{style:s,vars:r,transform:o,transformOrigin:a}=n;let l=!1,h=!1,f=!0;for(const d in e){const p=e[d];if(VI(d)){r[d]=p;continue}const g=jI[d],v=kV(p,g);if(du.has(d)){if(l=!0,o[d]=v,!f)continue;p!==(g.default||0)&&(f=!1)}else d.startsWith("origin")?(h=!0,a[d]=v):s[d]=v}if(e.transform||(l||i?s.transform=FV(n.transform,t,f,i):s.transform&&(s.transform="none")),h){const{originX:d="50%",originY:p="50%",originZ:g=0}=a;s.transformOrigin=`${d} ${p} ${g}`}}const y1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XI(n,e,t){for(const i in e)!gs(e[i])&&!HI(i,t)&&(n[i]=e[i])}function WV({transformTemplate:n},e,t){return fe.useMemo(()=>{const i=y1();return g1(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function jV(n,e,t){const i=n.style||{},s={};return XI(s,i,n),Object.assign(s,WV(n,e,t)),n.transformValues?n.transformValues(s):s}function XV(n,e,t){const i={},s=jV(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=s,i}const JV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Gv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||JV.has(n)}let JI=n=>!Gv(n);function YV(n){n&&(JI=e=>e.startsWith("on")?!Gv(e):n(e))}try{YV(require("@emotion/is-prop-valid").default)}catch{}function KV(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(JI(s)||t===!0&&Gv(s)||!e&&!Gv(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function u2(n,e,t){return typeof n=="string"?n:dt.transform(e+t*n)}function qV(n,e,t){const i=u2(e,n.x,n.width),s=u2(t,n.y,n.height);return`${i} ${s}`}const QV={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZV={offset:"strokeDashoffset",array:"strokeDasharray"};function $V(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?QV:ZV;n[r.offset]=dt.transform(-i);const o=dt.transform(e),a=dt.transform(t);n[r.array]=`${o} ${a}`}function v1(n,{attrX:e,attrY:t,attrScale:i,originX:s,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...h},f,d,p){if(g1(n,h,f,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:v,dimensions:S}=n;g.transform&&(S&&(v.transform=g.transform),delete g.transform),S&&(s!==void 0||r!==void 0||v.transform)&&(v.transformOrigin=qV(S,s!==void 0?s:.5,r!==void 0?r:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),i!==void 0&&(g.scale=i),o!==void 0&&$V(g,o,a,l,!1)}const YI=()=>({...y1(),attrs:{}}),x1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function e5(n,e,t,i){const s=fe.useMemo(()=>{const r=YI();return v1(r,e,{enableHardwareAcceleration:!1},x1(i),n.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};XI(r,n.style,n),s.style={...r,...s.style}}return s}function t5(n=!1){return(t,i,s,{latestValues:r},o)=>{const l=(m1(t)?e5:XV)(i,r,o,t),f={...KV(i,typeof t=="string",n),...l,ref:s},{children:d}=i,p=fe.useMemo(()=>gs(d)?d.get():d,[d]);return fe.createElement(t,{...f,children:p})}}function KI(n,{style:e,vars:t},i,s){Object.assign(n.style,e,s&&s.getProjectionStyles(i));for(const r in t)n.style.setProperty(r,t[r])}const qI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QI(n,e,t,i){KI(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(qI.has(s)?s:f1(s),e.attrs[s])}function _1(n,e){const{style:t}=n,i={};for(const s in t)(gs(t[s])||e.style&&gs(e.style[s])||HI(s,n))&&(i[s]=t[s]);return i}function ZI(n,e){const t=_1(n,e);for(const i in n)if(gs(n[i])||gs(e[i])){const s=cm.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[s]=n[i]}return t}function A1(n,e,t,i={},s={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,s)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,s)),e}function n5(n){const e=fe.useRef(null);return e.current===null&&(e.current=n()),e.current}const Vv=n=>Array.isArray(n),i5=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),s5=n=>Vv(n)?n[n.length-1]||0:n;function tv(n){const e=gs(n)?n.get():n;return i5(e)?e.toValue():e}function r5({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,s,r){const o={latestValues:o5(i,s,r,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const $I=n=>(e,t)=>{const i=fe.useContext(O0),s=fe.useContext(h1),r=()=>r5(n,e,i,s);return t?r():n5(r)};function o5(n,e,t,i){const s={},r=i(n,{});for(const p in r)s[p]=tv(r[p]);let{initial:o,animate:a}=n;const l=U0(n),h=FI(n);e&&h&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const d=f?a:o;return d&&typeof d!="boolean"&&!N0(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const v=A1(n,g);if(!v)return;const{transitionEnd:S,transition:_,...y}=v;for(const A in y){let M=y[A];if(Array.isArray(M)){const E=f?M.length-1:0;M=M[E]}M!==null&&(s[A]=M)}for(const A in S)s[A]=S[A]}),s}const kn=n=>n;class h2{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function a5(n){let e=new h2,t=new h2,i=0,s=!1,r=!1;const o=new WeakSet,a={schedule:(l,h=!1,f=!1)=>{const d=f&&s,p=d?e:t;return h&&o.add(l),p.add(l)&&d&&s&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(s){r=!0;return}if(s=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let h=0;h<i;h++){const f=e.order[h];f(l),o.has(f)&&(a.schedule(f),n())}s=!1,r&&(r=!1,a.process(l))}};return a}const Og=["prepare","read","update","preRender","render","postRender"],l5=40;function c5(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=Og.reduce((d,p)=>(d[p]=a5(()=>t=!0),d),{}),o=d=>r[d].process(s),a=()=>{const d=performance.now();t=!1,s.delta=i?1e3/60:Math.max(Math.min(d-s.timestamp,l5),1),s.timestamp=d,s.isProcessing=!0,Og.forEach(o),s.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,s.isProcessing||n(a)};return{schedule:Og.reduce((d,p)=>{const g=r[p];return d[p]=(v,S=!1,_=!1)=>(t||l(),g.schedule(v,S,_)),d},{}),cancel:d=>Og.forEach(p=>r[p].cancel(d)),state:s,steps:r}}const{schedule:fn,cancel:ia,state:Bi,steps:yA}=c5(typeof requestAnimationFrame<"u"?requestAnimationFrame:kn,!0),u5={useVisualState:$I({scrapeMotionValuesFromProps:ZI,createRenderState:YI,onMount:(n,e,{renderState:t,latestValues:i})=>{fn.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),fn.render(()=>{v1(t,i,{enableHardwareAcceleration:!1},x1(e.tagName),n.transformTemplate),QI(e,t)})}})},h5={useVisualState:$I({scrapeMotionValuesFromProps:_1,createRenderState:y1})};function f5(n,{forwardMotionProps:e=!1},t,i){return{...m1(n)?u5:h5,preloadedFeatures:t,useRender:t5(e),createVisualElement:i,Component:n}}function Vo(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const e3=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function z0(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const d5=n=>e=>e3(e)&&n(e,z0(e));function Ko(n,e,t,i){return Vo(n,e,d5(t),i)}const p5=(n,e)=>t=>e(n(t)),nl=(...n)=>n.reduce(p5);function t3(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const f2=t3("dragHorizontal"),d2=t3("dragVertical");function n3(n){let e=!1;if(n==="y")e=d2();else if(n==="x")e=f2();else{const t=f2(),i=d2();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function i3(){const n=n3(!0);return n?(n(),!1):!0}class bl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function p2(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),s=(r,o)=>{if(r.pointerType==="touch"||i3())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&fn.update(()=>a[i](r,o))};return Ko(n.current,t,s,{passive:!n.getProps()[i]})}class m5 extends bl{mount(){this.unmount=nl(p2(this.node,!0),p2(this.node,!1))}unmount(){}}class g5 extends bl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nl(Vo(this.node.current,"focus",()=>this.onFocus()),Vo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const s3=(n,e)=>e?n===e?!0:s3(n,e.parentElement):!1;function vA(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,z0(t))}class y5 extends bl{constructor(){super(...arguments),this.removeStartListeners=kn,this.removeEndListeners=kn,this.removeAccessibleListeners=kn,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),r=Ko(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:f,globalTapTarget:d}=this.node.getProps();fn.update(()=>{!d&&!s3(this.node.current,a.target)?f&&f(a,l):h&&h(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=Ko(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=nl(r,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=r=>{if(r.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||vA("up",(l,h)=>{const{onTap:f}=this.node.getProps();f&&fn.update(()=>f(l,h))})};this.removeEndListeners(),this.removeEndListeners=Vo(this.node.current,"keyup",o),vA("down",(a,l)=>{this.startPress(a,l)})},t=Vo(this.node.current,"keydown",e),i=()=>{this.isPressing&&vA("cancel",(r,o)=>this.cancelPress(r,o))},s=Vo(this.node.current,"blur",i);this.removeAccessibleListeners=nl(t,s)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&fn.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!i3()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&fn.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=Ko(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Vo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=nl(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const WM=new WeakMap,xA=new WeakMap,v5=n=>{const e=WM.get(n.target);e&&e(n)},x5=n=>{n.forEach(v5)};function _5({root:n,...e}){const t=n||document;xA.has(t)||xA.set(t,{});const i=xA.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(x5,{root:n,...e})),i[s]}function A5(n,e,t){const i=_5(e);return WM.set(n,t),i.observe(n),()=>{WM.delete(n),i.unobserve(n)}}const S5={some:0,all:1};class M5 extends bl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:S5[s]},a=l=>{const{isIntersecting:h}=l;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),p=h?f:d;p&&p(l)};return A5(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(b5(e,t))&&this.startObserver()}unmount(){}}function b5({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const E5={inView:{Feature:M5},tap:{Feature:y5},focus:{Feature:g5},hover:{Feature:m5}};function r3(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function w5(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function C5(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function k0(n,e,t){const i=n.getProps();return A1(i,e,t!==void 0?t:i.custom,w5(n),C5(n))}let S1=kn;const Gc=n=>n*1e3,qo=n=>n/1e3,T5={current:!1},o3=n=>Array.isArray(n)&&typeof n[0]=="number";function a3(n){return!!(!n||typeof n=="string"&&l3[n]||o3(n)||Array.isArray(n)&&n.every(a3))}const Kd=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,l3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kd([0,.65,.55,1]),circOut:Kd([.55,0,1,.45]),backIn:Kd([.31,.01,.66,-.59]),backOut:Kd([.33,1.53,.69,.99])};function c3(n){if(n)return o3(n)?Kd(n):Array.isArray(n)?n.map(c3):l3[n]}function R5(n,e,t,{delay:i=0,duration:s,repeat:r=0,repeatType:o="loop",ease:a,times:l}={}){const h={[e]:t};l&&(h.offset=l);const f=c3(a);return Array.isArray(f)&&(h.easing=f),n.animate(h,{delay:i,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}function B5(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const u3=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,P5=1e-7,D5=12;function L5(n,e,t,i,s){let r,o,a=0;do o=e+(t-e)/2,r=u3(o,i,s)-n,r>0?t=o:e=o;while(Math.abs(r)>P5&&++a<D5);return o}function fm(n,e,t,i){if(n===e&&t===i)return kn;const s=r=>L5(r,0,1,n,t);return r=>r===0||r===1?r:u3(s(r),e,i)}const O5=fm(.42,0,1,1),I5=fm(0,0,.58,1),h3=fm(.42,0,.58,1),N5=n=>Array.isArray(n)&&typeof n[0]!="number",f3=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,d3=n=>e=>1-n(1-e),M1=n=>1-Math.sin(Math.acos(n)),p3=d3(M1),U5=f3(M1),m3=fm(.33,1.53,.69,.99),b1=d3(m3),F5=f3(b1),z5=n=>(n*=2)<1?.5*b1(n):.5*(2-Math.pow(2,-10*(n-1))),k5={linear:kn,easeIn:O5,easeInOut:h3,easeOut:I5,circIn:M1,circInOut:U5,circOut:p3,backIn:b1,backInOut:F5,backOut:m3,anticipate:z5},m2=n=>{if(Array.isArray(n)){S1(n.length===4);const[e,t,i,s]=n;return fm(e,t,i,s)}else if(typeof n=="string")return k5[n];return n},E1=(n,e)=>t=>!!(um(t)&&HV.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),g3=(n,e,t)=>i=>{if(!um(i))return i;const[s,r,o,a]=i.match(F0);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},H5=n=>hl(0,255,n),_A={...pu,transform:n=>Math.round(H5(n))},Bc={test:E1("rgb","red"),parse:g3("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+_A.transform(n)+", "+_A.transform(e)+", "+_A.transform(t)+", "+lp(ap.transform(i))+")"};function G5(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const jM={test:E1("#"),parse:G5,transform:Bc.transform},Uh={test:E1("hsl","hue"),parse:g3("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+co.transform(lp(e))+", "+co.transform(lp(t))+", "+lp(ap.transform(i))+")"},Ji={test:n=>Bc.test(n)||jM.test(n)||Uh.test(n),parse:n=>Bc.test(n)?Bc.parse(n):Uh.test(n)?Uh.parse(n):jM.parse(n),transform:n=>um(n)?n:n.hasOwnProperty("red")?Bc.transform(n):Uh.transform(n)},Mn=(n,e,t)=>-t*n+t*e+n;function AA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function V5({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,o=0;if(!e)s=r=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;s=AA(l,a,n+1/3),r=AA(l,a,n),o=AA(l,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}const SA=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},W5=[jM,Bc,Uh],j5=n=>W5.find(e=>e.test(n));function g2(n){const e=j5(n);let t=e.parse(n);return e===Uh&&(t=V5(t)),t}const y3=(n,e)=>{const t=g2(n),i=g2(e),s={...t};return r=>(s.red=SA(t.red,i.red,r),s.green=SA(t.green,i.green,r),s.blue=SA(t.blue,i.blue,r),s.alpha=Mn(t.alpha,i.alpha,r),Bc.transform(s))};function X5(n){var e,t;return isNaN(n)&&um(n)&&(((e=n.match(F0))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(WI))===null||t===void 0?void 0:t.length)||0)>0}const v3={regex:zV,countKey:"Vars",token:"${v}",parse:kn},x3={regex:WI,countKey:"Colors",token:"${c}",parse:Ji.parse},_3={regex:F0,countKey:"Numbers",token:"${n}",parse:pu.parse};function MA(n,{regex:e,countKey:t,token:i,parse:s}){const r=n.tokenised.match(e);r&&(n["num"+t]=r.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...r.map(s)))}function Wv(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&MA(t,v3),MA(t,x3),MA(t,_3),t}function A3(n){return Wv(n).values}function S3(n){const{values:e,numColors:t,numVars:i,tokenised:s}=Wv(n),r=e.length;return o=>{let a=s;for(let l=0;l<r;l++)l<i?a=a.replace(v3.token,o[l]):l<i+t?a=a.replace(x3.token,Ji.transform(o[l])):a=a.replace(_3.token,lp(o[l]));return a}}const J5=n=>typeof n=="number"?0:n;function Y5(n){const e=A3(n);return S3(n)(e.map(J5))}const fl={test:X5,parse:A3,createTransformer:S3,getAnimatableNone:Y5},M3=(n,e)=>t=>`${t>0?e:n}`;function b3(n,e){return typeof n=="number"?t=>Mn(n,e,t):Ji.test(n)?y3(n,e):n.startsWith("var(")?M3(n,e):w3(n,e)}const E3=(n,e)=>{const t=[...n],i=t.length,s=n.map((r,o)=>b3(r,e[o]));return r=>{for(let o=0;o<i;o++)t[o]=s[o](r);return t}},K5=(n,e)=>{const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=b3(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}},w3=(n,e)=>{const t=fl.createTransformer(e),i=Wv(n),s=Wv(e);return i.numVars===s.numVars&&i.numColors===s.numColors&&i.numNumbers>=s.numNumbers?nl(E3(i.values,s.values),t):M3(n,e)},Fp=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},y2=(n,e)=>t=>Mn(n,e,t);function q5(n){return typeof n=="number"?y2:typeof n=="string"?Ji.test(n)?y3:w3:Array.isArray(n)?E3:typeof n=="object"?K5:y2}function Q5(n,e,t){const i=[],s=t||q5(n[0]),r=n.length-1;for(let o=0;o<r;o++){let a=s(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||kn:e;a=nl(l,a)}i.push(a)}return i}function C3(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(S1(r===e.length),r===1)return()=>e[0];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Q5(e,i,s),a=o.length,l=h=>{let f=0;if(a>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const d=Fp(n[f],n[f+1],h);return o[f](d)};return t?h=>l(hl(n[0],n[r-1],h)):l}function Z5(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Fp(0,e,i);n.push(Mn(t,1,s))}}function $5(n){const e=[0];return Z5(e,n.length-1),e}function e9(n,e){return n.map(t=>t*e)}function t9(n,e){return n.map(()=>e||h3).splice(0,n.length-1)}function jv({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=N5(i)?i.map(m2):m2(i),r={done:!1,value:e[0]},o=e9(t&&t.length===e.length?t:$5(e),n),a=C3(o,e,{ease:Array.isArray(s)?s:t9(e,s)});return{calculatedDuration:n,next:l=>(r.value=a(l),r.done=l>=n,r)}}function T3(n,e){return e?n*(1e3/e):0}const n9=5;function R3(n,e,t){const i=Math.max(e-n9,0);return T3(t-n(i),e-i)}const bA=.001,i9=.01,s9=10,r9=.05,o9=1;function a9({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let s,r,o=1-e;o=hl(r9,o9,o),n=hl(i9,s9,qo(n)),o<1?(s=h=>{const f=h*o,d=f*n,p=f-t,g=XM(h,o),v=Math.exp(-d);return bA-p/g*v},r=h=>{const d=h*o*n,p=d*t+t,g=Math.pow(o,2)*Math.pow(h,2)*n,v=Math.exp(-d),S=XM(Math.pow(h,2),o);return(-s(h)+bA>0?-1:1)*((p-g)*v)/S}):(s=h=>{const f=Math.exp(-h*n),d=(h-t)*n+1;return-bA+f*d},r=h=>{const f=Math.exp(-h*n),d=(t-h)*(n*n);return f*d});const a=5/n,l=c9(s,r,a);if(n=Gc(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(l,2)*i;return{stiffness:h,damping:o*2*Math.sqrt(i*h),duration:n}}}const l9=12;function c9(n,e,t){let i=t;for(let s=1;s<l9;s++)i=i-n(i)/e(i);return i}function XM(n,e){return n*Math.sqrt(1-e*e)}const u9=["duration","bounce"],h9=["stiffness","damping","mass"];function v2(n,e){return e.some(t=>n[t]!==void 0)}function f9(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!v2(n,h9)&&v2(n,u9)){const t=a9(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function B3({keyframes:n,restDelta:e,restSpeed:t,...i}){const s=n[0],r=n[n.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:h,duration:f,velocity:d,isResolvedFromDuration:p}=f9({...i,velocity:-qo(i.velocity||0)}),g=d||0,v=l/(2*Math.sqrt(a*h)),S=r-s,_=qo(Math.sqrt(a/h)),y=Math.abs(S)<5;t||(t=y?.01:2),e||(e=y?.005:.5);let A;if(v<1){const M=XM(_,v);A=E=>{const R=Math.exp(-v*_*E);return r-R*((g+v*_*S)/M*Math.sin(M*E)+S*Math.cos(M*E))}}else if(v===1)A=M=>r-Math.exp(-_*M)*(S+(g+_*S)*M);else{const M=_*Math.sqrt(v*v-1);A=E=>{const R=Math.exp(-v*_*E),T=Math.min(M*E,300);return r-R*((g+v*_*S)*Math.sinh(T)+M*S*Math.cosh(T))/M}}return{calculatedDuration:p&&f||null,next:M=>{const E=A(M);if(p)o.done=M>=f;else{let R=g;M!==0&&(v<1?R=R3(A,M,E):R=0);const T=Math.abs(R)<=t,B=Math.abs(r-E)<=e;o.done=T&&B}return o.value=o.done?r:E,o}}}function x2({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:h=.5,restSpeed:f}){const d=n[0],p={done:!1,value:d},g=L=>a!==void 0&&L<a||l!==void 0&&L>l,v=L=>a===void 0?l:l===void 0||Math.abs(a-L)<Math.abs(l-L)?a:l;let S=t*e;const _=d+S,y=o===void 0?_:o(_);y!==_&&(S=y-d);const A=L=>-S*Math.exp(-L/i),M=L=>y+A(L),E=L=>{const F=A(L),C=M(L);p.done=Math.abs(F)<=h,p.value=p.done?y:C};let R,T;const B=L=>{g(p.value)&&(R=L,T=B3({keyframes:[p.value,v(p.value)],velocity:R3(M,L,p.value),damping:s,stiffness:r,restDelta:h,restSpeed:f}))};return B(0),{calculatedDuration:null,next:L=>{let F=!1;return!T&&R===void 0&&(F=!0,E(L),B(L)),R!==void 0&&L>R?T.next(L-R):(!F&&E(L),p)}}}const d9=n=>{const e=({timestamp:t})=>n(t);return{start:()=>fn.update(e,!0),stop:()=>ia(e),now:()=>Bi.isProcessing?Bi.timestamp:performance.now()}},_2=2e4;function A2(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<_2;)e+=t,i=n.next(e);return e>=_2?1/0:e}const p9={decay:x2,inertia:x2,tween:jv,keyframes:jv,spring:B3};function Xv({autoplay:n=!0,delay:e=0,driver:t=d9,keyframes:i,type:s="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:h,onComplete:f,onUpdate:d,...p}){let g=1,v=!1,S,_;const y=()=>{_=new Promise(K=>{S=K})};y();let A;const M=p9[s]||jv;let E;M!==jv&&typeof i[0]!="number"&&(E=C3([0,100],i,{clamp:!1}),i=[0,100]);const R=M({...p,keyframes:i});let T;a==="mirror"&&(T=M({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let B="idle",L=null,F=null,C=null;R.calculatedDuration===null&&r&&(R.calculatedDuration=A2(R));const{calculatedDuration:D}=R;let te=1/0,$=1/0;D!==null&&(te=D+o,$=te*(r+1)-o);let k=0;const q=K=>{if(F===null)return;g>0&&(F=Math.min(F,K)),g<0&&(F=Math.min(K-$/g,F)),L!==null?k=L:k=Math.round(K-F)*g;const ae=k-e*(g>=0?1:-1),Be=g>=0?ae<0:ae>$;k=Math.max(ae,0),B==="finished"&&L===null&&(k=$);let Q=k,de=R;if(r){const Xe=Math.min(k,$)/te;let Ze=Math.floor(Xe),Ee=Xe%1;!Ee&&Xe>=1&&(Ee=1),Ee===1&&Ze--,Ze=Math.min(Ze,r+1),!!(Ze%2)&&(a==="reverse"?(Ee=1-Ee,o&&(Ee-=o/te)):a==="mirror"&&(de=T)),Q=hl(0,1,Ee)*te}const Ce=Be?{done:!1,value:i[0]}:de.next(Q);E&&(Ce.value=E(Ce.value));let{done:ze}=Ce;!Be&&D!==null&&(ze=g>=0?k>=$:k<=0);const We=L===null&&(B==="finished"||B==="running"&&ze);return d&&d(Ce.value),We&&V(),Ce},H=()=>{A&&A.stop(),A=void 0},Y=()=>{B="idle",H(),S(),y(),F=C=null},V=()=>{B="finished",f&&f(),H(),S()},X=()=>{if(v)return;A||(A=t(q));const K=A.now();l&&l(),L!==null?F=K-L:(!F||B==="finished")&&(F=K),B==="finished"&&y(),C=F,L=null,B="running",A.start()};n&&X();const J={then(K,ae){return _.then(K,ae)},get time(){return qo(k)},set time(K){K=Gc(K),k=K,L!==null||!A||g===0?L=K:F=A.now()-K/g},get duration(){const K=R.calculatedDuration===null?A2(R):R.calculatedDuration;return qo(K)},get speed(){return g},set speed(K){K===g||!A||(g=K,J.time=qo(k))},get state(){return B},play:X,pause:()=>{B="paused",L=k},stop:()=>{v=!0,B!=="idle"&&(B="idle",h&&h(),Y())},cancel:()=>{C!==null&&q(C),Y()},complete:()=>{B="finished"},sample:K=>(F=0,q(K))};return J}function m9(n){let e;return()=>(e===void 0&&(e=n()),e)}const g9=m9(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),y9=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ig=10,v9=2e4,x9=(n,e)=>e.type==="spring"||n==="backgroundColor"||!a3(e.ease);function _9(n,e,{onUpdate:t,onComplete:i,...s}){if(!(g9()&&y9.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,h=!1;const f=()=>{l=new Promise(M=>{a=M})};f();let{keyframes:d,duration:p=300,ease:g,times:v}=s;if(x9(e,s)){const M=Xv({...s,repeat:0,delay:0});let E={done:!1,value:d[0]};const R=[];let T=0;for(;!E.done&&T<v9;)E=M.sample(T),R.push(E.value),T+=Ig;v=void 0,d=R,p=T-Ig,g="linear"}const S=R5(n.owner.current,e,d,{...s,duration:p,ease:g,times:v}),_=()=>{h=!1,S.cancel()},y=()=>{h=!0,fn.update(_),a(),f()};return S.onfinish=()=>{h||(n.set(B5(d,s)),i&&i(),y())},{then(M,E){return l.then(M,E)},attachTimeline(M){return S.timeline=M,S.onfinish=null,kn},get time(){return qo(S.currentTime||0)},set time(M){S.currentTime=Gc(M)},get speed(){return S.playbackRate},set speed(M){S.playbackRate=M},get duration(){return qo(p)},play:()=>{o||(S.play(),ia(_))},pause:()=>S.pause(),stop:()=>{if(o=!0,S.playState==="idle")return;const{currentTime:M}=S;if(M){const E=Xv({...s,autoplay:!1});n.setWithVelocity(E.sample(M-Ig).value,E.sample(M).value,Ig)}y()},complete:()=>{h||S.finish()},cancel:y}}function A9({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const s=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:kn,pause:kn,stop:kn,then:r=>(r(),Promise.resolve()),cancel:kn,complete:kn});return e?Xv({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const S9={type:"spring",stiffness:500,damping:25,restSpeed:10},M9=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),b9={type:"keyframes",duration:.8},E9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},w9=(n,{keyframes:e})=>e.length>2?b9:du.has(n)?n.startsWith("scale")?M9(e[1]):S9:E9,JM=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fl.test(e)||e==="0")&&!e.startsWith("url(")),C9=new Set(["brightness","contrast","saturate","opacity"]);function T9(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(F0)||[];if(!i)return n;const s=t.replace(i,"");let r=C9.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const R9=/([a-z-]*)\(.*?\)/g,YM={...fl,getAnimatableNone:n=>{const e=n.match(R9);return e?e.map(T9).join(" "):n}},B9={...jI,color:Ji,backgroundColor:Ji,outlineColor:Ji,fill:Ji,stroke:Ji,borderColor:Ji,borderTopColor:Ji,borderRightColor:Ji,borderBottomColor:Ji,borderLeftColor:Ji,filter:YM,WebkitFilter:YM},w1=n=>B9[n];function P3(n,e){let t=w1(n);return t!==YM&&(t=fl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const D3=n=>/^0[^.\s]+$/.test(n);function P9(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||D3(n)}function D9(n,e,t,i){const s=JM(e,t);let r;Array.isArray(t)?r=[...t]:r=[null,t];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let h=0;h<r.length;h++)r[h]===null&&(r[h]=h===0?o:r[h-1]),P9(r[h])&&l.push(h),typeof r[h]=="string"&&r[h]!=="none"&&r[h]!=="0"&&(a=r[h]);if(s&&l.length&&a)for(let h=0;h<l.length;h++){const f=l[h];r[f]=P3(e,a)}return r}function L9({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:h,...f}){return!!Object.keys(f).length}function C1(n,e){return n[e]||n.default||n}const O9={skipAnimations:!1},T1=(n,e,t,i={})=>s=>{const r=C1(i,n)||{},o=r.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Gc(o);const l=D9(e,n,t,r),h=l[0],f=l[l.length-1],d=JM(n,h),p=JM(n,f);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...r,delay:-a,onUpdate:v=>{e.set(v),r.onUpdate&&r.onUpdate(v)},onComplete:()=>{s(),r.onComplete&&r.onComplete()}};if(L9(r)||(g={...g,...w9(n,g)}),g.duration&&(g.duration=Gc(g.duration)),g.repeatDelay&&(g.repeatDelay=Gc(g.repeatDelay)),!d||!p||T5.current||r.type===!1||O9.skipAnimations)return A9(g);if(!i.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=_9(e,n,g);if(v)return v}return Xv(g)};function Jv(n){return!!(gs(n)&&n.add)}const L3=n=>/^\-?\d*\.?\d+$/.test(n);function R1(n,e){n.indexOf(e)===-1&&n.push(e)}function B1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class P1{constructor(){this.subscriptions=[]}add(e){return R1(this.subscriptions,e),()=>B1(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const I9=n=>!isNaN(parseFloat(n));class N9{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,s=!0)=>{this.prev=this.current,this.current=i;const{delta:r,timestamp:o}=Bi;this.lastUpdated!==o&&(this.timeDelta=r,this.lastUpdated=o,fn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>fn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=I9(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new P1);const i=this.events[e].add(t);return e==="change"?()=>{i(),fn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?T3(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _f(n,e){return new N9(n,e)}const O3=n=>e=>e.test(n),U9={test:n=>n==="auto",parse:n=>n},I3=[pu,dt,co,Oa,VV,GV,U9],wd=n=>I3.find(O3(n)),F9=[...I3,Ji,fl],z9=n=>F9.find(O3(n));function k9(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,_f(t))}function H9(n,e){const t=k0(n,e);let{transitionEnd:i={},transition:s={},...r}=t?n.makeTargetAnimatable(t,!1):{};r={...r,...i};for(const o in r){const a=s5(r[o]);k9(n,o,a)}}function G9(n,e,t){var i,s;const r=Object.keys(e).filter(a=>!n.hasValue(a)),o=r.length;if(o)for(let a=0;a<o;a++){const l=r[a],h=e[l];let f=null;Array.isArray(h)&&(f=h[0]),f===null&&(f=(s=(i=t[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&s!==void 0?s:e[l]),f!=null&&(typeof f=="string"&&(L3(f)||D3(f))?f=parseFloat(f):!z9(f)&&fl.test(h)&&(f=P3(l,h)),n.addValue(l,_f(f,{owner:n})),t[l]===void 0&&(t[l]=f),f!==null&&n.setBaseTarget(l,f))}}function V9(n,e){return e?(e[n]||e.default||e).from:void 0}function W9(n,e,t){const i={};for(const s in n){const r=V9(s,e);if(r!==void 0)i[s]=r;else{const o=t.getValue(s);o&&(i[s]=o.get())}}return i}function j9({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function X9(n,e){const t=n.get();if(Array.isArray(e)){for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}else return t!==e}function N3(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");i&&(r=i);const h=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const d in a){const p=n.getValue(d),g=a[d];if(!p||g===void 0||f&&j9(f,d))continue;const v={delay:t,elapsed:0,...C1(r||{},d)};if(window.HandoffAppearAnimations){const y=n.getProps()[UI];if(y){const A=window.HandoffAppearAnimations(y,d,p,fn);A!==null&&(v.elapsed=A,v.isHandoff=!0)}}let S=!v.isHandoff&&!X9(p,g);if(v.type==="spring"&&(p.getVelocity()||v.velocity)&&(S=!1),p.animation&&(S=!1),S)continue;p.start(T1(d,p,g,n.shouldReduceMotion&&du.has(d)?{type:!1}:v));const _=p.animation;Jv(l)&&(l.add(d),_.then(()=>l.remove(d))),h.push(_)}return o&&Promise.all(h).then(()=>{o&&H9(n,o)}),h}function KM(n,e,t={}){const i=k0(n,e,t.custom);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const r=i?()=>Promise.all(N3(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:d}=s;return J9(n,e,h+l,f,d,t)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,h]=a==="beforeChildren"?[r,o]:[o,r];return l().then(()=>h())}else return Promise.all([r(),o(t.delay)])}function J9(n,e,t=0,i=0,s=1,r){const o=[],a=(n.variantChildren.size-1)*i,l=s===1?(h=0)=>h*i:(h=0)=>a-h*i;return Array.from(n.variantChildren).sort(Y9).forEach((h,f)=>{h.notify("AnimationStart",e),o.push(KM(h,e,{...r,delay:t+l(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function Y9(n,e){return n.sortNodePosition(e)}function K9(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>KM(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=KM(n,e,t);else{const s=typeof e=="function"?k0(n,e,t.custom):e;i=Promise.all(N3(n,s,t))}return i.then(()=>n.notify("AnimationComplete",e))}const q9=[...d1].reverse(),Q9=d1.length;function Z9(n){return e=>Promise.all(e.map(({animation:t,options:i})=>K9(n,t,i)))}function $9(n){let e=Z9(n);const t=t8();let i=!0;const s=(l,h)=>{const f=k0(n,h);if(f){const{transition:d,transitionEnd:p,...g}=f;l={...l,...g,...p}}return l};function r(l){e=l(n)}function o(l,h){const f=n.getProps(),d=n.getVariantContext(!0)||{},p=[],g=new Set;let v={},S=1/0;for(let y=0;y<Q9;y++){const A=q9[y],M=t[A],E=f[A]!==void 0?f[A]:d[A],R=Np(E),T=A===h?M.isActive:null;T===!1&&(S=y);let B=E===d[A]&&E!==f[A]&&R;if(B&&i&&n.manuallyAnimateOnMount&&(B=!1),M.protectedKeys={...v},!M.isActive&&T===null||!E&&!M.prevProp||N0(E)||typeof E=="boolean")continue;let F=e8(M.prevProp,E)||A===h&&M.isActive&&!B&&R||y>S&&R,C=!1;const D=Array.isArray(E)?E:[E];let te=D.reduce(s,{});T===!1&&(te={});const{prevResolvedValues:$={}}=M,k={...$,...te},q=H=>{F=!0,g.has(H)&&(C=!0,g.delete(H)),M.needsAnimating[H]=!0};for(const H in k){const Y=te[H],V=$[H];if(v.hasOwnProperty(H))continue;let X=!1;Vv(Y)&&Vv(V)?X=!r3(Y,V):X=Y!==V,X?Y!==void 0?q(H):g.add(H):Y!==void 0&&g.has(H)?q(H):M.protectedKeys[H]=!0}M.prevProp=E,M.prevResolvedValues=te,M.isActive&&(v={...v,...te}),i&&n.blockInitialAnimation&&(F=!1),F&&(!B||C)&&p.push(...D.map(H=>({animation:H,options:{type:A,...l}})))}if(g.size){const y={};g.forEach(A=>{const M=n.getBaseTarget(A);M!==void 0&&(y[A]=M)}),p.push({animation:y})}let _=!!p.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(p):Promise.resolve()}function a(l,h,f){var d;if(t[l].isActive===h)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(l,h)}),t[l].isActive=h;const p=o(f,l);for(const g in t)t[g].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>t}}function e8(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!r3(e,n):!1}function Zl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function t8(){return{animate:Zl(!0),whileInView:Zl(),whileHover:Zl(),whileTap:Zl(),whileDrag:Zl(),whileFocus:Zl(),exit:Zl()}}class n8 extends bl{constructor(e){super(e),e.animationState||(e.animationState=$9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),N0(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let i8=0;class s8 extends bl{constructor(){super(...arguments),this.id=i8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const r8={animation:{Feature:n8},exit:{Feature:s8}},S2=(n,e)=>Math.abs(n-e);function o8(n,e){const t=S2(n.x,e.x),i=S2(n.y,e.y);return Math.sqrt(t**2+i**2)}class U3{constructor(e,t,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=wA(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=o8(d.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:v}=d,{timestamp:S}=Bi;this.history.push({...v,timestamp:S});const{onStart:_,onMove:y}=this.handlers;p||(_&&_(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=EA(p,this.transformPagePoint),fn.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=wA(d.type==="pointercancel"?this.lastMoveEventInfo:EA(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,_),v&&v(d,_)},!e3(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.contextWindow=s||window;const o=z0(e),a=EA(o,this.transformPagePoint),{point:l}=a,{timestamp:h}=Bi;this.history=[{...l,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,wA(a,this.history)),this.removeListeners=nl(Ko(this.contextWindow,"pointermove",this.handlePointerMove),Ko(this.contextWindow,"pointerup",this.handlePointerUp),Ko(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ia(this.updatePoint)}}function EA(n,e){return e?{point:e(n.point)}:n}function M2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function wA({point:n},e){return{point:n,delta:M2(n,F3(e)),offset:M2(n,a8(e)),velocity:l8(e,.1)}}function a8(n){return n[0]}function F3(n){return n[n.length-1]}function l8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=F3(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>Gc(e)));)t--;if(!i)return{x:0,y:0};const r=qo(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Fs(n){return n.max-n.min}function qM(n,e=0,t=.01){return Math.abs(n-e)<=t}function b2(n,e,t,i=.5){n.origin=i,n.originPoint=Mn(e.min,e.max,n.origin),n.scale=Fs(t)/Fs(e),(qM(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Mn(t.min,t.max,n.origin)-n.originPoint,(qM(n.translate)||isNaN(n.translate))&&(n.translate=0)}function cp(n,e,t,i){b2(n.x,e.x,t.x,i?i.originX:void 0),b2(n.y,e.y,t.y,i?i.originY:void 0)}function E2(n,e,t){n.min=t.min+e.min,n.max=n.min+Fs(e)}function c8(n,e,t){E2(n.x,e.x,t.x),E2(n.y,e.y,t.y)}function w2(n,e,t){n.min=e.min-t.min,n.max=n.min+Fs(e)}function up(n,e,t){w2(n.x,e.x,t.x),w2(n.y,e.y,t.y)}function u8(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Mn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Mn(t,n,i.max):Math.min(n,t)),n}function C2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function h8(n,{top:e,left:t,bottom:i,right:s}){return{x:C2(n.x,t,s),y:C2(n.y,e,i)}}function T2(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function f8(n,e){return{x:T2(n.x,e.x),y:T2(n.y,e.y)}}function d8(n,e){let t=.5;const i=Fs(n),s=Fs(e);return s>i?t=Fp(e.min,e.max-i,n.min):i>s&&(t=Fp(n.min,n.max-s,e.min)),hl(0,1,t)}function p8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const QM=.35;function m8(n=QM){return n===!1?n=0:n===!0&&(n=QM),{x:R2(n,"left","right"),y:R2(n,"top","bottom")}}function R2(n,e,t){return{min:B2(n,e),max:B2(n,t)}}function B2(n,e){return typeof n=="number"?n:n[e]||0}const P2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fh=()=>({x:P2(),y:P2()}),D2=()=>({min:0,max:0}),jn=()=>({x:D2(),y:D2()});function er(n){return[n("x"),n("y")]}function z3({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function g8({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function y8(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function CA(n){return n===void 0||n===1}function ZM({scale:n,scaleX:e,scaleY:t}){return!CA(n)||!CA(e)||!CA(t)}function yc(n){return ZM(n)||k3(n)||n.z||n.rotate||n.rotateX||n.rotateY}function k3(n){return L2(n.x)||L2(n.y)}function L2(n){return n&&n!=="0%"}function Yv(n,e,t){const i=n-t,s=e*i;return t+s}function O2(n,e,t,i,s){return s!==void 0&&(n=Yv(n,s,i)),Yv(n,t,i)+e}function $M(n,e=0,t=1,i,s){n.min=O2(n.min,e,t,i,s),n.max=O2(n.max,e,t,i,s)}function H3(n,{x:e,y:t}){$M(n.x,e.translate,e.scale,e.originPoint),$M(n.y,t.translate,t.scale,t.originPoint)}function v8(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,o;for(let a=0;a<s;a++){r=t[a],o=r.projectionDelta;const l=r.instance;l&&l.style&&l.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&zh(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,H3(n,o)),i&&yc(r.latestValues)&&zh(n,r.latestValues))}e.x=I2(e.x),e.y=I2(e.y)}function I2(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Ua(n,e){n.min=n.min+e,n.max=n.max+e}function N2(n,e,[t,i,s]){const r=e[s]!==void 0?e[s]:.5,o=Mn(n.min,n.max,r);$M(n,e[t],e[i],o,e.scale)}const x8=["x","scaleX","originX"],_8=["y","scaleY","originY"];function zh(n,e){N2(n.x,e,x8),N2(n.y,e,_8)}function G3(n,e){return z3(y8(n.getBoundingClientRect(),e))}function A8(n,e,t){const i=G3(n,t),{scroll:s}=e;return s&&(Ua(i.x,s.offset.x),Ua(i.y,s.offset.y)),i}const V3=({current:n})=>n?n.ownerDocument.defaultView:null,S8=new WeakMap;class M8{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(z0(f,"page").point)},r=(f,d)=>{const{drag:p,dragPropagation:g,onDragStart:v}=this.getProps();if(p&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=n3(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),er(_=>{let y=this.getAxisMotionValue(_).get()||0;if(co.test(y)){const{projection:A}=this.visualElement;if(A&&A.layout){const M=A.layout.layoutBox[_];M&&(y=Fs(M)*(parseFloat(y)/100))}}this.originPoint[_]=y}),v&&fn.update(()=>v(f,d),!1,!0);const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(f,d)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:v,onDrag:S}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:_}=d;if(g&&this.currentDirection===null){this.currentDirection=b8(_),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,_),this.updateAxis("y",d.point,_),this.visualElement.render(),S&&S(f,d)},a=(f,d)=>this.stop(f,d),l=()=>er(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new U3(e,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:V3(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&fn.update(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!Ng(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=u8(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;t&&Nh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=h8(s.layoutBox,t):this.constraints=!1,this.elastic=m8(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&er(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=p8(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Nh(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=A8(i,s.root,this.visualElement.getTransformPagePoint());let o=f8(s.layout.layoutBox,r);if(t){const a=t(g8(o));this.hasMutatedConstraints=!!a,a&&(o=z3(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},h=er(f=>{if(!Ng(f,t,this.currentDirection))return;let d=l&&l[f]||{};o&&(d={min:0,max:0});const p=s?200:1e6,g=s?40:1e7,v={type:"inertia",velocity:i?e[f]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(f,v)});return Promise.all(h).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(T1(e,i,0,t))}stopAnimation(){er(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){er(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){er(t=>{const{drag:i}=this.getProps();if(!Ng(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[t];r.set(e[t]-Mn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Nh(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};er(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=d8({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),er(o=>{if(!Ng(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:h}=this.constraints[o];a.set(Mn(l,h,s[o]))})}addListeners(){if(!this.visualElement.current)return;S8.set(this.visualElement,this);const e=this.visualElement.current,t=Ko(e,"pointerdown",l=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Nh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),i();const o=Vo(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(er(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),t(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=QM,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function Ng(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function b8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class E8 extends bl{constructor(e){super(e),this.removeGroupControls=kn,this.removeListeners=kn,this.controls=new M8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const U2=n=>(e,t)=>{n&&fn.update(()=>n(e,t))};class w8 extends bl{constructor(){super(...arguments),this.removePointerDownListener=kn}onPointerDown(e){this.session=new U3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:V3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:U2(e),onStart:U2(t),onMove:i,onEnd:(r,o)=>{delete this.session,s&&fn.update(()=>s(r,o))}}}mount(){this.removePointerDownListener=Ko(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function C8(){const n=fe.useContext(h1);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,s=fe.useId();return fe.useEffect(()=>i(s),[]),!e&&t?[!1,()=>t&&t(s)]:[!0]}const nv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function F2(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Cd={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(dt.test(n))n=parseFloat(n);else return n;const t=F2(n,e.target.x),i=F2(n,e.target.y);return`${t}% ${i}%`}},T8={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=fl.parse(n);if(s.length>5)return i;const r=fl.createTransformer(n),o=typeof s[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const h=Mn(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=h),typeof s[3+o]=="number"&&(s[3+o]/=h),r(s)}};class R8 extends io.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;IV(B8),r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),nv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,s||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||fn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function W3(n){const[e,t]=C8(),i=fe.useContext(zI);return io.createElement(R8,{...n,layoutGroup:i,switchLayoutGroup:fe.useContext(kI),isPresent:e,safeToRemove:t})}const B8={borderRadius:{...Cd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cd,borderTopRightRadius:Cd,borderBottomLeftRadius:Cd,borderBottomRightRadius:Cd,boxShadow:T8},j3=["TopLeft","TopRight","BottomLeft","BottomRight"],P8=j3.length,z2=n=>typeof n=="string"?parseFloat(n):n,k2=n=>typeof n=="number"||dt.test(n);function D8(n,e,t,i,s,r){s?(n.opacity=Mn(0,t.opacity!==void 0?t.opacity:1,L8(i)),n.opacityExit=Mn(e.opacity!==void 0?e.opacity:1,0,O8(i))):r&&(n.opacity=Mn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<P8;o++){const a=`border${j3[o]}Radius`;let l=H2(e,a),h=H2(t,a);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||k2(l)===k2(h)?(n[a]=Math.max(Mn(z2(l),z2(h),i),0),(co.test(h)||co.test(l))&&(n[a]+="%")):n[a]=h}(e.rotate||t.rotate)&&(n.rotate=Mn(e.rotate||0,t.rotate||0,i))}function H2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const L8=X3(0,.5,p3),O8=X3(.5,.95,kn);function X3(n,e,t){return i=>i<n?0:i>e?1:t(Fp(n,e,i))}function G2(n,e){n.min=e.min,n.max=e.max}function Qs(n,e){G2(n.x,e.x),G2(n.y,e.y)}function V2(n,e,t,i,s){return n-=e,n=Yv(n,1/t,i),s!==void 0&&(n=Yv(n,1/s,i)),n}function I8(n,e=0,t=1,i=.5,s,r=n,o=n){if(co.test(e)&&(e=parseFloat(e),e=Mn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Mn(r.min,r.max,i);n===r&&(a-=e),n.min=V2(n.min,e,t,a,s),n.max=V2(n.max,e,t,a,s)}function W2(n,e,[t,i,s],r,o){I8(n,e[t],e[i],e[s],e.scale,r,o)}const N8=["x","scaleX","originX"],U8=["y","scaleY","originY"];function j2(n,e,t,i){W2(n.x,e,N8,t?t.x:void 0,i?i.x:void 0),W2(n.y,e,U8,t?t.y:void 0,i?i.y:void 0)}function X2(n){return n.translate===0&&n.scale===1}function J3(n){return X2(n.x)&&X2(n.y)}function F8(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function Y3(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function J2(n){return Fs(n.x)/Fs(n.y)}class z8{constructor(){this.members=[]}add(e){R1(this.members,e),e.scheduleRender()}remove(e){if(B1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Y2(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y;if((s||r)&&(i=`translate3d(${s}px, ${r}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:h,rotateY:f}=t;l&&(i+=`rotate(${l}deg) `),h&&(i+=`rotateX(${h}deg) `),f&&(i+=`rotateY(${f}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const k8=(n,e)=>n.depth-e.depth;class H8{constructor(){this.children=[],this.isDirty=!1}add(e){R1(this.children,e),this.isDirty=!0}remove(e){B1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(k8),this.isDirty=!1,this.children.forEach(e)}}function G8(n,e){const t=performance.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(ia(i),n(r-e))};return fn.read(i,!0),()=>ia(i)}function V8(n){window.MotionDebug&&window.MotionDebug.record(n)}function W8(n){return n instanceof SVGElement&&n.tagName!=="svg"}function j8(n,e,t){const i=gs(n)?n:_f(n);return i.start(T1("",i,e,t)),i.animation}const K2=["","X","Y","Z"],X8={visibility:"hidden"},q2=1e3;let J8=0;const vc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function K3({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=J8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,vc.totalNodes=vc.resolvedTargetDeltas=vc.recalculatedProjection=0,this.nodes.forEach(q8),this.nodes.forEach(t6),this.nodes.forEach(n6),this.nodes.forEach(Q8),V8(vc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new H8)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new P1),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=W8(o),this.instance=o;const{layoutId:l,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(h||l)&&(this.isLayoutDirty=!0),n){let d;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=G8(p,250),nv.hasAnimatedSinceResize&&(nv.hasAnimatedSinceResize=!1,this.nodes.forEach(Z2))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||h)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||f.getDefaultTransition()||a6,{onLayoutAnimationStart:_,onLayoutAnimationComplete:y}=f.getProps(),A=!this.targetLayout||!Y3(this.targetLayout,v)||g,M=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||p&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,M);const E={...C1(S,"layout"),onPlay:_,onComplete:y};(f.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||Z2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ia(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(i6),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Q2);return}this.isUpdating||this.nodes.forEach($8),this.isUpdating=!1,this.nodes.forEach(e6),this.nodes.forEach(Y8),this.nodes.forEach(K8),this.clearAllSnapshots();const a=performance.now();Bi.delta=hl(0,1e3/60,a-Bi.timestamp),Bi.timestamp=a,Bi.isProcessing=!0,yA.update.process(Bi),yA.preRender.process(Bi),yA.render.process(Bi),Bi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Z8),this.sharedNodes.forEach(s6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,fn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){fn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!J3(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&(a||yc(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),l6(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return jn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ua(a.x,l.offset.x),Ua(a.y,l.offset.y)),a}removeElementScroll(o){const a=jn();Qs(a,o);for(let l=0;l<this.path.length;l++){const h=this.path[l],{scroll:f,options:d}=h;if(h!==this.root&&f&&d.layoutScroll){if(f.isRoot){Qs(a,o);const{scroll:p}=this.root;p&&(Ua(a.x,-p.offset.x),Ua(a.y,-p.offset.y))}Ua(a.x,f.offset.x),Ua(a.y,f.offset.y)}}return a}applyTransform(o,a=!1){const l=jn();Qs(l,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&zh(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),yc(f.latestValues)&&zh(l,f.latestValues)}return yc(this.latestValues)&&zh(l,this.latestValues),l}removeTransform(o){const a=jn();Qs(a,o);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!yc(h.latestValues))continue;ZM(h.latestValues)&&h.updateSnapshot();const f=jn(),d=h.measurePageBox();Qs(f,d),j2(a,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return yc(this.latestValues)&&j2(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==l;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=Bi.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),up(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=jn(),this.targetWithTransforms=jn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),c8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qs(this.target,this.layout.layoutBox),H3(this.target,this.targetDelta)):Qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jn(),this.relativeTargetOrigin=jn(),up(this.relativeTargetOrigin,this.target,g.target),Qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}vc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ZM(this.parent.latestValues)||k3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Bi.timestamp&&(h=!1),h)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Qs(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;v8(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=Fh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Fh(),this.projectionDeltaWithTransform=Fh());const S=this.projectionTransform;cp(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=Y2(this.projectionDelta,this.treeScale),(this.projectionTransform!==S||this.treeScale.x!==p||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),vc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,h=l?l.latestValues:{},f={...this.latestValues},d=Fh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=jn(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,S=g!==v,_=this.getStack(),y=!_||_.members.length<=1,A=!!(S&&!y&&this.options.crossfade===!0&&!this.path.some(o6));this.animationProgress=0;let M;this.mixTargetDelta=E=>{const R=E/1e3;$2(d.x,o.x,R),$2(d.y,o.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(up(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),r6(this.relativeTarget,this.relativeTargetOrigin,p,R),M&&F8(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=jn()),Qs(M,this.relativeTarget)),S&&(this.animationValues=f,D8(f,h,this.latestValues,R,A,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ia(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=fn.update(()=>{nv.hasAnimatedSinceResize=!0,this.currentAnimation=j8(0,q2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(q2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:h,latestValues:f}=o;if(!(!a||!l||!h)){if(this!==o&&this.layout&&h&&q3(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||jn();const d=Fs(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=Fs(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Qs(a,l),zh(a,f),cp(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new z8),this.sharedNodes.get(o).add(a);const h=a.options.initialPromotionConfig;a.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const h={};for(let f=0;f<K2.length;f++){const d="rotate"+K2[f];l[d]&&(h[d]=l[d],o.setStaticValue(d,0))}o.render();for(const f in h)o.setStaticValue(f,h[f]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return X8;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=tv(o==null?void 0:o.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=tv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!yc(this.latestValues)&&(S.transform=f?f({},""):"none",this.hasProjected=!1),S}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),h.transform=Y2(this.projectionDeltaWithTransform,this.treeScale,p),f&&(h.transform=f(p,h.transform));const{x:g,y:v}=this.projectionDelta;h.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,d.animationValues?h.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:h.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Hv){if(p[S]===void 0)continue;const{correct:_,applyTo:y}=Hv[S],A=h.transform==="none"?p[S]:_(p[S],d);if(y){const M=y.length;for(let E=0;E<M;E++)h[y[E]]=A}else h[S]=A}return this.options.layoutId&&(h.pointerEvents=d===this?tv(o==null?void 0:o.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Q2),this.root.sharedNodes.clear()}}}function Y8(n){n.updateLayout()}function K8(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=t.source!==n.layout.source;r==="size"?er(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],g=Fs(p);p.min=i[d].min,p.max=p.min+g}):q3(r,t.layoutBox,i)&&er(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],g=Fs(i[d]);p.max=p.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+g)});const a=Fh();cp(a,i,t.layoutBox);const l=Fh();o?cp(l,n.applyTransform(s,!0),t.measuredBox):cp(l,i,t.layoutBox);const h=!J3(a);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const v=jn();up(v,t.layoutBox,p.layoutBox);const S=jn();up(S,i,g.layoutBox),Y3(v,S)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function q8(n){vc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Q8(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Z8(n){n.clearSnapshot()}function Q2(n){n.clearMeasurements()}function $8(n){n.isLayoutDirty=!1}function e6(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Z2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function t6(n){n.resolveTargetDelta()}function n6(n){n.calcProjection()}function i6(n){n.resetRotation()}function s6(n){n.removeLeadSnapshot()}function $2(n,e,t){n.translate=Mn(e.translate,0,t),n.scale=Mn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function eB(n,e,t,i){n.min=Mn(e.min,t.min,i),n.max=Mn(e.max,t.max,i)}function r6(n,e,t,i){eB(n.x,e.x,t.x,i),eB(n.y,e.y,t.y,i)}function o6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const a6={duration:.45,ease:[.4,0,.1,1]},tB=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),nB=tB("applewebkit/")&&!tB("chrome/")?Math.round:kn;function iB(n){n.min=nB(n.min),n.max=nB(n.max)}function l6(n){iB(n.x),iB(n.y)}function q3(n,e,t){return n==="position"||n==="preserve-aspect"&&!qM(J2(e),J2(t),.2)}const c6=K3({attachResizeListener:(n,e)=>Vo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),TA={current:void 0},Q3=K3({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!TA.current){const n=new c6({});n.mount(window),n.setOptions({layoutScroll:!0}),TA.current=n}return TA.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),u6={pan:{Feature:w8},drag:{Feature:E8,ProjectionNode:Q3,MeasureLayout:W3}},h6=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function f6(n){const e=h6.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function eb(n,e,t=1){const[i,s]=f6(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const o=r.trim();return L3(o)?parseFloat(o):o}else return VM(s)?eb(s,e,t+1):s}function d6(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(s=>{const r=s.get();if(!VM(r))return;const o=eb(r,i);o&&s.set(o)});for(const s in e){const r=e[s];if(!VM(r))continue;const o=eb(r,i);o&&(e[s]=o,t||(t={}),t[s]===void 0&&(t[s]=r))}return{target:e,transitionEnd:t}}const p6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Z3=n=>p6.has(n),m6=n=>Object.keys(n).some(Z3),sB=n=>n===pu||n===dt,rB=(n,e)=>parseFloat(n.split(", ")[e]),oB=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/);if(s)return rB(s[1],e);{const r=i.match(/^matrix\((.+)\)$/);return r?rB(r[1],n):0}},g6=new Set(["x","y","z"]),y6=cm.filter(n=>!g6.has(n));function v6(n){const e=[];return y6.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Af={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:oB(4,13),y:oB(5,14)};Af.translateX=Af.x;Af.translateY=Af.y;const x6=(n,e,t)=>{const i=e.measureViewportBox(),s=e.current,r=getComputedStyle(s),{display:o}=r,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{a[h]=Af[h](i,r)}),e.render();const l=e.measureViewportBox();return t.forEach(h=>{const f=e.getValue(h);f&&f.jump(a[h]),n[h]=Af[h](l,r)}),n},_6=(n,e,t={},i={})=>{e={...e},i={...i};const s=Object.keys(e).filter(Z3);let r=[],o=!1;const a=[];if(s.forEach(l=>{const h=n.getValue(l);if(!n.hasValue(l))return;let f=t[l],d=wd(f);const p=e[l];let g;if(Vv(p)){const v=p.length,S=p[0]===null?1:0;f=p[S],d=wd(f);for(let _=S;_<v&&p[_]!==null;_++)g?S1(wd(p[_])===g):g=wd(p[_])}else g=wd(p);if(d!==g)if(sB(d)&&sB(g)){const v=h.get();typeof v=="string"&&h.set(parseFloat(v)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&g===dt&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(f===0||p===0)?f===0?h.set(g.transform(f)):e[l]=d.transform(p):(o||(r=v6(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],h.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,h=x6(e,n,a);return r.length&&r.forEach(([f,d])=>{n.getValue(f).set(d)}),n.render(),I0&&l!==null&&window.scrollTo({top:l}),{target:h,transitionEnd:i}}else return{target:e,transitionEnd:i}};function A6(n,e,t,i){return m6(e)?_6(n,e,t,i):{target:e,transitionEnd:i}}const S6=(n,e,t,i)=>{const s=d6(n,e,i);return e=s.target,i=s.transitionEnd,A6(n,e,t,i)},tb={current:null},$3={current:!1};function M6(){if($3.current=!0,!!I0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>tb.current=n.matches;n.addListener(e),e()}else tb.current=!1}function b6(n,e,t){const{willChange:i}=e;for(const s in e){const r=e[s],o=t[s];if(gs(r))n.addValue(s,r),Jv(i)&&i.add(s);else if(gs(o))n.addValue(s,_f(r,{owner:n})),Jv(i)&&i.remove(s);else if(o!==r)if(n.hasValue(s)){const a=n.getValue(s);!a.hasAnimated&&a.set(r)}else{const a=n.getStaticValue(s);n.addValue(s,_f(a!==void 0?a:r,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const aB=new WeakMap,eN=Object.keys(Up),E6=eN.length,lB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],w6=p1.length;class C6{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>fn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=r;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=U0(t),this.isVariantNode=FI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{});for(const d in f){const p=f[d];a[d]!==void 0&&gs(p)&&(p.set(a[d],!1),Jv(h)&&h.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,aB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),$3.current||M6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){aB.delete(this.current),this.projection&&this.projection.unmount(),ia(this.notifyUpdate),ia(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=du.has(e),s=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&fn.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),r()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,s,r){let o,a;for(let l=0;l<E6;l++){const h=eN[l],{isEnabled:f,Feature:d,ProjectionNode:p,MeasureLayout:g}=Up[h];p&&(o=p),f(t)&&(!this.features[h]&&d&&(this.features[h]=new d(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:h,drag:f,dragConstraints:d,layoutScroll:p,layoutRoot:g}=t;this.projection.setOptions({layoutId:l,layout:h,alwaysMeasureLayout:!!f||d&&Nh(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:r,layoutScroll:p,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<lB.length;i++){const s=lB[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r=e["on"+s];r&&(this.propEventSubscriptions[s]=this.on(s,r))}this.prevMotionValues=b6(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<w6;i++){const s=p1[i],r=this.props[s];(Np(r)||r===!1)&&(t[s]=r)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=_f(t,{owner:this}),this.addValue(e,i)),i}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,s=typeof i=="string"||typeof i=="object"?(t=A1(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!gs(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new P1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class tN extends C6{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},{transformValues:s},r){let o=W9(i,e||{},this);if(s&&(t&&(t=s(t)),i&&(i=s(i)),o&&(o=s(o))),r){G9(this,i,o);const a=S6(this,i,o,t);t=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:t,...i}}}function T6(n){return window.getComputedStyle(n)}class R6 extends tN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(du.has(t)){const i=w1(t);return i&&i.default||0}else{const i=T6(e),s=(VI(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return G3(e,t)}build(e,t,i,s){g1(e,t,i,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return _1(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,s){KI(e,t,i,s)}}class B6 extends tN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(du.has(t)){const i=w1(t);return i&&i.default||0}return t=qI.has(t)?t:f1(t),e.getAttribute(t)}measureInstanceViewportBox(){return jn()}scrapeMotionValuesFromProps(e,t){return ZI(e,t)}build(e,t,i,s){v1(e,t,i,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,i,s){QI(e,t,i,s)}mount(e){this.isSVGTag=x1(e.tagName),super.mount(e)}}const P6=(n,e)=>m1(n)?new B6(e,{enableHardwareAcceleration:!1}):new R6(e,{enableHardwareAcceleration:!0}),D6={layout:{ProjectionNode:Q3,MeasureLayout:W3}},L6={...r8,...E5,...u6,...D6},O6=LV((n,e)=>f5(n,e,L6,P6)),pi={name:"Pallavi Raosaheb Bade",role:"AI/ML Engineer  FullStack  Cloud",tagline:"Designing intelligent systems that think, move, and inspire.",location:"Pune, India",email:"112215037@cse.iiitp.ac.in",phone:"+91 9822918713",links:{github:"https://github.com/PallaviBade28",linkedin:"https://www.linkedin.com/in/pallavi-bade-033411257",leetcode:"https://leetcode.com/u/pallavibade28/",resume:"/resume.pdf"},facts:[{k:"College",v:"IIIT Pune (CSE)"},{k:"CGPA",v:"7.81"},{k:"JEE Adv",v:"AIR 6363"},{k:"PR Wins",v:"1.5L sponsorships"}]},I6=[{org:"Infosys Springboard",title:"Data Science Intern",time:"Mar 2024  Jun 2024  Remote",bullets:["+15% predictive accuracy via ML/DL forecasting models","20% prediction error with timeseries neural networks","Dashboards in Power BI for business insights"]},{org:"Enviro Vertex Enterprises",title:"Industrial Intern",time:"2024",bullets:["Worked with HVLS fans, VFDs, and controllers","Supported setup and performance tuning for VFD systems"]}],N6=[{name:"Avalok  Realtime MultiAgent AI",desc:"Autonomous surveillance on drone streams; detects panic, fire, abnormal motion; intelligent zone alerts; 5s latency.",stack:["Vertex AI","Gemini 2.5","FastAPI","GCP","Firebase","RAG","DeepSORT"],link:"#"},{name:"PCOS Detection + Personalized Diet",desc:"Ensemble CNN + Random Forest (99.33%); web app provides personalized diet/exercise/lifestyle plans.",stack:["TensorFlow","Keras","React","Flask","MySQL"],link:"#"},{name:"Cloud Load Balancing (Metaheuristics)",desc:"Lion, Bat, Butterfly, Crow Search algorithms in CloudSim; improved throughput, energy efficiency; AB load tests.",stack:["Python","Docker","CloudSim","AB"],link:"#"},{name:"EnergyEfficient IDS (WGAN + TL)",desc:"CIC FlowMeter dataset; TabNet + LightGBM + XGBoost + CNN; WGAN pretraining; >99% accuracy with energy/time optimizations.",stack:["TabNet","TensorFlow","Keras","Sklearn"],link:"#"},{name:"Churn Prediction + BI Dashboards",desc:"Churn modeling with feature engineering; Power BI dashboards for retention, trend, and cohort analysis.",stack:["Python","Power BI","Sklearn"],link:"#"},{name:"Hackathon Finder",desc:"Aggregates hackathons with filters (womenonly, sustainability); submission tracker + deadline countdown.",stack:["React","Node","Express","MongoDB","Tailwind"],link:"#"},{name:"AIpowered NGFW (SIH)",desc:"Zero Trust Architecture; deep learning for threat patterns; personabased challenge matrix & compliance visuals.",stack:["Python","TensorFlow","OpenCV","REST"],link:"#"}],U6=["Google Agentic AI 2025  Breakthrough Concept Award (57k+ regs)","Deutsche Bank Scholar","Kiran Buddy Scholar  Persistent Foundation","NTSE Scholar  Cleared 2020","JEE Advanced 2021  AIR 6363","LeetCode: pallavibade28  CodeChef: pallavibade28"],F6=[{role:"Head, Marketing & PR",org:"ECell IIIT Pune",note:"Secured 1.5L sponsorships; boosted participation"},{role:"CoHead",org:"Abhinay (Drama Club)",note:"Led 70+ member team; events & performances"},{role:"Founding Member",org:"Rang Decoration Club",note:"Designed immersive event dcor"}],qu={languages:["Python","C/C++","Java","JavaScript","SQL","HTML/CSS","R"],frameworks:["TensorFlow","Keras","Scikitlearn","FastAPI","React"],cloud:["GCP (Vertex AI, Firestore, Cloud Run)","Docker","Git"],db:["MySQL","MongoDB","Firebase"],concepts:["OOP","DSA","DBMS","REST APIs","Agentic AI","RAG","System Design"],tools:["VS Code","Power BI","Tableau","Apache","CloudSim"]};var nN={exports:{}},El={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */El.ConcurrentRoot=1;El.ContinuousEventPriority=8;El.DefaultEventPriority=32;El.DiscreteEventPriority=2;El.IdleEventPriority=268435456;El.LegacyRoot=0;El.NoEventPriority=0;nN.exports=El;var iv=nN.exports;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const dm="161",xc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},_c={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},iN=0,nb=1,sN=2,z6=3,rN=0,H0=1,hp=2,wr=3,go=0,es=1,rr=2,Qo=0,Vc=1,ib=2,sb=3,rb=4,oN=5,ka=100,aN=101,lN=102,ob=103,ab=104,cN=200,uN=201,hN=202,fN=203,Kv=204,qv=205,dN=206,pN=207,mN=208,gN=209,yN=210,vN=211,xN=212,_N=213,AN=214,SN=0,MN=1,bN=2,zp=3,EN=4,wN=5,CN=6,TN=7,pm=0,RN=1,BN=2,uo=0,PN=1,DN=2,LN=3,D1=4,ON=5,IN=6,lb="attached",NN="detached",G0=300,sa=301,dl=302,kp=303,Hp=304,Ff=306,pl=1e3,mi=1001,Sf=1002,Ln=1003,Gp=1004,k6=1004,Ha=1005,H6=1005,un=1006,nf=1007,G6=1007,lr=1008,V6=1008,ho=1009,UN=1010,FN=1011,V0=1012,L1=1013,Wo=1014,or=1015,Mf=1016,O1=1017,I1=1018,il=1020,zN=1021,qi=1023,kN=1024,HN=1025,sl=1026,eu=1027,GN=1028,N1=1029,VN=1030,U1=1031,F1=1033,sv=33776,rv=33777,ov=33778,av=33779,cb=35840,ub=35841,hb=35842,fb=35843,z1=36196,db=37492,pb=37496,mb=37808,gb=37809,yb=37810,vb=37811,xb=37812,_b=37813,Ab=37814,Sb=37815,Mb=37816,bb=37817,Eb=37818,wb=37819,Cb=37820,Tb=37821,lv=36492,Rb=36494,Bb=36495,WN=36283,Pb=36284,Db=36285,Lb=36286,jN=2200,XN=2201,JN=2202,bf=2300,tu=2301,cv=2302,Pc=2400,Dc=2401,Vp=2402,W0=2500,k1=2501,YN=0,H1=1,Qv=2,G1=3e3,rl=3001,KN=3200,qN=3201,wl=0,QN=1,Bs="",Fn="srgb",Ur="srgb-linear",j0="display-p3",mm="display-p3-linear",Wp="linear",nn="srgb",jp="rec709",Xp="p3",W6=0,Ac=7680,j6=7681,X6=7682,J6=7683,Y6=34055,K6=34056,q6=5386,Q6=512,Z6=513,$6=514,eW=515,tW=516,nW=517,iW=518,Ob=519,ZN=512,$N=513,eU=514,V1=515,tU=516,nU=517,iU=518,sU=519,Jp=35044,sW=35048,rW=35040,oW=35045,aW=35049,lW=35041,cW=35046,uW=35050,hW=35042,fW="100",Ib="300 es",Zv=1035,so=2e3,Yp=2001;let la=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}};const Ci=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let cB=1234567;const Wc=Math.PI/180,Ef=180/Math.PI;function Is(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ci[n&255]+Ci[n>>8&255]+Ci[n>>16&255]+Ci[n>>24&255]+"-"+Ci[e&255]+Ci[e>>8&255]+"-"+Ci[e>>16&15|64]+Ci[e>>24&255]+"-"+Ci[t&63|128]+Ci[t>>8&255]+"-"+Ci[t>>16&255]+Ci[t>>24&255]+Ci[i&255]+Ci[i>>8&255]+Ci[i>>16&255]+Ci[i>>24&255]).toLowerCase()}function On(n,e,t){return Math.max(e,Math.min(t,n))}function W1(n,e){return(n%e+e)%e}function dW(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function pW(n,e,t){return n!==e?(t-n)/(e-n):0}function fp(n,e,t){return(1-t)*n+t*e}function mW(n,e,t,i){return fp(n,e,1-Math.exp(-t*i))}function gW(n,e=1){return e-Math.abs(W1(n,e*2)-e)}function yW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function vW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function xW(n,e){return n+Math.floor(Math.random()*(e-n+1))}function _W(n,e){return n+Math.random()*(e-n)}function AW(n){return n*(.5-Math.random())}function SW(n){n!==void 0&&(cB=n);let e=cB+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function MW(n){return n*Wc}function bW(n){return n*Ef}function Nb(n){return(n&n-1)===0&&n!==0}function EW(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function $v(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function wW(n,e,t,i,s){const r=Math.cos,o=Math.sin,a=r(t/2),l=o(t/2),h=r((e+i)/2),f=o((e+i)/2),d=r((e-i)/2),p=o((e-i)/2),g=r((i-e)/2),v=o((i-e)/2);switch(s){case"XYX":n.set(a*f,l*d,l*p,a*h);break;case"YZY":n.set(l*p,a*f,l*d,a*h);break;case"ZXZ":n.set(l*d,l*p,a*f,a*h);break;case"XZX":n.set(a*f,l*v,l*g,a*h);break;case"YXY":n.set(l*g,a*f,l*v,a*h);break;case"ZYZ":n.set(l*v,l*g,a*f,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Qi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function St(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const rU={DEG2RAD:Wc,RAD2DEG:Ef,generateUUID:Is,clamp:On,euclideanModulo:W1,mapLinear:dW,inverseLerp:pW,lerp:fp,damp:mW,pingpong:gW,smoothstep:yW,smootherstep:vW,randInt:xW,randFloat:_W,randFloatSpread:AW,seededRandom:SW,degToRad:MW,radToDeg:bW,isPowerOfTwo:Nb,ceilPowerOfTwo:EW,floorPowerOfTwo:$v,setQuaternionFromProperEuler:wW,normalize:St,denormalize:Qi};class pe{constructor(e=0,t=0){pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(On(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(e,t,i,s,r,o,a,l,h){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,h)}set(e,t,i,s,r,o,a,l,h){const f=this.elements;return f[0]=e,f[1]=s,f[2]=a,f[3]=t,f[4]=r,f[5]=l,f[6]=i,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[3],l=i[6],h=i[1],f=i[4],d=i[7],p=i[2],g=i[5],v=i[8],S=s[0],_=s[3],y=s[6],A=s[1],M=s[4],E=s[7],R=s[2],T=s[5],B=s[8];return r[0]=o*S+a*A+l*R,r[3]=o*_+a*M+l*T,r[6]=o*y+a*E+l*B,r[1]=h*S+f*A+d*R,r[4]=h*_+f*M+d*T,r[7]=h*y+f*E+d*B,r[2]=p*S+g*A+v*R,r[5]=p*_+g*M+v*T,r[8]=p*y+g*E+v*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],h=e[7],f=e[8];return t*o*f-t*a*h-i*r*f+i*a*l+s*r*h-s*o*l}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],h=e[7],f=e[8],d=f*o-a*h,p=a*l-f*r,g=h*r-o*l,v=t*d+i*p+s*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/v;return e[0]=d*S,e[1]=(s*h-f*i)*S,e[2]=(a*i-s*o)*S,e[3]=p*S,e[4]=(f*t-s*l)*S,e[5]=(s*r-a*t)*S,e[6]=g*S,e[7]=(i*l-h*t)*S,e[8]=(o*t-i*r)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,o,a){const l=Math.cos(r),h=Math.sin(r);return this.set(i*l,i*h,-i*(l*o+h*a)+o+e,-s*h,s*l,-s*(-h*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(RA.makeScale(e,t)),this}rotate(e){return this.premultiply(RA.makeRotation(-e)),this}translate(e,t){return this.premultiply(RA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const RA=new wt;function oU(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const CW={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kh(n,e){return new CW[n](e)}function Kp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function aU(){const n=Kp("canvas");return n.style.display="block",n}const uB={};function jc(n){n in uB||(uB[n]=!0,console.warn(n))}const hB=new wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),fB=new wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ug={[Ur]:{transfer:Wp,primaries:jp,toReference:n=>n,fromReference:n=>n},[Fn]:{transfer:nn,primaries:jp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[mm]:{transfer:Wp,primaries:Xp,toReference:n=>n.applyMatrix3(fB),fromReference:n=>n.applyMatrix3(hB)},[j0]:{transfer:nn,primaries:Xp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(fB),fromReference:n=>n.applyMatrix3(hB).convertLinearToSRGB()}},TW=new Set([Ur,mm]),Xt={enabled:!0,_workingColorSpace:Ur,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!TW.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Ug[e].toReference,s=Ug[t].fromReference;return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Ug[n].primaries},getTransfer:function(n){return n===Bs?Wp:Ug[n].transfer}};function sf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function BA(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Qu;class j1{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Qu===void 0&&(Qu=Kp("canvas")),Qu.width=e.width,Qu.height=e.height;const i=Qu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Qu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Kp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=sf(r[o]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(sf(t[i]/255)*255):t[i]=sf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let RW=0;class Lc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:RW++}),this.uuid=Is(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(PA(s[o].image)):r.push(PA(s[o]))}else r=PA(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function PA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?j1.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let BW=0;class xn extends la{constructor(e=xn.DEFAULT_IMAGE,t=xn.DEFAULT_MAPPING,i=mi,s=mi,r=un,o=lr,a=qi,l=ho,h=xn.DEFAULT_ANISOTROPY,f=Bs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:BW++}),this.uuid=Is(),this.name="",this.source=new Lc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=h,this.format=a,this.internalFormat=null,this.type=l,this.offset=new pe(0,0),this.repeat=new pe(1,1),this.center=new pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof f=="string"?this.colorSpace=f:(jc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===rl?Fn:Bs),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==G0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pl:e.x=e.x-Math.floor(e.x);break;case mi:e.x=e.x<0?0:1;break;case Sf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case pl:e.y=e.y-Math.floor(e.y);break;case mi:e.y=e.y<0?0:1;break;case Sf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return jc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Fn?rl:G1}set encoding(e){jc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===rl?Fn:Bs}}xn.DEFAULT_IMAGE=null;xn.DEFAULT_MAPPING=G0;xn.DEFAULT_ANISOTROPY=1;class Yt{constructor(e=0,t=0,i=0,s=1){Yt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const l=e.elements,h=l[0],f=l[4],d=l[8],p=l[1],g=l[5],v=l[9],S=l[2],_=l[6],y=l[10];if(Math.abs(f-p)<.01&&Math.abs(d-S)<.01&&Math.abs(v-_)<.01){if(Math.abs(f+p)<.1&&Math.abs(d+S)<.1&&Math.abs(v+_)<.1&&Math.abs(h+g+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(h+1)/2,E=(g+1)/2,R=(y+1)/2,T=(f+p)/4,B=(d+S)/4,L=(v+_)/4;return M>E&&M>R?M<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(M),s=T/i,r=B/i):E>R?E<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(E),i=T/s,r=L/s):R<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(R),i=B/r,s=L/r),this.set(i,s,r,t),this}let A=Math.sqrt((_-v)*(_-v)+(d-S)*(d-S)+(p-f)*(p-f));return Math.abs(A)<.001&&(A=1),this.x=(_-v)/A,this.y=(d-S)/A,this.z=(p-f)/A,this.w=Math.acos((h+g+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lU extends la{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yt(0,0,e,t),this.scissorTest=!1,this.viewport=new Yt(0,0,e,t);const s={width:e,height:t,depth:1};i.encoding!==void 0&&(jc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===rl?Fn:Bs),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:un,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new xn(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Lc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fr extends lU{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class X0 extends xn{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Ln,this.minFilter=Ln,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class PW extends Fr{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new X0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class X1 extends xn{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Ln,this.minFilter=Ln,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class DW extends Fr{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new X1(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class LW extends Fr{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=r.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.texture.length;s<r;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class li{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,o,a){let l=i[s+0],h=i[s+1],f=i[s+2],d=i[s+3];const p=r[o+0],g=r[o+1],v=r[o+2],S=r[o+3];if(a===0){e[t+0]=l,e[t+1]=h,e[t+2]=f,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=g,e[t+2]=v,e[t+3]=S;return}if(d!==S||l!==p||h!==g||f!==v){let _=1-a;const y=l*p+h*g+f*v+d*S,A=y>=0?1:-1,M=1-y*y;if(M>Number.EPSILON){const R=Math.sqrt(M),T=Math.atan2(R,y*A);_=Math.sin(_*T)/R,a=Math.sin(a*T)/R}const E=a*A;if(l=l*_+p*E,h=h*_+g*E,f=f*_+v*E,d=d*_+S*E,_===1-a){const R=1/Math.sqrt(l*l+h*h+f*f+d*d);l*=R,h*=R,f*=R,d*=R}}e[t]=l,e[t+1]=h,e[t+2]=f,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,s,r,o){const a=i[s],l=i[s+1],h=i[s+2],f=i[s+3],d=r[o],p=r[o+1],g=r[o+2],v=r[o+3];return e[t]=a*v+f*d+l*g-h*p,e[t+1]=l*v+f*p+h*d-a*g,e[t+2]=h*v+f*g+a*p-l*d,e[t+3]=f*v-a*d-l*p-h*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,h=a(i/2),f=a(s/2),d=a(r/2),p=l(i/2),g=l(s/2),v=l(r/2);switch(o){case"XYZ":this._x=p*f*d+h*g*v,this._y=h*g*d-p*f*v,this._z=h*f*v+p*g*d,this._w=h*f*d-p*g*v;break;case"YXZ":this._x=p*f*d+h*g*v,this._y=h*g*d-p*f*v,this._z=h*f*v-p*g*d,this._w=h*f*d+p*g*v;break;case"ZXY":this._x=p*f*d-h*g*v,this._y=h*g*d+p*f*v,this._z=h*f*v+p*g*d,this._w=h*f*d-p*g*v;break;case"ZYX":this._x=p*f*d-h*g*v,this._y=h*g*d+p*f*v,this._z=h*f*v-p*g*d,this._w=h*f*d+p*g*v;break;case"YZX":this._x=p*f*d+h*g*v,this._y=h*g*d+p*f*v,this._z=h*f*v-p*g*d,this._w=h*f*d-p*g*v;break;case"XZY":this._x=p*f*d-h*g*v,this._y=h*g*d-p*f*v,this._z=h*f*v+p*g*d,this._w=h*f*d+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],h=t[2],f=t[6],d=t[10],p=i+a+d;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-l)*g,this._y=(r-h)*g,this._z=(o-s)*g}else if(i>a&&i>d){const g=2*Math.sqrt(1+i-a-d);this._w=(f-l)/g,this._x=.25*g,this._y=(s+o)/g,this._z=(r+h)/g}else if(a>d){const g=2*Math.sqrt(1+a-i-d);this._w=(r-h)/g,this._x=(s+o)/g,this._y=.25*g,this._z=(l+f)/g}else{const g=2*Math.sqrt(1+d-i-a);this._w=(o-s)/g,this._x=(r+h)/g,this._y=(l+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(On(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,h=t._z,f=t._w;return this._x=i*f+o*a+s*h-r*l,this._y=s*f+o*l+r*a-i*h,this._z=r*f+o*h+i*l-s*a,this._w=o*f-i*a-s*l-r*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*s+t*this._y,this._z=g*r+t*this._z,this.normalize(),this}const h=Math.sqrt(l),f=Math.atan2(h,a),d=Math.sin((1-t)*f)/h,p=Math.sin(t*f)/h;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=s*d+this._y*p,this._z=r*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(r),i*Math.cos(r),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class U{constructor(e=0,t=0,i=0){U.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(dB.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(dB.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,h=2*(o*s-a*i),f=2*(a*t-r*s),d=2*(r*i-o*t);return this.x=t+l*h+o*d-a*f,this.y=i+l*f+a*h-r*d,this.z=s+l*d+r*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return DA.copy(this).projectOnVector(e),this.sub(DA)}reflect(e){return this.sub(DA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(On(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const DA=new U,dB=new li;class Oi{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ar.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ar.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ar.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ar):Ar.fromBufferAttribute(r,o),Ar.applyMatrix4(e.matrixWorld),this.expandByPoint(Ar);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Fg.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Fg.copy(i.boundingBox)),Fg.applyMatrix4(e.matrixWorld),this.union(Fg)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ar),Ar.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Td),zg.subVectors(this.max,Td),Zu.subVectors(e.a,Td),$u.subVectors(e.b,Td),eh.subVectors(e.c,Td),Ea.subVectors($u,Zu),wa.subVectors(eh,$u),$l.subVectors(Zu,eh);let t=[0,-Ea.z,Ea.y,0,-wa.z,wa.y,0,-$l.z,$l.y,Ea.z,0,-Ea.x,wa.z,0,-wa.x,$l.z,0,-$l.x,-Ea.y,Ea.x,0,-wa.y,wa.x,0,-$l.y,$l.x,0];return!LA(t,Zu,$u,eh,zg)||(t=[1,0,0,0,1,0,0,0,1],!LA(t,Zu,$u,eh,zg))?!1:(kg.crossVectors(Ea,wa),t=[kg.x,kg.y,kg.z],LA(t,Zu,$u,eh,zg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ar).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ar).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ro[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ro[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ro[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ro[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ro[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ro[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ro[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ro[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ro),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ro=[new U,new U,new U,new U,new U,new U,new U,new U],Ar=new U,Fg=new Oi,Zu=new U,$u=new U,eh=new U,Ea=new U,wa=new U,$l=new U,Td=new U,zg=new U,kg=new U,ec=new U;function LA(n,e,t,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){ec.fromArray(n,r);const a=s.x*Math.abs(ec.x)+s.y*Math.abs(ec.y)+s.z*Math.abs(ec.z),l=e.dot(ec),h=t.dot(ec),f=i.dot(ec);if(Math.max(-Math.max(l,h,f),Math.min(l,h,f))>a)return!1}return!0}const OW=new Oi,Rd=new U,OA=new U;class vi{constructor(e=new U,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):OW.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rd.subVectors(e,this.center);const t=Rd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(Rd,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(OA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rd.copy(e.center).add(OA)),this.expandByPoint(Rd.copy(e.center).sub(OA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Bo=new U,IA=new U,Hg=new U,Ca=new U,NA=new U,Gg=new U,UA=new U;class mu{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Bo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Bo.copy(this.origin).addScaledVector(this.direction,t),Bo.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){IA.copy(e).add(t).multiplyScalar(.5),Hg.copy(t).sub(e).normalize(),Ca.copy(this.origin).sub(IA);const r=e.distanceTo(t)*.5,o=-this.direction.dot(Hg),a=Ca.dot(this.direction),l=-Ca.dot(Hg),h=Ca.lengthSq(),f=Math.abs(1-o*o);let d,p,g,v;if(f>0)if(d=o*l-a,p=o*a-l,v=r*f,d>=0)if(p>=-v)if(p<=v){const S=1/f;d*=S,p*=S,g=d*(d+o*p+2*a)+p*(o*d+p+2*l)+h}else p=r,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*l)+h;else p=-r,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*l)+h;else p<=-v?(d=Math.max(0,-(-o*r+a)),p=d>0?-r:Math.min(Math.max(-r,-l),r),g=-d*d+p*(p+2*l)+h):p<=v?(d=0,p=Math.min(Math.max(-r,-l),r),g=p*(p+2*l)+h):(d=Math.max(0,-(o*r+a)),p=d>0?r:Math.min(Math.max(-r,-l),r),g=-d*d+p*(p+2*l)+h);else p=o>0?-r:r,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*l)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(IA).addScaledVector(Hg,p),g}intersectSphere(e,t){Bo.subVectors(e.center,this.origin);const i=Bo.dot(this.direction),s=Bo.dot(Bo)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,o,a,l;const h=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,p=this.origin;return h>=0?(i=(e.min.x-p.x)*h,s=(e.max.x-p.x)*h):(i=(e.max.x-p.x)*h,s=(e.min.x-p.x)*h),f>=0?(r=(e.min.y-p.y)*f,o=(e.max.y-p.y)*f):(r=(e.max.y-p.y)*f,o=(e.min.y-p.y)*f),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,Bo)!==null}intersectTriangle(e,t,i,s,r){NA.subVectors(t,e),Gg.subVectors(i,e),UA.crossVectors(NA,Gg);let o=this.direction.dot(UA),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ca.subVectors(this.origin,e);const l=a*this.direction.dot(Gg.crossVectors(Ca,Gg));if(l<0)return null;const h=a*this.direction.dot(NA.cross(Ca));if(h<0||l+h>o)return null;const f=-a*Ca.dot(UA);return f<0?null:this.at(f/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ut{constructor(e,t,i,s,r,o,a,l,h,f,d,p,g,v,S,_){ut.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,h,f,d,p,g,v,S,_)}set(e,t,i,s,r,o,a,l,h,f,d,p,g,v,S,_){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=s,y[1]=r,y[5]=o,y[9]=a,y[13]=l,y[2]=h,y[6]=f,y[10]=d,y[14]=p,y[3]=g,y[7]=v,y[11]=S,y[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ut().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/th.setFromMatrixColumn(e,0).length(),r=1/th.setFromMatrixColumn(e,1).length(),o=1/th.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),h=Math.sin(s),f=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const p=o*f,g=o*d,v=a*f,S=a*d;t[0]=l*f,t[4]=-l*d,t[8]=h,t[1]=g+v*h,t[5]=p-S*h,t[9]=-a*l,t[2]=S-p*h,t[6]=v+g*h,t[10]=o*l}else if(e.order==="YXZ"){const p=l*f,g=l*d,v=h*f,S=h*d;t[0]=p+S*a,t[4]=v*a-g,t[8]=o*h,t[1]=o*d,t[5]=o*f,t[9]=-a,t[2]=g*a-v,t[6]=S+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*f,g=l*d,v=h*f,S=h*d;t[0]=p-S*a,t[4]=-o*d,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*f,t[9]=S-p*a,t[2]=-o*h,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*f,g=o*d,v=a*f,S=a*d;t[0]=l*f,t[4]=v*h-g,t[8]=p*h+S,t[1]=l*d,t[5]=S*h+p,t[9]=g*h-v,t[2]=-h,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,g=o*h,v=a*l,S=a*h;t[0]=l*f,t[4]=S-p*d,t[8]=v*d+g,t[1]=d,t[5]=o*f,t[9]=-a*f,t[2]=-h*f,t[6]=g*d+v,t[10]=p-S*d}else if(e.order==="XZY"){const p=o*l,g=o*h,v=a*l,S=a*h;t[0]=l*f,t[4]=-d,t[8]=h*f,t[1]=p*d+S,t[5]=o*f,t[9]=g*d-v,t[2]=v*d-g,t[6]=a*f,t[10]=S*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IW,e,NW)}lookAt(e,t,i){const s=this.elements;return Cs.subVectors(e,t),Cs.lengthSq()===0&&(Cs.z=1),Cs.normalize(),Ta.crossVectors(i,Cs),Ta.lengthSq()===0&&(Math.abs(i.z)===1?Cs.x+=1e-4:Cs.z+=1e-4,Cs.normalize(),Ta.crossVectors(i,Cs)),Ta.normalize(),Vg.crossVectors(Cs,Ta),s[0]=Ta.x,s[4]=Vg.x,s[8]=Cs.x,s[1]=Ta.y,s[5]=Vg.y,s[9]=Cs.y,s[2]=Ta.z,s[6]=Vg.z,s[10]=Cs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[4],l=i[8],h=i[12],f=i[1],d=i[5],p=i[9],g=i[13],v=i[2],S=i[6],_=i[10],y=i[14],A=i[3],M=i[7],E=i[11],R=i[15],T=s[0],B=s[4],L=s[8],F=s[12],C=s[1],D=s[5],te=s[9],$=s[13],k=s[2],q=s[6],H=s[10],Y=s[14],V=s[3],X=s[7],J=s[11],K=s[15];return r[0]=o*T+a*C+l*k+h*V,r[4]=o*B+a*D+l*q+h*X,r[8]=o*L+a*te+l*H+h*J,r[12]=o*F+a*$+l*Y+h*K,r[1]=f*T+d*C+p*k+g*V,r[5]=f*B+d*D+p*q+g*X,r[9]=f*L+d*te+p*H+g*J,r[13]=f*F+d*$+p*Y+g*K,r[2]=v*T+S*C+_*k+y*V,r[6]=v*B+S*D+_*q+y*X,r[10]=v*L+S*te+_*H+y*J,r[14]=v*F+S*$+_*Y+y*K,r[3]=A*T+M*C+E*k+R*V,r[7]=A*B+M*D+E*q+R*X,r[11]=A*L+M*te+E*H+R*J,r[15]=A*F+M*$+E*Y+R*K,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],h=e[13],f=e[2],d=e[6],p=e[10],g=e[14],v=e[3],S=e[7],_=e[11],y=e[15];return v*(+r*l*d-s*h*d-r*a*p+i*h*p+s*a*g-i*l*g)+S*(+t*l*g-t*h*p+r*o*p-s*o*g+s*h*f-r*l*f)+_*(+t*h*d-t*a*g-r*o*d+i*o*g+r*a*f-i*h*f)+y*(-s*a*f-t*l*d+t*a*p+s*o*d-i*o*p+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],h=e[7],f=e[8],d=e[9],p=e[10],g=e[11],v=e[12],S=e[13],_=e[14],y=e[15],A=d*_*h-S*p*h+S*l*g-a*_*g-d*l*y+a*p*y,M=v*p*h-f*_*h-v*l*g+o*_*g+f*l*y-o*p*y,E=f*S*h-v*d*h+v*a*g-o*S*g-f*a*y+o*d*y,R=v*d*l-f*S*l-v*a*p+o*S*p+f*a*_-o*d*_,T=t*A+i*M+s*E+r*R;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/T;return e[0]=A*B,e[1]=(S*p*r-d*_*r-S*s*g+i*_*g+d*s*y-i*p*y)*B,e[2]=(a*_*r-S*l*r+S*s*h-i*_*h-a*s*y+i*l*y)*B,e[3]=(d*l*r-a*p*r-d*s*h+i*p*h+a*s*g-i*l*g)*B,e[4]=M*B,e[5]=(f*_*r-v*p*r+v*s*g-t*_*g-f*s*y+t*p*y)*B,e[6]=(v*l*r-o*_*r-v*s*h+t*_*h+o*s*y-t*l*y)*B,e[7]=(o*p*r-f*l*r+f*s*h-t*p*h-o*s*g+t*l*g)*B,e[8]=E*B,e[9]=(v*d*r-f*S*r-v*i*g+t*S*g+f*i*y-t*d*y)*B,e[10]=(o*S*r-v*a*r+v*i*h-t*S*h-o*i*y+t*a*y)*B,e[11]=(f*a*r-o*d*r-f*i*h+t*d*h+o*i*g-t*a*g)*B,e[12]=R*B,e[13]=(f*S*s-v*d*s+v*i*p-t*S*p-f*i*_+t*d*_)*B,e[14]=(v*a*s-o*S*s-v*i*l+t*S*l+o*i*_-t*a*_)*B,e[15]=(o*d*s-f*a*s+f*i*l-t*d*l-o*i*p+t*a*p)*B,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,o=e.x,a=e.y,l=e.z,h=r*o,f=r*a;return this.set(h*o+i,h*a-s*l,h*l+s*a,0,h*a+s*l,f*a+i,f*l-s*o,0,h*l-s*a,f*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,h=r+r,f=o+o,d=a+a,p=r*h,g=r*f,v=r*d,S=o*f,_=o*d,y=a*d,A=l*h,M=l*f,E=l*d,R=i.x,T=i.y,B=i.z;return s[0]=(1-(S+y))*R,s[1]=(g+E)*R,s[2]=(v-M)*R,s[3]=0,s[4]=(g-E)*T,s[5]=(1-(p+y))*T,s[6]=(_+A)*T,s[7]=0,s[8]=(v+M)*B,s[9]=(_-A)*B,s[10]=(1-(p+S))*B,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=th.set(s[0],s[1],s[2]).length();const o=th.set(s[4],s[5],s[6]).length(),a=th.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Sr.copy(this);const h=1/r,f=1/o,d=1/a;return Sr.elements[0]*=h,Sr.elements[1]*=h,Sr.elements[2]*=h,Sr.elements[4]*=f,Sr.elements[5]*=f,Sr.elements[6]*=f,Sr.elements[8]*=d,Sr.elements[9]*=d,Sr.elements[10]*=d,t.setFromRotationMatrix(Sr),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,s,r,o,a=so){const l=this.elements,h=2*r/(t-e),f=2*r/(i-s),d=(t+e)/(t-e),p=(i+s)/(i-s);let g,v;if(a===so)g=-(o+r)/(o-r),v=-2*o*r/(o-r);else if(a===Yp)g=-o/(o-r),v=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=h,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,s,r,o,a=so){const l=this.elements,h=1/(t-e),f=1/(i-s),d=1/(o-r),p=(t+e)*h,g=(i+s)*f;let v,S;if(a===so)v=(o+r)*d,S=-2*d;else if(a===Yp)v=r*d,S=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*h,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=S,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const th=new U,Sr=new ut,IW=new U(0,0,0),NW=new U(1,1,1),Ta=new U,Vg=new U,Cs=new U,pB=new ut,mB=new li;class gm{constructor(e=0,t=0,i=0,s=gm.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],h=s[5],f=s[9],d=s[2],p=s[6],g=s[10];switch(t){case"XYZ":this._y=Math.asin(On(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(p,h),this._z=0);break;case"YXZ":this._x=Math.asin(-On(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(On(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,g),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-On(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(On(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-On(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,h),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return pB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(pB,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return mB.setFromEuler(this),this.setFromQuaternion(mB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gm.DEFAULT_ORDER="XYZ";class wf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let UW=0;const gB=new U,nh=new li,Po=new ut,Wg=new U,Bd=new U,FW=new U,zW=new li,yB=new U(1,0,0),vB=new U(0,1,0),xB=new U(0,0,1),kW={type:"added"},HW={type:"removed"};class zt extends la{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:UW++}),this.uuid=Is(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zt.DEFAULT_UP.clone();const e=new U,t=new gm,i=new li,s=new U(1,1,1);function r(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ut},normalMatrix:{value:new wt}}),this.matrix=new ut,this.matrixWorld=new ut,this.matrixAutoUpdate=zt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new wf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return nh.setFromAxisAngle(e,t),this.quaternion.multiply(nh),this}rotateOnWorldAxis(e,t){return nh.setFromAxisAngle(e,t),this.quaternion.premultiply(nh),this}rotateX(e){return this.rotateOnAxis(yB,e)}rotateY(e){return this.rotateOnAxis(vB,e)}rotateZ(e){return this.rotateOnAxis(xB,e)}translateOnAxis(e,t){return gB.copy(e).applyQuaternion(this.quaternion),this.position.add(gB.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(yB,e)}translateY(e){return this.translateOnAxis(vB,e)}translateZ(e){return this.translateOnAxis(xB,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Po.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Wg.copy(e):Wg.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Bd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Po.lookAt(Bd,Wg,this.up):Po.lookAt(Wg,Bd,this.up),this.quaternion.setFromRotationMatrix(Po),s&&(Po.extractRotation(s.matrixWorld),nh.setFromRotationMatrix(Po),this.quaternion.premultiply(nh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(kW)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(HW)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Po.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Po.multiply(e.parent.matrixWorld)),e.applyMatrix4(Po),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bd,e,FW),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bd,zW,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++){const r=t[i];(r.matrixWorldAutoUpdate===!0||e===!0)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++){const a=s[r];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let h=0,f=l.length;h<f;h++){const d=l[h];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,h=this.material.length;l<h;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),h=o(e.textures),f=o(e.images),d=o(e.shapes),p=o(e.skeletons),g=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),h.length>0&&(i.textures=h),f.length>0&&(i.images=f),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),g.length>0&&(i.animations=g),v.length>0&&(i.nodes=v)}return i.object=s,i;function o(a){const l=[];for(const h in a){const f=a[h];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}zt.DEFAULT_UP=new U(0,1,0);zt.DEFAULT_MATRIX_AUTO_UPDATE=!0;zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Mr=new U,Do=new U,FA=new U,Lo=new U,ih=new U,sh=new U,_B=new U,zA=new U,kA=new U,HA=new U;class Ps{constructor(e=new U,t=new U,i=new U){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Mr.subVectors(e,t),s.cross(Mr);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){Mr.subVectors(s,t),Do.subVectors(i,t),FA.subVectors(e,t);const o=Mr.dot(Mr),a=Mr.dot(Do),l=Mr.dot(FA),h=Do.dot(Do),f=Do.dot(FA),d=o*h-a*a;if(d===0)return r.set(0,0,0),null;const p=1/d,g=(h*l-a*f)*p,v=(o*f-a*l)*p;return r.set(1-g-v,v,g)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,Lo)===null?!1:Lo.x>=0&&Lo.y>=0&&Lo.x+Lo.y<=1}static getInterpolation(e,t,i,s,r,o,a,l){return this.getBarycoord(e,t,i,s,Lo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,Lo.x),l.addScaledVector(o,Lo.y),l.addScaledVector(a,Lo.z),l)}static isFrontFacing(e,t,i,s){return Mr.subVectors(i,t),Do.subVectors(e,t),Mr.cross(Do).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Mr.subVectors(this.c,this.b),Do.subVectors(this.a,this.b),Mr.cross(Do).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ps.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ps.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return Ps.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return Ps.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ps.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let o,a;ih.subVectors(s,i),sh.subVectors(r,i),zA.subVectors(e,i);const l=ih.dot(zA),h=sh.dot(zA);if(l<=0&&h<=0)return t.copy(i);kA.subVectors(e,s);const f=ih.dot(kA),d=sh.dot(kA);if(f>=0&&d<=f)return t.copy(s);const p=l*d-f*h;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(ih,o);HA.subVectors(e,r);const g=ih.dot(HA),v=sh.dot(HA);if(v>=0&&g<=v)return t.copy(r);const S=g*h-l*v;if(S<=0&&h>=0&&v<=0)return a=h/(h-v),t.copy(i).addScaledVector(sh,a);const _=f*v-g*d;if(_<=0&&d-f>=0&&g-v>=0)return _B.subVectors(r,s),a=(d-f)/(d-f+(g-v)),t.copy(s).addScaledVector(_B,a);const y=1/(_+S+p);return o=S*y,a=p*y,t.copy(i).addScaledVector(ih,o).addScaledVector(sh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const cU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ra={h:0,s:0,l:0},jg={h:0,s:0,l:0};function GA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class He{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Fn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Xt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Xt.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Xt.workingColorSpace){if(e=W1(e,1),t=On(t,0,1),i=On(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,o=2*i-r;this.r=GA(o,r,e+1/3),this.g=GA(o,r,e),this.b=GA(o,r,e-1/3)}return Xt.toWorkingColorSpace(this,s),this}setStyle(e,t=Fn){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Fn){const i=cU[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=sf(e.r),this.g=sf(e.g),this.b=sf(e.b),this}copyLinearToSRGB(e){return this.r=BA(e.r),this.g=BA(e.g),this.b=BA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Fn){return Xt.fromWorkingColorSpace(Ti.copy(this),e),Math.round(On(Ti.r*255,0,255))*65536+Math.round(On(Ti.g*255,0,255))*256+Math.round(On(Ti.b*255,0,255))}getHexString(e=Fn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xt.workingColorSpace){Xt.fromWorkingColorSpace(Ti.copy(this),t);const i=Ti.r,s=Ti.g,r=Ti.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let l,h;const f=(a+o)/2;if(a===o)l=0,h=0;else{const d=o-a;switch(h=f<=.5?d/(o+a):d/(2-o-a),o){case i:l=(s-r)/d+(s<r?6:0);break;case s:l=(r-i)/d+2;break;case r:l=(i-s)/d+4;break}l/=6}return e.h=l,e.s=h,e.l=f,e}getRGB(e,t=Xt.workingColorSpace){return Xt.fromWorkingColorSpace(Ti.copy(this),t),e.r=Ti.r,e.g=Ti.g,e.b=Ti.b,e}getStyle(e=Fn){Xt.fromWorkingColorSpace(Ti.copy(this),e);const t=Ti.r,i=Ti.g,s=Ti.b;return e!==Fn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(Ra),this.setHSL(Ra.h+e,Ra.s+t,Ra.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ra),e.getHSL(jg);const i=fp(Ra.h,jg.h,t),s=fp(Ra.s,jg.s,t),r=fp(Ra.l,jg.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ti=new He;He.NAMES=cU;let GW=0;class Qn extends la{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:GW++}),this.uuid=Is(),this.name="",this.type="Material",this.blending=Vc,this.side=go,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Kv,this.blendDst=qv,this.blendEquation=ka,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new He(0,0,0),this.blendAlpha=0,this.depthFunc=zp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ob,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ac,this.stencilZFail=Ac,this.stencilZPass=Ac,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Vc&&(i.blending=this.blending),this.side!==go&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Kv&&(i.blendSrc=this.blendSrc),this.blendDst!==qv&&(i.blendDst=this.blendDst),this.blendEquation!==ka&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==zp&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Ob&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ac&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ac&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ac&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ls extends Qn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ko=VW();function VW(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const h=l-127;h<-27?(i[l]=0,i[l|256]=32768,s[l]=24,s[l|256]=24):h<-14?(i[l]=1024>>-h-14,i[l|256]=1024>>-h-14|32768,s[l]=-h-1,s[l|256]=-h-1):h<=15?(i[l]=h+15<<10,i[l|256]=h+15<<10|32768,s[l]=13,s[l|256]=13):h<128?(i[l]=31744,i[l|256]=64512,s[l]=24,s[l|256]=24):(i[l]=31744,i[l|256]=64512,s[l]=13,s[l|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let h=l<<13,f=0;for(;!(h&8388608);)h<<=1,f-=8388608;h&=-8388609,f+=947912704,r[l]=h|f}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:r,exponentTable:o,offsetTable:a}}function cs(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=On(n,-65504,65504),ko.floatView[0]=n;const e=ko.uint32View[0],t=e>>23&511;return ko.baseTable[t]+((e&8388607)>>ko.shiftTable[t])}function qd(n){const e=n>>10;return ko.uint32View[0]=ko.mantissaTable[ko.offsetTable[e]+(n&1023)]+ko.exponentTable[e],ko.floatView[0]}const WW={toHalfFloat:cs,fromHalfFloat:qd},Wn=new U,Xg=new pe;class kt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Jp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=or,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return jc("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Xg.fromBufferAttribute(this,t),Xg.applyMatrix3(e),this.setXY(t,Xg.x,Xg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Wn.fromBufferAttribute(this,t),Wn.applyMatrix3(e),this.setXYZ(t,Wn.x,Wn.y,Wn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Wn.fromBufferAttribute(this,t),Wn.applyMatrix4(e),this.setXYZ(t,Wn.x,Wn.y,Wn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Wn.fromBufferAttribute(this,t),Wn.applyNormalMatrix(e),this.setXYZ(t,Wn.x,Wn.y,Wn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Wn.fromBufferAttribute(this,t),Wn.transformDirection(e),this.setXYZ(t,Wn.x,Wn.y,Wn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Qi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=St(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Qi(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Qi(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Qi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Qi(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),s=St(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),s=St(s,this.array),r=St(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Jp&&(e.usage=this.usage),e}}class jW extends kt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class XW extends kt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class JW extends kt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class YW extends kt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class J1 extends kt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class KW extends kt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Y1 extends kt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class qW extends kt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=qd(this.array[e*this.itemSize]);return this.normalized&&(t=Qi(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=cs(t),this}getY(e){let t=qd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Qi(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=cs(t),this}getZ(e){let t=qd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Qi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=cs(t),this}getW(e){let t=qd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Qi(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=cs(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=cs(t),this.array[e+1]=cs(i),this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),s=St(s,this.array)),this.array[e+0]=cs(t),this.array[e+1]=cs(i),this.array[e+2]=cs(s),this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),s=St(s,this.array),r=St(r,this.array)),this.array[e+0]=cs(t),this.array[e+1]=cs(i),this.array[e+2]=cs(s),this.array[e+3]=cs(r),this}}class nt extends kt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class QW extends kt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let ZW=0;const Zs=new ut,VA=new zt,rh=new U,Ts=new Oi,Pd=new Oi,si=new U;class Mt extends la{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ZW++}),this.uuid=Is(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(oU(e)?Y1:J1)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new wt().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zs.makeRotationFromQuaternion(e),this.applyMatrix4(Zs),this}rotateX(e){return Zs.makeRotationX(e),this.applyMatrix4(Zs),this}rotateY(e){return Zs.makeRotationY(e),this.applyMatrix4(Zs),this}rotateZ(e){return Zs.makeRotationZ(e),this.applyMatrix4(Zs),this}translate(e,t,i){return Zs.makeTranslation(e,t,i),this.applyMatrix4(Zs),this}scale(e,t,i){return Zs.makeScale(e,t,i),this.applyMatrix4(Zs),this}lookAt(e){return VA.lookAt(e),VA.updateMatrix(),this.applyMatrix4(VA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rh).negate(),this.translate(rh.x,rh.y,rh.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new nt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Oi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];Ts.setFromBufferAttribute(r),this.morphTargetsRelative?(si.addVectors(this.boundingBox.min,Ts.min),this.boundingBox.expandByPoint(si),si.addVectors(this.boundingBox.max,Ts.max),this.boundingBox.expandByPoint(si)):(this.boundingBox.expandByPoint(Ts.min),this.boundingBox.expandByPoint(Ts.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new U,1/0);return}if(e){const i=this.boundingSphere.center;if(Ts.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];Pd.setFromBufferAttribute(a),this.morphTargetsRelative?(si.addVectors(Ts.min,Pd.min),Ts.expandByPoint(si),si.addVectors(Ts.max,Pd.max),Ts.expandByPoint(si)):(Ts.expandByPoint(Pd.min),Ts.expandByPoint(Pd.max))}Ts.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)si.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(si));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let h=0,f=a.count;h<f;h++)si.fromBufferAttribute(a,h),l&&(rh.fromBufferAttribute(e,h),si.add(rh)),s=Math.max(s,i.distanceToSquared(si))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,s=t.position.array,r=t.normal.array,o=t.uv.array,a=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,h=[],f=[];for(let C=0;C<a;C++)h[C]=new U,f[C]=new U;const d=new U,p=new U,g=new U,v=new pe,S=new pe,_=new pe,y=new U,A=new U;function M(C,D,te){d.fromArray(s,C*3),p.fromArray(s,D*3),g.fromArray(s,te*3),v.fromArray(o,C*2),S.fromArray(o,D*2),_.fromArray(o,te*2),p.sub(d),g.sub(d),S.sub(v),_.sub(v);const $=1/(S.x*_.y-_.x*S.y);isFinite($)&&(y.copy(p).multiplyScalar(_.y).addScaledVector(g,-S.y).multiplyScalar($),A.copy(g).multiplyScalar(S.x).addScaledVector(p,-_.x).multiplyScalar($),h[C].add(y),h[D].add(y),h[te].add(y),f[C].add(A),f[D].add(A),f[te].add(A))}let E=this.groups;E.length===0&&(E=[{start:0,count:i.length}]);for(let C=0,D=E.length;C<D;++C){const te=E[C],$=te.start,k=te.count;for(let q=$,H=$+k;q<H;q+=3)M(i[q+0],i[q+1],i[q+2])}const R=new U,T=new U,B=new U,L=new U;function F(C){B.fromArray(r,C*3),L.copy(B);const D=h[C];R.copy(D),R.sub(B.multiplyScalar(B.dot(D))).normalize(),T.crossVectors(L,D);const $=T.dot(f[C])<0?-1:1;l[C*4]=R.x,l[C*4+1]=R.y,l[C*4+2]=R.z,l[C*4+3]=$}for(let C=0,D=E.length;C<D;++C){const te=E[C],$=te.start,k=te.count;for(let q=$,H=$+k;q<H;q+=3)F(i[q+0]),F(i[q+1]),F(i[q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new kt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const s=new U,r=new U,o=new U,a=new U,l=new U,h=new U,f=new U,d=new U;if(e)for(let p=0,g=e.count;p<g;p+=3){const v=e.getX(p+0),S=e.getX(p+1),_=e.getX(p+2);s.fromBufferAttribute(t,v),r.fromBufferAttribute(t,S),o.fromBufferAttribute(t,_),f.subVectors(o,r),d.subVectors(s,r),f.cross(d),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,S),h.fromBufferAttribute(i,_),a.add(f),l.add(f),h.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(_,h.x,h.y,h.z)}else for(let p=0,g=t.count;p<g;p+=3)s.fromBufferAttribute(t,p+0),r.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),f.subVectors(o,r),d.subVectors(s,r),f.cross(d),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)si.fromBufferAttribute(e,t),si.normalize(),e.setXYZ(t,si.x,si.y,si.z)}toNonIndexed(){function e(a,l){const h=a.array,f=a.itemSize,d=a.normalized,p=new h.constructor(l.length*f);let g=0,v=0;for(let S=0,_=l.length;S<_;S++){a.isInterleavedBufferAttribute?g=l[S]*a.data.stride+a.offset:g=l[S]*f;for(let y=0;y<f;y++)p[v++]=h[g++]}return new kt(p,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mt,i=this.index.array,s=this.attributes;for(const a in s){const l=s[a],h=e(l,i);t.setAttribute(a,h)}const r=this.morphAttributes;for(const a in r){const l=[],h=r[a];for(let f=0,d=h.length;f<d;f++){const p=h[f],g=e(p,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const h=o[a];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const h in l)l[h]!==void 0&&(e[h]=l[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const h=i[l];e.data.attributes[l]=h.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const h=this.morphAttributes[l],f=[];for(let d=0,p=h.length;d<p;d++){const g=h[d];f.push(g.toJSON(e.data))}f.length>0&&(s[l]=f,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const h in s){const f=s[h];this.setAttribute(h,f.clone(t))}const r=e.morphAttributes;for(const h in r){const f=[],d=r[h];for(let p=0,g=d.length;p<g;p++)f.push(d[p].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h<f;h++){const d=o[h];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const AB=new ut,tc=new mu,Jg=new vi,SB=new U,oh=new U,ah=new U,lh=new U,WA=new U,Yg=new U,Kg=new pe,qg=new pe,Qg=new pe,MB=new U,bB=new U,EB=new U,Zg=new U,$g=new U;class Hn extends zt{constructor(e=new Mt,t=new Ls){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(r&&a){Yg.set(0,0,0);for(let l=0,h=r.length;l<h;l++){const f=a[l],d=r[l];f!==0&&(WA.fromBufferAttribute(d,e),o?Yg.addScaledVector(WA,f):Yg.addScaledVector(WA.sub(t),f))}t.add(Yg)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Jg.copy(i.boundingSphere),Jg.applyMatrix4(r),tc.copy(e.ray).recast(e.near),!(Jg.containsPoint(tc.origin)===!1&&(tc.intersectSphere(Jg,SB)===null||tc.origin.distanceToSquared(SB)>(e.far-e.near)**2))&&(AB.copy(r).invert(),tc.copy(e.ray).applyMatrix4(AB),!(i.boundingBox!==null&&tc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,tc)))}_computeIntersections(e,t,i){let s;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,h=r.attributes.uv,f=r.attributes.uv1,d=r.attributes.normal,p=r.groups,g=r.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,S=p.length;v<S;v++){const _=p[v],y=o[_.materialIndex],A=Math.max(_.start,g.start),M=Math.min(a.count,Math.min(_.start+_.count,g.start+g.count));for(let E=A,R=M;E<R;E+=3){const T=a.getX(E),B=a.getX(E+1),L=a.getX(E+2);s=ey(this,y,e,i,h,f,d,T,B,L),s&&(s.faceIndex=Math.floor(E/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else{const v=Math.max(0,g.start),S=Math.min(a.count,g.start+g.count);for(let _=v,y=S;_<y;_+=3){const A=a.getX(_),M=a.getX(_+1),E=a.getX(_+2);s=ey(this,o,e,i,h,f,d,A,M,E),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,S=p.length;v<S;v++){const _=p[v],y=o[_.materialIndex],A=Math.max(_.start,g.start),M=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let E=A,R=M;E<R;E+=3){const T=E,B=E+1,L=E+2;s=ey(this,y,e,i,h,f,d,T,B,L),s&&(s.faceIndex=Math.floor(E/3),s.face.materialIndex=_.materialIndex,t.push(s))}}else{const v=Math.max(0,g.start),S=Math.min(l.count,g.start+g.count);for(let _=v,y=S;_<y;_+=3){const A=_,M=_+1,E=_+2;s=ey(this,o,e,i,h,f,d,A,M,E),s&&(s.faceIndex=Math.floor(_/3),t.push(s))}}}}function $W(n,e,t,i,s,r,o,a){let l;if(e.side===es?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side===go,a),l===null)return null;$g.copy(a),$g.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo($g);return h<t.near||h>t.far?null:{distance:h,point:$g.clone(),object:n}}function ey(n,e,t,i,s,r,o,a,l,h){n.getVertexPosition(a,oh),n.getVertexPosition(l,ah),n.getVertexPosition(h,lh);const f=$W(n,e,t,i,oh,ah,lh,Zg);if(f){s&&(Kg.fromBufferAttribute(s,a),qg.fromBufferAttribute(s,l),Qg.fromBufferAttribute(s,h),f.uv=Ps.getInterpolation(Zg,oh,ah,lh,Kg,qg,Qg,new pe)),r&&(Kg.fromBufferAttribute(r,a),qg.fromBufferAttribute(r,l),Qg.fromBufferAttribute(r,h),f.uv1=Ps.getInterpolation(Zg,oh,ah,lh,Kg,qg,Qg,new pe),f.uv2=f.uv1),o&&(MB.fromBufferAttribute(o,a),bB.fromBufferAttribute(o,l),EB.fromBufferAttribute(o,h),f.normal=Ps.getInterpolation(Zg,oh,ah,lh,MB,bB,EB,new U),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const d={a,b:l,c:h,normal:new U,materialIndex:0};Ps.getNormal(oh,ah,lh,d.normal),f.face=d}return f}class gu extends Mt{constructor(e=1,t=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],h=[],f=[],d=[];let p=0,g=0;v("z","y","x",-1,-1,i,t,e,o,r,0),v("z","y","x",1,-1,i,t,-e,o,r,1),v("x","z","y",1,1,e,i,t,s,o,2),v("x","z","y",1,-1,e,i,-t,s,o,3),v("x","y","z",1,-1,e,t,i,s,r,4),v("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new nt(h,3)),this.setAttribute("normal",new nt(f,3)),this.setAttribute("uv",new nt(d,2));function v(S,_,y,A,M,E,R,T,B,L,F){const C=E/B,D=R/L,te=E/2,$=R/2,k=T/2,q=B+1,H=L+1;let Y=0,V=0;const X=new U;for(let J=0;J<H;J++){const K=J*D-$;for(let ae=0;ae<q;ae++){const Be=ae*C-te;X[S]=Be*A,X[_]=K*M,X[y]=k,h.push(X.x,X.y,X.z),X[S]=0,X[_]=0,X[y]=T>0?1:-1,f.push(X.x,X.y,X.z),d.push(ae/B),d.push(1-J/L),Y+=1}}for(let J=0;J<L;J++)for(let K=0;K<B;K++){const ae=p+K+q*J,Be=p+K+q*(J+1),Q=p+(K+1)+q*(J+1),de=p+(K+1)+q*J;l.push(ae,Be,de),l.push(Be,Q,de),V+=6}a.addGroup(g,V,F),g+=V,p+=Y}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Cf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function Xi(n){const e={};for(let t=0;t<n.length;t++){const i=Cf(n[t]);for(const s in i)e[s]=i[s]}return e}function ej(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function uU(n){return n.getRenderTarget()===null?n.outputColorSpace:Xt.workingColorSpace}const hU={clone:Cf,merge:Xi};var tj=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,nj=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class zr extends Qn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=tj,this.fragmentShader=nj,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Cf(e.uniforms),this.uniformsGroups=ej(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class J0 extends zt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ut,this.projectionMatrix=new ut,this.projectionMatrixInverse=new ut,this.coordinateSystem=so}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ba=new U,wB=new pe,CB=new pe;class vn extends J0{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ef*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Wc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ef*2*Math.atan(Math.tan(Wc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ba.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ba.x,Ba.y).multiplyScalar(-e/Ba.z),Ba.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ba.x,Ba.y).multiplyScalar(-e/Ba.z)}getViewSize(e,t){return this.getViewBounds(e,wB,CB),t.subVectors(CB,wB)}setViewOffset(e,t,i,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Wc*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,h=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*i/h,s*=o.width/l,i*=o.height/h}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ch=-90,uh=1;class fU extends zt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new vn(ch,uh,e,t);s.layers=this.layers,this.add(s);const r=new vn(ch,uh,e,t);r.layers=this.layers,this.add(r);const o=new vn(ch,uh,e,t);o.layers=this.layers,this.add(o);const a=new vn(ch,uh,e,t);a.layers=this.layers,this.add(a);const l=new vn(ch,uh,e,t);l.layers=this.layers,this.add(l);const h=new vn(ch,uh,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,o,a,l]=t;for(const h of t)this.remove(h);if(e===so)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Yp)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,l,h,f]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,o),e.setRenderTarget(i,2,s),e.render(t,a),e.setRenderTarget(i,3,s),e.render(t,l),e.setRenderTarget(i,4,s),e.render(t,h),i.texture.generateMipmaps=S,e.setRenderTarget(i,5,s),e.render(t,f),e.setRenderTarget(d,p,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class ym extends xn{constructor(e,t,i,s,r,o,a,l,h,f){e=e!==void 0?e:[],t=t!==void 0?t:sa,super(e,t,i,s,r,o,a,l,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class dU extends Fr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];t.encoding!==void 0&&(jc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===rl?Fn:Bs),this.texture=new ym(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:un}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new gu(5,5,5),r=new zr({name:"CubemapFromEquirect",uniforms:Cf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:es,blending:Qo});r.uniforms.tEquirect.value=t;const o=new Hn(s,r),a=t.minFilter;return t.minFilter===lr&&(t.minFilter=un),new fU(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,s);e.setRenderTarget(r)}}const jA=new U,ij=new U,sj=new wt;class zo{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=jA.subVectors(i,t).cross(ij.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(jA),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||sj.getNormalMatrix(e),s=this.coplanarPoint(jA).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const nc=new vi,ty=new U;class vm{constructor(e=new zo,t=new zo,i=new zo,s=new zo,r=new zo,o=new zo){this.planes=[e,t,i,s,r,o]}set(e,t,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=so){const i=this.planes,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],h=s[4],f=s[5],d=s[6],p=s[7],g=s[8],v=s[9],S=s[10],_=s[11],y=s[12],A=s[13],M=s[14],E=s[15];if(i[0].setComponents(l-r,p-h,_-g,E-y).normalize(),i[1].setComponents(l+r,p+h,_+g,E+y).normalize(),i[2].setComponents(l+o,p+f,_+v,E+A).normalize(),i[3].setComponents(l-o,p-f,_-v,E-A).normalize(),i[4].setComponents(l-a,p-d,_-S,E-M).normalize(),t===so)i[5].setComponents(l+a,p+d,_+S,E+M).normalize();else if(t===Yp)i[5].setComponents(a,d,S,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),nc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),nc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(nc)}intersectsSprite(e){return nc.center.set(0,0,0),nc.radius=.7071067811865476,nc.applyMatrix4(e.matrixWorld),this.intersectsSphere(nc)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(ty.x=s.normal.x>0?e.max.x:e.min.x,ty.y=s.normal.y>0?e.max.y:e.min.y,ty.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(ty)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function pU(){let n=null,e=!1,t=null,i=null;function s(r,o){t(r,o),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function rj(n,e){const t=e.isWebGL2,i=new WeakMap;function s(h,f){const d=h.array,p=h.usage,g=d.byteLength,v=n.createBuffer();n.bindBuffer(f,v),n.bufferData(f,d,p),h.onUploadCallback();let S;if(d instanceof Float32Array)S=n.FLOAT;else if(d instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)S=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else S=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)S=n.SHORT;else if(d instanceof Uint32Array)S=n.UNSIGNED_INT;else if(d instanceof Int32Array)S=n.INT;else if(d instanceof Int8Array)S=n.BYTE;else if(d instanceof Uint8Array)S=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)S=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:S,bytesPerElement:d.BYTES_PER_ELEMENT,version:h.version,size:g}}function r(h,f,d){const p=f.array,g=f._updateRange,v=f.updateRanges;if(n.bindBuffer(d,h),g.count===-1&&v.length===0&&n.bufferSubData(d,0,p),v.length!==0){for(let S=0,_=v.length;S<_;S++){const y=v[S];t?n.bufferSubData(d,y.start*p.BYTES_PER_ELEMENT,p,y.start,y.count):n.bufferSubData(d,y.start*p.BYTES_PER_ELEMENT,p.subarray(y.start,y.start+y.count))}f.clearUpdateRanges()}g.count!==-1&&(t?n.bufferSubData(d,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):n.bufferSubData(d,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1),f.onUploadCallback()}function o(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function a(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=i.get(h);f&&(n.deleteBuffer(f.buffer),i.delete(h))}function l(h,f){if(h.isGLBufferAttribute){const p=i.get(h);(!p||p.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const d=i.get(h);if(d===void 0)i.set(h,s(h,f));else if(d.version<h.version){if(d.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(d.buffer,h,f),d.version=h.version}}return{get:o,remove:a,update:l}}class zf extends Mt{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(i),l=Math.floor(s),h=a+1,f=l+1,d=e/a,p=t/l,g=[],v=[],S=[],_=[];for(let y=0;y<f;y++){const A=y*p-o;for(let M=0;M<h;M++){const E=M*d-r;v.push(E,-A,0),S.push(0,0,1),_.push(M/a),_.push(1-y/l)}}for(let y=0;y<l;y++)for(let A=0;A<a;A++){const M=A+h*y,E=A+h*(y+1),R=A+1+h*(y+1),T=A+1+h*y;g.push(M,E,T),g.push(E,R,T)}this.setIndex(g),this.setAttribute("position",new nt(v,3)),this.setAttribute("normal",new nt(S,3)),this.setAttribute("uv",new nt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zf(e.width,e.height,e.widthSegments,e.heightSegments)}}var oj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,aj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,lj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,cj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,hj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,dj=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,pj=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,mj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,gj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,yj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,vj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,_j=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Aj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Sj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Mj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,bj=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ej=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,wj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Cj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Tj=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Rj=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Bj=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Pj=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Dj=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Lj=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Oj=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Ij=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Nj="gl_FragColor = linearToOutputTexel( gl_FragColor );",Uj=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Fj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zj=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kj=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Hj=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Gj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Vj=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Wj=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,jj=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Xj=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Jj=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Yj=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Kj=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,qj=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Qj=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Zj=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$j=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,eX=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,tX=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nX=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iX=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,sX=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,rX=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,oX=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,aX=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,cX=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,uX=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hX=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,fX=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,dX=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pX=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gX=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yX=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,vX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,xX=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,_X=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,AX=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,SX=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,MX=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,bX=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,EX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,CX=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,TX=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,RX=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,BX=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,PX=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,DX=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,LX=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,OX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,IX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,NX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,UX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,FX=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,kX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,HX=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,GX=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,VX=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,WX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,jX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,XX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,JX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,YX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,KX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,qX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,QX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ZX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,$X=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,e7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,t7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,n7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,i7=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,s7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const r7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,o7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,a7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,l7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,c7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,u7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,h7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,f7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,d7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,p7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,m7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,g7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,y7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,v7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,x7=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,_7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,M7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,b7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,w7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,C7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,R7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,B7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,P7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,D7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,L7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,O7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,I7=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,N7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,U7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,F7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Et={alphahash_fragment:oj,alphahash_pars_fragment:aj,alphamap_fragment:lj,alphamap_pars_fragment:cj,alphatest_fragment:uj,alphatest_pars_fragment:hj,aomap_fragment:fj,aomap_pars_fragment:dj,batching_pars_vertex:pj,batching_vertex:mj,begin_vertex:gj,beginnormal_vertex:yj,bsdfs:vj,iridescence_fragment:xj,bumpmap_pars_fragment:_j,clipping_planes_fragment:Aj,clipping_planes_pars_fragment:Sj,clipping_planes_pars_vertex:Mj,clipping_planes_vertex:bj,color_fragment:Ej,color_pars_fragment:wj,color_pars_vertex:Cj,color_vertex:Tj,common:Rj,cube_uv_reflection_fragment:Bj,defaultnormal_vertex:Pj,displacementmap_pars_vertex:Dj,displacementmap_vertex:Lj,emissivemap_fragment:Oj,emissivemap_pars_fragment:Ij,colorspace_fragment:Nj,colorspace_pars_fragment:Uj,envmap_fragment:Fj,envmap_common_pars_fragment:zj,envmap_pars_fragment:kj,envmap_pars_vertex:Hj,envmap_physical_pars_fragment:$j,envmap_vertex:Gj,fog_vertex:Vj,fog_pars_vertex:Wj,fog_fragment:jj,fog_pars_fragment:Xj,gradientmap_pars_fragment:Jj,lightmap_fragment:Yj,lightmap_pars_fragment:Kj,lights_lambert_fragment:qj,lights_lambert_pars_fragment:Qj,lights_pars_begin:Zj,lights_toon_fragment:eX,lights_toon_pars_fragment:tX,lights_phong_fragment:nX,lights_phong_pars_fragment:iX,lights_physical_fragment:sX,lights_physical_pars_fragment:rX,lights_fragment_begin:oX,lights_fragment_maps:aX,lights_fragment_end:lX,logdepthbuf_fragment:cX,logdepthbuf_pars_fragment:uX,logdepthbuf_pars_vertex:hX,logdepthbuf_vertex:fX,map_fragment:dX,map_pars_fragment:pX,map_particle_fragment:mX,map_particle_pars_fragment:gX,metalnessmap_fragment:yX,metalnessmap_pars_fragment:vX,morphcolor_vertex:xX,morphnormal_vertex:_X,morphtarget_pars_vertex:AX,morphtarget_vertex:SX,normal_fragment_begin:MX,normal_fragment_maps:bX,normal_pars_fragment:EX,normal_pars_vertex:wX,normal_vertex:CX,normalmap_pars_fragment:TX,clearcoat_normal_fragment_begin:RX,clearcoat_normal_fragment_maps:BX,clearcoat_pars_fragment:PX,iridescence_pars_fragment:DX,opaque_fragment:LX,packing:OX,premultiplied_alpha_fragment:IX,project_vertex:NX,dithering_fragment:UX,dithering_pars_fragment:FX,roughnessmap_fragment:zX,roughnessmap_pars_fragment:kX,shadowmap_pars_fragment:HX,shadowmap_pars_vertex:GX,shadowmap_vertex:VX,shadowmask_pars_fragment:WX,skinbase_vertex:jX,skinning_pars_vertex:XX,skinning_vertex:JX,skinnormal_vertex:YX,specularmap_fragment:KX,specularmap_pars_fragment:qX,tonemapping_fragment:QX,tonemapping_pars_fragment:ZX,transmission_fragment:$X,transmission_pars_fragment:e7,uv_pars_fragment:t7,uv_pars_vertex:n7,uv_vertex:i7,worldpos_vertex:s7,background_vert:r7,background_frag:o7,backgroundCube_vert:a7,backgroundCube_frag:l7,cube_vert:c7,cube_frag:u7,depth_vert:h7,depth_frag:f7,distanceRGBA_vert:d7,distanceRGBA_frag:p7,equirect_vert:m7,equirect_frag:g7,linedashed_vert:y7,linedashed_frag:v7,meshbasic_vert:x7,meshbasic_frag:_7,meshlambert_vert:A7,meshlambert_frag:S7,meshmatcap_vert:M7,meshmatcap_frag:b7,meshnormal_vert:E7,meshnormal_frag:w7,meshphong_vert:C7,meshphong_frag:T7,meshphysical_vert:R7,meshphysical_frag:B7,meshtoon_vert:P7,meshtoon_frag:D7,points_vert:L7,points_frag:O7,shadow_vert:I7,shadow_frag:N7,sprite_vert:U7,sprite_frag:F7},Ie={common:{diffuse:{value:new He(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new He(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new He(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new He(16777215)},opacity:{value:1},center:{value:new pe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}}},Br={basic:{uniforms:Xi([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:Xi([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new He(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:Xi([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new He(0)},specular:{value:new He(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:Xi([Ie.common,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.roughnessmap,Ie.metalnessmap,Ie.fog,Ie.lights,{emissive:{value:new He(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:Xi([Ie.common,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.gradientmap,Ie.fog,Ie.lights,{emissive:{value:new He(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:Xi([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:Xi([Ie.points,Ie.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:Xi([Ie.common,Ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:Xi([Ie.common,Ie.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:Xi([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:Xi([Ie.sprite,Ie.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Et.backgroundCube_vert,fragmentShader:Et.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:Xi([Ie.common,Ie.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:Xi([Ie.lights,Ie.fog,{color:{value:new He(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};Br.physical={uniforms:Xi([Br.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new pe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new He(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new He(0)},specularColor:{value:new He(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt},anisotropyVector:{value:new pe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wt}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};const ny={r:0,b:0,g:0};function z7(n,e,t,i,s,r,o){const a=new He(0);let l=r===!0?0:1,h,f,d=null,p=0,g=null;function v(_,y){let A=!1,M=y.isScene===!0?y.background:null;M&&M.isTexture&&(M=(y.backgroundBlurriness>0?t:e).get(M)),M===null?S(a,l):M&&M.isColor&&(S(M,1),A=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),M&&(M.isCubeTexture||M.mapping===Ff)?(f===void 0&&(f=new Hn(new gu(1,1,1),new zr({name:"BackgroundCubeMaterial",uniforms:Cf(Br.backgroundCube.uniforms),vertexShader:Br.backgroundCube.vertexShader,fragmentShader:Br.backgroundCube.fragmentShader,side:es,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(R,T,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(f)),f.material.uniforms.envMap.value=M,f.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,f.material.toneMapped=Xt.getTransfer(M.colorSpace)!==nn,(d!==M||p!==M.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,d=M,p=M.version,g=n.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null)):M&&M.isTexture&&(h===void 0&&(h=new Hn(new zf(2,2),new zr({name:"BackgroundMaterial",uniforms:Cf(Br.background.uniforms),vertexShader:Br.background.vertexShader,fragmentShader:Br.background.fragmentShader,side:go,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(h)),h.material.uniforms.t2D.value=M,h.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,h.material.toneMapped=Xt.getTransfer(M.colorSpace)!==nn,M.matrixAutoUpdate===!0&&M.updateMatrix(),h.material.uniforms.uvTransform.value.copy(M.matrix),(d!==M||p!==M.version||g!==n.toneMapping)&&(h.material.needsUpdate=!0,d=M,p=M.version,g=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null))}function S(_,y){_.getRGB(ny,uU(n)),i.buffers.color.setClear(ny.r,ny.g,ny.b,y,o)}return{getClearColor:function(){return a},setClearColor:function(_,y=1){a.set(_),l=y,S(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,S(a,l)},render:v}}function k7(n,e,t,i){const s=n.getParameter(n.MAX_VERTEX_ATTRIBS),r=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||r!==null,a={},l=_(null);let h=l,f=!1;function d(k,q,H,Y,V){let X=!1;if(o){const J=S(Y,H,q);h!==J&&(h=J,g(h.object)),X=y(k,Y,H,V),X&&A(k,Y,H,V)}else{const J=q.wireframe===!0;(h.geometry!==Y.id||h.program!==H.id||h.wireframe!==J)&&(h.geometry=Y.id,h.program=H.id,h.wireframe=J,X=!0)}V!==null&&t.update(V,n.ELEMENT_ARRAY_BUFFER),(X||f)&&(f=!1,L(k,q,H,Y),V!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(V).buffer))}function p(){return i.isWebGL2?n.createVertexArray():r.createVertexArrayOES()}function g(k){return i.isWebGL2?n.bindVertexArray(k):r.bindVertexArrayOES(k)}function v(k){return i.isWebGL2?n.deleteVertexArray(k):r.deleteVertexArrayOES(k)}function S(k,q,H){const Y=H.wireframe===!0;let V=a[k.id];V===void 0&&(V={},a[k.id]=V);let X=V[q.id];X===void 0&&(X={},V[q.id]=X);let J=X[Y];return J===void 0&&(J=_(p()),X[Y]=J),J}function _(k){const q=[],H=[],Y=[];for(let V=0;V<s;V++)q[V]=0,H[V]=0,Y[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:H,attributeDivisors:Y,object:k,attributes:{},index:null}}function y(k,q,H,Y){const V=h.attributes,X=q.attributes;let J=0;const K=H.getAttributes();for(const ae in K)if(K[ae].location>=0){const Q=V[ae];let de=X[ae];if(de===void 0&&(ae==="instanceMatrix"&&k.instanceMatrix&&(de=k.instanceMatrix),ae==="instanceColor"&&k.instanceColor&&(de=k.instanceColor)),Q===void 0||Q.attribute!==de||de&&Q.data!==de.data)return!0;J++}return h.attributesNum!==J||h.index!==Y}function A(k,q,H,Y){const V={},X=q.attributes;let J=0;const K=H.getAttributes();for(const ae in K)if(K[ae].location>=0){let Q=X[ae];Q===void 0&&(ae==="instanceMatrix"&&k.instanceMatrix&&(Q=k.instanceMatrix),ae==="instanceColor"&&k.instanceColor&&(Q=k.instanceColor));const de={};de.attribute=Q,Q&&Q.data&&(de.data=Q.data),V[ae]=de,J++}h.attributes=V,h.attributesNum=J,h.index=Y}function M(){const k=h.newAttributes;for(let q=0,H=k.length;q<H;q++)k[q]=0}function E(k){R(k,0)}function R(k,q){const H=h.newAttributes,Y=h.enabledAttributes,V=h.attributeDivisors;H[k]=1,Y[k]===0&&(n.enableVertexAttribArray(k),Y[k]=1),V[k]!==q&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,q),V[k]=q)}function T(){const k=h.newAttributes,q=h.enabledAttributes;for(let H=0,Y=q.length;H<Y;H++)q[H]!==k[H]&&(n.disableVertexAttribArray(H),q[H]=0)}function B(k,q,H,Y,V,X,J){J===!0?n.vertexAttribIPointer(k,q,H,V,X):n.vertexAttribPointer(k,q,H,Y,V,X)}function L(k,q,H,Y){if(i.isWebGL2===!1&&(k.isInstancedMesh||Y.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;M();const V=Y.attributes,X=H.getAttributes(),J=q.defaultAttributeValues;for(const K in X){const ae=X[K];if(ae.location>=0){let Be=V[K];if(Be===void 0&&(K==="instanceMatrix"&&k.instanceMatrix&&(Be=k.instanceMatrix),K==="instanceColor"&&k.instanceColor&&(Be=k.instanceColor)),Be!==void 0){const Q=Be.normalized,de=Be.itemSize,Ce=t.get(Be);if(Ce===void 0)continue;const ze=Ce.buffer,We=Ce.type,Xe=Ce.bytesPerElement,Ze=i.isWebGL2===!0&&(We===n.INT||We===n.UNSIGNED_INT||Be.gpuType===L1);if(Be.isInterleavedBufferAttribute){const Ee=Be.data,G=Ee.stride,Ae=Be.offset;if(Ee.isInstancedInterleavedBuffer){for(let he=0;he<ae.locationSize;he++)R(ae.location+he,Ee.meshPerAttribute);k.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let he=0;he<ae.locationSize;he++)E(ae.location+he);n.bindBuffer(n.ARRAY_BUFFER,ze);for(let he=0;he<ae.locationSize;he++)B(ae.location+he,de/ae.locationSize,We,Q,G*Xe,(Ae+de/ae.locationSize*he)*Xe,Ze)}else{if(Be.isInstancedBufferAttribute){for(let Ee=0;Ee<ae.locationSize;Ee++)R(ae.location+Ee,Be.meshPerAttribute);k.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=Be.meshPerAttribute*Be.count)}else for(let Ee=0;Ee<ae.locationSize;Ee++)E(ae.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,ze);for(let Ee=0;Ee<ae.locationSize;Ee++)B(ae.location+Ee,de/ae.locationSize,We,Q,de*Xe,de/ae.locationSize*Ee*Xe,Ze)}}else if(J!==void 0){const Q=J[K];if(Q!==void 0)switch(Q.length){case 2:n.vertexAttrib2fv(ae.location,Q);break;case 3:n.vertexAttrib3fv(ae.location,Q);break;case 4:n.vertexAttrib4fv(ae.location,Q);break;default:n.vertexAttrib1fv(ae.location,Q)}}}}T()}function F(){te();for(const k in a){const q=a[k];for(const H in q){const Y=q[H];for(const V in Y)v(Y[V].object),delete Y[V];delete q[H]}delete a[k]}}function C(k){if(a[k.id]===void 0)return;const q=a[k.id];for(const H in q){const Y=q[H];for(const V in Y)v(Y[V].object),delete Y[V];delete q[H]}delete a[k.id]}function D(k){for(const q in a){const H=a[q];if(H[k.id]===void 0)continue;const Y=H[k.id];for(const V in Y)v(Y[V].object),delete Y[V];delete H[k.id]}}function te(){$(),f=!0,h!==l&&(h=l,g(h.object))}function $(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:te,resetDefaultState:$,dispose:F,releaseStatesOfGeometry:C,releaseStatesOfProgram:D,initAttributes:M,enableAttribute:E,disableUnusedAttributes:T}}function H7(n,e,t,i){const s=i.isWebGL2;let r;function o(f){r=f}function a(f,d){n.drawArrays(r,f,d),t.update(d,r,1)}function l(f,d,p){if(p===0)return;let g,v;if(s)g=n,v="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](r,f,d,p),t.update(d,r,p)}function h(f,d,p){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<p;v++)this.render(f[v],d[v]);else{g.multiDrawArraysWEBGL(r,f,0,d,0,p);let v=0;for(let S=0;S<p;S++)v+=d[S];t.update(v,r,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=h}function G7(n,e,t){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function r(B){if(B==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=r(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const h=o||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),M=p>0,E=o||e.has("OES_texture_float"),R=M&&E,T=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:h,getMaxAnisotropy:s,getMaxPrecision:r,precision:a,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:v,maxAttributes:S,maxVertexUniforms:_,maxVaryings:y,maxFragmentUniforms:A,vertexTextures:M,floatFragmentTextures:E,floatVertexTextures:R,maxSamples:T}}function V7(n){const e=this;let t=null,i=0,s=!1,r=!1;const o=new zo,a=new wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const g=d.length!==0||p||i!==0||s;return s=p,i=d.length,g},this.beginShadows=function(){r=!0,f(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,p){t=f(d,p,0)},this.setState=function(d,p,g){const v=d.clippingPlanes,S=d.clipIntersection,_=d.clipShadows,y=n.get(d);if(!s||v===null||v.length===0||r&&!_)r?f(null):h();else{const A=r?0:i,M=A*4;let E=y.clippingState||null;l.value=E,E=f(v,p,M,g);for(let R=0;R!==M;++R)E[R]=t[R];y.clippingState=E,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=A}};function h(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(d,p,g,v){const S=d!==null?d.length:0;let _=null;if(S!==0){if(_=l.value,v!==!0||_===null){const y=g+S*4,A=p.matrixWorldInverse;a.getNormalMatrix(A),(_===null||_.length<y)&&(_=new Float32Array(y));for(let M=0,E=g;M!==S;++M,E+=4)o.copy(d[M]).applyMatrix4(A,a),o.normal.toArray(_,E),_[E+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,_}}function W7(n){let e=new WeakMap;function t(o,a){return a===kp?o.mapping=sa:a===Hp&&(o.mapping=dl),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===kp||a===Hp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const h=new dU(l.height);return h.fromEquirectangularTexture(n,o),e.set(o,h),o.addEventListener("dispose",s),t(h.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}class Or extends J0{constructor(e=-1,t=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=h*this.view.offsetX,o=r+h*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Hh=4,TB=[.125,.215,.35,.446,.526,.582],Mc=20,XA=new Or,RB=new He;let JA=null,YA=0,KA=0;const Sc=(1+Math.sqrt(5))/2,hh=1/Sc,BB=[new U(1,1,1),new U(-1,1,1),new U(1,1,-1),new U(-1,1,-1),new U(0,Sc,hh),new U(0,Sc,-hh),new U(hh,0,Sc),new U(-hh,0,Sc),new U(Sc,hh,0),new U(-Sc,hh,0)];class Ub{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){JA=this._renderer.getRenderTarget(),YA=this._renderer.getActiveCubeFace(),KA=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=LB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=DB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(JA,YA,KA),e.scissorTest=!1,iy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===sa||e.mapping===dl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),JA=this._renderer.getRenderTarget(),YA=this._renderer.getActiveCubeFace(),KA=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:un,minFilter:un,generateMipmaps:!1,type:Mf,format:qi,colorSpace:Ur,depthBuffer:!1},s=PB(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=PB(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=j7(r)),this._blurMaterial=X7(r,e,t)}return s}_compileMaterial(e){const t=new Hn(this._lodPlanes[0],e);this._renderer.compile(t,XA)}_sceneToCubeUV(e,t,i,s){const a=new vn(90,1,t,i),l=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,p=f.toneMapping;f.getClearColor(RB),f.toneMapping=uo,f.autoClear=!1;const g=new Ls({name:"PMREM.Background",side:es,depthWrite:!1,depthTest:!1}),v=new Hn(new gu,g);let S=!1;const _=e.background;_?_.isColor&&(g.color.copy(_),e.background=null,S=!0):(g.color.copy(RB),S=!0);for(let y=0;y<6;y++){const A=y%3;A===0?(a.up.set(0,l[y],0),a.lookAt(h[y],0,0)):A===1?(a.up.set(0,0,l[y]),a.lookAt(0,h[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,h[y]));const M=this._cubeSize;iy(s,A*M,y>2?M:0,M,M),f.setRenderTarget(s),S&&f.render(v,a),f.render(e,a)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=p,f.autoClear=d,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===sa||e.mapping===dl;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=LB()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=DB());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new Hn(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;iy(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,XA)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const r=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=BB[(s-1)%BB.length];this._blur(e,s-1,s,r,o)}t.autoClear=i}_blur(e,t,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,o,a){const l=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new Hn(this._lodPlanes[s],h),p=h.uniforms,g=this._sizeLods[i]-1,v=isFinite(r)?Math.PI/(2*g):2*Math.PI/(2*Mc-1),S=r/v,_=isFinite(r)?1+Math.floor(f*S):Mc;_>Mc&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Mc}`);const y=[];let A=0;for(let B=0;B<Mc;++B){const L=B/S,F=Math.exp(-L*L/2);y.push(F),B===0?A+=F:B<_&&(A+=2*F)}for(let B=0;B<y.length;B++)y[B]=y[B]/A;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=y,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=v,p.mipInt.value=M-i;const E=this._sizeLods[s],R=3*E*(s>M-Hh?s-M+Hh:0),T=4*(this._cubeSize-E);iy(t,R,T,3*E,2*E),l.setRenderTarget(t),l.render(d,XA)}}function j7(n){const e=[],t=[],i=[];let s=n;const r=n-Hh+1+TB.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>n-Hh?l=TB[o-n+Hh-1]:o===0&&(l=0),i.push(l);const h=1/(a-2),f=-h,d=1+h,p=[f,f,d,f,d,d,f,f,d,d,f,d],g=6,v=6,S=3,_=2,y=1,A=new Float32Array(S*v*g),M=new Float32Array(_*v*g),E=new Float32Array(y*v*g);for(let T=0;T<g;T++){const B=T%3*2/3-1,L=T>2?0:-1,F=[B,L,0,B+2/3,L,0,B+2/3,L+1,0,B,L,0,B+2/3,L+1,0,B,L+1,0];A.set(F,S*v*T),M.set(p,_*v*T);const C=[T,T,T,T,T,T];E.set(C,y*v*T)}const R=new Mt;R.setAttribute("position",new kt(A,S)),R.setAttribute("uv",new kt(M,_)),R.setAttribute("faceIndex",new kt(E,y)),e.push(R),s>Hh&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function PB(n,e,t){const i=new Fr(n,e,t);return i.texture.mapping=Ff,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function iy(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function X7(n,e,t){const i=new Float32Array(Mc),s=new U(0,1,0);return new zr({name:"SphericalGaussianBlur",defines:{n:Mc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:K1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Qo,depthTest:!1,depthWrite:!1})}function DB(){return new zr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:K1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Qo,depthTest:!1,depthWrite:!1})}function LB(){return new zr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:K1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Qo,depthTest:!1,depthWrite:!1})}function K1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function J7(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,h=l===kp||l===Hp,f=l===sa||l===dl;if(h||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new Ub(n)),d=h?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(h&&d&&d.height>0||f&&d&&s(d)){t===null&&(t=new Ub(n));const p=h?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",r),p.texture}else return null}}}return a}function s(a){let l=0;const h=6;for(let f=0;f<h;f++)a[f]!==void 0&&l++;return l===h}function r(a){const l=a.target;l.removeEventListener("dispose",r);const h=e.get(l);h!==void 0&&(e.delete(l),h.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function Y7(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return s===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function K7(n,e,t,i){const s={},r=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const S=p.morphAttributes[v];for(let _=0,y=S.length;_<y;_++)e.remove(S[_])}p.removeEventListener("dispose",o),delete s[p.id];const g=r.get(p);g&&(e.remove(g),r.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return s[p.id]===!0||(p.addEventListener("dispose",o),s[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const g=d.morphAttributes;for(const v in g){const S=g[v];for(let _=0,y=S.length;_<y;_++)e.update(S[_],n.ARRAY_BUFFER)}}function h(d){const p=[],g=d.index,v=d.attributes.position;let S=0;if(g!==null){const A=g.array;S=g.version;for(let M=0,E=A.length;M<E;M+=3){const R=A[M+0],T=A[M+1],B=A[M+2];p.push(R,T,T,B,B,R)}}else if(v!==void 0){const A=v.array;S=v.version;for(let M=0,E=A.length/3-1;M<E;M+=3){const R=M+0,T=M+1,B=M+2;p.push(R,T,T,B,B,R)}}else return;const _=new(oU(p)?Y1:J1)(p,1);_.version=S;const y=r.get(d);y&&e.remove(y),r.set(d,_)}function f(d){const p=r.get(d);if(p){const g=d.index;g!==null&&p.version<g.version&&h(d)}else h(d);return r.get(d)}return{get:a,update:l,getWireframeAttribute:f}}function q7(n,e,t,i){const s=i.isWebGL2;let r;function o(g){r=g}let a,l;function h(g){a=g.type,l=g.bytesPerElement}function f(g,v){n.drawElements(r,v,a,g*l),t.update(v,r,1)}function d(g,v,S){if(S===0)return;let _,y;if(s)_=n,y="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[y](r,v,a,g*l,S),t.update(v,r,S)}function p(g,v,S){if(S===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let y=0;y<S;y++)this.render(g[y]/l,v[y]);else{_.multiDrawElementsWEBGL(r,v,0,a,g,0,S);let y=0;for(let A=0;A<S;A++)y+=v[A];t.update(y,r,1)}}this.setMode=o,this.setIndex=h,this.render=f,this.renderInstances=d,this.renderMultiDraw=p}function Q7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(r/3);break;case n.LINES:t.lines+=a*(r/2);break;case n.LINE_STRIP:t.lines+=a*(r-1);break;case n.LINE_LOOP:t.lines+=a*r;break;case n.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function Z7(n,e){return n[0]-e[0]}function $7(n,e){return Math.abs(e[1])-Math.abs(n[1])}function eJ(n,e,t){const i={},s=new Float32Array(8),r=new WeakMap,o=new Yt,a=[];for(let h=0;h<8;h++)a[h]=[h,0];function l(h,f,d){const p=h.morphTargetInfluences;if(e.isWebGL2===!0){const v=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,S=v!==void 0?v.length:0;let _=r.get(f);if(_===void 0||_.count!==S){let q=function(){$.dispose(),r.delete(f),f.removeEventListener("dispose",q)};var g=q;_!==void 0&&_.texture.dispose();const M=f.morphAttributes.position!==void 0,E=f.morphAttributes.normal!==void 0,R=f.morphAttributes.color!==void 0,T=f.morphAttributes.position||[],B=f.morphAttributes.normal||[],L=f.morphAttributes.color||[];let F=0;M===!0&&(F=1),E===!0&&(F=2),R===!0&&(F=3);let C=f.attributes.position.count*F,D=1;C>e.maxTextureSize&&(D=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const te=new Float32Array(C*D*4*S),$=new X0(te,C,D,S);$.type=or,$.needsUpdate=!0;const k=F*4;for(let H=0;H<S;H++){const Y=T[H],V=B[H],X=L[H],J=C*D*4*H;for(let K=0;K<Y.count;K++){const ae=K*k;M===!0&&(o.fromBufferAttribute(Y,K),te[J+ae+0]=o.x,te[J+ae+1]=o.y,te[J+ae+2]=o.z,te[J+ae+3]=0),E===!0&&(o.fromBufferAttribute(V,K),te[J+ae+4]=o.x,te[J+ae+5]=o.y,te[J+ae+6]=o.z,te[J+ae+7]=0),R===!0&&(o.fromBufferAttribute(X,K),te[J+ae+8]=o.x,te[J+ae+9]=o.y,te[J+ae+10]=o.z,te[J+ae+11]=X.itemSize===4?o.w:1)}}_={count:S,texture:$,size:new pe(C,D)},r.set(f,_),f.addEventListener("dispose",q)}let y=0;for(let M=0;M<p.length;M++)y+=p[M];const A=f.morphTargetsRelative?1:1-y;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=p===void 0?0:p.length;let S=i[f.id];if(S===void 0||S.length!==v){S=[];for(let E=0;E<v;E++)S[E]=[E,0];i[f.id]=S}for(let E=0;E<v;E++){const R=S[E];R[0]=E,R[1]=p[E]}S.sort($7);for(let E=0;E<8;E++)E<v&&S[E][1]?(a[E][0]=S[E][0],a[E][1]=S[E][1]):(a[E][0]=Number.MAX_SAFE_INTEGER,a[E][1]=0);a.sort(Z7);const _=f.morphAttributes.position,y=f.morphAttributes.normal;let A=0;for(let E=0;E<8;E++){const R=a[E],T=R[0],B=R[1];T!==Number.MAX_SAFE_INTEGER&&B?(_&&f.getAttribute("morphTarget"+E)!==_[T]&&f.setAttribute("morphTarget"+E,_[T]),y&&f.getAttribute("morphNormal"+E)!==y[T]&&f.setAttribute("morphNormal"+E,y[T]),s[E]=B,A+=B):(_&&f.hasAttribute("morphTarget"+E)===!0&&f.deleteAttribute("morphTarget"+E),y&&f.hasAttribute("morphNormal"+E)===!0&&f.deleteAttribute("morphNormal"+E),s[E]=0)}const M=f.morphTargetsRelative?1:1-A;d.getUniforms().setValue(n,"morphTargetBaseInfluence",M),d.getUniforms().setValue(n,"morphTargetInfluences",s)}}return{update:l}}function tJ(n,e,t,i){let s=new WeakMap;function r(l){const h=i.render.frame,f=l.geometry,d=e.get(l,f);if(s.get(d)!==h&&(e.update(d),s.set(d,h)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==h&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),s.set(l,h))),l.isSkinnedMesh){const p=l.skeleton;s.get(p)!==h&&(p.update(),s.set(p,h))}return d}function o(){s=new WeakMap}function a(l){const h=l.target;h.removeEventListener("dispose",a),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:r,dispose:o}}class q1 extends xn{constructor(e,t,i,s,r,o,a,l,h,f){if(f=f!==void 0?f:sl,f!==sl&&f!==eu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===sl&&(i=Wo),i===void 0&&f===eu&&(i=il),super(null,s,r,o,a,l,f,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ln,this.minFilter=l!==void 0?l:Ln,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const mU=new xn,gU=new q1(1,1);gU.compareFunction=V1;const yU=new X0,vU=new X1,xU=new ym,OB=[],IB=[],NB=new Float32Array(16),UB=new Float32Array(9),FB=new Float32Array(4);function kf(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=OB[s];if(r===void 0&&(r=new Float32Array(s),OB[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(r,a)}return r}function Zn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function $n(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Y0(n,e){let t=IB[e];t===void 0&&(t=new Int32Array(e),IB[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function nJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function iJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;n.uniform2fv(this.addr,e),$n(t,e)}}function sJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Zn(t,e))return;n.uniform3fv(this.addr,e),$n(t,e)}}function rJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;n.uniform4fv(this.addr,e),$n(t,e)}}function oJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),$n(t,e)}else{if(Zn(t,i))return;FB.set(i),n.uniformMatrix2fv(this.addr,!1,FB),$n(t,i)}}function aJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),$n(t,e)}else{if(Zn(t,i))return;UB.set(i),n.uniformMatrix3fv(this.addr,!1,UB),$n(t,i)}}function lJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Zn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),$n(t,e)}else{if(Zn(t,i))return;NB.set(i),n.uniformMatrix4fv(this.addr,!1,NB),$n(t,i)}}function cJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function uJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;n.uniform2iv(this.addr,e),$n(t,e)}}function hJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zn(t,e))return;n.uniform3iv(this.addr,e),$n(t,e)}}function fJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;n.uniform4iv(this.addr,e),$n(t,e)}}function dJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function pJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Zn(t,e))return;n.uniform2uiv(this.addr,e),$n(t,e)}}function mJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Zn(t,e))return;n.uniform3uiv(this.addr,e),$n(t,e)}}function gJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Zn(t,e))return;n.uniform4uiv(this.addr,e),$n(t,e)}}function yJ(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);const r=this.type===n.SAMPLER_2D_SHADOW?gU:mU;t.setTexture2D(e||r,s)}function vJ(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||vU,s)}function xJ(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||xU,s)}function _J(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||yU,s)}function AJ(n){switch(n){case 5126:return nJ;case 35664:return iJ;case 35665:return sJ;case 35666:return rJ;case 35674:return oJ;case 35675:return aJ;case 35676:return lJ;case 5124:case 35670:return cJ;case 35667:case 35671:return uJ;case 35668:case 35672:return hJ;case 35669:case 35673:return fJ;case 5125:return dJ;case 36294:return pJ;case 36295:return mJ;case 36296:return gJ;case 35678:case 36198:case 36298:case 36306:case 35682:return yJ;case 35679:case 36299:case 36307:return vJ;case 35680:case 36300:case 36308:case 36293:return xJ;case 36289:case 36303:case 36311:case 36292:return _J}}function SJ(n,e){n.uniform1fv(this.addr,e)}function MJ(n,e){const t=kf(e,this.size,2);n.uniform2fv(this.addr,t)}function bJ(n,e){const t=kf(e,this.size,3);n.uniform3fv(this.addr,t)}function EJ(n,e){const t=kf(e,this.size,4);n.uniform4fv(this.addr,t)}function wJ(n,e){const t=kf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function CJ(n,e){const t=kf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function TJ(n,e){const t=kf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function RJ(n,e){n.uniform1iv(this.addr,e)}function BJ(n,e){n.uniform2iv(this.addr,e)}function PJ(n,e){n.uniform3iv(this.addr,e)}function DJ(n,e){n.uniform4iv(this.addr,e)}function LJ(n,e){n.uniform1uiv(this.addr,e)}function OJ(n,e){n.uniform2uiv(this.addr,e)}function IJ(n,e){n.uniform3uiv(this.addr,e)}function NJ(n,e){n.uniform4uiv(this.addr,e)}function UJ(n,e,t){const i=this.cache,s=e.length,r=Y0(t,s);Zn(i,r)||(n.uniform1iv(this.addr,r),$n(i,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||mU,r[o])}function FJ(n,e,t){const i=this.cache,s=e.length,r=Y0(t,s);Zn(i,r)||(n.uniform1iv(this.addr,r),$n(i,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||vU,r[o])}function zJ(n,e,t){const i=this.cache,s=e.length,r=Y0(t,s);Zn(i,r)||(n.uniform1iv(this.addr,r),$n(i,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||xU,r[o])}function kJ(n,e,t){const i=this.cache,s=e.length,r=Y0(t,s);Zn(i,r)||(n.uniform1iv(this.addr,r),$n(i,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||yU,r[o])}function HJ(n){switch(n){case 5126:return SJ;case 35664:return MJ;case 35665:return bJ;case 35666:return EJ;case 35674:return wJ;case 35675:return CJ;case 35676:return TJ;case 5124:case 35670:return RJ;case 35667:case 35671:return BJ;case 35668:case 35672:return PJ;case 35669:case 35673:return DJ;case 5125:return LJ;case 36294:return OJ;case 36295:return IJ;case 36296:return NJ;case 35678:case 36198:case 36298:case 36306:case 35682:return UJ;case 35679:case 36299:case 36307:return FJ;case 35680:case 36300:case 36308:case 36293:return zJ;case 36289:case 36303:case 36311:case 36292:return kJ}}class GJ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=AJ(t.type)}}class VJ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=HJ(t.type)}}class WJ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],i)}}}const qA=/(\w+)(\])?(\[|\.)?/g;function zB(n,e){n.seq.push(e),n.map[e.id]=e}function jJ(n,e,t){const i=n.name,s=i.length;for(qA.lastIndex=0;;){const r=qA.exec(i),o=qA.lastIndex;let a=r[1];const l=r[2]==="]",h=r[3];if(l&&(a=a|0),h===void 0||h==="["&&o+2===s){zB(t,h===void 0?new GJ(a,n,e):new VJ(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new WJ(a),zB(t,d)),t=d}}}class uv{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);jJ(r,o,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&i.push(o)}return i}}function kB(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const XJ=37297;let JJ=0;function YJ(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function KJ(n){const e=Xt.getPrimaries(Xt.workingColorSpace),t=Xt.getPrimaries(n);let i;switch(e===t?i="":e===Xp&&t===jp?i="LinearDisplayP3ToLinearSRGB":e===jp&&t===Xp&&(i="LinearSRGBToLinearDisplayP3"),n){case Ur:case mm:return[i,"LinearTransferOETF"];case Fn:case j0:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function HB(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+YJ(n.getShaderSource(e),o)}else return s}function qJ(n,e){const t=KJ(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function QJ(n,e){let t;switch(e){case PN:t="Linear";break;case DN:t="Reinhard";break;case LN:t="OptimizedCineon";break;case D1:t="ACESFilmic";break;case IN:t="AgX";break;case ON:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ZJ(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Gh).join(`
`)}function $J(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Gh).join(`
`)}function eY(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function tY(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),o=r.name;let a=1;r.type===n.FLOAT_MAT2&&(a=2),r.type===n.FLOAT_MAT3&&(a=3),r.type===n.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Gh(n){return n!==""}function GB(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function VB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const nY=/^[ \t]*#include +<([\w\d./]+)>/gm;function Fb(n){return n.replace(nY,sY)}const iY=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function sY(n,e){let t=Et[e];if(t===void 0){const i=iY.get(e);if(i!==void 0)t=Et[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Fb(t)}const rY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function WB(n){return n.replace(rY,oY)}function oY(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function jB(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function aY(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===H0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===hp?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===wr&&(e="SHADOWMAP_TYPE_VSM"),e}function lY(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case sa:case dl:e="ENVMAP_TYPE_CUBE";break;case Ff:e="ENVMAP_TYPE_CUBE_UV";break}return e}function cY(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case dl:e="ENVMAP_MODE_REFRACTION";break}return e}function uY(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case pm:e="ENVMAP_BLENDING_MULTIPLY";break;case RN:e="ENVMAP_BLENDING_MIX";break;case BN:e="ENVMAP_BLENDING_ADD";break}return e}function hY(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function fY(n,e,t,i){const s=n.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=aY(t),h=lY(t),f=cY(t),d=uY(t),p=hY(t),g=t.isWebGL2?"":ZJ(t),v=$J(t),S=eY(r),_=s.createProgram();let y,A,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Gh).join(`
`),y.length>0&&(y+=`
`),A=[g,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Gh).join(`
`),A.length>0&&(A+=`
`)):(y=[jB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Gh).join(`
`),A=[g,jB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==uo?"#define TONE_MAPPING":"",t.toneMapping!==uo?Et.tonemapping_pars_fragment:"",t.toneMapping!==uo?QJ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Et.colorspace_pars_fragment,qJ("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Gh).join(`
`)),o=Fb(o),o=GB(o,t),o=VB(o,t),a=Fb(a),a=GB(a,t),a=VB(a,t),o=WB(o),a=WB(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,y=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,A=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Ib?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Ib?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const E=M+y+o,R=M+A+a,T=kB(s,s.VERTEX_SHADER,E),B=kB(s,s.FRAGMENT_SHADER,R);s.attachShader(_,T),s.attachShader(_,B),t.index0AttributeName!==void 0?s.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(_,0,"position"),s.linkProgram(_);function L(te){if(n.debug.checkShaderErrors){const $=s.getProgramInfoLog(_).trim(),k=s.getShaderInfoLog(T).trim(),q=s.getShaderInfoLog(B).trim();let H=!0,Y=!0;if(s.getProgramParameter(_,s.LINK_STATUS)===!1)if(H=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,_,T,B);else{const V=HB(s,T,"vertex"),X=HB(s,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(_,s.VALIDATE_STATUS)+`

Material Name: `+te.name+`
Material Type: `+te.type+`

Program Info Log: `+$+`
`+V+`
`+X)}else $!==""?console.warn("THREE.WebGLProgram: Program Info Log:",$):(k===""||q==="")&&(Y=!1);Y&&(te.diagnostics={runnable:H,programLog:$,vertexShader:{log:k,prefix:y},fragmentShader:{log:q,prefix:A}})}s.deleteShader(T),s.deleteShader(B),F=new uv(s,_),C=tY(s,_)}let F;this.getUniforms=function(){return F===void 0&&L(this),F};let C;this.getAttributes=function(){return C===void 0&&L(this),C};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=s.getProgramParameter(_,XJ)),D},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=JJ++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=B,this}let dY=0;class pY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new mY(e),t.set(e,i)),i}}class mY{constructor(e){this.id=dY++,this.code=e,this.usedTimes=0}}function gY(n,e,t,i,s,r,o){const a=new wf,l=new pY,h=new Set,f=[],d=s.isWebGL2,p=s.logarithmicDepthBuffer,g=s.vertexTextures;let v=s.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(C){return h.add(C),C===0?"uv":`uv${C}`}function y(C,D,te,$,k){const q=$.fog,H=k.geometry,Y=C.isMeshStandardMaterial?$.environment:null,V=(C.isMeshStandardMaterial?t:e).get(C.envMap||Y),X=V&&V.mapping===Ff?V.image.height:null,J=S[C.type];C.precision!==null&&(v=s.getMaxPrecision(C.precision),v!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",v,"instead."));const K=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,ae=K!==void 0?K.length:0;let Be=0;H.morphAttributes.position!==void 0&&(Be=1),H.morphAttributes.normal!==void 0&&(Be=2),H.morphAttributes.color!==void 0&&(Be=3);let Q,de,Ce,ze;if(J){const Bt=Br[J];Q=Bt.vertexShader,de=Bt.fragmentShader}else Q=C.vertexShader,de=C.fragmentShader,l.update(C),Ce=l.getVertexShaderID(C),ze=l.getFragmentShaderID(C);const We=n.getRenderTarget(),Xe=k.isInstancedMesh===!0,Ze=k.isBatchedMesh===!0,Ee=!!C.map,G=!!C.matcap,Ae=!!V,he=!!C.aoMap,Me=!!C.lightMap,me=!!C.bumpMap,Ge=!!C.normalMap,Ne=!!C.displacementMap,I=!!C.emissiveMap,P=!!C.metalnessMap,ee=!!C.roughnessMap,_e=C.anisotropy>0,xe=C.clearcoat>0,ve=C.iridescence>0,qe=C.sheen>0,Oe=C.transmission>0,Ue=_e&&!!C.anisotropyMap,it=xe&&!!C.clearcoatMap,mt=xe&&!!C.clearcoatNormalMap,Se=xe&&!!C.clearcoatRoughnessMap,Rt=ve&&!!C.iridescenceMap,xt=ve&&!!C.iridescenceThicknessMap,rt=qe&&!!C.sheenColorMap,et=qe&&!!C.sheenRoughnessMap,Je=!!C.specularMap,j=!!C.specularColorMap,ye=!!C.specularIntensityMap,Fe=Oe&&!!C.transmissionMap,Ye=Oe&&!!C.thicknessMap,ft=!!C.gradientMap,z=!!C.alphaMap,be=C.alphaTest>0,Re=!!C.alphaHash,$e=!!C.extensions;let tt=uo;C.toneMapped&&(We===null||We.isXRRenderTarget===!0)&&(tt=n.toneMapping);const vt={isWebGL2:d,shaderID:J,shaderType:C.type,shaderName:C.name,vertexShader:Q,fragmentShader:de,defines:C.defines,customVertexShaderID:Ce,customFragmentShaderID:ze,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:v,batching:Ze,instancing:Xe,instancingColor:Xe&&k.instanceColor!==null,supportsVertexTextures:g,outputColorSpace:We===null?n.outputColorSpace:We.isXRRenderTarget===!0?We.texture.colorSpace:Ur,alphaToCoverage:!!C.alphaToCoverage,map:Ee,matcap:G,envMap:Ae,envMapMode:Ae&&V.mapping,envMapCubeUVHeight:X,aoMap:he,lightMap:Me,bumpMap:me,normalMap:Ge,displacementMap:g&&Ne,emissiveMap:I,normalMapObjectSpace:Ge&&C.normalMapType===QN,normalMapTangentSpace:Ge&&C.normalMapType===wl,metalnessMap:P,roughnessMap:ee,anisotropy:_e,anisotropyMap:Ue,clearcoat:xe,clearcoatMap:it,clearcoatNormalMap:mt,clearcoatRoughnessMap:Se,iridescence:ve,iridescenceMap:Rt,iridescenceThicknessMap:xt,sheen:qe,sheenColorMap:rt,sheenRoughnessMap:et,specularMap:Je,specularColorMap:j,specularIntensityMap:ye,transmission:Oe,transmissionMap:Fe,thicknessMap:Ye,gradientMap:ft,opaque:C.transparent===!1&&C.blending===Vc&&C.alphaToCoverage===!1,alphaMap:z,alphaTest:be,alphaHash:Re,combine:C.combine,mapUv:Ee&&_(C.map.channel),aoMapUv:he&&_(C.aoMap.channel),lightMapUv:Me&&_(C.lightMap.channel),bumpMapUv:me&&_(C.bumpMap.channel),normalMapUv:Ge&&_(C.normalMap.channel),displacementMapUv:Ne&&_(C.displacementMap.channel),emissiveMapUv:I&&_(C.emissiveMap.channel),metalnessMapUv:P&&_(C.metalnessMap.channel),roughnessMapUv:ee&&_(C.roughnessMap.channel),anisotropyMapUv:Ue&&_(C.anisotropyMap.channel),clearcoatMapUv:it&&_(C.clearcoatMap.channel),clearcoatNormalMapUv:mt&&_(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Se&&_(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Rt&&_(C.iridescenceMap.channel),iridescenceThicknessMapUv:xt&&_(C.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&_(C.sheenColorMap.channel),sheenRoughnessMapUv:et&&_(C.sheenRoughnessMap.channel),specularMapUv:Je&&_(C.specularMap.channel),specularColorMapUv:j&&_(C.specularColorMap.channel),specularIntensityMapUv:ye&&_(C.specularIntensityMap.channel),transmissionMapUv:Fe&&_(C.transmissionMap.channel),thicknessMapUv:Ye&&_(C.thicknessMap.channel),alphaMapUv:z&&_(C.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(Ge||_e),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,pointsUvs:k.isPoints===!0&&!!H.attributes.uv&&(Ee||z),fog:!!q,useFog:C.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:k.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:ae,morphTextureStride:Be,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&te.length>0,shadowMapType:n.shadowMap.type,toneMapping:tt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ee&&C.map.isVideoTexture===!0&&Xt.getTransfer(C.map.colorSpace)===nn,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===rr,flipSided:C.side===es,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:$e&&C.extensions.derivatives===!0,extensionFragDepth:$e&&C.extensions.fragDepth===!0,extensionDrawBuffers:$e&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:$e&&C.extensions.shaderTextureLOD===!0,extensionClipCullDistance:$e&&C.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:$e&&C.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return vt.vertexUv1s=h.has(1),vt.vertexUv2s=h.has(2),vt.vertexUv3s=h.has(3),h.clear(),vt}function A(C){const D=[];if(C.shaderID?D.push(C.shaderID):(D.push(C.customVertexShaderID),D.push(C.customFragmentShaderID)),C.defines!==void 0)for(const te in C.defines)D.push(te),D.push(C.defines[te]);return C.isRawShaderMaterial===!1&&(M(D,C),E(D,C),D.push(n.outputColorSpace)),D.push(C.customProgramCacheKey),D.join()}function M(C,D){C.push(D.precision),C.push(D.outputColorSpace),C.push(D.envMapMode),C.push(D.envMapCubeUVHeight),C.push(D.mapUv),C.push(D.alphaMapUv),C.push(D.lightMapUv),C.push(D.aoMapUv),C.push(D.bumpMapUv),C.push(D.normalMapUv),C.push(D.displacementMapUv),C.push(D.emissiveMapUv),C.push(D.metalnessMapUv),C.push(D.roughnessMapUv),C.push(D.anisotropyMapUv),C.push(D.clearcoatMapUv),C.push(D.clearcoatNormalMapUv),C.push(D.clearcoatRoughnessMapUv),C.push(D.iridescenceMapUv),C.push(D.iridescenceThicknessMapUv),C.push(D.sheenColorMapUv),C.push(D.sheenRoughnessMapUv),C.push(D.specularMapUv),C.push(D.specularColorMapUv),C.push(D.specularIntensityMapUv),C.push(D.transmissionMapUv),C.push(D.thicknessMapUv),C.push(D.combine),C.push(D.fogExp2),C.push(D.sizeAttenuation),C.push(D.morphTargetsCount),C.push(D.morphAttributeCount),C.push(D.numDirLights),C.push(D.numPointLights),C.push(D.numSpotLights),C.push(D.numSpotLightMaps),C.push(D.numHemiLights),C.push(D.numRectAreaLights),C.push(D.numDirLightShadows),C.push(D.numPointLightShadows),C.push(D.numSpotLightShadows),C.push(D.numSpotLightShadowsWithMaps),C.push(D.numLightProbes),C.push(D.shadowMapType),C.push(D.toneMapping),C.push(D.numClippingPlanes),C.push(D.numClipIntersection),C.push(D.depthPacking)}function E(C,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),C.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),D.alphaToCoverage&&a.enable(20),C.push(a.mask)}function R(C){const D=S[C.type];let te;if(D){const $=Br[D];te=hU.clone($.uniforms)}else te=C.uniforms;return te}function T(C,D){let te;for(let $=0,k=f.length;$<k;$++){const q=f[$];if(q.cacheKey===D){te=q,++te.usedTimes;break}}return te===void 0&&(te=new fY(n,D,C,r),f.push(te)),te}function B(C){if(--C.usedTimes===0){const D=f.indexOf(C);f[D]=f[f.length-1],f.pop(),C.destroy()}}function L(C){l.remove(C)}function F(){l.dispose()}return{getParameters:y,getProgramCacheKey:A,getUniforms:R,acquireProgram:T,releaseProgram:B,releaseShaderCache:L,programs:f,dispose:F}}function yY(){let n=new WeakMap;function e(r){let o=n.get(r);return o===void 0&&(o={},n.set(r,o)),o}function t(r){n.delete(r)}function i(r,o,a){n.get(r)[o]=a}function s(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function vY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function XB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function JB(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function o(d,p,g,v,S,_){let y=n[e];return y===void 0?(y={id:d.id,object:d,geometry:p,material:g,groupOrder:v,renderOrder:d.renderOrder,z:S,group:_},n[e]=y):(y.id=d.id,y.object=d,y.geometry=p,y.material=g,y.groupOrder=v,y.renderOrder=d.renderOrder,y.z=S,y.group=_),e++,y}function a(d,p,g,v,S,_){const y=o(d,p,g,v,S,_);g.transmission>0?i.push(y):g.transparent===!0?s.push(y):t.push(y)}function l(d,p,g,v,S,_){const y=o(d,p,g,v,S,_);g.transmission>0?i.unshift(y):g.transparent===!0?s.unshift(y):t.unshift(y)}function h(d,p){t.length>1&&t.sort(d||vY),i.length>1&&i.sort(p||XB),s.length>1&&s.sort(p||XB)}function f(){for(let d=e,p=n.length;d<p;d++){const g=n[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:a,unshift:l,finish:f,sort:h}}function xY(){let n=new WeakMap;function e(i,s){const r=n.get(i);let o;return r===void 0?(o=new JB,n.set(i,[o])):s>=r.length?(o=new JB,r.push(o)):o=r[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function _Y(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new He};break;case"SpotLight":t={position:new U,direction:new U,color:new He,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new He,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new He,groundColor:new He};break;case"RectAreaLight":t={color:new He,position:new U,halfWidth:new U,halfHeight:new U};break}return n[e.id]=t,t}}}function AY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let SY=0;function MY(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function bY(n,e){const t=new _Y,i=AY(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)s.probe.push(new U);const r=new U,o=new ut,a=new ut;function l(f,d){let p=0,g=0,v=0;for(let te=0;te<9;te++)s.probe[te].set(0,0,0);let S=0,_=0,y=0,A=0,M=0,E=0,R=0,T=0,B=0,L=0,F=0;f.sort(MY);const C=d===!0?Math.PI:1;for(let te=0,$=f.length;te<$;te++){const k=f[te],q=k.color,H=k.intensity,Y=k.distance,V=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)p+=q.r*H*C,g+=q.g*H*C,v+=q.b*H*C;else if(k.isLightProbe){for(let X=0;X<9;X++)s.probe[X].addScaledVector(k.sh.coefficients[X],H);F++}else if(k.isDirectionalLight){const X=t.get(k);if(X.color.copy(k.color).multiplyScalar(k.intensity*C),k.castShadow){const J=k.shadow,K=i.get(k);K.shadowBias=J.bias,K.shadowNormalBias=J.normalBias,K.shadowRadius=J.radius,K.shadowMapSize=J.mapSize,s.directionalShadow[S]=K,s.directionalShadowMap[S]=V,s.directionalShadowMatrix[S]=k.shadow.matrix,E++}s.directional[S]=X,S++}else if(k.isSpotLight){const X=t.get(k);X.position.setFromMatrixPosition(k.matrixWorld),X.color.copy(q).multiplyScalar(H*C),X.distance=Y,X.coneCos=Math.cos(k.angle),X.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),X.decay=k.decay,s.spot[y]=X;const J=k.shadow;if(k.map&&(s.spotLightMap[B]=k.map,B++,J.updateMatrices(k),k.castShadow&&L++),s.spotLightMatrix[y]=J.matrix,k.castShadow){const K=i.get(k);K.shadowBias=J.bias,K.shadowNormalBias=J.normalBias,K.shadowRadius=J.radius,K.shadowMapSize=J.mapSize,s.spotShadow[y]=K,s.spotShadowMap[y]=V,T++}y++}else if(k.isRectAreaLight){const X=t.get(k);X.color.copy(q).multiplyScalar(H),X.halfWidth.set(k.width*.5,0,0),X.halfHeight.set(0,k.height*.5,0),s.rectArea[A]=X,A++}else if(k.isPointLight){const X=t.get(k);if(X.color.copy(k.color).multiplyScalar(k.intensity*C),X.distance=k.distance,X.decay=k.decay,k.castShadow){const J=k.shadow,K=i.get(k);K.shadowBias=J.bias,K.shadowNormalBias=J.normalBias,K.shadowRadius=J.radius,K.shadowMapSize=J.mapSize,K.shadowCameraNear=J.camera.near,K.shadowCameraFar=J.camera.far,s.pointShadow[_]=K,s.pointShadowMap[_]=V,s.pointShadowMatrix[_]=k.shadow.matrix,R++}s.point[_]=X,_++}else if(k.isHemisphereLight){const X=t.get(k);X.skyColor.copy(k.color).multiplyScalar(H*C),X.groundColor.copy(k.groundColor).multiplyScalar(H*C),s.hemi[M]=X,M++}}A>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Ie.LTC_FLOAT_1,s.rectAreaLTC2=Ie.LTC_FLOAT_2):(s.rectAreaLTC1=Ie.LTC_HALF_1,s.rectAreaLTC2=Ie.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Ie.LTC_FLOAT_1,s.rectAreaLTC2=Ie.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Ie.LTC_HALF_1,s.rectAreaLTC2=Ie.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=p,s.ambient[1]=g,s.ambient[2]=v;const D=s.hash;(D.directionalLength!==S||D.pointLength!==_||D.spotLength!==y||D.rectAreaLength!==A||D.hemiLength!==M||D.numDirectionalShadows!==E||D.numPointShadows!==R||D.numSpotShadows!==T||D.numSpotMaps!==B||D.numLightProbes!==F)&&(s.directional.length=S,s.spot.length=y,s.rectArea.length=A,s.point.length=_,s.hemi.length=M,s.directionalShadow.length=E,s.directionalShadowMap.length=E,s.pointShadow.length=R,s.pointShadowMap.length=R,s.spotShadow.length=T,s.spotShadowMap.length=T,s.directionalShadowMatrix.length=E,s.pointShadowMatrix.length=R,s.spotLightMatrix.length=T+B-L,s.spotLightMap.length=B,s.numSpotLightShadowsWithMaps=L,s.numLightProbes=F,D.directionalLength=S,D.pointLength=_,D.spotLength=y,D.rectAreaLength=A,D.hemiLength=M,D.numDirectionalShadows=E,D.numPointShadows=R,D.numSpotShadows=T,D.numSpotMaps=B,D.numLightProbes=F,s.version=SY++)}function h(f,d){let p=0,g=0,v=0,S=0,_=0;const y=d.matrixWorldInverse;for(let A=0,M=f.length;A<M;A++){const E=f[A];if(E.isDirectionalLight){const R=s.directional[p];R.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(y),p++}else if(E.isSpotLight){const R=s.spot[v];R.position.setFromMatrixPosition(E.matrixWorld),R.position.applyMatrix4(y),R.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(y),v++}else if(E.isRectAreaLight){const R=s.rectArea[S];R.position.setFromMatrixPosition(E.matrixWorld),R.position.applyMatrix4(y),a.identity(),o.copy(E.matrixWorld),o.premultiply(y),a.extractRotation(o),R.halfWidth.set(E.width*.5,0,0),R.halfHeight.set(0,E.height*.5,0),R.halfWidth.applyMatrix4(a),R.halfHeight.applyMatrix4(a),S++}else if(E.isPointLight){const R=s.point[g];R.position.setFromMatrixPosition(E.matrixWorld),R.position.applyMatrix4(y),g++}else if(E.isHemisphereLight){const R=s.hemi[_];R.direction.setFromMatrixPosition(E.matrixWorld),R.direction.transformDirection(y),_++}}}return{setup:l,setupView:h,state:s}}function YB(n,e){const t=new bY(n,e),i=[],s=[];function r(){i.length=0,s.length=0}function o(d){i.push(d)}function a(d){s.push(d)}function l(d){t.setup(i,d)}function h(d){t.setupView(i,d)}return{init:r,state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:l,setupLightsView:h,pushLight:o,pushShadow:a}}function EY(n,e){let t=new WeakMap;function i(r,o=0){const a=t.get(r);let l;return a===void 0?(l=new YB(n,e),t.set(r,[l])):o>=a.length?(l=new YB(n,e),a.push(l)):l=a[o],l}function s(){t=new WeakMap}return{get:i,dispose:s}}class Q1 extends Qn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=KN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Z1 extends Qn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const wY=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,CY=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function TY(n,e,t){let i=new vm;const s=new pe,r=new pe,o=new Yt,a=new Q1({depthPacking:qN}),l=new Z1,h={},f=t.maxTextureSize,d={[go]:es,[es]:go,[rr]:rr},p=new zr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pe},radius:{value:4}},vertexShader:wY,fragmentShader:CY}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const v=new Mt;v.setAttribute("position",new kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Hn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=H0;let y=this.type;this.render=function(T,B,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||T.length===0)return;const F=n.getRenderTarget(),C=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),te=n.state;te.setBlending(Qo),te.buffers.color.setClear(1,1,1,1),te.buffers.depth.setTest(!0),te.setScissorTest(!1);const $=y!==wr&&this.type===wr,k=y===wr&&this.type!==wr;for(let q=0,H=T.length;q<H;q++){const Y=T[q],V=Y.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;s.copy(V.mapSize);const X=V.getFrameExtents();if(s.multiply(X),r.copy(V.mapSize),(s.x>f||s.y>f)&&(s.x>f&&(r.x=Math.floor(f/X.x),s.x=r.x*X.x,V.mapSize.x=r.x),s.y>f&&(r.y=Math.floor(f/X.y),s.y=r.y*X.y,V.mapSize.y=r.y)),V.map===null||$===!0||k===!0){const K=this.type!==wr?{minFilter:Ln,magFilter:Ln}:{};V.map!==null&&V.map.dispose(),V.map=new Fr(s.x,s.y,K),V.map.texture.name=Y.name+".shadowMap",V.camera.updateProjectionMatrix()}n.setRenderTarget(V.map),n.clear();const J=V.getViewportCount();for(let K=0;K<J;K++){const ae=V.getViewport(K);o.set(r.x*ae.x,r.y*ae.y,r.x*ae.z,r.y*ae.w),te.viewport(o),V.updateMatrices(Y,K),i=V.getFrustum(),E(B,L,V.camera,Y,this.type)}V.isPointLightShadow!==!0&&this.type===wr&&A(V,L),V.needsUpdate=!1}y=this.type,_.needsUpdate=!1,n.setRenderTarget(F,C,D)};function A(T,B){const L=e.update(S);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,g.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Fr(s.x,s.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(B,null,L,p,S,null),g.uniforms.shadow_pass.value=T.mapPass.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(B,null,L,g,S,null)}function M(T,B,L,F){let C=null;const D=L.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(D!==void 0)C=D;else if(C=L.isPointLight===!0?l:a,n.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0){const te=C.uuid,$=B.uuid;let k=h[te];k===void 0&&(k={},h[te]=k);let q=k[$];q===void 0&&(q=C.clone(),k[$]=q,B.addEventListener("dispose",R)),C=q}if(C.visible=B.visible,C.wireframe=B.wireframe,F===wr?C.side=B.shadowSide!==null?B.shadowSide:B.side:C.side=B.shadowSide!==null?B.shadowSide:d[B.side],C.alphaMap=B.alphaMap,C.alphaTest=B.alphaTest,C.map=B.map,C.clipShadows=B.clipShadows,C.clippingPlanes=B.clippingPlanes,C.clipIntersection=B.clipIntersection,C.displacementMap=B.displacementMap,C.displacementScale=B.displacementScale,C.displacementBias=B.displacementBias,C.wireframeLinewidth=B.wireframeLinewidth,C.linewidth=B.linewidth,L.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const te=n.properties.get(C);te.light=L}return C}function E(T,B,L,F,C){if(T.visible===!1)return;if(T.layers.test(B.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&C===wr)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,T.matrixWorld);const $=e.update(T),k=T.material;if(Array.isArray(k)){const q=$.groups;for(let H=0,Y=q.length;H<Y;H++){const V=q[H],X=k[V.materialIndex];if(X&&X.visible){const J=M(T,X,F,C);T.onBeforeShadow(n,T,B,L,$,J,V),n.renderBufferDirect(L,null,$,J,T,V),T.onAfterShadow(n,T,B,L,$,J,V)}}}else if(k.visible){const q=M(T,k,F,C);T.onBeforeShadow(n,T,B,L,$,q,null),n.renderBufferDirect(L,null,$,q,T,null),T.onAfterShadow(n,T,B,L,$,q,null)}}const te=T.children;for(let $=0,k=te.length;$<k;$++)E(te[$],B,L,F,C)}function R(T){T.target.removeEventListener("dispose",R);for(const L in h){const F=h[L],C=T.target.uuid;C in F&&(F[C].dispose(),delete F[C])}}}function RY(n,e,t){const i=t.isWebGL2;function s(){let z=!1;const be=new Yt;let Re=null;const $e=new Yt(0,0,0,0);return{setMask:function(tt){Re!==tt&&!z&&(n.colorMask(tt,tt,tt,tt),Re=tt)},setLocked:function(tt){z=tt},setClear:function(tt,vt,Bt,qt,In){In===!0&&(tt*=qt,vt*=qt,Bt*=qt),be.set(tt,vt,Bt,qt),$e.equals(be)===!1&&(n.clearColor(tt,vt,Bt,qt),$e.copy(be))},reset:function(){z=!1,Re=null,$e.set(-1,0,0,0)}}}function r(){let z=!1,be=null,Re=null,$e=null;return{setTest:function(tt){tt?Xe(n.DEPTH_TEST):Ze(n.DEPTH_TEST)},setMask:function(tt){be!==tt&&!z&&(n.depthMask(tt),be=tt)},setFunc:function(tt){if(Re!==tt){switch(tt){case SN:n.depthFunc(n.NEVER);break;case MN:n.depthFunc(n.ALWAYS);break;case bN:n.depthFunc(n.LESS);break;case zp:n.depthFunc(n.LEQUAL);break;case EN:n.depthFunc(n.EQUAL);break;case wN:n.depthFunc(n.GEQUAL);break;case CN:n.depthFunc(n.GREATER);break;case TN:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Re=tt}},setLocked:function(tt){z=tt},setClear:function(tt){$e!==tt&&(n.clearDepth(tt),$e=tt)},reset:function(){z=!1,be=null,Re=null,$e=null}}}function o(){let z=!1,be=null,Re=null,$e=null,tt=null,vt=null,Bt=null,qt=null,In=null;return{setTest:function(Nt){z||(Nt?Xe(n.STENCIL_TEST):Ze(n.STENCIL_TEST))},setMask:function(Nt){be!==Nt&&!z&&(n.stencilMask(Nt),be=Nt)},setFunc:function(Nt,ei,ss){(Re!==Nt||$e!==ei||tt!==ss)&&(n.stencilFunc(Nt,ei,ss),Re=Nt,$e=ei,tt=ss)},setOp:function(Nt,ei,ss){(vt!==Nt||Bt!==ei||qt!==ss)&&(n.stencilOp(Nt,ei,ss),vt=Nt,Bt=ei,qt=ss)},setLocked:function(Nt){z=Nt},setClear:function(Nt){In!==Nt&&(n.clearStencil(Nt),In=Nt)},reset:function(){z=!1,be=null,Re=null,$e=null,tt=null,vt=null,Bt=null,qt=null,In=null}}}const a=new s,l=new r,h=new o,f=new WeakMap,d=new WeakMap;let p={},g={},v=new WeakMap,S=[],_=null,y=!1,A=null,M=null,E=null,R=null,T=null,B=null,L=null,F=new He(0,0,0),C=0,D=!1,te=null,$=null,k=null,q=null,H=null;const Y=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,X=0;const J=n.getParameter(n.VERSION);J.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(J)[1]),V=X>=1):J.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),V=X>=2);let K=null,ae={};const Be=n.getParameter(n.SCISSOR_BOX),Q=n.getParameter(n.VIEWPORT),de=new Yt().fromArray(Be),Ce=new Yt().fromArray(Q);function ze(z,be,Re,$e){const tt=new Uint8Array(4),vt=n.createTexture();n.bindTexture(z,vt),n.texParameteri(z,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(z,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Bt=0;Bt<Re;Bt++)i&&(z===n.TEXTURE_3D||z===n.TEXTURE_2D_ARRAY)?n.texImage3D(be,0,n.RGBA,1,1,$e,0,n.RGBA,n.UNSIGNED_BYTE,tt):n.texImage2D(be+Bt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,tt);return vt}const We={};We[n.TEXTURE_2D]=ze(n.TEXTURE_2D,n.TEXTURE_2D,1),We[n.TEXTURE_CUBE_MAP]=ze(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(We[n.TEXTURE_2D_ARRAY]=ze(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),We[n.TEXTURE_3D]=ze(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),h.setClear(0),Xe(n.DEPTH_TEST),l.setFunc(zp),Ne(!1),I(nb),Xe(n.CULL_FACE),me(Qo);function Xe(z){p[z]!==!0&&(n.enable(z),p[z]=!0)}function Ze(z){p[z]!==!1&&(n.disable(z),p[z]=!1)}function Ee(z,be){return g[z]!==be?(n.bindFramebuffer(z,be),g[z]=be,i&&(z===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=be),z===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=be)),!0):!1}function G(z,be){let Re=S,$e=!1;if(z)if(Re=v.get(be),Re===void 0&&(Re=[],v.set(be,Re)),z.isWebGLMultipleRenderTargets){const tt=z.texture;if(Re.length!==tt.length||Re[0]!==n.COLOR_ATTACHMENT0){for(let vt=0,Bt=tt.length;vt<Bt;vt++)Re[vt]=n.COLOR_ATTACHMENT0+vt;Re.length=tt.length,$e=!0}}else Re[0]!==n.COLOR_ATTACHMENT0&&(Re[0]=n.COLOR_ATTACHMENT0,$e=!0);else Re[0]!==n.BACK&&(Re[0]=n.BACK,$e=!0);$e&&(t.isWebGL2?n.drawBuffers(Re):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Re))}function Ae(z){return _!==z?(n.useProgram(z),_=z,!0):!1}const he={[ka]:n.FUNC_ADD,[aN]:n.FUNC_SUBTRACT,[lN]:n.FUNC_REVERSE_SUBTRACT};if(i)he[ob]=n.MIN,he[ab]=n.MAX;else{const z=e.get("EXT_blend_minmax");z!==null&&(he[ob]=z.MIN_EXT,he[ab]=z.MAX_EXT)}const Me={[cN]:n.ZERO,[uN]:n.ONE,[hN]:n.SRC_COLOR,[Kv]:n.SRC_ALPHA,[yN]:n.SRC_ALPHA_SATURATE,[mN]:n.DST_COLOR,[dN]:n.DST_ALPHA,[fN]:n.ONE_MINUS_SRC_COLOR,[qv]:n.ONE_MINUS_SRC_ALPHA,[gN]:n.ONE_MINUS_DST_COLOR,[pN]:n.ONE_MINUS_DST_ALPHA,[vN]:n.CONSTANT_COLOR,[xN]:n.ONE_MINUS_CONSTANT_COLOR,[_N]:n.CONSTANT_ALPHA,[AN]:n.ONE_MINUS_CONSTANT_ALPHA};function me(z,be,Re,$e,tt,vt,Bt,qt,In,Nt){if(z===Qo){y===!0&&(Ze(n.BLEND),y=!1);return}if(y===!1&&(Xe(n.BLEND),y=!0),z!==oN){if(z!==A||Nt!==D){if((M!==ka||T!==ka)&&(n.blendEquation(n.FUNC_ADD),M=ka,T=ka),Nt)switch(z){case Vc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ib:n.blendFunc(n.ONE,n.ONE);break;case sb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case rb:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",z);break}else switch(z){case Vc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ib:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case sb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case rb:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",z);break}E=null,R=null,B=null,L=null,F.set(0,0,0),C=0,A=z,D=Nt}return}tt=tt||be,vt=vt||Re,Bt=Bt||$e,(be!==M||tt!==T)&&(n.blendEquationSeparate(he[be],he[tt]),M=be,T=tt),(Re!==E||$e!==R||vt!==B||Bt!==L)&&(n.blendFuncSeparate(Me[Re],Me[$e],Me[vt],Me[Bt]),E=Re,R=$e,B=vt,L=Bt),(qt.equals(F)===!1||In!==C)&&(n.blendColor(qt.r,qt.g,qt.b,In),F.copy(qt),C=In),A=z,D=!1}function Ge(z,be){z.side===rr?Ze(n.CULL_FACE):Xe(n.CULL_FACE);let Re=z.side===es;be&&(Re=!Re),Ne(Re),z.blending===Vc&&z.transparent===!1?me(Qo):me(z.blending,z.blendEquation,z.blendSrc,z.blendDst,z.blendEquationAlpha,z.blendSrcAlpha,z.blendDstAlpha,z.blendColor,z.blendAlpha,z.premultipliedAlpha),l.setFunc(z.depthFunc),l.setTest(z.depthTest),l.setMask(z.depthWrite),a.setMask(z.colorWrite);const $e=z.stencilWrite;h.setTest($e),$e&&(h.setMask(z.stencilWriteMask),h.setFunc(z.stencilFunc,z.stencilRef,z.stencilFuncMask),h.setOp(z.stencilFail,z.stencilZFail,z.stencilZPass)),ee(z.polygonOffset,z.polygonOffsetFactor,z.polygonOffsetUnits),z.alphaToCoverage===!0?Xe(n.SAMPLE_ALPHA_TO_COVERAGE):Ze(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ne(z){te!==z&&(z?n.frontFace(n.CW):n.frontFace(n.CCW),te=z)}function I(z){z!==iN?(Xe(n.CULL_FACE),z!==$&&(z===nb?n.cullFace(n.BACK):z===sN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ze(n.CULL_FACE),$=z}function P(z){z!==k&&(V&&n.lineWidth(z),k=z)}function ee(z,be,Re){z?(Xe(n.POLYGON_OFFSET_FILL),(q!==be||H!==Re)&&(n.polygonOffset(be,Re),q=be,H=Re)):Ze(n.POLYGON_OFFSET_FILL)}function _e(z){z?Xe(n.SCISSOR_TEST):Ze(n.SCISSOR_TEST)}function xe(z){z===void 0&&(z=n.TEXTURE0+Y-1),K!==z&&(n.activeTexture(z),K=z)}function ve(z,be,Re){Re===void 0&&(K===null?Re=n.TEXTURE0+Y-1:Re=K);let $e=ae[Re];$e===void 0&&($e={type:void 0,texture:void 0},ae[Re]=$e),($e.type!==z||$e.texture!==be)&&(K!==Re&&(n.activeTexture(Re),K=Re),n.bindTexture(z,be||We[z]),$e.type=z,$e.texture=be)}function qe(){const z=ae[K];z!==void 0&&z.type!==void 0&&(n.bindTexture(z.type,null),z.type=void 0,z.texture=void 0)}function Oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function Ue(){try{n.compressedTexImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function it(){try{n.texSubImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function mt(){try{n.texSubImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function Se(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function Rt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function xt(){try{n.texStorage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function rt(){try{n.texStorage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function et(){try{n.texImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function Je(){try{n.texImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}}function j(z){de.equals(z)===!1&&(n.scissor(z.x,z.y,z.z,z.w),de.copy(z))}function ye(z){Ce.equals(z)===!1&&(n.viewport(z.x,z.y,z.z,z.w),Ce.copy(z))}function Fe(z,be){let Re=d.get(be);Re===void 0&&(Re=new WeakMap,d.set(be,Re));let $e=Re.get(z);$e===void 0&&($e=n.getUniformBlockIndex(be,z.name),Re.set(z,$e))}function Ye(z,be){const $e=d.get(be).get(z);f.get(be)!==$e&&(n.uniformBlockBinding(be,$e,z.__bindingPointIndex),f.set(be,$e))}function ft(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},K=null,ae={},g={},v=new WeakMap,S=[],_=null,y=!1,A=null,M=null,E=null,R=null,T=null,B=null,L=null,F=new He(0,0,0),C=0,D=!1,te=null,$=null,k=null,q=null,H=null,de.set(0,0,n.canvas.width,n.canvas.height),Ce.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),h.reset()}return{buffers:{color:a,depth:l,stencil:h},enable:Xe,disable:Ze,bindFramebuffer:Ee,drawBuffers:G,useProgram:Ae,setBlending:me,setMaterial:Ge,setFlipSided:Ne,setCullFace:I,setLineWidth:P,setPolygonOffset:ee,setScissorTest:_e,activeTexture:xe,bindTexture:ve,unbindTexture:qe,compressedTexImage2D:Oe,compressedTexImage3D:Ue,texImage2D:et,texImage3D:Je,updateUBOMapping:Fe,uniformBlockBinding:Ye,texStorage2D:xt,texStorage3D:rt,texSubImage2D:it,texSubImage3D:mt,compressedTexSubImage2D:Se,compressedTexSubImage3D:Rt,scissor:j,viewport:ye,reset:ft}}function BY(n,e,t,i,s,r,o){const a=s.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let d;const p=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(I,P){return g?new OffscreenCanvas(I,P):Kp("canvas")}function S(I,P,ee,_e){let xe=1;if((I.width>_e||I.height>_e)&&(xe=_e/Math.max(I.width,I.height)),xe<1||P===!0)if(typeof HTMLImageElement<"u"&&I instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&I instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&I instanceof ImageBitmap){const ve=P?$v:Math.floor,qe=ve(xe*I.width),Oe=ve(xe*I.height);d===void 0&&(d=v(qe,Oe));const Ue=ee?v(qe,Oe):d;return Ue.width=qe,Ue.height=Oe,Ue.getContext("2d").drawImage(I,0,0,qe,Oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+I.width+"x"+I.height+") to ("+qe+"x"+Oe+")."),Ue}else return"data"in I&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+I.width+"x"+I.height+")."),I;return I}function _(I){return Nb(I.width)&&Nb(I.height)}function y(I){return a?!1:I.wrapS!==mi||I.wrapT!==mi||I.minFilter!==Ln&&I.minFilter!==un}function A(I,P){return I.generateMipmaps&&P&&I.minFilter!==Ln&&I.minFilter!==un}function M(I){n.generateMipmap(I)}function E(I,P,ee,_e,xe=!1){if(a===!1)return P;if(I!==null){if(n[I]!==void 0)return n[I];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+I+"'")}let ve=P;if(P===n.RED&&(ee===n.FLOAT&&(ve=n.R32F),ee===n.HALF_FLOAT&&(ve=n.R16F),ee===n.UNSIGNED_BYTE&&(ve=n.R8)),P===n.RED_INTEGER&&(ee===n.UNSIGNED_BYTE&&(ve=n.R8UI),ee===n.UNSIGNED_SHORT&&(ve=n.R16UI),ee===n.UNSIGNED_INT&&(ve=n.R32UI),ee===n.BYTE&&(ve=n.R8I),ee===n.SHORT&&(ve=n.R16I),ee===n.INT&&(ve=n.R32I)),P===n.RG&&(ee===n.FLOAT&&(ve=n.RG32F),ee===n.HALF_FLOAT&&(ve=n.RG16F),ee===n.UNSIGNED_BYTE&&(ve=n.RG8)),P===n.RGBA){const qe=xe?Wp:Xt.getTransfer(_e);ee===n.FLOAT&&(ve=n.RGBA32F),ee===n.HALF_FLOAT&&(ve=n.RGBA16F),ee===n.UNSIGNED_BYTE&&(ve=qe===nn?n.SRGB8_ALPHA8:n.RGBA8),ee===n.UNSIGNED_SHORT_4_4_4_4&&(ve=n.RGBA4),ee===n.UNSIGNED_SHORT_5_5_5_1&&(ve=n.RGB5_A1)}return(ve===n.R16F||ve===n.R32F||ve===n.RG16F||ve===n.RG32F||ve===n.RGBA16F||ve===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ve}function R(I,P,ee){return A(I,ee)===!0||I.isFramebufferTexture&&I.minFilter!==Ln&&I.minFilter!==un?Math.log2(Math.max(P.width,P.height))+1:I.mipmaps!==void 0&&I.mipmaps.length>0?I.mipmaps.length:I.isCompressedTexture&&Array.isArray(I.image)?P.mipmaps.length:1}function T(I){return I===Ln||I===Gp||I===Ha?n.NEAREST:n.LINEAR}function B(I){const P=I.target;P.removeEventListener("dispose",B),F(P),P.isVideoTexture&&f.delete(P)}function L(I){const P=I.target;P.removeEventListener("dispose",L),D(P)}function F(I){const P=i.get(I);if(P.__webglInit===void 0)return;const ee=I.source,_e=p.get(ee);if(_e){const xe=_e[P.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&C(I),Object.keys(_e).length===0&&p.delete(ee)}i.remove(I)}function C(I){const P=i.get(I);n.deleteTexture(P.__webglTexture);const ee=I.source,_e=p.get(ee);delete _e[P.__cacheKey],o.memory.textures--}function D(I){const P=I.texture,ee=i.get(I),_e=i.get(P);if(_e.__webglTexture!==void 0&&(n.deleteTexture(_e.__webglTexture),o.memory.textures--),I.depthTexture&&I.depthTexture.dispose(),I.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++){if(Array.isArray(ee.__webglFramebuffer[xe]))for(let ve=0;ve<ee.__webglFramebuffer[xe].length;ve++)n.deleteFramebuffer(ee.__webglFramebuffer[xe][ve]);else n.deleteFramebuffer(ee.__webglFramebuffer[xe]);ee.__webglDepthbuffer&&n.deleteRenderbuffer(ee.__webglDepthbuffer[xe])}else{if(Array.isArray(ee.__webglFramebuffer))for(let xe=0;xe<ee.__webglFramebuffer.length;xe++)n.deleteFramebuffer(ee.__webglFramebuffer[xe]);else n.deleteFramebuffer(ee.__webglFramebuffer);if(ee.__webglDepthbuffer&&n.deleteRenderbuffer(ee.__webglDepthbuffer),ee.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ee.__webglMultisampledFramebuffer),ee.__webglColorRenderbuffer)for(let xe=0;xe<ee.__webglColorRenderbuffer.length;xe++)ee.__webglColorRenderbuffer[xe]&&n.deleteRenderbuffer(ee.__webglColorRenderbuffer[xe]);ee.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ee.__webglDepthRenderbuffer)}if(I.isWebGLMultipleRenderTargets)for(let xe=0,ve=P.length;xe<ve;xe++){const qe=i.get(P[xe]);qe.__webglTexture&&(n.deleteTexture(qe.__webglTexture),o.memory.textures--),i.remove(P[xe])}i.remove(P),i.remove(I)}let te=0;function $(){te=0}function k(){const I=te;return I>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+I+" texture units while this GPU supports only "+s.maxTextures),te+=1,I}function q(I){const P=[];return P.push(I.wrapS),P.push(I.wrapT),P.push(I.wrapR||0),P.push(I.magFilter),P.push(I.minFilter),P.push(I.anisotropy),P.push(I.internalFormat),P.push(I.format),P.push(I.type),P.push(I.generateMipmaps),P.push(I.premultiplyAlpha),P.push(I.flipY),P.push(I.unpackAlignment),P.push(I.colorSpace),P.join()}function H(I,P){const ee=i.get(I);if(I.isVideoTexture&&Ge(I),I.isRenderTargetTexture===!1&&I.version>0&&ee.__version!==I.version){const _e=I.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(ee,I,P);return}}t.bindTexture(n.TEXTURE_2D,ee.__webglTexture,n.TEXTURE0+P)}function Y(I,P){const ee=i.get(I);if(I.version>0&&ee.__version!==I.version){de(ee,I,P);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ee.__webglTexture,n.TEXTURE0+P)}function V(I,P){const ee=i.get(I);if(I.version>0&&ee.__version!==I.version){de(ee,I,P);return}t.bindTexture(n.TEXTURE_3D,ee.__webglTexture,n.TEXTURE0+P)}function X(I,P){const ee=i.get(I);if(I.version>0&&ee.__version!==I.version){Ce(ee,I,P);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ee.__webglTexture,n.TEXTURE0+P)}const J={[pl]:n.REPEAT,[mi]:n.CLAMP_TO_EDGE,[Sf]:n.MIRRORED_REPEAT},K={[Ln]:n.NEAREST,[Gp]:n.NEAREST_MIPMAP_NEAREST,[Ha]:n.NEAREST_MIPMAP_LINEAR,[un]:n.LINEAR,[nf]:n.LINEAR_MIPMAP_NEAREST,[lr]:n.LINEAR_MIPMAP_LINEAR},ae={[ZN]:n.NEVER,[sU]:n.ALWAYS,[$N]:n.LESS,[V1]:n.LEQUAL,[eU]:n.EQUAL,[iU]:n.GEQUAL,[tU]:n.GREATER,[nU]:n.NOTEQUAL};function Be(I,P,ee){if(P.type===or&&e.has("OES_texture_float_linear")===!1&&(P.magFilter===un||P.magFilter===nf||P.magFilter===Ha||P.magFilter===lr||P.minFilter===un||P.minFilter===nf||P.minFilter===Ha||P.minFilter===lr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ee?(n.texParameteri(I,n.TEXTURE_WRAP_S,J[P.wrapS]),n.texParameteri(I,n.TEXTURE_WRAP_T,J[P.wrapT]),(I===n.TEXTURE_3D||I===n.TEXTURE_2D_ARRAY)&&n.texParameteri(I,n.TEXTURE_WRAP_R,J[P.wrapR]),n.texParameteri(I,n.TEXTURE_MAG_FILTER,K[P.magFilter]),n.texParameteri(I,n.TEXTURE_MIN_FILTER,K[P.minFilter])):(n.texParameteri(I,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(I,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(I===n.TEXTURE_3D||I===n.TEXTURE_2D_ARRAY)&&n.texParameteri(I,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(P.wrapS!==mi||P.wrapT!==mi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(I,n.TEXTURE_MAG_FILTER,T(P.magFilter)),n.texParameteri(I,n.TEXTURE_MIN_FILTER,T(P.minFilter)),P.minFilter!==Ln&&P.minFilter!==un&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),P.compareFunction&&(n.texParameteri(I,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(I,n.TEXTURE_COMPARE_FUNC,ae[P.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(P.magFilter===Ln||P.minFilter!==Ha&&P.minFilter!==lr||P.type===or&&e.has("OES_texture_float_linear")===!1||a===!1&&P.type===Mf&&e.has("OES_texture_half_float_linear")===!1)return;(P.anisotropy>1||i.get(P).__currentAnisotropy)&&(n.texParameterf(I,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,s.getMaxAnisotropy())),i.get(P).__currentAnisotropy=P.anisotropy)}}function Q(I,P){let ee=!1;I.__webglInit===void 0&&(I.__webglInit=!0,P.addEventListener("dispose",B));const _e=P.source;let xe=p.get(_e);xe===void 0&&(xe={},p.set(_e,xe));const ve=q(P);if(ve!==I.__cacheKey){xe[ve]===void 0&&(xe[ve]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ee=!0),xe[ve].usedTimes++;const qe=xe[I.__cacheKey];qe!==void 0&&(xe[I.__cacheKey].usedTimes--,qe.usedTimes===0&&C(P)),I.__cacheKey=ve,I.__webglTexture=xe[ve].texture}return ee}function de(I,P,ee){let _e=n.TEXTURE_2D;(P.isDataArrayTexture||P.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),P.isData3DTexture&&(_e=n.TEXTURE_3D);const xe=Q(I,P),ve=P.source;t.bindTexture(_e,I.__webglTexture,n.TEXTURE0+ee);const qe=i.get(ve);if(ve.version!==qe.__version||xe===!0){t.activeTexture(n.TEXTURE0+ee);const Oe=Xt.getPrimaries(Xt.workingColorSpace),Ue=P.colorSpace===Bs?null:Xt.getPrimaries(P.colorSpace),it=P.colorSpace===Bs||Oe===Ue?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,P.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,P.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,it);const mt=y(P)&&_(P.image)===!1;let Se=S(P.image,mt,!1,s.maxTextureSize);Se=Ne(P,Se);const Rt=_(Se)||a,xt=r.convert(P.format,P.colorSpace);let rt=r.convert(P.type),et=E(P.internalFormat,xt,rt,P.colorSpace,P.isVideoTexture);Be(_e,P,Rt);let Je;const j=P.mipmaps,ye=a&&P.isVideoTexture!==!0&&et!==z1,Fe=qe.__version===void 0||xe===!0,Ye=ve.dataReady,ft=R(P,Se,Rt);if(P.isDepthTexture)et=n.DEPTH_COMPONENT,a?P.type===or?et=n.DEPTH_COMPONENT32F:P.type===Wo?et=n.DEPTH_COMPONENT24:P.type===il?et=n.DEPTH24_STENCIL8:et=n.DEPTH_COMPONENT16:P.type===or&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===sl&&et===n.DEPTH_COMPONENT&&P.type!==V0&&P.type!==Wo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=Wo,rt=r.convert(P.type)),P.format===eu&&et===n.DEPTH_COMPONENT&&(et=n.DEPTH_STENCIL,P.type!==il&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=il,rt=r.convert(P.type))),Fe&&(ye?t.texStorage2D(n.TEXTURE_2D,1,et,Se.width,Se.height):t.texImage2D(n.TEXTURE_2D,0,et,Se.width,Se.height,0,xt,rt,null));else if(P.isDataTexture)if(j.length>0&&Rt){ye&&Fe&&t.texStorage2D(n.TEXTURE_2D,ft,et,j[0].width,j[0].height);for(let z=0,be=j.length;z<be;z++)Je=j[z],ye?Ye&&t.texSubImage2D(n.TEXTURE_2D,z,0,0,Je.width,Je.height,xt,rt,Je.data):t.texImage2D(n.TEXTURE_2D,z,et,Je.width,Je.height,0,xt,rt,Je.data);P.generateMipmaps=!1}else ye?(Fe&&t.texStorage2D(n.TEXTURE_2D,ft,et,Se.width,Se.height),Ye&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Se.width,Se.height,xt,rt,Se.data)):t.texImage2D(n.TEXTURE_2D,0,et,Se.width,Se.height,0,xt,rt,Se.data);else if(P.isCompressedTexture)if(P.isCompressedArrayTexture){ye&&Fe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ft,et,j[0].width,j[0].height,Se.depth);for(let z=0,be=j.length;z<be;z++)Je=j[z],P.format!==qi?xt!==null?ye?Ye&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,z,0,0,0,Je.width,Je.height,Se.depth,xt,Je.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,z,et,Je.width,Je.height,Se.depth,0,Je.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ye?Ye&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,z,0,0,0,Je.width,Je.height,Se.depth,xt,rt,Je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,z,et,Je.width,Je.height,Se.depth,0,xt,rt,Je.data)}else{ye&&Fe&&t.texStorage2D(n.TEXTURE_2D,ft,et,j[0].width,j[0].height);for(let z=0,be=j.length;z<be;z++)Je=j[z],P.format!==qi?xt!==null?ye?Ye&&t.compressedTexSubImage2D(n.TEXTURE_2D,z,0,0,Je.width,Je.height,xt,Je.data):t.compressedTexImage2D(n.TEXTURE_2D,z,et,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ye?Ye&&t.texSubImage2D(n.TEXTURE_2D,z,0,0,Je.width,Je.height,xt,rt,Je.data):t.texImage2D(n.TEXTURE_2D,z,et,Je.width,Je.height,0,xt,rt,Je.data)}else if(P.isDataArrayTexture)ye?(Fe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ft,et,Se.width,Se.height,Se.depth),Ye&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Se.width,Se.height,Se.depth,xt,rt,Se.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,et,Se.width,Se.height,Se.depth,0,xt,rt,Se.data);else if(P.isData3DTexture)ye?(Fe&&t.texStorage3D(n.TEXTURE_3D,ft,et,Se.width,Se.height,Se.depth),Ye&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Se.width,Se.height,Se.depth,xt,rt,Se.data)):t.texImage3D(n.TEXTURE_3D,0,et,Se.width,Se.height,Se.depth,0,xt,rt,Se.data);else if(P.isFramebufferTexture){if(Fe)if(ye)t.texStorage2D(n.TEXTURE_2D,ft,et,Se.width,Se.height);else{let z=Se.width,be=Se.height;for(let Re=0;Re<ft;Re++)t.texImage2D(n.TEXTURE_2D,Re,et,z,be,0,xt,rt,null),z>>=1,be>>=1}}else if(j.length>0&&Rt){ye&&Fe&&t.texStorage2D(n.TEXTURE_2D,ft,et,j[0].width,j[0].height);for(let z=0,be=j.length;z<be;z++)Je=j[z],ye?Ye&&t.texSubImage2D(n.TEXTURE_2D,z,0,0,xt,rt,Je):t.texImage2D(n.TEXTURE_2D,z,et,xt,rt,Je);P.generateMipmaps=!1}else ye?(Fe&&t.texStorage2D(n.TEXTURE_2D,ft,et,Se.width,Se.height),Ye&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,xt,rt,Se)):t.texImage2D(n.TEXTURE_2D,0,et,xt,rt,Se);A(P,Rt)&&M(_e),qe.__version=ve.version,P.onUpdate&&P.onUpdate(P)}I.__version=P.version}function Ce(I,P,ee){if(P.image.length!==6)return;const _e=Q(I,P),xe=P.source;t.bindTexture(n.TEXTURE_CUBE_MAP,I.__webglTexture,n.TEXTURE0+ee);const ve=i.get(xe);if(xe.version!==ve.__version||_e===!0){t.activeTexture(n.TEXTURE0+ee);const qe=Xt.getPrimaries(Xt.workingColorSpace),Oe=P.colorSpace===Bs?null:Xt.getPrimaries(P.colorSpace),Ue=P.colorSpace===Bs||qe===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,P.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,P.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ue);const it=P.isCompressedTexture||P.image[0].isCompressedTexture,mt=P.image[0]&&P.image[0].isDataTexture,Se=[];for(let z=0;z<6;z++)!it&&!mt?Se[z]=S(P.image[z],!1,!0,s.maxCubemapSize):Se[z]=mt?P.image[z].image:P.image[z],Se[z]=Ne(P,Se[z]);const Rt=Se[0],xt=_(Rt)||a,rt=r.convert(P.format,P.colorSpace),et=r.convert(P.type),Je=E(P.internalFormat,rt,et,P.colorSpace),j=a&&P.isVideoTexture!==!0,ye=ve.__version===void 0||_e===!0,Fe=xe.dataReady;let Ye=R(P,Rt,xt);Be(n.TEXTURE_CUBE_MAP,P,xt);let ft;if(it){j&&ye&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ye,Je,Rt.width,Rt.height);for(let z=0;z<6;z++){ft=Se[z].mipmaps;for(let be=0;be<ft.length;be++){const Re=ft[be];P.format!==qi?rt!==null?j?Fe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,be,0,0,Re.width,Re.height,rt,Re.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,be,Je,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):j?Fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,be,0,0,Re.width,Re.height,rt,et,Re.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,be,Je,Re.width,Re.height,0,rt,et,Re.data)}}}else{ft=P.mipmaps,j&&ye&&(ft.length>0&&Ye++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ye,Je,Se[0].width,Se[0].height));for(let z=0;z<6;z++)if(mt){j?Fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,0,0,0,Se[z].width,Se[z].height,rt,et,Se[z].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,0,Je,Se[z].width,Se[z].height,0,rt,et,Se[z].data);for(let be=0;be<ft.length;be++){const $e=ft[be].image[z].image;j?Fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,be+1,0,0,$e.width,$e.height,rt,et,$e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,be+1,Je,$e.width,$e.height,0,rt,et,$e.data)}}else{j?Fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,0,0,0,rt,et,Se[z]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,0,Je,rt,et,Se[z]);for(let be=0;be<ft.length;be++){const Re=ft[be];j?Fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,be+1,0,0,rt,et,Re.image[z]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+z,be+1,Je,rt,et,Re.image[z])}}}A(P,xt)&&M(n.TEXTURE_CUBE_MAP),ve.__version=xe.version,P.onUpdate&&P.onUpdate(P)}I.__version=P.version}function ze(I,P,ee,_e,xe,ve){const qe=r.convert(ee.format,ee.colorSpace),Oe=r.convert(ee.type),Ue=E(ee.internalFormat,qe,Oe,ee.colorSpace);if(!i.get(P).__hasExternalTextures){const mt=Math.max(1,P.width>>ve),Se=Math.max(1,P.height>>ve);xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?t.texImage3D(xe,ve,Ue,mt,Se,P.depth,0,qe,Oe,null):t.texImage2D(xe,ve,Ue,mt,Se,0,qe,Oe,null)}t.bindFramebuffer(n.FRAMEBUFFER,I),me(P)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,xe,i.get(ee).__webglTexture,0,Me(P)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,xe,i.get(ee).__webglTexture,ve),t.bindFramebuffer(n.FRAMEBUFFER,null)}function We(I,P,ee){if(n.bindRenderbuffer(n.RENDERBUFFER,I),P.depthBuffer&&!P.stencilBuffer){let _e=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ee||me(P)){const xe=P.depthTexture;xe&&xe.isDepthTexture&&(xe.type===or?_e=n.DEPTH_COMPONENT32F:xe.type===Wo&&(_e=n.DEPTH_COMPONENT24));const ve=Me(P);me(P)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ve,_e,P.width,P.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ve,_e,P.width,P.height)}else n.renderbufferStorage(n.RENDERBUFFER,_e,P.width,P.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,I)}else if(P.depthBuffer&&P.stencilBuffer){const _e=Me(P);ee&&me(P)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,P.width,P.height):me(P)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,P.width,P.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,P.width,P.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,I)}else{const _e=P.isWebGLMultipleRenderTargets===!0?P.texture:[P.texture];for(let xe=0;xe<_e.length;xe++){const ve=_e[xe],qe=r.convert(ve.format,ve.colorSpace),Oe=r.convert(ve.type),Ue=E(ve.internalFormat,qe,Oe,ve.colorSpace),it=Me(P);ee&&me(P)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,it,Ue,P.width,P.height):me(P)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,it,Ue,P.width,P.height):n.renderbufferStorage(n.RENDERBUFFER,Ue,P.width,P.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Xe(I,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,I),!(P.depthTexture&&P.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),H(P.depthTexture,0);const _e=i.get(P.depthTexture).__webglTexture,xe=Me(P);if(P.depthTexture.format===sl)me(P)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0);else if(P.depthTexture.format===eu)me(P)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function Ze(I){const P=i.get(I),ee=I.isWebGLCubeRenderTarget===!0;if(I.depthTexture&&!P.__autoAllocateDepthBuffer){if(ee)throw new Error("target.depthTexture not supported in Cube render targets");Xe(P.__webglFramebuffer,I)}else if(ee){P.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer[_e]),P.__webglDepthbuffer[_e]=n.createRenderbuffer(),We(P.__webglDepthbuffer[_e],I,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer),P.__webglDepthbuffer=n.createRenderbuffer(),We(P.__webglDepthbuffer,I,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(I,P,ee){const _e=i.get(I);P!==void 0&&ze(_e.__webglFramebuffer,I,I.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ee!==void 0&&Ze(I)}function G(I){const P=I.texture,ee=i.get(I),_e=i.get(P);I.addEventListener("dispose",L),I.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=P.version,o.memory.textures++);const xe=I.isWebGLCubeRenderTarget===!0,ve=I.isWebGLMultipleRenderTargets===!0,qe=_(I)||a;if(xe){ee.__webglFramebuffer=[];for(let Oe=0;Oe<6;Oe++)if(a&&P.mipmaps&&P.mipmaps.length>0){ee.__webglFramebuffer[Oe]=[];for(let Ue=0;Ue<P.mipmaps.length;Ue++)ee.__webglFramebuffer[Oe][Ue]=n.createFramebuffer()}else ee.__webglFramebuffer[Oe]=n.createFramebuffer()}else{if(a&&P.mipmaps&&P.mipmaps.length>0){ee.__webglFramebuffer=[];for(let Oe=0;Oe<P.mipmaps.length;Oe++)ee.__webglFramebuffer[Oe]=n.createFramebuffer()}else ee.__webglFramebuffer=n.createFramebuffer();if(ve)if(s.drawBuffers){const Oe=I.texture;for(let Ue=0,it=Oe.length;Ue<it;Ue++){const mt=i.get(Oe[Ue]);mt.__webglTexture===void 0&&(mt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&I.samples>0&&me(I)===!1){const Oe=ve?P:[P];ee.__webglMultisampledFramebuffer=n.createFramebuffer(),ee.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglMultisampledFramebuffer);for(let Ue=0;Ue<Oe.length;Ue++){const it=Oe[Ue];ee.__webglColorRenderbuffer[Ue]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ee.__webglColorRenderbuffer[Ue]);const mt=r.convert(it.format,it.colorSpace),Se=r.convert(it.type),Rt=E(it.internalFormat,mt,Se,it.colorSpace,I.isXRRenderTarget===!0),xt=Me(I);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,Rt,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,ee.__webglColorRenderbuffer[Ue])}n.bindRenderbuffer(n.RENDERBUFFER,null),I.depthBuffer&&(ee.__webglDepthRenderbuffer=n.createRenderbuffer(),We(ee.__webglDepthRenderbuffer,I,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(xe){t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Be(n.TEXTURE_CUBE_MAP,P,qe);for(let Oe=0;Oe<6;Oe++)if(a&&P.mipmaps&&P.mipmaps.length>0)for(let Ue=0;Ue<P.mipmaps.length;Ue++)ze(ee.__webglFramebuffer[Oe][Ue],I,P,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ue);else ze(ee.__webglFramebuffer[Oe],I,P,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0);A(P,qe)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ve){const Oe=I.texture;for(let Ue=0,it=Oe.length;Ue<it;Ue++){const mt=Oe[Ue],Se=i.get(mt);t.bindTexture(n.TEXTURE_2D,Se.__webglTexture),Be(n.TEXTURE_2D,mt,qe),ze(ee.__webglFramebuffer,I,mt,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,0),A(mt,qe)&&M(n.TEXTURE_2D)}t.unbindTexture()}else{let Oe=n.TEXTURE_2D;if((I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&&(a?Oe=I.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Oe,_e.__webglTexture),Be(Oe,P,qe),a&&P.mipmaps&&P.mipmaps.length>0)for(let Ue=0;Ue<P.mipmaps.length;Ue++)ze(ee.__webglFramebuffer[Ue],I,P,n.COLOR_ATTACHMENT0,Oe,Ue);else ze(ee.__webglFramebuffer,I,P,n.COLOR_ATTACHMENT0,Oe,0);A(P,qe)&&M(Oe),t.unbindTexture()}I.depthBuffer&&Ze(I)}function Ae(I){const P=_(I)||a,ee=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let _e=0,xe=ee.length;_e<xe;_e++){const ve=ee[_e];if(A(ve,P)){const qe=I.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Oe=i.get(ve).__webglTexture;t.bindTexture(qe,Oe),M(qe),t.unbindTexture()}}}function he(I){if(a&&I.samples>0&&me(I)===!1){const P=I.isWebGLMultipleRenderTargets?I.texture:[I.texture],ee=I.width,_e=I.height;let xe=n.COLOR_BUFFER_BIT;const ve=[],qe=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=i.get(I),Ue=I.isWebGLMultipleRenderTargets===!0;if(Ue)for(let it=0;it<P.length;it++)t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Oe.__webglFramebuffer);for(let it=0;it<P.length;it++){ve.push(n.COLOR_ATTACHMENT0+it),I.depthBuffer&&ve.push(qe);const mt=Oe.__ignoreDepthValues!==void 0?Oe.__ignoreDepthValues:!1;if(mt===!1&&(I.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),I.stencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),Ue&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Oe.__webglColorRenderbuffer[it]),mt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[qe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[qe])),Ue){const Se=i.get(P[it]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Se,0)}n.blitFramebuffer(0,0,ee,_e,0,0,ee,_e,xe,n.NEAREST),h&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ve)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ue)for(let it=0;it<P.length;it++){t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.RENDERBUFFER,Oe.__webglColorRenderbuffer[it]);const mt=i.get(P[it]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+it,n.TEXTURE_2D,mt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Oe.__webglMultisampledFramebuffer)}}function Me(I){return Math.min(s.maxSamples,I.samples)}function me(I){const P=i.get(I);return a&&I.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&P.__useRenderToTexture!==!1}function Ge(I){const P=o.render.frame;f.get(I)!==P&&(f.set(I,P),I.update())}function Ne(I,P){const ee=I.colorSpace,_e=I.format,xe=I.type;return I.isCompressedTexture===!0||I.isVideoTexture===!0||I.format===Zv||ee!==Ur&&ee!==Bs&&(Xt.getTransfer(ee)===nn?a===!1?e.has("EXT_sRGB")===!0&&_e===qi?(I.format=Zv,I.minFilter=un,I.generateMipmaps=!1):P=j1.sRGBToLinear(P):(_e!==qi||xe!==ho)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ee)),P}this.allocateTextureUnit=k,this.resetTextureUnits=$,this.setTexture2D=H,this.setTexture2DArray=Y,this.setTexture3D=V,this.setTextureCube=X,this.rebindTextures=Ee,this.setupRenderTarget=G,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=he,this.setupDepthRenderbuffer=Ze,this.setupFrameBufferTexture=ze,this.useMultisampledRTT=me}function _U(n,e,t){const i=t.isWebGL2;function s(r,o=Bs){let a;const l=Xt.getTransfer(o);if(r===ho)return n.UNSIGNED_BYTE;if(r===O1)return n.UNSIGNED_SHORT_4_4_4_4;if(r===I1)return n.UNSIGNED_SHORT_5_5_5_1;if(r===UN)return n.BYTE;if(r===FN)return n.SHORT;if(r===V0)return n.UNSIGNED_SHORT;if(r===L1)return n.INT;if(r===Wo)return n.UNSIGNED_INT;if(r===or)return n.FLOAT;if(r===Mf)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(r===zN)return n.ALPHA;if(r===qi)return n.RGBA;if(r===kN)return n.LUMINANCE;if(r===HN)return n.LUMINANCE_ALPHA;if(r===sl)return n.DEPTH_COMPONENT;if(r===eu)return n.DEPTH_STENCIL;if(r===Zv)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(r===GN)return n.RED;if(r===N1)return n.RED_INTEGER;if(r===VN)return n.RG;if(r===U1)return n.RG_INTEGER;if(r===F1)return n.RGBA_INTEGER;if(r===sv||r===rv||r===ov||r===av)if(l===nn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===sv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===rv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===ov)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===av)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===sv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===rv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===ov)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===av)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===cb||r===ub||r===hb||r===fb)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===cb)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===ub)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===hb)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===fb)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===z1)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(r===db||r===pb)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===db)return l===nn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===pb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===mb||r===gb||r===yb||r===vb||r===xb||r===_b||r===Ab||r===Sb||r===Mb||r===bb||r===Eb||r===wb||r===Cb||r===Tb)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===mb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===gb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===yb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===vb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===xb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===_b)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Ab)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Sb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Mb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===bb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Eb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===wb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Cb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Tb)return l===nn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===lv||r===Rb||r===Bb)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===lv)return l===nn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Rb)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Bb)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===WN||r===Pb||r===Db||r===Lb)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===lv)return a.COMPRESSED_RED_RGTC1_EXT;if(r===Pb)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===Db)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Lb)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===il?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[r]!==void 0?n[r]:null}return{convert:s}}class AU extends vn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class jo extends zt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const PY={type:"move"};class QA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new jo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new jo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new jo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){o=!0;for(const S of e.hand.values()){const _=t.getJointPose(S,i),y=this._getHandJoint(h,S);_!==null&&(y.matrix.fromArray(_.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=_.radius),y.visible=_!==null}const f=h.joints["index-finger-tip"],d=h.joints["thumb-tip"],p=f.position.distanceTo(d.position),g=.02,v=.005;h.inputState.pinching&&p>g+v?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&p<=g-v&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(PY)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new jo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const DY=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,LY=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class OY{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new xn,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,s=new zr({extensions:{fragDepth:!0},vertexShader:DY,fragmentShader:LY,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Hn(new zf(20,20),s)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class IY extends la{constructor(e,t){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=1,h=null,f=null,d=null,p=null,g=null,v=null;const S=new OY,_=t.getContextAttributes();let y=null,A=null;const M=[],E=[],R=new pe;let T=null;const B=new vn;B.layers.enable(1),B.viewport=new Yt;const L=new vn;L.layers.enable(2),L.viewport=new Yt;const F=[B,L],C=new AU;C.layers.enable(1),C.layers.enable(2);let D=null,te=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let de=M[Q];return de===void 0&&(de=new QA,M[Q]=de),de.getTargetRaySpace()},this.getControllerGrip=function(Q){let de=M[Q];return de===void 0&&(de=new QA,M[Q]=de),de.getGripSpace()},this.getHand=function(Q){let de=M[Q];return de===void 0&&(de=new QA,M[Q]=de),de.getHandSpace()};function $(Q){const de=E.indexOf(Q.inputSource);if(de===-1)return;const Ce=M[de];Ce!==void 0&&(Ce.update(Q.inputSource,Q.frame,h||o),Ce.dispatchEvent({type:Q.type,data:Q.inputSource}))}function k(){s.removeEventListener("select",$),s.removeEventListener("selectstart",$),s.removeEventListener("selectend",$),s.removeEventListener("squeeze",$),s.removeEventListener("squeezestart",$),s.removeEventListener("squeezeend",$),s.removeEventListener("end",k),s.removeEventListener("inputsourceschange",q);for(let Q=0;Q<M.length;Q++){const de=E[Q];de!==null&&(E[Q]=null,M[Q].disconnect(de))}D=null,te=null,S.reset(),e.setRenderTarget(y),g=null,p=null,d=null,s=null,A=null,Be.stop(),i.isPresenting=!1,e.setPixelRatio(T),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){r=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){a=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(Q){h=Q},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return s},this.setSession=async function(Q){if(s=Q,s!==null){if(y=e.getRenderTarget(),s.addEventListener("select",$),s.addEventListener("selectstart",$),s.addEventListener("selectend",$),s.addEventListener("squeeze",$),s.addEventListener("squeezestart",$),s.addEventListener("squeezeend",$),s.addEventListener("end",k),s.addEventListener("inputsourceschange",q),_.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(R),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const de={antialias:s.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:r};g=new XRWebGLLayer(s,t,de),s.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),A=new Fr(g.framebufferWidth,g.framebufferHeight,{format:qi,type:ho,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let de=null,Ce=null,ze=null;_.depth&&(ze=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,de=_.stencil?eu:sl,Ce=_.stencil?il:Wo);const We={colorFormat:t.RGBA8,depthFormat:ze,scaleFactor:r};d=new XRWebGLBinding(s,t),p=d.createProjectionLayer(We),s.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),A=new Fr(p.textureWidth,p.textureHeight,{format:qi,type:ho,depthTexture:new q1(p.textureWidth,p.textureHeight,Ce,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const Xe=e.properties.get(A);Xe.__ignoreDepthValues=p.ignoreDepthValues}A.isXRRenderTarget=!0,this.setFoveation(l),h=null,o=await s.requestReferenceSpace(a),Be.setContext(s),Be.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function q(Q){for(let de=0;de<Q.removed.length;de++){const Ce=Q.removed[de],ze=E.indexOf(Ce);ze>=0&&(E[ze]=null,M[ze].disconnect(Ce))}for(let de=0;de<Q.added.length;de++){const Ce=Q.added[de];let ze=E.indexOf(Ce);if(ze===-1){for(let Xe=0;Xe<M.length;Xe++)if(Xe>=E.length){E.push(Ce),ze=Xe;break}else if(E[Xe]===null){E[Xe]=Ce,ze=Xe;break}if(ze===-1)break}const We=M[ze];We&&We.connect(Ce)}}const H=new U,Y=new U;function V(Q,de,Ce){H.setFromMatrixPosition(de.matrixWorld),Y.setFromMatrixPosition(Ce.matrixWorld);const ze=H.distanceTo(Y),We=de.projectionMatrix.elements,Xe=Ce.projectionMatrix.elements,Ze=We[14]/(We[10]-1),Ee=We[14]/(We[10]+1),G=(We[9]+1)/We[5],Ae=(We[9]-1)/We[5],he=(We[8]-1)/We[0],Me=(Xe[8]+1)/Xe[0],me=Ze*he,Ge=Ze*Me,Ne=ze/(-he+Me),I=Ne*-he;de.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(I),Q.translateZ(Ne),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const P=Ze+Ne,ee=Ee+Ne,_e=me-I,xe=Ge+(ze-I),ve=G*Ee/ee*P,qe=Ae*Ee/ee*P;Q.projectionMatrix.makePerspective(_e,xe,ve,qe,P,ee),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}function X(Q,de){de===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(de.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(s===null)return;S.texture!==null&&(Q.near=S.depthNear,Q.far=S.depthFar),C.near=L.near=B.near=Q.near,C.far=L.far=B.far=Q.far,(D!==C.near||te!==C.far)&&(s.updateRenderState({depthNear:C.near,depthFar:C.far}),D=C.near,te=C.far,B.near=D,B.far=te,L.near=D,L.far=te,B.updateProjectionMatrix(),L.updateProjectionMatrix(),Q.updateProjectionMatrix());const de=Q.parent,Ce=C.cameras;X(C,de);for(let ze=0;ze<Ce.length;ze++)X(Ce[ze],de);Ce.length===2?V(C,B,L):C.projectionMatrix.copy(B.projectionMatrix),J(Q,C,de)};function J(Q,de,Ce){Ce===null?Q.matrix.copy(de.matrixWorld):(Q.matrix.copy(Ce.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(de.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(de.projectionMatrix),Q.projectionMatrixInverse.copy(de.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=Ef*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(Q){l=Q,p!==null&&(p.fixedFoveation=Q),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=Q)},this.hasDepthSensing=function(){return S.texture!==null};let K=null;function ae(Q,de){if(f=de.getViewerPose(h||o),v=de,f!==null){const Ce=f.views;g!==null&&(e.setRenderTargetFramebuffer(A,g.framebuffer),e.setRenderTarget(A));let ze=!1;Ce.length!==C.cameras.length&&(C.cameras.length=0,ze=!0);for(let Xe=0;Xe<Ce.length;Xe++){const Ze=Ce[Xe];let Ee=null;if(g!==null)Ee=g.getViewport(Ze);else{const Ae=d.getViewSubImage(p,Ze);Ee=Ae.viewport,Xe===0&&(e.setRenderTargetTextures(A,Ae.colorTexture,p.ignoreDepthValues?void 0:Ae.depthStencilTexture),e.setRenderTarget(A))}let G=F[Xe];G===void 0&&(G=new vn,G.layers.enable(Xe),G.viewport=new Yt,F[Xe]=G),G.matrix.fromArray(Ze.transform.matrix),G.matrix.decompose(G.position,G.quaternion,G.scale),G.projectionMatrix.fromArray(Ze.projectionMatrix),G.projectionMatrixInverse.copy(G.projectionMatrix).invert(),G.viewport.set(Ee.x,Ee.y,Ee.width,Ee.height),Xe===0&&(C.matrix.copy(G.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),ze===!0&&C.cameras.push(G)}const We=s.enabledFeatures;if(We&&We.includes("depth-sensing")){const Xe=d.getDepthInformation(Ce[0]);Xe&&Xe.isValid&&Xe.texture&&S.init(e,Xe,s.renderState)}}for(let Ce=0;Ce<M.length;Ce++){const ze=E[Ce],We=M[Ce];ze!==null&&We!==void 0&&We.update(ze,de,h||o)}S.render(e,C),K&&K(Q,de),de.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:de}),v=null}const Be=new pU;Be.setAnimationLoop(ae),this.setAnimationLoop=function(Q){K=Q},this.dispose=function(){}}}function NY(n,e){function t(_,y){_.matrixAutoUpdate===!0&&_.updateMatrix(),y.value.copy(_.matrix)}function i(_,y){y.color.getRGB(_.fogColor.value,uU(n)),y.isFog?(_.fogNear.value=y.near,_.fogFar.value=y.far):y.isFogExp2&&(_.fogDensity.value=y.density)}function s(_,y,A,M,E){y.isMeshBasicMaterial||y.isMeshLambertMaterial?r(_,y):y.isMeshToonMaterial?(r(_,y),d(_,y)):y.isMeshPhongMaterial?(r(_,y),f(_,y)):y.isMeshStandardMaterial?(r(_,y),p(_,y),y.isMeshPhysicalMaterial&&g(_,y,E)):y.isMeshMatcapMaterial?(r(_,y),v(_,y)):y.isMeshDepthMaterial?r(_,y):y.isMeshDistanceMaterial?(r(_,y),S(_,y)):y.isMeshNormalMaterial?r(_,y):y.isLineBasicMaterial?(o(_,y),y.isLineDashedMaterial&&a(_,y)):y.isPointsMaterial?l(_,y,A,M):y.isSpriteMaterial?h(_,y):y.isShadowMaterial?(_.color.value.copy(y.color),_.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function r(_,y){_.opacity.value=y.opacity,y.color&&_.diffuse.value.copy(y.color),y.emissive&&_.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(_.map.value=y.map,t(y.map,_.mapTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,t(y.alphaMap,_.alphaMapTransform)),y.bumpMap&&(_.bumpMap.value=y.bumpMap,t(y.bumpMap,_.bumpMapTransform),_.bumpScale.value=y.bumpScale,y.side===es&&(_.bumpScale.value*=-1)),y.normalMap&&(_.normalMap.value=y.normalMap,t(y.normalMap,_.normalMapTransform),_.normalScale.value.copy(y.normalScale),y.side===es&&_.normalScale.value.negate()),y.displacementMap&&(_.displacementMap.value=y.displacementMap,t(y.displacementMap,_.displacementMapTransform),_.displacementScale.value=y.displacementScale,_.displacementBias.value=y.displacementBias),y.emissiveMap&&(_.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,_.emissiveMapTransform)),y.specularMap&&(_.specularMap.value=y.specularMap,t(y.specularMap,_.specularMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest);const A=e.get(y).envMap;if(A&&(_.envMap.value=A,_.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=y.reflectivity,_.ior.value=y.ior,_.refractionRatio.value=y.refractionRatio),y.lightMap){_.lightMap.value=y.lightMap;const M=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=y.lightMapIntensity*M,t(y.lightMap,_.lightMapTransform)}y.aoMap&&(_.aoMap.value=y.aoMap,_.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,_.aoMapTransform))}function o(_,y){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,y.map&&(_.map.value=y.map,t(y.map,_.mapTransform))}function a(_,y){_.dashSize.value=y.dashSize,_.totalSize.value=y.dashSize+y.gapSize,_.scale.value=y.scale}function l(_,y,A,M){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,_.size.value=y.size*A,_.scale.value=M*.5,y.map&&(_.map.value=y.map,t(y.map,_.uvTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,t(y.alphaMap,_.alphaMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest)}function h(_,y){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,_.rotation.value=y.rotation,y.map&&(_.map.value=y.map,t(y.map,_.mapTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,t(y.alphaMap,_.alphaMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest)}function f(_,y){_.specular.value.copy(y.specular),_.shininess.value=Math.max(y.shininess,1e-4)}function d(_,y){y.gradientMap&&(_.gradientMap.value=y.gradientMap)}function p(_,y){_.metalness.value=y.metalness,y.metalnessMap&&(_.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,_.metalnessMapTransform)),_.roughness.value=y.roughness,y.roughnessMap&&(_.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,_.roughnessMapTransform)),e.get(y).envMap&&(_.envMapIntensity.value=y.envMapIntensity)}function g(_,y,A){_.ior.value=y.ior,y.sheen>0&&(_.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),_.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(_.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,_.sheenColorMapTransform)),y.sheenRoughnessMap&&(_.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,_.sheenRoughnessMapTransform))),y.clearcoat>0&&(_.clearcoat.value=y.clearcoat,_.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(_.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,_.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(_.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===es&&_.clearcoatNormalScale.value.negate())),y.iridescence>0&&(_.iridescence.value=y.iridescence,_.iridescenceIOR.value=y.iridescenceIOR,_.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(_.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,_.iridescenceMapTransform)),y.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),y.transmission>0&&(_.transmission.value=y.transmission,_.transmissionSamplerMap.value=A.texture,_.transmissionSamplerSize.value.set(A.width,A.height),y.transmissionMap&&(_.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,_.transmissionMapTransform)),_.thickness.value=y.thickness,y.thicknessMap&&(_.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=y.attenuationDistance,_.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(_.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(_.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=y.specularIntensity,_.specularColor.value.copy(y.specularColor),y.specularColorMap&&(_.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,_.specularColorMapTransform)),y.specularIntensityMap&&(_.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,y){y.matcap&&(_.matcap.value=y.matcap)}function S(_,y){const A=e.get(y).light;_.referencePosition.value.setFromMatrixPosition(A.matrixWorld),_.nearDistance.value=A.shadow.camera.near,_.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function UY(n,e,t,i){let s={},r={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(A,M){const E=M.program;i.uniformBlockBinding(A,E)}function h(A,M){let E=s[A.id];E===void 0&&(v(A),E=f(A),s[A.id]=E,A.addEventListener("dispose",_));const R=M.program;i.updateUBOMapping(A,R);const T=e.render.frame;r[A.id]!==T&&(p(A),r[A.id]=T)}function f(A){const M=d();A.__bindingPointIndex=M;const E=n.createBuffer(),R=A.__size,T=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,R,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,E),E}function d(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(A){const M=s[A.id],E=A.uniforms,R=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let T=0,B=E.length;T<B;T++){const L=Array.isArray(E[T])?E[T]:[E[T]];for(let F=0,C=L.length;F<C;F++){const D=L[F];if(g(D,T,F,R)===!0){const te=D.__offset,$=Array.isArray(D.value)?D.value:[D.value];let k=0;for(let q=0;q<$.length;q++){const H=$[q],Y=S(H);typeof H=="number"||typeof H=="boolean"?(D.__data[0]=H,n.bufferSubData(n.UNIFORM_BUFFER,te+k,D.__data)):H.isMatrix3?(D.__data[0]=H.elements[0],D.__data[1]=H.elements[1],D.__data[2]=H.elements[2],D.__data[3]=0,D.__data[4]=H.elements[3],D.__data[5]=H.elements[4],D.__data[6]=H.elements[5],D.__data[7]=0,D.__data[8]=H.elements[6],D.__data[9]=H.elements[7],D.__data[10]=H.elements[8],D.__data[11]=0):(H.toArray(D.__data,k),k+=Y.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,te,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(A,M,E,R){const T=A.value,B=M+"_"+E;if(R[B]===void 0)return typeof T=="number"||typeof T=="boolean"?R[B]=T:R[B]=T.clone(),!0;{const L=R[B];if(typeof T=="number"||typeof T=="boolean"){if(L!==T)return R[B]=T,!0}else if(L.equals(T)===!1)return L.copy(T),!0}return!1}function v(A){const M=A.uniforms;let E=0;const R=16;for(let B=0,L=M.length;B<L;B++){const F=Array.isArray(M[B])?M[B]:[M[B]];for(let C=0,D=F.length;C<D;C++){const te=F[C],$=Array.isArray(te.value)?te.value:[te.value];for(let k=0,q=$.length;k<q;k++){const H=$[k],Y=S(H),V=E%R;V!==0&&R-V<Y.boundary&&(E+=R-V),te.__data=new Float32Array(Y.storage/Float32Array.BYTES_PER_ELEMENT),te.__offset=E,E+=Y.storage}}}const T=E%R;return T>0&&(E+=R-T),A.__size=E,A.__cache={},this}function S(A){const M={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(M.boundary=4,M.storage=4):A.isVector2?(M.boundary=8,M.storage=8):A.isVector3||A.isColor?(M.boundary=16,M.storage=12):A.isVector4?(M.boundary=16,M.storage=16):A.isMatrix3?(M.boundary=48,M.storage=48):A.isMatrix4?(M.boundary=64,M.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),M}function _(A){const M=A.target;M.removeEventListener("dispose",_);const E=o.indexOf(M.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(s[M.id]),delete s[M.id],delete r[M.id]}function y(){for(const A in s)n.deleteBuffer(s[A]);o=[],s={},r={}}return{bind:l,update:h,dispose:y}}class $1{constructor(e={}){const{canvas:t=aU(),context:i=null,depth:s=!0,stencil:r=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:h=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const g=new Uint32Array(4),v=new Int32Array(4);let S=null,_=null;const y=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Fn,this._useLegacyLights=!1,this.toneMapping=uo,this.toneMappingExposure=1;const M=this;let E=!1,R=0,T=0,B=null,L=-1,F=null;const C=new Yt,D=new Yt;let te=null;const $=new He(0);let k=0,q=t.width,H=t.height,Y=1,V=null,X=null;const J=new Yt(0,0,q,H),K=new Yt(0,0,q,H);let ae=!1;const Be=new vm;let Q=!1,de=!1,Ce=null;const ze=new ut,We=new pe,Xe=new U,Ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return B===null?Y:1}let G=i;function Ae(N,ie){for(let le=0;le<N.length;le++){const ue=N[le],oe=t.getContext(ue,ie);if(oe!==null)return oe}return null}try{const N={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${dm}`),t.addEventListener("webglcontextlost",ft,!1),t.addEventListener("webglcontextrestored",z,!1),t.addEventListener("webglcontextcreationerror",be,!1),G===null){const ie=["webgl2","webgl","experimental-webgl"];if(M.isWebGL1Renderer===!0&&ie.shift(),G=Ae(ie,N),G===null)throw Ae(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&G instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),G.getShaderPrecisionFormat===void 0&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}let he,Me,me,Ge,Ne,I,P,ee,_e,xe,ve,qe,Oe,Ue,it,mt,Se,Rt,xt,rt,et,Je,j,ye;function Fe(){he=new Y7(G),Me=new G7(G,he,e),he.init(Me),Je=new _U(G,he,Me),me=new RY(G,he,Me),Ge=new Q7(G),Ne=new yY,I=new BY(G,he,me,Ne,Me,Je,Ge),P=new W7(M),ee=new J7(M),_e=new rj(G,Me),j=new k7(G,he,_e,Me),xe=new K7(G,_e,Ge,j),ve=new tJ(G,xe,_e,Ge),xt=new eJ(G,Me,I),mt=new V7(Ne),qe=new gY(M,P,ee,he,Me,j,mt),Oe=new NY(M,Ne),Ue=new xY,it=new EY(he,Me),Rt=new z7(M,P,ee,me,ve,p,l),Se=new TY(M,ve,Me),ye=new UY(G,Ge,Me,me),rt=new H7(G,he,Ge,Me),et=new q7(G,he,Ge,Me),Ge.programs=qe.programs,M.capabilities=Me,M.extensions=he,M.properties=Ne,M.renderLists=Ue,M.shadowMap=Se,M.state=me,M.info=Ge}Fe();const Ye=new IY(M,G);this.xr=Ye,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const N=he.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=he.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(N){N!==void 0&&(Y=N,this.setSize(q,H,!1))},this.getSize=function(N){return N.set(q,H)},this.setSize=function(N,ie,le=!0){if(Ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=N,H=ie,t.width=Math.floor(N*Y),t.height=Math.floor(ie*Y),le===!0&&(t.style.width=N+"px",t.style.height=ie+"px"),this.setViewport(0,0,N,ie)},this.getDrawingBufferSize=function(N){return N.set(q*Y,H*Y).floor()},this.setDrawingBufferSize=function(N,ie,le){q=N,H=ie,Y=le,t.width=Math.floor(N*le),t.height=Math.floor(ie*le),this.setViewport(0,0,N,ie)},this.getCurrentViewport=function(N){return N.copy(C)},this.getViewport=function(N){return N.copy(J)},this.setViewport=function(N,ie,le,ue){N.isVector4?J.set(N.x,N.y,N.z,N.w):J.set(N,ie,le,ue),me.viewport(C.copy(J).multiplyScalar(Y).floor())},this.getScissor=function(N){return N.copy(K)},this.setScissor=function(N,ie,le,ue){N.isVector4?K.set(N.x,N.y,N.z,N.w):K.set(N,ie,le,ue),me.scissor(D.copy(K).multiplyScalar(Y).floor())},this.getScissorTest=function(){return ae},this.setScissorTest=function(N){me.setScissorTest(ae=N)},this.setOpaqueSort=function(N){V=N},this.setTransparentSort=function(N){X=N},this.getClearColor=function(N){return N.copy(Rt.getClearColor())},this.setClearColor=function(){Rt.setClearColor.apply(Rt,arguments)},this.getClearAlpha=function(){return Rt.getClearAlpha()},this.setClearAlpha=function(){Rt.setClearAlpha.apply(Rt,arguments)},this.clear=function(N=!0,ie=!0,le=!0){let ue=0;if(N){let oe=!1;if(B!==null){const De=B.texture.format;oe=De===F1||De===U1||De===N1}if(oe){const De=B.texture.type,ke=De===ho||De===Wo||De===V0||De===il||De===O1||De===I1,ot=Rt.getClearColor(),ht=Rt.getClearAlpha(),_t=ot.r,at=ot.g,gt=ot.b;ke?(g[0]=_t,g[1]=at,g[2]=gt,g[3]=ht,G.clearBufferuiv(G.COLOR,0,g)):(v[0]=_t,v[1]=at,v[2]=gt,v[3]=ht,G.clearBufferiv(G.COLOR,0,v))}else ue|=G.COLOR_BUFFER_BIT}ie&&(ue|=G.DEPTH_BUFFER_BIT),le&&(ue|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ft,!1),t.removeEventListener("webglcontextrestored",z,!1),t.removeEventListener("webglcontextcreationerror",be,!1),Ue.dispose(),it.dispose(),Ne.dispose(),P.dispose(),ee.dispose(),ve.dispose(),j.dispose(),ye.dispose(),qe.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",In),Ye.removeEventListener("sessionend",Nt),Ce&&(Ce.dispose(),Ce=null),ei.stop()};function ft(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function z(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const N=Ge.autoReset,ie=Se.enabled,le=Se.autoUpdate,ue=Se.needsUpdate,oe=Se.type;Fe(),Ge.autoReset=N,Se.enabled=ie,Se.autoUpdate=le,Se.needsUpdate=ue,Se.type=oe}function be(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function Re(N){const ie=N.target;ie.removeEventListener("dispose",Re),$e(ie)}function $e(N){tt(N),Ne.remove(N)}function tt(N){const ie=Ne.get(N).programs;ie!==void 0&&(ie.forEach(function(le){qe.releaseProgram(le)}),N.isShaderMaterial&&qe.releaseShaderCache(N))}this.renderBufferDirect=function(N,ie,le,ue,oe,De){ie===null&&(ie=Ze);const ke=oe.isMesh&&oe.matrixWorld.determinant()<0,ot=jf(N,ie,le,ue,oe);me.setMaterial(ue,ke);let ht=le.index,_t=1;if(ue.wireframe===!0){if(ht=xe.getWireframeAttribute(le),ht===void 0)return;_t=2}const at=le.drawRange,gt=le.attributes.position;let on=at.start*_t,ui=(at.start+at.count)*_t;De!==null&&(on=Math.max(on,De.start*_t),ui=Math.min(ui,(De.start+De.count)*_t)),ht!==null?(on=Math.max(on,0),ui=Math.min(ui,ht.count)):gt!=null&&(on=Math.max(on,0),ui=Math.min(ui,gt.count));const Nn=ui-on;if(Nn<0||Nn===1/0)return;j.setup(oe,ue,ot,le,ht);let Gs,$t=rt;if(ht!==null&&(Gs=_e.get(ht),$t=et,$t.setIndex(Gs)),oe.isMesh)ue.wireframe===!0?(me.setLineWidth(ue.wireframeLinewidth*Ee()),$t.setMode(G.LINES)):$t.setMode(G.TRIANGLES);else if(oe.isLine){let bt=ue.linewidth;bt===void 0&&(bt=1),me.setLineWidth(bt*Ee()),oe.isLineSegments?$t.setMode(G.LINES):oe.isLineLoop?$t.setMode(G.LINE_LOOP):$t.setMode(G.LINE_STRIP)}else oe.isPoints?$t.setMode(G.POINTS):oe.isSprite&&$t.setMode(G.TRIANGLES);if(oe.isBatchedMesh)$t.renderMultiDraw(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount);else if(oe.isInstancedMesh)$t.renderInstances(on,Nn,oe.count);else if(le.isInstancedBufferGeometry){const bt=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,Au=Math.min(le.instanceCount,bt);$t.renderInstances(on,Nn,Au)}else $t.render(on,Nn)};function vt(N,ie,le){N.transparent===!0&&N.side===rr&&N.forceSinglePass===!1?(N.side=es,N.needsUpdate=!0,rs(N,ie,le),N.side=go,N.needsUpdate=!0,rs(N,ie,le),N.side=rr):rs(N,ie,le)}this.compile=function(N,ie,le=null){le===null&&(le=N),_=it.get(le),_.init(),A.push(_),le.traverseVisible(function(oe){oe.isLight&&oe.layers.test(ie.layers)&&(_.pushLight(oe),oe.castShadow&&_.pushShadow(oe))}),N!==le&&N.traverseVisible(function(oe){oe.isLight&&oe.layers.test(ie.layers)&&(_.pushLight(oe),oe.castShadow&&_.pushShadow(oe))}),_.setupLights(M._useLegacyLights);const ue=new Set;return N.traverse(function(oe){const De=oe.material;if(De)if(Array.isArray(De))for(let ke=0;ke<De.length;ke++){const ot=De[ke];vt(ot,le,oe),ue.add(ot)}else vt(De,le,oe),ue.add(De)}),A.pop(),_=null,ue},this.compileAsync=function(N,ie,le=null){const ue=this.compile(N,ie,le);return new Promise(oe=>{function De(){if(ue.forEach(function(ke){Ne.get(ke).currentProgram.isReady()&&ue.delete(ke)}),ue.size===0){oe(N);return}setTimeout(De,10)}he.get("KHR_parallel_shader_compile")!==null?De():setTimeout(De,10)})};let Bt=null;function qt(N){Bt&&Bt(N)}function In(){ei.stop()}function Nt(){ei.start()}const ei=new pU;ei.setAnimationLoop(qt),typeof self<"u"&&ei.setContext(self),this.setAnimationLoop=function(N){Bt=N,Ye.setAnimationLoop(N),N===null?ei.stop():ei.start()},Ye.addEventListener("sessionstart",In),Ye.addEventListener("sessionend",Nt),this.render=function(N,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(ie),ie=Ye.getCamera()),N.isScene===!0&&N.onBeforeRender(M,N,ie,B),_=it.get(N,A.length),_.init(),A.push(_),ze.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),Be.setFromProjectionMatrix(ze),de=this.localClippingEnabled,Q=mt.init(this.clippingPlanes,de),S=Ue.get(N,y.length),S.init(),y.push(S),ss(N,ie,0,M.sortObjects),S.finish(),M.sortObjects===!0&&S.sort(V,X),this.info.render.frame++,Q===!0&&mt.beginShadows();const le=_.state.shadowsArray;if(Se.render(le,N,ie),Q===!0&&mt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Ye.enabled===!1||Ye.isPresenting===!1||Ye.hasDepthSensing()===!1)&&Rt.render(S,N),_.setupLights(M._useLegacyLights),ie.isArrayCamera){const ue=ie.cameras;for(let oe=0,De=ue.length;oe<De;oe++){const ke=ue[oe];_u(S,N,ke,ke.viewport)}}else _u(S,N,ie);B!==null&&(I.updateMultisampleRenderTarget(B),I.updateRenderTargetMipmap(B)),N.isScene===!0&&N.onAfterRender(M,N,ie),j.resetDefaultState(),L=-1,F=null,A.pop(),A.length>0?_=A[A.length-1]:_=null,y.pop(),y.length>0?S=y[y.length-1]:S=null};function ss(N,ie,le,ue){if(N.visible===!1)return;if(N.layers.test(ie.layers)){if(N.isGroup)le=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(ie);else if(N.isLight)_.pushLight(N),N.castShadow&&_.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||Be.intersectsSprite(N)){ue&&Xe.setFromMatrixPosition(N.matrixWorld).applyMatrix4(ze);const ke=ve.update(N),ot=N.material;ot.visible&&S.push(N,ke,ot,le,Xe.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||Be.intersectsObject(N))){const ke=ve.update(N),ot=N.material;if(ue&&(N.boundingSphere!==void 0?(N.boundingSphere===null&&N.computeBoundingSphere(),Xe.copy(N.boundingSphere.center)):(ke.boundingSphere===null&&ke.computeBoundingSphere(),Xe.copy(ke.boundingSphere.center)),Xe.applyMatrix4(N.matrixWorld).applyMatrix4(ze)),Array.isArray(ot)){const ht=ke.groups;for(let _t=0,at=ht.length;_t<at;_t++){const gt=ht[_t],on=ot[gt.materialIndex];on&&on.visible&&S.push(N,ke,on,le,Xe.z,gt)}}else ot.visible&&S.push(N,ke,ot,le,Xe.z,null)}}const De=N.children;for(let ke=0,ot=De.length;ke<ot;ke++)ss(De[ke],ie,le,ue)}function _u(N,ie,le,ue){const oe=N.opaque,De=N.transmissive,ke=N.transparent;_.setupLightsView(le),Q===!0&&mt.setGlobalState(M.clippingPlanes,le),De.length>0&&Xr(oe,De,ie,le),ue&&me.viewport(C.copy(ue)),oe.length>0&&Bl(oe,ie,le),De.length>0&&Bl(De,ie,le),ke.length>0&&Bl(ke,ie,le),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function Xr(N,ie,le,ue){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;const De=Me.isWebGL2;Ce===null&&(Ce=new Fr(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")?Mf:ho,minFilter:lr,samples:De?4:0})),M.getDrawingBufferSize(We),De?Ce.setSize(We.x,We.y):Ce.setSize($v(We.x),$v(We.y));const ke=M.getRenderTarget();M.setRenderTarget(Ce),M.getClearColor($),k=M.getClearAlpha(),k<1&&M.setClearColor(16777215,.5),M.clear();const ot=M.toneMapping;M.toneMapping=uo,Bl(N,le,ue),I.updateMultisampleRenderTarget(Ce),I.updateRenderTargetMipmap(Ce);let ht=!1;for(let _t=0,at=ie.length;_t<at;_t++){const gt=ie[_t],on=gt.object,ui=gt.geometry,Nn=gt.material,Gs=gt.group;if(Nn.side===rr&&on.layers.test(ue.layers)){const $t=Nn.side;Nn.side=es,Nn.needsUpdate=!0,pr(on,le,ue,ui,Nn,Gs),Nn.side=$t,Nn.needsUpdate=!0,ht=!0}}ht===!0&&(I.updateMultisampleRenderTarget(Ce),I.updateRenderTargetMipmap(Ce)),M.setRenderTarget(ke),M.setClearColor($,k),M.toneMapping=ot}function Bl(N,ie,le){const ue=ie.isScene===!0?ie.overrideMaterial:null;for(let oe=0,De=N.length;oe<De;oe++){const ke=N[oe],ot=ke.object,ht=ke.geometry,_t=ue===null?ke.material:ue,at=ke.group;ot.layers.test(le.layers)&&pr(ot,ie,le,ht,_t,at)}}function pr(N,ie,le,ue,oe,De){N.onBeforeRender(M,ie,le,ue,oe,De),N.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),oe.onBeforeRender(M,ie,le,ue,N,De),oe.transparent===!0&&oe.side===rr&&oe.forceSinglePass===!1?(oe.side=es,oe.needsUpdate=!0,M.renderBufferDirect(le,ie,ue,oe,N,De),oe.side=go,oe.needsUpdate=!0,M.renderBufferDirect(le,ie,ue,oe,N,De),oe.side=rr):M.renderBufferDirect(le,ie,ue,oe,N,De),N.onAfterRender(M,ie,le,ue,oe,De)}function rs(N,ie,le){ie.isScene!==!0&&(ie=Ze);const ue=Ne.get(N),oe=_.state.lights,De=_.state.shadowsArray,ke=oe.state.version,ot=qe.getParameters(N,oe.state,De,ie,le),ht=qe.getProgramCacheKey(ot);let _t=ue.programs;ue.environment=N.isMeshStandardMaterial?ie.environment:null,ue.fog=ie.fog,ue.envMap=(N.isMeshStandardMaterial?ee:P).get(N.envMap||ue.environment),_t===void 0&&(N.addEventListener("dispose",Re),_t=new Map,ue.programs=_t);let at=_t.get(ht);if(at!==void 0){if(ue.currentProgram===at&&ue.lightsStateVersion===ke)return pn(N,ot),at}else ot.uniforms=qe.getUniforms(N),N.onBuild(le,ot,M),N.onBeforeCompile(ot,M),at=qe.acquireProgram(ot,ht),_t.set(ht,at),ue.uniforms=ot.uniforms;const gt=ue.uniforms;return(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(gt.clippingPlanes=mt.uniform),pn(N,ot),ue.needsLights=Lm(N),ue.lightsStateVersion=ke,ue.needsLights&&(gt.ambientLightColor.value=oe.state.ambient,gt.lightProbe.value=oe.state.probe,gt.directionalLights.value=oe.state.directional,gt.directionalLightShadows.value=oe.state.directionalShadow,gt.spotLights.value=oe.state.spot,gt.spotLightShadows.value=oe.state.spotShadow,gt.rectAreaLights.value=oe.state.rectArea,gt.ltc_1.value=oe.state.rectAreaLTC1,gt.ltc_2.value=oe.state.rectAreaLTC2,gt.pointLights.value=oe.state.point,gt.pointLightShadows.value=oe.state.pointShadow,gt.hemisphereLights.value=oe.state.hemi,gt.directionalShadowMap.value=oe.state.directionalShadowMap,gt.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,gt.spotShadowMap.value=oe.state.spotShadowMap,gt.spotLightMatrix.value=oe.state.spotLightMatrix,gt.spotLightMap.value=oe.state.spotLightMap,gt.pointShadowMap.value=oe.state.pointShadowMap,gt.pointShadowMatrix.value=oe.state.pointShadowMatrix),ue.currentProgram=at,ue.uniformsList=null,at}function Pl(N){if(N.uniformsList===null){const ie=N.currentProgram.getUniforms();N.uniformsList=uv.seqWithValue(ie.seq,N.uniforms)}return N.uniformsList}function pn(N,ie){const le=Ne.get(N);le.outputColorSpace=ie.outputColorSpace,le.batching=ie.batching,le.instancing=ie.instancing,le.instancingColor=ie.instancingColor,le.skinning=ie.skinning,le.morphTargets=ie.morphTargets,le.morphNormals=ie.morphNormals,le.morphColors=ie.morphColors,le.morphTargetsCount=ie.morphTargetsCount,le.numClippingPlanes=ie.numClippingPlanes,le.numIntersection=ie.numClipIntersection,le.vertexAlphas=ie.vertexAlphas,le.vertexTangents=ie.vertexTangents,le.toneMapping=ie.toneMapping}function jf(N,ie,le,ue,oe){ie.isScene!==!0&&(ie=Ze),I.resetTextureUnits();const De=ie.fog,ke=ue.isMeshStandardMaterial?ie.environment:null,ot=B===null?M.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Ur,ht=(ue.isMeshStandardMaterial?ee:P).get(ue.envMap||ke),_t=ue.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,at=!!le.attributes.tangent&&(!!ue.normalMap||ue.anisotropy>0),gt=!!le.morphAttributes.position,on=!!le.morphAttributes.normal,ui=!!le.morphAttributes.color;let Nn=uo;ue.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Nn=M.toneMapping);const Gs=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,$t=Gs!==void 0?Gs.length:0,bt=Ne.get(ue),Au=_.state.lights;if(Q===!0&&(de===!0||N!==F)){const Gi=N===F&&ue.id===L;mt.setState(ue,N,Gi)}let an=!1;ue.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==Au.state.version||bt.outputColorSpace!==ot||oe.isBatchedMesh&&bt.batching===!1||!oe.isBatchedMesh&&bt.batching===!0||oe.isInstancedMesh&&bt.instancing===!1||!oe.isInstancedMesh&&bt.instancing===!0||oe.isSkinnedMesh&&bt.skinning===!1||!oe.isSkinnedMesh&&bt.skinning===!0||oe.isInstancedMesh&&bt.instancingColor===!0&&oe.instanceColor===null||oe.isInstancedMesh&&bt.instancingColor===!1&&oe.instanceColor!==null||bt.envMap!==ht||ue.fog===!0&&bt.fog!==De||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==mt.numPlanes||bt.numIntersection!==mt.numIntersection)||bt.vertexAlphas!==_t||bt.vertexTangents!==at||bt.morphTargets!==gt||bt.morphNormals!==on||bt.morphColors!==ui||bt.toneMapping!==Nn||Me.isWebGL2===!0&&bt.morphTargetsCount!==$t)&&(an=!0):(an=!0,bt.__version=ue.version);let mr=bt.currentProgram;an===!0&&(mr=rs(ue,ie,oe));let Jf=!1,Dl=!1,Su=!1;const Jn=mr.getUniforms(),Jr=bt.uniforms;if(me.useProgram(mr.program)&&(Jf=!0,Dl=!0,Su=!0),ue.id!==L&&(L=ue.id,Dl=!0),Jf||F!==N){Jn.setValue(G,"projectionMatrix",N.projectionMatrix),Jn.setValue(G,"viewMatrix",N.matrixWorldInverse);const Gi=Jn.map.cameraPosition;Gi!==void 0&&Gi.setValue(G,Xe.setFromMatrixPosition(N.matrixWorld)),Me.logarithmicDepthBuffer&&Jn.setValue(G,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&Jn.setValue(G,"isOrthographic",N.isOrthographicCamera===!0),F!==N&&(F=N,Dl=!0,Su=!0)}if(oe.isSkinnedMesh){Jn.setOptional(G,oe,"bindMatrix"),Jn.setOptional(G,oe,"bindMatrixInverse");const Gi=oe.skeleton;Gi&&(Me.floatVertexTextures?(Gi.boneTexture===null&&Gi.computeBoneTexture(),Jn.setValue(G,"boneTexture",Gi.boneTexture,I)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}oe.isBatchedMesh&&(Jn.setOptional(G,oe,"batchingTexture"),Jn.setValue(G,"batchingTexture",oe._matricesTexture,I));const Ll=le.morphAttributes;if((Ll.position!==void 0||Ll.normal!==void 0||Ll.color!==void 0&&Me.isWebGL2===!0)&&xt.update(oe,le,mr),(Dl||bt.receiveShadow!==oe.receiveShadow)&&(bt.receiveShadow=oe.receiveShadow,Jn.setValue(G,"receiveShadow",oe.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(Jr.envMap.value=ht,Jr.flipEnvMap.value=ht.isCubeTexture&&ht.isRenderTargetTexture===!1?-1:1),Dl&&(Jn.setValue(G,"toneMappingExposure",M.toneMappingExposure),bt.needsLights&&Xf(Jr,Su),De&&ue.fog===!0&&Oe.refreshFogUniforms(Jr,De),Oe.refreshMaterialUniforms(Jr,ue,Y,H,Ce),uv.upload(G,Pl(bt),Jr,I)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(uv.upload(G,Pl(bt),Jr,I),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&Jn.setValue(G,"center",oe.center),Jn.setValue(G,"modelViewMatrix",oe.modelViewMatrix),Jn.setValue(G,"normalMatrix",oe.normalMatrix),Jn.setValue(G,"modelMatrix",oe.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const Gi=ue.uniformsGroups;for(let Mu=0,Om=Gi.length;Mu<Om;Mu++)if(Me.isWebGL2){const Yf=Gi[Mu];ye.update(Yf,mr),ye.bind(Yf,mr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return mr}function Xf(N,ie){N.ambientLightColor.needsUpdate=ie,N.lightProbe.needsUpdate=ie,N.directionalLights.needsUpdate=ie,N.directionalLightShadows.needsUpdate=ie,N.pointLights.needsUpdate=ie,N.pointLightShadows.needsUpdate=ie,N.spotLights.needsUpdate=ie,N.spotLightShadows.needsUpdate=ie,N.rectAreaLights.needsUpdate=ie,N.hemisphereLights.needsUpdate=ie}function Lm(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(N,ie,le){Ne.get(N.texture).__webglTexture=ie,Ne.get(N.depthTexture).__webglTexture=le;const ue=Ne.get(N);ue.__hasExternalTextures=!0,ue.__hasExternalTextures&&(ue.__autoAllocateDepthBuffer=le===void 0,ue.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ue.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,ie){const le=Ne.get(N);le.__webglFramebuffer=ie,le.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(N,ie=0,le=0){B=N,R=ie,T=le;let ue=!0,oe=null,De=!1,ke=!1;if(N){const ht=Ne.get(N);ht.__useDefaultFramebuffer!==void 0?(me.bindFramebuffer(G.FRAMEBUFFER,null),ue=!1):ht.__webglFramebuffer===void 0?I.setupRenderTarget(N):ht.__hasExternalTextures&&I.rebindTextures(N,Ne.get(N.texture).__webglTexture,Ne.get(N.depthTexture).__webglTexture);const _t=N.texture;(_t.isData3DTexture||_t.isDataArrayTexture||_t.isCompressedArrayTexture)&&(ke=!0);const at=Ne.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(Array.isArray(at[ie])?oe=at[ie][le]:oe=at[ie],De=!0):Me.isWebGL2&&N.samples>0&&I.useMultisampledRTT(N)===!1?oe=Ne.get(N).__webglMultisampledFramebuffer:Array.isArray(at)?oe=at[le]:oe=at,C.copy(N.viewport),D.copy(N.scissor),te=N.scissorTest}else C.copy(J).multiplyScalar(Y).floor(),D.copy(K).multiplyScalar(Y).floor(),te=ae;if(me.bindFramebuffer(G.FRAMEBUFFER,oe)&&Me.drawBuffers&&ue&&me.drawBuffers(N,oe),me.viewport(C),me.scissor(D),me.setScissorTest(te),De){const ht=Ne.get(N.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+ie,ht.__webglTexture,le)}else if(ke){const ht=Ne.get(N.texture),_t=ie||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,ht.__webglTexture,le||0,_t)}L=-1},this.readRenderTargetPixels=function(N,ie,le,ue,oe,De,ke){if(!(N&&N.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=Ne.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&ke!==void 0&&(ot=ot[ke]),ot){me.bindFramebuffer(G.FRAMEBUFFER,ot);try{const ht=N.texture,_t=ht.format,at=ht.type;if(_t!==qi&&Je.convert(_t)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gt=at===Mf&&(he.has("EXT_color_buffer_half_float")||Me.isWebGL2&&he.has("EXT_color_buffer_float"));if(at!==ho&&Je.convert(at)!==G.getParameter(G.IMPLEMENTATION_COLOR_READ_TYPE)&&!(at===or&&(Me.isWebGL2||he.has("OES_texture_float")||he.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=N.width-ue&&le>=0&&le<=N.height-oe&&G.readPixels(ie,le,ue,oe,Je.convert(_t),Je.convert(at),De)}finally{const ht=B!==null?Ne.get(B).__webglFramebuffer:null;me.bindFramebuffer(G.FRAMEBUFFER,ht)}}},this.copyFramebufferToTexture=function(N,ie,le=0){const ue=Math.pow(2,-le),oe=Math.floor(ie.image.width*ue),De=Math.floor(ie.image.height*ue);I.setTexture2D(ie,0),G.copyTexSubImage2D(G.TEXTURE_2D,le,0,0,N.x,N.y,oe,De),me.unbindTexture()},this.copyTextureToTexture=function(N,ie,le,ue=0){const oe=ie.image.width,De=ie.image.height,ke=Je.convert(le.format),ot=Je.convert(le.type);I.setTexture2D(le,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,le.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,le.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,le.unpackAlignment),ie.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,ue,N.x,N.y,oe,De,ke,ot,ie.image.data):ie.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,ue,N.x,N.y,ie.mipmaps[0].width,ie.mipmaps[0].height,ke,ie.mipmaps[0].data):G.texSubImage2D(G.TEXTURE_2D,ue,N.x,N.y,ke,ot,ie.image),ue===0&&le.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),me.unbindTexture()},this.copyTextureToTexture3D=function(N,ie,le,ue,oe=0){if(M.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const De=N.max.x-N.min.x+1,ke=N.max.y-N.min.y+1,ot=N.max.z-N.min.z+1,ht=Je.convert(ue.format),_t=Je.convert(ue.type);let at;if(ue.isData3DTexture)I.setTexture3D(ue,0),at=G.TEXTURE_3D;else if(ue.isDataArrayTexture||ue.isCompressedArrayTexture)I.setTexture2DArray(ue,0),at=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ue.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ue.unpackAlignment);const gt=G.getParameter(G.UNPACK_ROW_LENGTH),on=G.getParameter(G.UNPACK_IMAGE_HEIGHT),ui=G.getParameter(G.UNPACK_SKIP_PIXELS),Nn=G.getParameter(G.UNPACK_SKIP_ROWS),Gs=G.getParameter(G.UNPACK_SKIP_IMAGES),$t=le.isCompressedTexture?le.mipmaps[oe]:le.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,$t.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,$t.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,N.min.x),G.pixelStorei(G.UNPACK_SKIP_ROWS,N.min.y),G.pixelStorei(G.UNPACK_SKIP_IMAGES,N.min.z),le.isDataTexture||le.isData3DTexture?G.texSubImage3D(at,oe,ie.x,ie.y,ie.z,De,ke,ot,ht,_t,$t.data):le.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),G.compressedTexSubImage3D(at,oe,ie.x,ie.y,ie.z,De,ke,ot,ht,$t.data)):G.texSubImage3D(at,oe,ie.x,ie.y,ie.z,De,ke,ot,ht,_t,$t),G.pixelStorei(G.UNPACK_ROW_LENGTH,gt),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,on),G.pixelStorei(G.UNPACK_SKIP_PIXELS,ui),G.pixelStorei(G.UNPACK_SKIP_ROWS,Nn),G.pixelStorei(G.UNPACK_SKIP_IMAGES,Gs),oe===0&&ue.generateMipmaps&&G.generateMipmap(at),me.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?I.setTextureCube(N,0):N.isData3DTexture?I.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?I.setTexture2DArray(N,0):I.setTexture2D(N,0),me.unbindTexture()},this.resetState=function(){R=0,T=0,B=null,me.reset(),j.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return so}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===j0?"display-p3":"srgb",t.unpackColorSpace=Xt.workingColorSpace===mm?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Fn?rl:G1}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===rl?Fn:Ur}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class SU extends $1{}SU.prototype.isWebGL1Renderer=!0;class K0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new He(e),this.density=t}clone(){return new K0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class q0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new He(e),this.near=t,this.far=i}clone(){return new q0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ew extends zt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class xm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Jp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Is()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return jc("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Is()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Is()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ji=new U;class ml{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ji.fromBufferAttribute(this,t),ji.applyMatrix4(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ji.fromBufferAttribute(this,t),ji.applyNormalMatrix(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ji.fromBufferAttribute(this,t),ji.transformDirection(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Qi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=St(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Qi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Qi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Qi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Qi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),s=St(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),s=St(s,this.array),r=St(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ml(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class tw extends Qn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let fh;const Dd=new U,dh=new U,ph=new U,mh=new pe,Ld=new pe,MU=new ut,sy=new U,Od=new U,ry=new U,KB=new pe,ZA=new pe,qB=new pe;class bU extends zt{constructor(e=new tw){if(super(),this.isSprite=!0,this.type="Sprite",fh===void 0){fh=new Mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new xm(t,5);fh.setIndex([0,1,2,0,2,3]),fh.setAttribute("position",new ml(i,3,0,!1)),fh.setAttribute("uv",new ml(i,2,3,!1))}this.geometry=fh,this.material=e,this.center=new pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),dh.setFromMatrixScale(this.matrixWorld),MU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ph.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&dh.multiplyScalar(-ph.z);const i=this.material.rotation;let s,r;i!==0&&(r=Math.cos(i),s=Math.sin(i));const o=this.center;oy(sy.set(-.5,-.5,0),ph,o,dh,s,r),oy(Od.set(.5,-.5,0),ph,o,dh,s,r),oy(ry.set(.5,.5,0),ph,o,dh,s,r),KB.set(0,0),ZA.set(1,0),qB.set(1,1);let a=e.ray.intersectTriangle(sy,Od,ry,!1,Dd);if(a===null&&(oy(Od.set(-.5,.5,0),ph,o,dh,s,r),ZA.set(0,1),a=e.ray.intersectTriangle(sy,ry,Od,!1,Dd),a===null))return;const l=e.ray.origin.distanceTo(Dd);l<e.near||l>e.far||t.push({distance:l,point:Dd.clone(),uv:Ps.getInterpolation(Dd,sy,Od,ry,KB,ZA,qB,new pe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function oy(n,e,t,i,s,r){mh.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(Ld.x=r*mh.x-s*mh.y,Ld.y=s*mh.x+r*mh.y):Ld.copy(mh),n.copy(e),n.x+=Ld.x,n.y+=Ld.y,n.applyMatrix4(MU)}const ay=new U,QB=new U;class EU extends zt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const r=t[i];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s;i++){let r=t[i].distance;if(t[i].object.visible&&(r-=r*t[i].hysteresis),e<r)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){ay.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(ay);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ay.setFromMatrixPosition(e.matrixWorld),QB.setFromMatrixPosition(this.matrixWorld);const i=ay.distanceTo(QB)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let o=t[s].distance;if(t[s].object.visible&&(o-=o*t[s].hysteresis),i>=o)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,r=i.length;s<r;s++){const o=i[s];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const ZB=new U,$B=new Yt,eP=new Yt,FY=new U,tP=new ut,ly=new U,$A=new vi,nP=new ut,eS=new mu;class nw extends Hn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=lb,this.bindMatrix=new ut,this.bindMatrixInverse=new ut,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Oi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,ly),this.boundingBox.expandByPoint(ly)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new vi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,ly),this.boundingSphere.expandByPoint(ly)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$A.copy(this.boundingSphere),$A.applyMatrix4(s),e.ray.intersectsSphere($A)!==!1&&(nP.copy(s).invert(),eS.copy(e.ray).applyMatrix4(nP),!(this.boundingBox!==null&&eS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,eS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yt,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===lb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===NN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;$B.fromBufferAttribute(s.attributes.skinIndex,e),eP.fromBufferAttribute(s.attributes.skinWeight,e),ZB.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=eP.getComponent(r);if(o!==0){const a=$B.getComponent(r);tP.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(FY.copy(ZB).applyMatrix4(tP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Q0 extends zt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xc extends xn{constructor(e=null,t=1,i=1,s,r,o,a,l,h=Ln,f=Ln,d,p){super(null,o,a,l,h,f,s,r,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const iP=new ut,zY=new ut;class _m{constructor(e=[],t=[]){this.uuid=Is(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new ut)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ut;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const a=e[r]?e[r].matrixWorld:zY;iP.multiplyMatrices(a,t[r]),iP.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new _m(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Xc(t,e,e,qi,or);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new Q0),this.bones.push(o),this.boneInverses.push(new ut().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const o=t[s];e.bones.push(o.uuid);const a=i[s];e.boneInverses.push(a.toArray())}return e}}class nu extends kt{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const gh=new ut,sP=new ut,cy=[],rP=new Oi,kY=new ut,Id=new Hn,Nd=new vi;class iw extends Hn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new nu(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,kY)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Oi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,gh),rP.copy(e.boundingBox).applyMatrix4(gh),this.boundingBox.union(rP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new vi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,gh),Nd.copy(e.boundingSphere).applyMatrix4(gh),this.boundingSphere.union(Nd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,s=this.count;if(Id.geometry=this.geometry,Id.material=this.material,Id.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Nd.copy(this.boundingSphere),Nd.applyMatrix4(i),e.ray.intersectsSphere(Nd)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,gh),sP.multiplyMatrices(i,gh),Id.matrixWorld=sP,Id.raycast(e,cy);for(let o=0,a=cy.length;o<a;o++){const l=cy[o];l.instanceId=r,l.object=this,t.push(l)}cy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new nu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function HY(n,e){return n.z-e.z}function GY(n,e){return e.z-n.z}class VY{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const r=i[this.index];s.push(r),this.index++,r.start=e.start,r.count=e.count,r.z=t}reset(){this.list.length=0,this.index=0}}const yh="batchId",Pa=new ut,oP=new ut,WY=new ut,aP=new ut,tS=new vm,uy=new Oi,ic=new vi,Ud=new U,nS=new VY,Ri=new Hn,hy=[];function jY(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const s=n.count;for(let r=0;r<s;r++)for(let o=0;o<i;o++)e.setComponent(r+t,o,n.getComponent(r,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class wU extends Hn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,s){super(new Mt,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Xc(t,e,e,qi,or);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,s=this._maxGeometryCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:h,itemSize:f,normalized:d}=l,p=new h.constructor(i*f),g=new l.constructor(p,f,d);g.setUsage(l.usage),t.setAttribute(a,g)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(r):new Uint16Array(r);t.setIndex(new kt(a,1))}const o=s>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(yh,new kt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(yh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${yh}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===yh)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),r=t.getAttribute(i);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Oi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let s=0;s<e;s++)i[s]!==!1&&(this.getMatrixAt(s,Pa),this.getBoundingBoxAt(s,uy).applyMatrix4(Pa),t.union(uy))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vi);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let s=0;s<e;s++)i[s]!==!1&&(this.getMatrixAt(s,Pa),this.getBoundingSphereAt(s,ic).applyMatrix4(Pa),t.union(ic))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const s={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let r=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(r=o[o.length-1]),t===-1?s.vertexCount=e.getAttribute("position").count:s.vertexCount=t,r===null?s.vertexStart=0:s.vertexStart=r.vertexStart+r.vertexCount;const h=e.getIndex(),f=h!==null;if(f&&(i===-1?s.indexCount=h.count:s.indexCount=i,r===null?s.indexStart=0:s.indexStart=r.indexStart+r.indexCount),s.indexStart!==-1&&s.indexStart+s.indexCount>this._maxIndexCount||s.vertexStart+s.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,g=this._matricesTexture,v=this._matricesTexture.image.data;d.push(!0),p.push(!0);const S=this._geometryCount;this._geometryCount++,WY.toArray(v,S*16),g.needsUpdate=!0,o.push(s),a.push({start:f?s.indexStart:s.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Oi,sphereInitialized:!1,sphere:new vi});const _=this.geometry.getAttribute(yh);for(let y=0;y<s.vertexCount;y++)_.setX(s.vertexStart+y,S);return _.needsUpdate=!0,this.setGeometryAt(S,e),S}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,s=i.getIndex()!==null,r=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(s&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,h=a.vertexCount;for(const g in i.attributes){if(g===yh)continue;const v=t.getAttribute(g),S=i.getAttribute(g);jY(v,S,l);const _=v.itemSize;for(let y=v.count,A=h;y<A;y++){const M=l+y;for(let E=0;E<_;E++)S.setComponent(M,E,0)}S.needsUpdate=!0}if(s){const g=a.indexStart;for(let v=0;v<o.count;v++)r.setX(g+v,l+o.getX(v));for(let v=o.count,S=a.indexCount;v<S;v++)r.setX(g+v,l);r.needsUpdate=!0}const f=this._bounds[e];t.boundingBox!==null?(f.box.copy(t.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,t.boundingSphere!==null?(f.sphere.copy(t.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=s?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const s=this._bounds[e],r=s.box,o=this.geometry;if(s.boxInitialized===!1){r.makeEmpty();const a=o.index,l=o.attributes.position,h=this._drawRanges[e];for(let f=h.start,d=h.start+h.count;f<d;f++){let p=f;a&&(p=a.getX(p)),r.expandByPoint(Ud.fromBufferAttribute(l,p))}s.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const s=this._bounds[e],r=s.sphere,o=this.geometry;if(s.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,uy),uy.getCenter(r.center);const a=o.index,l=o.attributes.position,h=this._drawRanges[e];let f=0;for(let d=h.start,p=h.start+h.count;d<p;d++){let g=d;a&&(g=a.getX(g)),Ud.fromBufferAttribute(l,g),f=Math.max(f,r.center.distanceToSquared(Ud))}r.radius=Math.sqrt(f),s.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const i=this._active,s=this._matricesTexture,r=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(r,e*16),s.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,s=this._matricesTexture.image.data,r=this._geometryCount;return e>=r||i[e]===!1?null:t.fromArray(s,e*16)}setVisibleAt(e,t){const i=this._visibility,s=this._active,r=this._geometryCount;return e>=r||s[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,s=this._active,r=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Ri.material=this.material,Ri.geometry.index=l.index,Ri.geometry.attributes=l.attributes,Ri.geometry.boundingBox===null&&(Ri.geometry.boundingBox=new Oi),Ri.geometry.boundingSphere===null&&(Ri.geometry.boundingSphere=new vi);for(let h=0;h<o;h++){if(!i[h]||!s[h])continue;const f=r[h];Ri.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(h,Ri.matrixWorld).premultiply(a),this.getBoundingBoxAt(h,Ri.geometry.boundingBox),this.getBoundingSphereAt(h,Ri.geometry.boundingSphere),Ri.raycast(e,hy);for(let d=0,p=hy.length;d<p;d++){const g=hy[d];g.object=this,g.batchId=h,t.push(g)}hy.length=0}Ri.material=null,Ri.geometry.index=null,Ri.geometry.attributes={},Ri.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=s.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,h=this._visibility,f=this._multiDrawStarts,d=this._multiDrawCounts,p=this._drawRanges,g=this.perObjectFrustumCulled;g&&(aP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),tS.setFromProjectionMatrix(aP,e.coordinateSystem));let v=0;if(this.sortObjects){oP.copy(this.matrixWorld).invert(),Ud.setFromMatrixPosition(i.matrixWorld).applyMatrix4(oP);for(let y=0,A=h.length;y<A;y++)if(h[y]&&l[y]){this.getMatrixAt(y,Pa),this.getBoundingSphereAt(y,ic).applyMatrix4(Pa);let M=!1;if(g&&(M=!tS.intersectsSphere(ic)),!M){const E=Ud.distanceTo(ic.center);nS.push(p[y],E)}}const S=nS.list,_=this.customSort;_===null?S.sort(r.transparent?GY:HY):_.call(this,S,i);for(let y=0,A=S.length;y<A;y++){const M=S[y];f[v]=M.start*a,d[v]=M.count,v++}nS.reset()}else for(let S=0,_=h.length;S<_;S++)if(h[S]&&l[S]){let y=!1;if(g&&(this.getMatrixAt(S,Pa),this.getBoundingSphereAt(S,ic).applyMatrix4(Pa),y=!tS.intersectsSphere(ic)),!y){const A=p[S];f[v]=A.start*a,d[v]=A.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,s,r,o){this.onBeforeRender(e,null,s,r,o)}}class ki extends Qn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new He(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const lP=new U,cP=new U,uP=new ut,iS=new mu,fy=new vi;class ra extends zt{constructor(e=new Mt,t=new ki){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)lP.fromBufferAttribute(t,s-1),cP.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=lP.distanceTo(cP);e.setAttribute("lineDistance",new nt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),fy.copy(i.boundingSphere),fy.applyMatrix4(s),fy.radius+=r,e.ray.intersectsSphere(fy)===!1)return;uP.copy(s).invert(),iS.copy(e.ray).applyMatrix4(uP);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,h=new U,f=new U,d=new U,p=new U,g=this.isLineSegments?2:1,v=i.index,_=i.attributes.position;if(v!==null){const y=Math.max(0,o.start),A=Math.min(v.count,o.start+o.count);for(let M=y,E=A-1;M<E;M+=g){const R=v.getX(M),T=v.getX(M+1);if(h.fromBufferAttribute(_,R),f.fromBufferAttribute(_,T),iS.distanceSqToSegment(h,f,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(p);L<e.near||L>e.far||t.push({distance:L,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,o.start),A=Math.min(_.count,o.start+o.count);for(let M=y,E=A-1;M<E;M+=g){if(h.fromBufferAttribute(_,M),f.fromBufferAttribute(_,M+1),iS.distanceSqToSegment(h,f,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}const hP=new U,fP=new U;class Hr extends ra{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)hP.fromBufferAttribute(t,s),fP.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+hP.distanceTo(fP);e.setAttribute("lineDistance",new nt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class sw extends ra{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Z0 extends Qn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dP=new ut,zb=new mu,dy=new vi,py=new U;class rw extends zt{constructor(e=new Mt,t=new Z0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),dy.copy(i.boundingSphere),dy.applyMatrix4(s),dy.radius+=r,e.ray.intersectsSphere(dy)===!1)return;dP.copy(s).invert(),zb.copy(e.ray).applyMatrix4(dP);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,h=i.index,d=i.attributes.position;if(h!==null){const p=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=p,S=g;v<S;v++){const _=h.getX(v);py.fromBufferAttribute(d,_),pP(py,_,l,s,e,t,this)}}else{const p=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let v=p,S=g;v<S;v++)py.fromBufferAttribute(d,v),pP(py,v,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function pP(n,e,t,i,s,r,o){const a=zb.distanceSqToPoint(n);if(a<t){const l=new U;zb.closestPointToPoint(n,l),l.applyMatrix4(i);const h=s.ray.origin.distanceTo(l);if(h<s.near||h>s.far)return;r.push({distance:h,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class XY extends xn{constructor(e,t,i,s,r,o,a,l,h){super(e,t,i,s,r,o,a,l,h),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:un,this.magFilter=r!==void 0?r:un,this.generateMipmaps=!1;const f=this;function d(){f.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class JY extends xn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ln,this.minFilter=Ln,this.generateMipmaps=!1,this.needsUpdate=!0}}class $0 extends xn{constructor(e,t,i,s,r,o,a,l,h,f,d,p){super(null,o,a,l,h,f,s,r,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class YY extends $0{constructor(e,t,i,s,r,o){super(e,t,i,r,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=mi}}class KY extends $0{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,sa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class qY extends xn{constructor(e,t,i,s,r,o,a,l,h){super(e,t,i,s,r,o,a,l,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Gr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),r+=i.distanceTo(s),t.push(r),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const r=i.length;let o;t?o=t:o=e*i[r-1];let a=0,l=r-1,h;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),h=i[s]-o,h<0)a=s+1;else if(h>0)l=s-1;else{l=s;break}if(s=l,i[s]===o)return s/(r-1);const f=i[s],p=i[s+1]-f,g=(o-f)/p;return(s+g)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),a=this.getPoint(r),l=t||(o.isVector2?new pe:new U);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new U,s=[],r=[],o=[],a=new U,l=new ut;for(let g=0;g<=e;g++){const v=g/e;s[g]=this.getTangentAt(v,new U)}r[0]=new U,o[0]=new U;let h=Number.MAX_VALUE;const f=Math.abs(s[0].x),d=Math.abs(s[0].y),p=Math.abs(s[0].z);f<=h&&(h=f,i.set(1,0,0)),d<=h&&(h=d,i.set(0,1,0)),p<=h&&i.set(0,0,1),a.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],a),o[0].crossVectors(s[0],r[0]);for(let g=1;g<=e;g++){if(r[g]=r[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(s[g-1],s[g]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(On(s[g-1].dot(s[g]),-1,1));r[g].applyMatrix4(l.makeRotationAxis(a,v))}o[g].crossVectors(s[g],r[g])}if(t===!0){let g=Math.acos(On(r[0].dot(r[e]),-1,1));g/=e,s[0].dot(a.crossVectors(r[0],r[e]))>0&&(g=-g);for(let v=1;v<=e;v++)r[v].applyMatrix4(l.makeRotationAxis(s[v],g*v)),o[v].crossVectors(s[v],r[v])}return{tangents:s,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ex extends Gr{constructor(e=0,t=0,i=1,s=1,r=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new pe,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(o?r=0:r=s),this.aClockwise===!0&&!o&&(r===s?r=-s:r=r-s);const a=this.aStartAngle+e*r;let l=this.aX+this.xRadius*Math.cos(a),h=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,g=h-this.aY;l=p*f-g*d+this.aX,h=p*d+g*f+this.aY}return i.set(l,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class CU extends ex{constructor(e,t,i,s,r,o){super(e,t,i,i,s,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function ow(){let n=0,e=0,t=0,i=0;function s(r,o,a,l){n=r,e=a,t=-3*r+3*o-2*a-l,i=2*r-2*o+a+l}return{initCatmullRom:function(r,o,a,l,h){s(o,a,h*(a-r),h*(l-o))},initNonuniformCatmullRom:function(r,o,a,l,h,f,d){let p=(o-r)/h-(a-r)/(h+f)+(a-o)/f,g=(a-o)/f-(l-o)/(f+d)+(l-a)/d;p*=f,g*=f,s(o,a,p,g)},calc:function(r){const o=r*r,a=o*r;return n+e*r+t*o+i*a}}}const my=new U,sS=new ow,rS=new ow,oS=new ow;class TU extends Gr{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new U){const i=t,s=this.points,r=s.length,o=(r-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:l===0&&a===r-1&&(a=r-2,l=1);let h,f;this.closed||a>0?h=s[(a-1)%r]:(my.subVectors(s[0],s[1]).add(s[0]),h=my);const d=s[a%r],p=s[(a+1)%r];if(this.closed||a+2<r?f=s[(a+2)%r]:(my.subVectors(s[r-1],s[r-2]).add(s[r-1]),f=my),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(h.distanceToSquared(d),g),S=Math.pow(d.distanceToSquared(p),g),_=Math.pow(p.distanceToSquared(f),g);S<1e-4&&(S=1),v<1e-4&&(v=S),_<1e-4&&(_=S),sS.initNonuniformCatmullRom(h.x,d.x,p.x,f.x,v,S,_),rS.initNonuniformCatmullRom(h.y,d.y,p.y,f.y,v,S,_),oS.initNonuniformCatmullRom(h.z,d.z,p.z,f.z,v,S,_)}else this.curveType==="catmullrom"&&(sS.initCatmullRom(h.x,d.x,p.x,f.x,this.tension),rS.initCatmullRom(h.y,d.y,p.y,f.y,this.tension),oS.initCatmullRom(h.z,d.z,p.z,f.z,this.tension));return i.set(sS.calc(l),rS.calc(l),oS.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new U().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function mP(n,e,t,i,s){const r=(i-e)*.5,o=(s-t)*.5,a=n*n,l=n*a;return(2*t-2*i+r+o)*l+(-3*t+3*i-2*r-o)*a+r*n+t}function QY(n,e){const t=1-n;return t*t*e}function ZY(n,e){return 2*(1-n)*n*e}function $Y(n,e){return n*n*e}function dp(n,e,t,i){return QY(n,e)+ZY(n,t)+$Y(n,i)}function eK(n,e){const t=1-n;return t*t*t*e}function tK(n,e){const t=1-n;return 3*t*t*n*e}function nK(n,e){return 3*(1-n)*n*n*e}function iK(n,e){return n*n*n*e}function pp(n,e,t,i,s){return eK(n,e)+tK(n,t)+nK(n,i)+iK(n,s)}class aw extends Gr{constructor(e=new pe,t=new pe,i=new pe,s=new pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new pe){const i=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(pp(e,s.x,r.x,o.x,a.x),pp(e,s.y,r.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RU extends Gr{constructor(e=new U,t=new U,i=new U,s=new U){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new U){const i=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(pp(e,s.x,r.x,o.x,a.x),pp(e,s.y,r.y,o.y,a.y),pp(e,s.z,r.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class lw extends Gr{constructor(e=new pe,t=new pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BU extends Gr{constructor(e=new U,t=new U){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new U){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new U){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cw extends Gr{constructor(e=new pe,t=new pe,i=new pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new pe){const i=t,s=this.v0,r=this.v1,o=this.v2;return i.set(dp(e,s.x,r.x,o.x),dp(e,s.y,r.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uw extends Gr{constructor(e=new U,t=new U,i=new U){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new U){const i=t,s=this.v0,r=this.v1,o=this.v2;return i.set(dp(e,s.x,r.x,o.x),dp(e,s.y,r.y,o.y),dp(e,s.z,r.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hw extends Gr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pe){const i=t,s=this.points,r=(s.length-1)*e,o=Math.floor(r),a=r-o,l=s[o===0?o:o-1],h=s[o],f=s[o>s.length-2?s.length-1:o+1],d=s[o>s.length-3?s.length-1:o+2];return i.set(mP(a,l.x,h.x,f.x,d.x),mP(a,l.y,h.y,f.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new pe().fromArray(s))}return this}}var e0=Object.freeze({__proto__:null,ArcCurve:CU,CatmullRomCurve3:TU,CubicBezierCurve:aw,CubicBezierCurve3:RU,EllipseCurve:ex,LineCurve:lw,LineCurve3:BU,QuadraticBezierCurve:cw,QuadraticBezierCurve3:uw,SplineCurve:hw});class PU extends Gr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new e0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=i){const o=s[r]-i,a=this.curves[r],l=a.getLength(),h=l===0?0:1-o/l;return a.getPointAt(h,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,r=this.curves;s<r.length;s++){const o=r[s],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let h=0;h<l.length;h++){const f=l[h];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new e0[s.type]().fromJSON(s))}return this}}class qp extends PU{constructor(e){super(),this.type="Path",this.currentPoint=new pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new lw(this.currentPoint.clone(),new pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const r=new cw(this.currentPoint.clone(),new pe(e,t),new pe(i,s));return this.curves.push(r),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,r,o){const a=new aw(this.currentPoint.clone(),new pe(e,t),new pe(i,s),new pe(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new hw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,r,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,s,r,o),this}absarc(e,t,i,s,r,o){return this.absellipse(e,t,i,i,s,r,o),this}ellipse(e,t,i,s,r,o,a,l){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,i,s,r,o,a,l),this}absellipse(e,t,i,s,r,o,a,l){const h=new ex(e,t,i,s,r,o,a,l);if(this.curves.length>0){const d=h.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Am extends Mt{constructor(e=[new pe(0,-.5),new pe(.5,0),new pe(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=On(s,0,Math.PI*2);const r=[],o=[],a=[],l=[],h=[],f=1/t,d=new U,p=new pe,g=new U,v=new U,S=new U;let _=0,y=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:_=e[A+1].x-e[A].x,y=e[A+1].y-e[A].y,g.x=y*1,g.y=-_,g.z=y*0,S.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:_=e[A+1].x-e[A].x,y=e[A+1].y-e[A].y,g.x=y*1,g.y=-_,g.z=y*0,v.copy(g),g.x+=S.x,g.y+=S.y,g.z+=S.z,g.normalize(),l.push(g.x,g.y,g.z),S.copy(v)}for(let A=0;A<=t;A++){const M=i+A*f*s,E=Math.sin(M),R=Math.cos(M);for(let T=0;T<=e.length-1;T++){d.x=e[T].x*E,d.y=e[T].y,d.z=e[T].x*R,o.push(d.x,d.y,d.z),p.x=A/t,p.y=T/(e.length-1),a.push(p.x,p.y);const B=l[3*T+0]*E,L=l[3*T+1],F=l[3*T+0]*R;h.push(B,L,F)}}for(let A=0;A<t;A++)for(let M=0;M<e.length-1;M++){const E=M+A*e.length,R=E,T=E+e.length,B=E+e.length+1,L=E+1;r.push(R,T,L),r.push(B,L,T)}this.setIndex(r),this.setAttribute("position",new nt(o,3)),this.setAttribute("uv",new nt(a,2)),this.setAttribute("normal",new nt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Am(e.points,e.segments,e.phiStart,e.phiLength)}}class tx extends Am{constructor(e=1,t=1,i=4,s=8){const r=new qp;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new tx(e.radius,e.length,e.capSegments,e.radialSegments)}}class nx extends Mt{constructor(e=1,t=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const r=[],o=[],a=[],l=[],h=new U,f=new pe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const g=i+d/t*s;h.x=e*Math.cos(g),h.y=e*Math.sin(g),o.push(h.x,h.y,h.z),a.push(0,0,1),f.x=(o[p]/e+1)/2,f.y=(o[p+1]/e+1)/2,l.push(f.x,f.y)}for(let d=1;d<=t;d++)r.push(d,d+1,0);this.setIndex(r),this.setAttribute("position",new nt(o,3)),this.setAttribute("normal",new nt(a,3)),this.setAttribute("uv",new nt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Hf extends Mt{constructor(e=1,t=1,i=1,s=32,r=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l};const h=this;s=Math.floor(s),r=Math.floor(r);const f=[],d=[],p=[],g=[];let v=0;const S=[],_=i/2;let y=0;A(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(f),this.setAttribute("position",new nt(d,3)),this.setAttribute("normal",new nt(p,3)),this.setAttribute("uv",new nt(g,2));function A(){const E=new U,R=new U;let T=0;const B=(t-e)/i;for(let L=0;L<=r;L++){const F=[],C=L/r,D=C*(t-e)+e;for(let te=0;te<=s;te++){const $=te/s,k=$*l+a,q=Math.sin(k),H=Math.cos(k);R.x=D*q,R.y=-C*i+_,R.z=D*H,d.push(R.x,R.y,R.z),E.set(q,B,H).normalize(),p.push(E.x,E.y,E.z),g.push($,1-C),F.push(v++)}S.push(F)}for(let L=0;L<s;L++)for(let F=0;F<r;F++){const C=S[F][L],D=S[F+1][L],te=S[F+1][L+1],$=S[F][L+1];f.push(C,D,$),f.push(D,te,$),T+=6}h.addGroup(y,T,0),y+=T}function M(E){const R=v,T=new pe,B=new U;let L=0;const F=E===!0?e:t,C=E===!0?1:-1;for(let te=1;te<=s;te++)d.push(0,_*C,0),p.push(0,C,0),g.push(.5,.5),v++;const D=v;for(let te=0;te<=s;te++){const k=te/s*l+a,q=Math.cos(k),H=Math.sin(k);B.x=F*H,B.y=_*C,B.z=F*q,d.push(B.x,B.y,B.z),p.push(0,C,0),T.x=q*.5+.5,T.y=H*.5*C+.5,g.push(T.x,T.y),v++}for(let te=0;te<s;te++){const $=R+te,k=D+te;E===!0?f.push(k,k+1,$):f.push(k+1,k,$),L+=3}h.addGroup(y,L,E===!0?1:2),y+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ix extends Hf{constructor(e=1,t=1,i=32,s=1,r=!1,o=0,a=Math.PI*2){super(0,e,t,i,s,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a}}static fromJSON(e){return new ix(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Cl extends Mt{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const r=[],o=[];a(s),h(i),f(),this.setAttribute("position",new nt(r,3)),this.setAttribute("normal",new nt(r.slice(),3)),this.setAttribute("uv",new nt(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const M=new U,E=new U,R=new U;for(let T=0;T<t.length;T+=3)g(t[T+0],M),g(t[T+1],E),g(t[T+2],R),l(M,E,R,A)}function l(A,M,E,R){const T=R+1,B=[];for(let L=0;L<=T;L++){B[L]=[];const F=A.clone().lerp(E,L/T),C=M.clone().lerp(E,L/T),D=T-L;for(let te=0;te<=D;te++)te===0&&L===T?B[L][te]=F:B[L][te]=F.clone().lerp(C,te/D)}for(let L=0;L<T;L++)for(let F=0;F<2*(T-L)-1;F++){const C=Math.floor(F/2);F%2===0?(p(B[L][C+1]),p(B[L+1][C]),p(B[L][C])):(p(B[L][C+1]),p(B[L+1][C+1]),p(B[L+1][C]))}}function h(A){const M=new U;for(let E=0;E<r.length;E+=3)M.x=r[E+0],M.y=r[E+1],M.z=r[E+2],M.normalize().multiplyScalar(A),r[E+0]=M.x,r[E+1]=M.y,r[E+2]=M.z}function f(){const A=new U;for(let M=0;M<r.length;M+=3){A.x=r[M+0],A.y=r[M+1],A.z=r[M+2];const E=_(A)/2/Math.PI+.5,R=y(A)/Math.PI+.5;o.push(E,1-R)}v(),d()}function d(){for(let A=0;A<o.length;A+=6){const M=o[A+0],E=o[A+2],R=o[A+4],T=Math.max(M,E,R),B=Math.min(M,E,R);T>.9&&B<.1&&(M<.2&&(o[A+0]+=1),E<.2&&(o[A+2]+=1),R<.2&&(o[A+4]+=1))}}function p(A){r.push(A.x,A.y,A.z)}function g(A,M){const E=A*3;M.x=e[E+0],M.y=e[E+1],M.z=e[E+2]}function v(){const A=new U,M=new U,E=new U,R=new U,T=new pe,B=new pe,L=new pe;for(let F=0,C=0;F<r.length;F+=9,C+=6){A.set(r[F+0],r[F+1],r[F+2]),M.set(r[F+3],r[F+4],r[F+5]),E.set(r[F+6],r[F+7],r[F+8]),T.set(o[C+0],o[C+1]),B.set(o[C+2],o[C+3]),L.set(o[C+4],o[C+5]),R.copy(A).add(M).add(E).divideScalar(3);const D=_(R);S(T,C+0,A,D),S(B,C+2,M,D),S(L,C+4,E,D)}}function S(A,M,E,R){R<0&&A.x===1&&(o[M]=A.x-1),E.x===0&&E.z===0&&(o[M]=R/2/Math.PI+.5)}function _(A){return Math.atan2(A.z,-A.x)}function y(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cl(e.vertices,e.indices,e.radius,e.details)}}class sx extends Cl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sx(e.radius,e.detail)}}const gy=new U,yy=new U,aS=new U,vy=new Ps;class DU extends Mt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(Wc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,h=[0,0,0],f=["a","b","c"],d=new Array(3),p={},g=[];for(let v=0;v<l;v+=3){o?(h[0]=o.getX(v),h[1]=o.getX(v+1),h[2]=o.getX(v+2)):(h[0]=v,h[1]=v+1,h[2]=v+2);const{a:S,b:_,c:y}=vy;if(S.fromBufferAttribute(a,h[0]),_.fromBufferAttribute(a,h[1]),y.fromBufferAttribute(a,h[2]),vy.getNormal(aS),d[0]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,d[1]=`${Math.round(_.x*s)},${Math.round(_.y*s)},${Math.round(_.z*s)}`,d[2]=`${Math.round(y.x*s)},${Math.round(y.y*s)},${Math.round(y.z*s)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let A=0;A<3;A++){const M=(A+1)%3,E=d[A],R=d[M],T=vy[f[A]],B=vy[f[M]],L=`${E}_${R}`,F=`${R}_${E}`;F in p&&p[F]?(aS.dot(p[F].normal)<=r&&(g.push(T.x,T.y,T.z),g.push(B.x,B.y,B.z)),p[F]=null):L in p||(p[L]={index0:h[A],index1:h[M],normal:aS.clone()})}}for(const v in p)if(p[v]){const{index0:S,index1:_}=p[v];gy.fromBufferAttribute(a,S),yy.fromBufferAttribute(a,_),g.push(gy.x,gy.y,gy.z),g.push(yy.x,yy.y,yy.z)}this.setAttribute("position",new nt(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Jc=class extends qp{constructor(e){super(e),this.uuid=Is(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new qp().fromJSON(s))}return this}};const sK={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let r=LU(n,0,s,t,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,h,f,d,p,g;if(i&&(r=cK(n,e,r,t)),n.length>80*t){a=h=n[0],l=f=n[1];for(let v=t;v<s;v+=t)d=n[v],p=n[v+1],d<a&&(a=d),p<l&&(l=p),d>h&&(h=d),p>f&&(f=p);g=Math.max(h-a,f-l),g=g!==0?32767/g:0}return Qp(r,o,t,a,l,g,0),o}};function LU(n,e,t,i,s){let r,o;if(s===_K(n,e,t,i)>0)for(r=e;r<t;r+=i)o=gP(r,n[r],n[r+1],o);else for(r=t-i;r>=e;r-=i)o=gP(r,n[r],n[r+1],o);return o&&rx(o,o.next)&&($p(o),o=o.next),o}function iu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(rx(t,t.next)||bn(t.prev,t,t.next)===0)){if($p(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Qp(n,e,t,i,s,r,o){if(!n)return;!o&&r&&pK(n,i,s,r);let a=n,l,h;for(;n.prev!==n.next;){if(l=n.prev,h=n.next,r?oK(n,i,s,r):rK(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(h.i/t|0),$p(n),n=h.next,a=h.next;continue}if(n=h,n===a){o?o===1?(n=aK(iu(n),e,t),Qp(n,e,t,i,s,r,2)):o===2&&lK(n,e,t,i,s,r):Qp(iu(n),e,t,i,s,r,1);break}}}function rK(n){const e=n.prev,t=n,i=n.next;if(bn(e,t,i)>=0)return!1;const s=e.x,r=t.x,o=i.x,a=e.y,l=t.y,h=i.y,f=s<r?s<o?s:o:r<o?r:o,d=a<l?a<h?a:h:l<h?l:h,p=s>r?s>o?s:o:r>o?r:o,g=a>l?a>h?a:h:l>h?l:h;let v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=p&&v.y>=d&&v.y<=g&&Vh(s,a,r,l,o,h,v.x,v.y)&&bn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function oK(n,e,t,i){const s=n.prev,r=n,o=n.next;if(bn(s,r,o)>=0)return!1;const a=s.x,l=r.x,h=o.x,f=s.y,d=r.y,p=o.y,g=a<l?a<h?a:h:l<h?l:h,v=f<d?f<p?f:p:d<p?d:p,S=a>l?a>h?a:h:l>h?l:h,_=f>d?f>p?f:p:d>p?d:p,y=kb(g,v,e,t,i),A=kb(S,_,e,t,i);let M=n.prevZ,E=n.nextZ;for(;M&&M.z>=y&&E&&E.z<=A;){if(M.x>=g&&M.x<=S&&M.y>=v&&M.y<=_&&M!==s&&M!==o&&Vh(a,f,l,d,h,p,M.x,M.y)&&bn(M.prev,M,M.next)>=0||(M=M.prevZ,E.x>=g&&E.x<=S&&E.y>=v&&E.y<=_&&E!==s&&E!==o&&Vh(a,f,l,d,h,p,E.x,E.y)&&bn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;M&&M.z>=y;){if(M.x>=g&&M.x<=S&&M.y>=v&&M.y<=_&&M!==s&&M!==o&&Vh(a,f,l,d,h,p,M.x,M.y)&&bn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;E&&E.z<=A;){if(E.x>=g&&E.x<=S&&E.y>=v&&E.y<=_&&E!==s&&E!==o&&Vh(a,f,l,d,h,p,E.x,E.y)&&bn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function aK(n,e,t){let i=n;do{const s=i.prev,r=i.next.next;!rx(s,r)&&OU(s,i,i.next,r)&&Zp(s,r)&&Zp(r,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(r.i/t|0),$p(i),$p(i.next),i=n=r),i=i.next}while(i!==n);return iu(i)}function lK(n,e,t,i,s,r){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&yK(o,a)){let l=IU(o,a);o=iu(o,o.next),l=iu(l,l.next),Qp(o,e,t,i,s,r,0),Qp(l,e,t,i,s,r,0);return}a=a.next}o=o.next}while(o!==n)}function cK(n,e,t,i){const s=[];let r,o,a,l,h;for(r=0,o=e.length;r<o;r++)a=e[r]*i,l=r<o-1?e[r+1]*i:n.length,h=LU(n,a,l,i,!1),h===h.next&&(h.steiner=!0),s.push(gK(h));for(s.sort(uK),r=0;r<s.length;r++)t=hK(s[r],t);return t}function uK(n,e){return n.x-e.x}function hK(n,e){const t=fK(n,e);if(!t)return e;const i=IU(t,n);return iu(i,i.next),iu(t,t.next)}function fK(n,e){let t=e,i=-1/0,s;const r=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=r&&p>i&&(i=p,s=t.x<t.next.x?t:t.next,p===r))return s}t=t.next}while(t!==e);if(!s)return null;const a=s,l=s.x,h=s.y;let f=1/0,d;t=s;do r>=t.x&&t.x>=l&&r!==t.x&&Vh(o<h?r:i,o,l,h,o<h?i:r,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(r-t.x),Zp(t,n)&&(d<f||d===f&&(t.x>s.x||t.x===s.x&&dK(s,t)))&&(s=t,f=d)),t=t.next;while(t!==a);return s}function dK(n,e){return bn(n.prev,n,e.prev)<0&&bn(e.next,n,n.next)<0}function pK(n,e,t,i){let s=n;do s.z===0&&(s.z=kb(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,mK(s)}function mK(n){let e,t,i,s,r,o,a,l,h=1;do{for(t=n,n=null,r=null,o=0;t;){for(o++,i=t,a=0,e=0;e<h&&(a++,i=i.nextZ,!!i);e++);for(l=h;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,a--):(s=i,i=i.nextZ,l--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;t=i}r.nextZ=null,h*=2}while(o>1);return n}function kb(n,e,t,i,s){return n=(n-t)*s|0,e=(e-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function gK(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Vh(n,e,t,i,s,r,o,a){return(s-o)*(e-a)>=(n-o)*(r-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(r-a)>=(s-o)*(i-a)}function yK(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!vK(n,e)&&(Zp(n,e)&&Zp(e,n)&&xK(n,e)&&(bn(n.prev,n,e.prev)||bn(n,e.prev,e))||rx(n,e)&&bn(n.prev,n,n.next)>0&&bn(e.prev,e,e.next)>0)}function bn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function rx(n,e){return n.x===e.x&&n.y===e.y}function OU(n,e,t,i){const s=_y(bn(n,e,t)),r=_y(bn(n,e,i)),o=_y(bn(t,i,n)),a=_y(bn(t,i,e));return!!(s!==r&&o!==a||s===0&&xy(n,t,e)||r===0&&xy(n,i,e)||o===0&&xy(t,n,i)||a===0&&xy(t,e,i))}function xy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function _y(n){return n>0?1:n<0?-1:0}function vK(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&OU(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Zp(n,e){return bn(n.prev,n,n.next)<0?bn(n,e,n.next)>=0&&bn(n,n.prev,e)>=0:bn(n,e,n.prev)<0||bn(n,n.next,e)<0}function xK(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,r=(n.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function IU(n,e){const t=new Hb(n.i,n.x,n.y),i=new Hb(e.i,e.x,e.y),s=n.next,r=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function gP(n,e,t,i){const s=new Hb(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function $p(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Hb(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _K(n,e,t,i){let s=0;for(let r=e,o=t-i;r<t;r+=i)s+=(n[o]-n[r])*(n[r+1]+n[o+1]),o=r;return s}class fo{static area(e){const t=e.length;let i=0;for(let s=t-1,r=0;r<t;s=r++)i+=e[s].x*e[r].y-e[r].x*e[s].y;return i*.5}static isClockWise(e){return fo.area(e)<0}static triangulateShape(e,t){const i=[],s=[],r=[];yP(e),vP(i,e);let o=e.length;t.forEach(yP);for(let l=0;l<t.length;l++)s.push(o),o+=t[l].length,vP(i,t[l]);const a=sK.triangulate(i,s);for(let l=0;l<a.length;l+=3)r.push(a.slice(l,l+3));return r}}function yP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function vP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class ox extends Mt{constructor(e=new Jc([new pe(.5,.5),new pe(-.5,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],r=[];for(let a=0,l=e.length;a<l;a++){const h=e[a];o(h)}this.setAttribute("position",new nt(s,3)),this.setAttribute("uv",new nt(r,2)),this.computeVertexNormals();function o(a){const l=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:AK;let M,E=!1,R,T,B,L;y&&(M=y.getSpacedPoints(f),E=!0,p=!1,R=y.computeFrenetFrames(f,!1),T=new U,B=new U,L=new U),p||(_=0,g=0,v=0,S=0);const F=a.extractPoints(h);let C=F.shape;const D=F.holes;if(!fo.isClockWise(C)){C=C.reverse();for(let G=0,Ae=D.length;G<Ae;G++){const he=D[G];fo.isClockWise(he)&&(D[G]=he.reverse())}}const $=fo.triangulateShape(C,D),k=C;for(let G=0,Ae=D.length;G<Ae;G++){const he=D[G];C=C.concat(he)}function q(G,Ae,he){return Ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),G.clone().addScaledVector(Ae,he)}const H=C.length,Y=$.length;function V(G,Ae,he){let Me,me,Ge;const Ne=G.x-Ae.x,I=G.y-Ae.y,P=he.x-G.x,ee=he.y-G.y,_e=Ne*Ne+I*I,xe=Ne*ee-I*P;if(Math.abs(xe)>Number.EPSILON){const ve=Math.sqrt(_e),qe=Math.sqrt(P*P+ee*ee),Oe=Ae.x-I/ve,Ue=Ae.y+Ne/ve,it=he.x-ee/qe,mt=he.y+P/qe,Se=((it-Oe)*ee-(mt-Ue)*P)/(Ne*ee-I*P);Me=Oe+Ne*Se-G.x,me=Ue+I*Se-G.y;const Rt=Me*Me+me*me;if(Rt<=2)return new pe(Me,me);Ge=Math.sqrt(Rt/2)}else{let ve=!1;Ne>Number.EPSILON?P>Number.EPSILON&&(ve=!0):Ne<-Number.EPSILON?P<-Number.EPSILON&&(ve=!0):Math.sign(I)===Math.sign(ee)&&(ve=!0),ve?(Me=-I,me=Ne,Ge=Math.sqrt(_e)):(Me=Ne,me=I,Ge=Math.sqrt(_e/2))}return new pe(Me/Ge,me/Ge)}const X=[];for(let G=0,Ae=k.length,he=Ae-1,Me=G+1;G<Ae;G++,he++,Me++)he===Ae&&(he=0),Me===Ae&&(Me=0),X[G]=V(k[G],k[he],k[Me]);const J=[];let K,ae=X.concat();for(let G=0,Ae=D.length;G<Ae;G++){const he=D[G];K=[];for(let Me=0,me=he.length,Ge=me-1,Ne=Me+1;Me<me;Me++,Ge++,Ne++)Ge===me&&(Ge=0),Ne===me&&(Ne=0),K[Me]=V(he[Me],he[Ge],he[Ne]);J.push(K),ae=ae.concat(K)}for(let G=0;G<_;G++){const Ae=G/_,he=g*Math.cos(Ae*Math.PI/2),Me=v*Math.sin(Ae*Math.PI/2)+S;for(let me=0,Ge=k.length;me<Ge;me++){const Ne=q(k[me],X[me],Me);ze(Ne.x,Ne.y,-he)}for(let me=0,Ge=D.length;me<Ge;me++){const Ne=D[me];K=J[me];for(let I=0,P=Ne.length;I<P;I++){const ee=q(Ne[I],K[I],Me);ze(ee.x,ee.y,-he)}}}const Be=v+S;for(let G=0;G<H;G++){const Ae=p?q(C[G],ae[G],Be):C[G];E?(B.copy(R.normals[0]).multiplyScalar(Ae.x),T.copy(R.binormals[0]).multiplyScalar(Ae.y),L.copy(M[0]).add(B).add(T),ze(L.x,L.y,L.z)):ze(Ae.x,Ae.y,0)}for(let G=1;G<=f;G++)for(let Ae=0;Ae<H;Ae++){const he=p?q(C[Ae],ae[Ae],Be):C[Ae];E?(B.copy(R.normals[G]).multiplyScalar(he.x),T.copy(R.binormals[G]).multiplyScalar(he.y),L.copy(M[G]).add(B).add(T),ze(L.x,L.y,L.z)):ze(he.x,he.y,d/f*G)}for(let G=_-1;G>=0;G--){const Ae=G/_,he=g*Math.cos(Ae*Math.PI/2),Me=v*Math.sin(Ae*Math.PI/2)+S;for(let me=0,Ge=k.length;me<Ge;me++){const Ne=q(k[me],X[me],Me);ze(Ne.x,Ne.y,d+he)}for(let me=0,Ge=D.length;me<Ge;me++){const Ne=D[me];K=J[me];for(let I=0,P=Ne.length;I<P;I++){const ee=q(Ne[I],K[I],Me);E?ze(ee.x,ee.y+M[f-1].y,M[f-1].x+he):ze(ee.x,ee.y,d+he)}}}Q(),de();function Q(){const G=s.length/3;if(p){let Ae=0,he=H*Ae;for(let Me=0;Me<Y;Me++){const me=$[Me];We(me[2]+he,me[1]+he,me[0]+he)}Ae=f+_*2,he=H*Ae;for(let Me=0;Me<Y;Me++){const me=$[Me];We(me[0]+he,me[1]+he,me[2]+he)}}else{for(let Ae=0;Ae<Y;Ae++){const he=$[Ae];We(he[2],he[1],he[0])}for(let Ae=0;Ae<Y;Ae++){const he=$[Ae];We(he[0]+H*f,he[1]+H*f,he[2]+H*f)}}i.addGroup(G,s.length/3-G,0)}function de(){const G=s.length/3;let Ae=0;Ce(k,Ae),Ae+=k.length;for(let he=0,Me=D.length;he<Me;he++){const me=D[he];Ce(me,Ae),Ae+=me.length}i.addGroup(G,s.length/3-G,1)}function Ce(G,Ae){let he=G.length;for(;--he>=0;){const Me=he;let me=he-1;me<0&&(me=G.length-1);for(let Ge=0,Ne=f+_*2;Ge<Ne;Ge++){const I=H*Ge,P=H*(Ge+1),ee=Ae+Me+I,_e=Ae+me+I,xe=Ae+me+P,ve=Ae+Me+P;Xe(ee,_e,xe,ve)}}}function ze(G,Ae,he){l.push(G),l.push(Ae),l.push(he)}function We(G,Ae,he){Ze(G),Ze(Ae),Ze(he);const Me=s.length/3,me=A.generateTopUV(i,s,Me-3,Me-2,Me-1);Ee(me[0]),Ee(me[1]),Ee(me[2])}function Xe(G,Ae,he,Me){Ze(G),Ze(Ae),Ze(Me),Ze(Ae),Ze(he),Ze(Me);const me=s.length/3,Ge=A.generateSideWallUV(i,s,me-6,me-3,me-2,me-1);Ee(Ge[0]),Ee(Ge[1]),Ee(Ge[3]),Ee(Ge[1]),Ee(Ge[2]),Ee(Ge[3])}function Ze(G){s.push(l[G*3+0]),s.push(l[G*3+1]),s.push(l[G*3+2])}function Ee(G){r.push(G.x),r.push(G.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return SK(t,i,e)}static fromJSON(e,t){const i=[];for(let r=0,o=e.shapes.length;r<o;r++){const a=t[e.shapes[r]];i.push(a)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new e0[s.type]().fromJSON(s)),new ox(i,e.options)}}const AK={generateTopUV:function(n,e,t,i,s){const r=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],h=e[s*3],f=e[s*3+1];return[new pe(r,o),new pe(a,l),new pe(h,f)]},generateSideWallUV:function(n,e,t,i,s,r){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],h=e[i*3],f=e[i*3+1],d=e[i*3+2],p=e[s*3],g=e[s*3+1],v=e[s*3+2],S=e[r*3],_=e[r*3+1],y=e[r*3+2];return Math.abs(a-f)<Math.abs(o-h)?[new pe(o,1-l),new pe(h,1-d),new pe(p,1-v),new pe(S,1-y)]:[new pe(a,1-l),new pe(f,1-d),new pe(g,1-v),new pe(_,1-y)]}};function SK(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const r=n[i];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class ax extends Cl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ax(e.radius,e.detail)}}class Sm extends Cl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sm(e.radius,e.detail)}}class lx extends Mt{constructor(e=.5,t=1,i=32,s=1,r=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:o},i=Math.max(3,i),s=Math.max(1,s);const a=[],l=[],h=[],f=[];let d=e;const p=(t-e)/s,g=new U,v=new pe;for(let S=0;S<=s;S++){for(let _=0;_<=i;_++){const y=r+_/i*o;g.x=d*Math.cos(y),g.y=d*Math.sin(y),l.push(g.x,g.y,g.z),h.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,f.push(v.x,v.y)}d+=p}for(let S=0;S<s;S++){const _=S*(i+1);for(let y=0;y<i;y++){const A=y+_,M=A,E=A+i+1,R=A+i+2,T=A+1;a.push(M,E,T),a.push(E,R,T)}}this.setIndex(a),this.setAttribute("position",new nt(l,3)),this.setAttribute("normal",new nt(h,3)),this.setAttribute("uv",new nt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cx extends Mt{constructor(e=new Jc([new pe(0,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],r=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f<e.length;f++)h(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new nt(s,3)),this.setAttribute("normal",new nt(r,3)),this.setAttribute("uv",new nt(o,2));function h(f){const d=s.length/3,p=f.extractPoints(t);let g=p.shape;const v=p.holes;fo.isClockWise(g)===!1&&(g=g.reverse());for(let _=0,y=v.length;_<y;_++){const A=v[_];fo.isClockWise(A)===!0&&(v[_]=A.reverse())}const S=fo.triangulateShape(g,v);for(let _=0,y=v.length;_<y;_++){const A=v[_];g=g.concat(A)}for(let _=0,y=g.length;_<y;_++){const A=g[_];s.push(A.x,A.y,0),r.push(0,0,1),o.push(A.x,A.y)}for(let _=0,y=S.length;_<y;_++){const A=S[_],M=A[0]+d,E=A[1]+d,R=A[2]+d;i.push(M,E,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return MK(t,e)}static fromJSON(e,t){const i=[];for(let s=0,r=e.shapes.length;s<r;s++){const o=t[e.shapes[s]];i.push(o)}return new cx(i,e.curveSegments)}}function MK(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class Mm extends Mt{constructor(e=1,t=32,i=16,s=0,r=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let h=0;const f=[],d=new U,p=new U,g=[],v=[],S=[],_=[];for(let y=0;y<=i;y++){const A=[],M=y/i;let E=0;y===0&&o===0?E=.5/t:y===i&&l===Math.PI&&(E=-.5/t);for(let R=0;R<=t;R++){const T=R/t;d.x=-e*Math.cos(s+T*r)*Math.sin(o+M*a),d.y=e*Math.cos(o+M*a),d.z=e*Math.sin(s+T*r)*Math.sin(o+M*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),S.push(p.x,p.y,p.z),_.push(T+E,1-M),A.push(h++)}f.push(A)}for(let y=0;y<i;y++)for(let A=0;A<t;A++){const M=f[y][A+1],E=f[y][A],R=f[y+1][A],T=f[y+1][A+1];(y!==0||o>0)&&g.push(M,E,T),(y!==i-1||l<Math.PI)&&g.push(E,R,T)}this.setIndex(g),this.setAttribute("position",new nt(v,3)),this.setAttribute("normal",new nt(S,3)),this.setAttribute("uv",new nt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ux extends Cl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ux(e.radius,e.detail)}}class hx extends Mt{constructor(e=1,t=.4,i=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:r},i=Math.floor(i),s=Math.floor(s);const o=[],a=[],l=[],h=[],f=new U,d=new U,p=new U;for(let g=0;g<=i;g++)for(let v=0;v<=s;v++){const S=v/s*r,_=g/i*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(S),d.y=(e+t*Math.cos(_))*Math.sin(S),d.z=t*Math.sin(_),a.push(d.x,d.y,d.z),f.x=e*Math.cos(S),f.y=e*Math.sin(S),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(v/s),h.push(g/i)}for(let g=1;g<=i;g++)for(let v=1;v<=s;v++){const S=(s+1)*g+v-1,_=(s+1)*(g-1)+v-1,y=(s+1)*(g-1)+v,A=(s+1)*g+v;o.push(S,_,A),o.push(_,y,A)}this.setIndex(o),this.setAttribute("position",new nt(a,3)),this.setAttribute("normal",new nt(l,3)),this.setAttribute("uv",new nt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class fx extends Mt{constructor(e=1,t=.4,i=64,s=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:r,q:o},i=Math.floor(i),s=Math.floor(s);const a=[],l=[],h=[],f=[],d=new U,p=new U,g=new U,v=new U,S=new U,_=new U,y=new U;for(let M=0;M<=i;++M){const E=M/i*r*Math.PI*2;A(E,r,o,e,g),A(E+.01,r,o,e,v),_.subVectors(v,g),y.addVectors(v,g),S.crossVectors(_,y),y.crossVectors(S,_),S.normalize(),y.normalize();for(let R=0;R<=s;++R){const T=R/s*Math.PI*2,B=-t*Math.cos(T),L=t*Math.sin(T);d.x=g.x+(B*y.x+L*S.x),d.y=g.y+(B*y.y+L*S.y),d.z=g.z+(B*y.z+L*S.z),l.push(d.x,d.y,d.z),p.subVectors(d,g).normalize(),h.push(p.x,p.y,p.z),f.push(M/i),f.push(R/s)}}for(let M=1;M<=i;M++)for(let E=1;E<=s;E++){const R=(s+1)*(M-1)+(E-1),T=(s+1)*M+(E-1),B=(s+1)*M+E,L=(s+1)*(M-1)+E;a.push(R,T,L),a.push(T,B,L)}this.setIndex(a),this.setAttribute("position",new nt(l,3)),this.setAttribute("normal",new nt(h,3)),this.setAttribute("uv",new nt(f,2));function A(M,E,R,T,B){const L=Math.cos(M),F=Math.sin(M),C=R/E*M,D=Math.cos(C);B.x=T*(2+D)*.5*L,B.y=T*(2+D)*F*.5,B.z=T*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class dx extends Mt{constructor(e=new uw(new U(-1,-1,0),new U(-1,1,0),new U(1,1,0)),t=64,i=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new U,l=new U,h=new pe;let f=new U;const d=[],p=[],g=[],v=[];S(),this.setIndex(v),this.setAttribute("position",new nt(d,3)),this.setAttribute("normal",new nt(p,3)),this.setAttribute("uv",new nt(g,2));function S(){for(let M=0;M<t;M++)_(M);_(r===!1?t:0),A(),y()}function _(M){f=e.getPointAt(M/t,f);const E=o.normals[M],R=o.binormals[M];for(let T=0;T<=s;T++){const B=T/s*Math.PI*2,L=Math.sin(B),F=-Math.cos(B);l.x=F*E.x+L*R.x,l.y=F*E.y+L*R.y,l.z=F*E.z+L*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,d.push(a.x,a.y,a.z)}}function y(){for(let M=1;M<=t;M++)for(let E=1;E<=s;E++){const R=(s+1)*(M-1)+(E-1),T=(s+1)*M+(E-1),B=(s+1)*M+E,L=(s+1)*(M-1)+E;v.push(R,T,L),v.push(T,B,L)}}function A(){for(let M=0;M<=t;M++)for(let E=0;E<=s;E++)h.x=M/t,h.y=E/s,g.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new dx(new e0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class NU extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new U,r=new U;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let h=0,f=l.length;h<f;++h){const d=l[h],p=d.start,g=d.count;for(let v=p,S=p+g;v<S;v+=3)for(let _=0;_<3;_++){const y=a.getX(v+_),A=a.getX(v+(_+1)%3);s.fromBufferAttribute(o,y),r.fromBufferAttribute(o,A),xP(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let h=0;h<3;h++){const f=3*a+h,d=3*a+(h+1)%3;s.fromBufferAttribute(o,f),r.fromBufferAttribute(o,d),xP(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new nt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function xP(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var _P=Object.freeze({__proto__:null,BoxGeometry:gu,CapsuleGeometry:tx,CircleGeometry:nx,ConeGeometry:ix,CylinderGeometry:Hf,DodecahedronGeometry:sx,EdgesGeometry:DU,ExtrudeGeometry:ox,IcosahedronGeometry:ax,LatheGeometry:Am,OctahedronGeometry:Sm,PlaneGeometry:zf,PolyhedronGeometry:Cl,RingGeometry:lx,ShapeGeometry:cx,SphereGeometry:Mm,TetrahedronGeometry:ux,TorusGeometry:hx,TorusKnotGeometry:fx,TubeGeometry:dx,WireframeGeometry:NU});class UU extends Qn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new He(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class FU extends zr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class bm extends Qn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new He(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dr extends bm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return On(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new He(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new He(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new He(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class zU extends Qn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new He(16777215),this.specular=new He(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kU extends Qn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new He(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class HU extends Qn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class GU extends Qn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VU extends Qn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new He(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WU extends ki{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Oc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function jU(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function XU(n){function e(s,r){return n[s]-n[r]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function Gb(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const a=t[r]*e;for(let l=0;l!==e;++l)s[o++]=n[a+l]}return s}function fw(n,e,t,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(e.push(r.time),t.push.apply(t,o)),r=n[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=n[s++];while(r!==void 0);else do o=r[i],o!==void 0&&(e.push(r.time),t.push(o)),r=n[s++];while(r!==void 0)}function bK(n,e,t,i,s=30){const r=n.clone();r.name=e;const o=[];for(let l=0;l<r.tracks.length;++l){const h=r.tracks[l],f=h.getValueSize(),d=[],p=[];for(let g=0;g<h.times.length;++g){const v=h.times[g]*s;if(!(v<t||v>=i)){d.push(h.times[g]);for(let S=0;S<f;++S)p.push(h.values[g*f+S])}}d.length!==0&&(h.times=Oc(d,h.times.constructor),h.values=Oc(p,h.values.constructor),o.push(h))}r.tracks=o;let a=1/0;for(let l=0;l<r.tracks.length;++l)a>r.tracks[l].times[0]&&(a=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*a);return r.resetDuration(),r}function EK(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,r=e/i;for(let o=0;o<s;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const h=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(h===void 0)continue;let f=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let p=0;const g=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);const v=a.times.length-1;let S;if(r<=a.times[0]){const y=f,A=d-f;S=a.values.slice(y,A)}else if(r>=a.times[v]){const y=v*d+f,A=y+d-f;S=a.values.slice(y,A)}else{const y=a.createInterpolant(),A=f,M=d-f;y.evaluate(r),S=y.resultBuffer.slice(A,M)}l==="quaternion"&&new li().fromArray(S).normalize().conjugate().toArray(S);const _=h.times.length;for(let y=0;y<_;++y){const A=y*g+p;if(l==="quaternion")li.multiplyQuaternionsFlat(h.values,A,S,0,h.values,A);else{const M=g-p*2;for(let E=0;E<M;++E)h.values[A+E]-=S[E]}}}return n.blendMode=k1,n}const wK={convertArray:Oc,isTypedArray:jU,getKeyframeOrder:XU,sortedArray:Gb,flattenJSON:fw,subclip:bK,makeClipAdditive:EK};class Gf{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let o;n:{i:if(!(e<s)){for(let a=i+2;;){if(s===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=s,s=t[++i],e<s)break t}o=t.length;break n}if(!(e>=r)){const a=t[1];e<a&&(i=2,r=a);for(let l=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(s=r,r=t[--i-1],e>=r)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(s=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class JU extends Gf{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Pc,endingEnd:Pc}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,o=e+1,a=s[r],l=s[o];if(a===void 0)switch(this.getSettings_().endingStart){case Dc:r=e,a=2*t-i;break;case Vp:r=s.length-2,a=t+s[r]-s[r+1];break;default:r=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Dc:o=e,l=2*i-t;break;case Vp:o=1,l=i+s[1]-s[0];break;default:o=e-1,l=t}const h=(i-t)*.5,f=this.valueSize;this._weightPrev=h/(t-a),this._weightNext=h/(l-i),this._offsetPrev=r*f,this._offsetNext=o*f}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,h=l-a,f=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(s-t),S=v*v,_=S*v,y=-p*_+2*p*S-p*v,A=(1+p)*_+(-1.5-2*p)*S+(-.5+p)*v+1,M=(-1-g)*_+(1.5+g)*S+.5*v,E=g*_-g*S;for(let R=0;R!==a;++R)r[R]=y*o[f+R]+A*o[h+R]+M*o[l+R]+E*o[d+R];return r}}class dw extends Gf{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,h=l-a,f=(i-t)/(s-t),d=1-f;for(let p=0;p!==a;++p)r[p]=o[h+p]*d+o[l+p]*f;return r}}class YU extends Gf{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Vr{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Oc(t,this.TimeBufferType),this.values=Oc(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Oc(e.times,Array),values:Oc(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new YU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new JU(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case bf:t=this.InterpolantFactoryMethodDiscrete;break;case tu:t=this.InterpolantFactoryMethodLinear;break;case cv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bf;case this.InterpolantFactoryMethodLinear:return tu;case this.InterpolantFactoryMethodSmooth:return cv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<e;)++r;for(;o!==-1&&i[o]>t;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(s!==void 0&&jU(s))for(let a=0,l=s.length;a!==l;++a){const h=s[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===cv,r=e.length-1;let o=1;for(let a=1;a<r;++a){let l=!1;const h=e[a],f=e[a+1];if(h!==f&&(a!==1||h!==e[0]))if(s)l=!0;else{const d=a*i,p=d-i,g=d+i;for(let v=0;v!==i;++v){const S=t[d+v];if(S!==t[p+v]||S!==t[g+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let g=0;g!==i;++g)t[p+g]=t[d+g]}++o}}if(r>0){e[o]=e[r];for(let a=r*i,l=o*i,h=0;h!==i;++h)t[l+h]=t[a+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Vr.prototype.TimeBufferType=Float32Array;Vr.prototype.ValueBufferType=Float32Array;Vr.prototype.DefaultInterpolation=tu;class yu extends Vr{}yu.prototype.ValueTypeName="bool";yu.prototype.ValueBufferType=Array;yu.prototype.DefaultInterpolation=bf;yu.prototype.InterpolantFactoryMethodLinear=void 0;yu.prototype.InterpolantFactoryMethodSmooth=void 0;class pw extends Vr{}pw.prototype.ValueTypeName="color";class su extends Vr{}su.prototype.ValueTypeName="number";class KU extends Gf{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(s-t);let h=e*a;for(let f=h+a;h!==f;h+=4)li.slerpFlat(r,0,o,h-a,o,h,l);return r}}class gl extends Vr{InterpolantFactoryMethodLinear(e){return new KU(this.times,this.values,this.getValueSize(),e)}}gl.prototype.ValueTypeName="quaternion";gl.prototype.DefaultInterpolation=tu;gl.prototype.InterpolantFactoryMethodSmooth=void 0;class vu extends Vr{}vu.prototype.ValueTypeName="string";vu.prototype.ValueBufferType=Array;vu.prototype.DefaultInterpolation=bf;vu.prototype.InterpolantFactoryMethodLinear=void 0;vu.prototype.InterpolantFactoryMethodSmooth=void 0;class ru extends Vr{}ru.prototype.ValueTypeName="vector";class Tf{constructor(e,t=-1,i,s=W0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=Is(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(TK(i[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(Vr.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,o=[];for(let a=0;a<r;a++){let l=[],h=[];l.push((a+r-1)%r,a,(a+1)%r),h.push(0,1,0);const f=XU(l);l=Gb(l,1,f),h=Gb(h,1,f),!s&&l[0]===0&&(l.push(r),h.push(h[0])),o.push(new su(".morphTargetInfluences["+t[a].name+"]",l,h).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const h=e[a],f=h.name.match(r);if(f&&f.length>1){const d=f[1];let p=s[d];p||(s[d]=p=[]),p.push(h)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,g,v,S){if(g.length!==0){const _=[],y=[];fw(g,_,y,v),_.length!==0&&S.push(new d(p,_,y))}},s=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const h=e.hierarchy||[];for(let d=0;d<h.length;d++){const p=h[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let S=0;S<p[v].morphTargets.length;S++)g[p[v].morphTargets[S]]=-1;for(const S in g){const _=[],y=[];for(let A=0;A!==p[v].morphTargets.length;++A){const M=p[v];_.push(M.time),y.push(M.morphTarget===S?1:0)}s.push(new su(".morphTargetInfluence["+S+"]",_,y))}l=g.length*o}else{const g=".bones["+t[d].name+"]";i(ru,g+".position",p,"pos",s),i(gl,g+".quaternion",p,"rot",s),i(ru,g+".scale",p,"scl",s)}}return s.length===0?null:new this(r,l,s,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function CK(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return su;case"vector":case"vector2":case"vector3":case"vector4":return ru;case"color":return pw;case"quaternion":return gl;case"bool":case"boolean":return yu;case"string":return vu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function TK(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=CK(n.type);if(n.times===void 0){const t=[],i=[];fw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Xo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class mw{constructor(e,t,i){const s=this;let r=!1,o=0,a=0,l;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,r===!1&&s.onStart!==void 0&&s.onStart(f,o,a),r=!0},this.itemEnd=function(f){o++,s.onProgress!==void 0&&s.onProgress(f,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(f){s.onError!==void 0&&s.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,d){return h.push(f,d),this},this.removeHandler=function(f){const d=h.indexOf(f);return d!==-1&&h.splice(d,2),this},this.getHandler=function(f){for(let d=0,p=h.length;d<p;d+=2){const g=h[d],v=h[d+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}}const Wh=new mw;let Hi=class{constructor(e){this.manager=e!==void 0?e:Wh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Hi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Oo={};class RK extends Error{constructor(e,t){super(e),this.response=t}}class zs extends Hi{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Xo.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Oo[e]!==void 0){Oo[e].push({onLoad:t,onProgress:i,onError:s});return}Oo[e]=[],Oo[e].push({onLoad:t,onProgress:i,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const f=Oo[e],d=h.body.getReader(),p=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),g=p?parseInt(p):0,v=g!==0;let S=0;const _=new ReadableStream({start(y){A();function A(){d.read().then(({done:M,value:E})=>{if(M)y.close();else{S+=E.byteLength;const R=new ProgressEvent("progress",{lengthComputable:v,loaded:S,total:g});for(let T=0,B=f.length;T<B;T++){const L=f[T];L.onProgress&&L.onProgress(R)}y.enqueue(E),A()}})}}});return new Response(_)}else throw new RK(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(l){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return h.json();default:if(a===void 0)return h.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,g=new TextDecoder(p);return h.arrayBuffer().then(v=>g.decode(v))}}}).then(h=>{Xo.add(e,h);const f=Oo[e];delete Oo[e];for(let d=0,p=f.length;d<p;d++){const g=f[d];g.onLoad&&g.onLoad(h)}}).catch(h=>{const f=Oo[e];if(f===void 0)throw this.manager.itemError(e),h;delete Oo[e];for(let d=0,p=f.length;d<p;d++){const g=f[d];g.onError&&g.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class BK extends Hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new zs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=Tf.parse(e[i]);t.push(s)}return t}}class PK extends Hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=[],a=new $0,l=new zs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(r.withCredentials);let h=0;function f(d){l.load(e[d],function(p){const g=r.parse(p,!0);o[d]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},h+=1,h===6&&(g.mipmapCount===1&&(a.minFilter=un),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},i,s)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)f(d);else l.load(e,function(d){const p=r.parse(d,!0);if(p.isCubemap){const g=p.mipmaps.length/p.mipmapCount;for(let v=0;v<g;v++){o[v]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+S]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=un),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,s);return a}}class em extends Hi{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Xo.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=Kp("img");function l(){f(),Xo.add(e,this),t&&t(this),r.manager.itemEnd(e)}function h(d){f(),s&&s(d),r.manager.itemError(e),r.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",h,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class DK extends Hi{constructor(e){super(e)}load(e,t,i,s){const r=new ym;r.colorSpace=Fn;const o=new em(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(h){o.load(e[h],function(f){r.images[h]=f,a++,a===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let h=0;h<e.length;++h)l(h);return r}}class LK extends Hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new Xc,a=new zs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,function(l){let h;try{h=r.parse(l)}catch(f){if(s!==void 0)s(f);else{console.error(f);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&&(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:mi,o.wrapT=h.wrapT!==void 0?h.wrapT:mi,o.magFilter=h.magFilter!==void 0?h.magFilter:un,o.minFilter=h.minFilter!==void 0?h.minFilter:un,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0?o.colorSpace=h.colorSpace:h.encoding!==void 0&&(o.encoding=h.encoding),h.flipY!==void 0&&(o.flipY=h.flipY),h.format!==void 0&&(o.format=h.format),h.type!==void 0&&(o.type=h.type),h.mipmaps!==void 0&&(o.mipmaps=h.mipmaps,o.minFilter=lr),h.mipmapCount===1&&(o.minFilter=un),h.generateMipmaps!==void 0&&(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&&t(o,h)},i,s),o}}class qU extends Hi{constructor(e){super(e)}load(e,t,i,s){const r=new xn,o=new em(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class Tl extends zt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new He(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class QU extends Tl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new He(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const lS=new ut,AP=new U,SP=new U;class gw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pe(512,512),this.map=null,this.mapPass=null,this.matrix=new ut,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new vm,this._frameExtents=new pe(1,1),this._viewportCount=1,this._viewports=[new Yt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;AP.setFromMatrixPosition(e.matrixWorld),t.position.copy(AP),SP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(SP),t.updateMatrixWorld(),lS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(lS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class OK extends gw{constructor(){super(new vn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Ef*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class yw extends Tl{constructor(e,t,i=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new OK}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const MP=new ut,Fd=new U,cS=new U;class IK extends gw{constructor(){super(new vn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pe(4,2),this._viewportCount=6,this._viewports=[new Yt(2,1,1,1),new Yt(0,1,1,1),new Yt(3,1,1,1),new Yt(1,1,1,1),new Yt(3,0,1,1),new Yt(1,0,1,1)],this._cubeDirections=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],this._cubeUps=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),Fd.setFromMatrixPosition(e.matrixWorld),i.position.copy(Fd),cS.copy(i.position),cS.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(cS),i.updateMatrixWorld(),s.makeTranslation(-Fd.x,-Fd.y,-Fd.z),MP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MP)}}class vw extends Tl{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new IK}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class NK extends gw{constructor(){super(new Or(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xw extends Tl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.shadow=new NK}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ZU extends Tl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class $U extends Tl{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class eF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new U)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*s),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*s)),t.addScaledVector(o[5],1.092548*(s*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(i*r)),t.addScaledVector(o[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*s),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*s),t.addScaledVector(o[5],2*.429043*s*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*i*r),t.addScaledVector(o[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-s*s)}}class tF extends Tl{constructor(e=new eF,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class px extends Hi{constructor(e){super(e),this.textures={}}load(e,t,i,s){const r=this,o=new zs(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=px.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new He().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(s.uniforms[r]={},o.type){case"t":s.uniforms[r].value=i(o.value);break;case"c":s.uniforms[r].value=new He().setHex(o.value);break;case"v2":s.uniforms[r].value=new pe().fromArray(o.value);break;case"v3":s.uniforms[r].value=new U().fromArray(o.value);break;case"v4":s.uniforms[r].value=new Yt().fromArray(o.value);break;case"m3":s.uniforms[r].value=new wt().fromArray(o.value);break;case"m4":s.uniforms[r].value=new ut().fromArray(o.value);break;default:s.uniforms[r].value=o.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new pe().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new pe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:UU,SpriteMaterial:tw,RawShaderMaterial:FU,ShaderMaterial:zr,PointsMaterial:Z0,MeshPhysicalMaterial:dr,MeshStandardMaterial:bm,MeshPhongMaterial:zU,MeshToonMaterial:kU,MeshNormalMaterial:HU,MeshLambertMaterial:GU,MeshDepthMaterial:Q1,MeshDistanceMaterial:Z1,MeshBasicMaterial:Ls,MeshMatcapMaterial:VU,LineDashedMaterial:WU,LineBasicMaterial:ki,Material:Qn};return new t[e]}}class ol{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class nF extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class iF extends Hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new zs(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(g,v){if(t[v]!==void 0)return t[v];const _=g.interleavedBuffers[v],y=r(g,_.buffer),A=kh(_.type,y),M=new xm(A,_.stride);return M.uuid=_.uuid,t[v]=M,M}function r(g,v){if(i[v]!==void 0)return i[v];const _=g.arrayBuffers[v],y=new Uint32Array(_).buffer;return i[v]=y,y}const o=e.isInstancedBufferGeometry?new nF:new Mt,a=e.data.index;if(a!==void 0){const g=kh(a.type,a.array);o.setIndex(new kt(g,1))}const l=e.data.attributes;for(const g in l){const v=l[g];let S;if(v.isInterleavedBufferAttribute){const _=s(e.data,v.data);S=new ml(_,v.itemSize,v.offset,v.normalized)}else{const _=kh(v.type,v.array),y=v.isInstancedBufferAttribute?nu:kt;S=new y(_,v.itemSize,v.normalized)}v.name!==void 0&&(S.name=v.name),v.usage!==void 0&&S.setUsage(v.usage),o.setAttribute(g,S)}const h=e.data.morphAttributes;if(h)for(const g in h){const v=h[g],S=[];for(let _=0,y=v.length;_<y;_++){const A=v[_];let M;if(A.isInterleavedBufferAttribute){const E=s(e.data,A.data);M=new ml(E,A.itemSize,A.offset,A.normalized)}else{const E=kh(A.type,A.array);M=new kt(E,A.itemSize,A.normalized)}A.name!==void 0&&(M.name=A.name),S.push(M)}o.morphAttributes[g]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let g=0,v=d.length;g!==v;++g){const S=d[g];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const g=new U;p.center!==void 0&&g.fromArray(p.center),o.boundingSphere=new vi(g,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class UK extends Hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=this.path===""?ol.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new zs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let h=null;try{h=JSON.parse(l)}catch(d){s!==void 0&&s(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(h,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?ol.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new zs(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),o=this.parseImages(e.images,function(){t!==void 0&&t(h)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),h=this.parseObject(e.object,r,l,a,i),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,s,a,o,t),h=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,h),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const r=new Jc().fromJSON(e[i]);t[r.uuid]=r}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=new _m().fromJSON(e[r],s);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new iF;for(let r=0,o=e.length;r<o;r++){let a;const l=e[r];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=s.parse(l);break;default:l.type in _P?a=_P[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const r=new px;r.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=r.parse(l)),s[l.uuid]=i[l.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],r=Tf.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const i=this,s={};let r;function o(l){return i.manager.itemStart(l),r.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const h=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return o(f)}else return l.data?{data:kh(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new mw(t);r=new em(l),r.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h<f;h++){const d=e[h],p=d.url;if(Array.isArray(p)){const g=[];for(let v=0,S=p.length;v<S;v++){const _=p[v],y=a(_);y!==null&&(y instanceof HTMLImageElement?g.push(y):g.push(new Xc(y.data,y.width,y.height)))}s[d.uuid]=new Lc(g)}else{const g=a(d.url);s[d.uuid]=new Lc(g)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function r(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await s.loadAsync(l)}else return o.data?{data:kh(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){s=new em(this.manager),s.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],h=l.url;if(Array.isArray(h)){const f=[];for(let d=0,p=h.length;d<p;d++){const g=h[d],v=await r(g);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new Xc(v.data,v.width,v.height)))}i[l.uuid]=new Lc(f)}else{const f=await r(l.url);i[l.uuid]=new Lc(f)}}}return i}parseTextures(e,t){function i(r,o){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),o[r])}const s={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=e[r];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],h=l.data;let f;Array.isArray(h)?(f=new ym,h.length===6&&(f.needsUpdate=!0)):(h&&h.data?f=new Xc:f=new xn,h&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,FK)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],bP),f.wrapT=i(a.wrap[1],bP)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.encoding!==void 0&&(f.encoding=a.encoding),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,EP)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,EP)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),s[a.uuid]=f}return s}parseObject(e,t,i,s,r){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const g=[];for(let v=0,S=p.length;v<S;v++){const _=p[v];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),g.push(i[_])}return g}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function h(p){return s[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),s[p]}let f,d;switch(e.type){case"Scene":o=new ew,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new He(e.background):o.background=h(e.background)),e.environment!==void 0&&(o.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new q0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new K0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new vn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Or(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ZU(e.color,e.intensity);break;case"DirectionalLight":o=new xw(e.color,e.intensity);break;case"PointLight":o=new vw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new $U(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new yw(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new QU(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new tF().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),d=l(e.material),o=new nw(f,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),d=l(e.material),o=new Hn(f,d);break;case"InstancedMesh":f=a(e.geometry),d=l(e.material);const p=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new iw(f,d,p),o.instanceMatrix=new nu(new Float32Array(g.array),16),v!==void 0&&(o.instanceColor=new nu(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":f=a(e.geometry),d=l(e.material),o=new wU(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(S=>{const _=new Oi;_.min.fromArray(S.boxMin),_.max.fromArray(S.boxMax);const y=new vi;return y.radius=S.sphereRadius,y.center.fromArray(S.sphereCenter),{boxInitialized:S.boxInitialized,box:_,sphereInitialized:S.sphereInitialized,sphere:y}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=h(e.matricesTexture.uuid);break;case"LOD":o=new EU;break;case"Line":o=new ra(a(e.geometry),l(e.material));break;case"LineLoop":o=new sw(a(e.geometry),l(e.material));break;case"LineSegments":o=new Hr(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new rw(a(e.geometry),l(e.material));break;case"Sprite":o=new bU(l(e.material));break;case"Group":o=new jo;break;case"Bone":o=new Q0;break;default:o=new zt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let g=0;g<p.length;g++)o.add(this.parseObject(p[g],t,i,s,r))}if(e.animations!==void 0){const p=e.animations;for(let g=0;g<p.length;g++){const v=p[g];o.animations.push(r[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let g=0;g<p.length;g++){const v=p[g],S=o.getObjectByProperty("uuid",v.object);S!==void 0&&o.addLevel(S,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}}const FK={UVMapping:G0,CubeReflectionMapping:sa,CubeRefractionMapping:dl,EquirectangularReflectionMapping:kp,EquirectangularRefractionMapping:Hp,CubeUVReflectionMapping:Ff},bP={RepeatWrapping:pl,ClampToEdgeWrapping:mi,MirroredRepeatWrapping:Sf},EP={NearestFilter:Ln,NearestMipmapNearestFilter:Gp,NearestMipmapLinearFilter:Ha,LinearFilter:un,LinearMipmapNearestFilter:nf,LinearMipmapLinearFilter:lr};class sF extends Hi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Xo.get(e);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(h=>{t&&t(h),r.manager.itemEnd(e)}).catch(h=>{s&&s(h)});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(h){return Xo.add(e,h),t&&t(h),r.manager.itemEnd(e),h}).catch(function(h){s&&s(h),Xo.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});Xo.add(e,l),r.manager.itemStart(e)}}let Ay;class _w{static getContext(){return Ay===void 0&&(Ay=new(window.AudioContext||window.webkitAudioContext)),Ay}static setContext(e){Ay=e}}class zK extends Hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new zs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const h=l.slice(0);_w.getContext().decodeAudioData(h,function(d){t(d)}).catch(a)}catch(h){a(h)}},i,s);function a(l){s?s(l):console.error(l),r.manager.itemError(e)}}}const wP=new ut,CP=new ut,sc=new ut;class kK{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,sc.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,o=t.near*Math.tan(Wc*t.fov*.5)/t.zoom;let a,l;CP.elements[12]=-s,wP.elements[12]=s,a=-o*t.aspect+r,l=o*t.aspect+r,sc.elements[0]=2*t.near/(l-a),sc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(sc),a=-o*t.aspect-r,l=o*t.aspect-r,sc.elements[0]=2*t.near/(l-a),sc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(sc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(CP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(wP)}}class Aw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=TP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=TP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function TP(){return(typeof performance>"u"?Date:performance).now()}const rc=new U,RP=new li,HK=new U,oc=new U;class GK extends zt{constructor(){super(),this.type="AudioListener",this.context=_w.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Aw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(rc,RP,HK),oc.set(0,0,-1).applyQuaternion(RP),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(rc.x,s),t.positionY.linearRampToValueAtTime(rc.y,s),t.positionZ.linearRampToValueAtTime(rc.z,s),t.forwardX.linearRampToValueAtTime(oc.x,s),t.forwardY.linearRampToValueAtTime(oc.y,s),t.forwardZ.linearRampToValueAtTime(oc.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(rc.x,rc.y,rc.z),t.setOrientation(oc.x,oc.y,oc.z,i.x,i.y,i.z)}}class rF extends zt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ac=new U,BP=new li,VK=new U,lc=new U;class WK extends rF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ac,BP,VK),lc.set(0,0,1).applyQuaternion(BP);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ac.x,i),t.positionY.linearRampToValueAtTime(ac.y,i),t.positionZ.linearRampToValueAtTime(ac.z,i),t.orientationX.linearRampToValueAtTime(lc.x,i),t.orientationY.linearRampToValueAtTime(lc.y,i),t.orientationZ.linearRampToValueAtTime(lc.z,i)}else t.setPosition(ac.x,ac.y,ac.z),t.setOrientation(lc.x,lc.y,lc.z)}}class jK{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class oF{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,r,o;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,r=e*s+s;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==s;++a)i[r+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,r,0,a,s)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const l=t*this._origIndex;this._mixBufferRegion(i,s,l,1-r,t)}o>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let l=t,h=t+t;l!==h;++l)if(i[l]!==i[l+t]){a.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let r=i,o=s;r!==o;++r)t[r]=t[s+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,r){if(s>=.5)for(let o=0;o!==r;++o)e[t+o]=e[i+o]}_slerp(e,t,i,s){li.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,r){const o=this._workIndex*r;li.multiplyQuaternionsFlat(e,o,e,t,e,i),li.slerpFlat(e,t,e,t,e,o,s)}_lerp(e,t,i,s,r){const o=1-s;for(let a=0;a!==r;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*s}}_lerpAdditive(e,t,i,s,r){for(let o=0;o!==r;++o){const a=t+o;e[a]=e[a]+e[i+o]*s}}}const Sw="\\[\\]\\.:\\/",XK=new RegExp("["+Sw+"]","g"),Mw="[^"+Sw+"]",JK="[^"+Sw.replace("\\.","")+"]",YK=/((?:WC+[\/:])*)/.source.replace("WC",Mw),KK=/(WCOD+)?/.source.replace("WCOD",JK),qK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Mw),QK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Mw),ZK=new RegExp("^"+YK+KK+qK+QK+"$"),$K=["material","materials","bones","map"];class eq{constructor(e,t,i){const s=i||Ft.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ft{constructor(e,t,i){this.path=t,this.parsedPath=i||Ft.parseTrackName(t),this.node=Ft.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ft.Composite(e,t,i):new Ft(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(XK,"")}static parseTrackName(e){const t=ZK.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);$K.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let o=0;o<r.length;o++){const a=r[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=Ft.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const o=e[s];if(o===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+s+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ft.Composite=eq;Ft.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ft.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ft.prototype.GetterByBindingType=[Ft.prototype._getValue_direct,Ft.prototype._getValue_array,Ft.prototype._getValue_arrayElement,Ft.prototype._getValue_toArray];Ft.prototype.SetterByBindingTypeAndVersioning=[[Ft.prototype._setValue_direct,Ft.prototype._setValue_direct_setNeedsUpdate,Ft.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_array,Ft.prototype._setValue_array_setNeedsUpdate,Ft.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_arrayElement,Ft.prototype._setValue_arrayElement_setNeedsUpdate,Ft.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_fromArray,Ft.prototype._setValue_fromArray_setNeedsUpdate,Ft.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tq{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Is(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length;let a,l=e.length,h=this.nCachedObjects_;for(let f=0,d=arguments.length;f!==d;++f){const p=arguments[f],g=p.uuid;let v=t[g];if(v===void 0){v=l++,t[g]=v,e.push(p);for(let S=0,_=o;S!==_;++S)r[S].push(new Ft(p,i[S],s[S]))}else if(v<h){a=e[v];const S=--h,_=e[S];t[_.uuid]=v,e[v]=_,t[g]=S,e[S]=p;for(let y=0,A=o;y!==A;++y){const M=r[y],E=M[S];let R=M[v];M[v]=E,R===void 0&&(R=new Ft(p,i[y],s[y])),M[S]=R}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],h=l.uuid,f=t[h];if(f!==void 0&&f>=r){const d=r++,p=e[d];t[p.uuid]=f,e[f]=p,t[h]=d,e[d]=l;for(let g=0,v=s;g!==v;++g){const S=i[g],_=S[d],y=S[f];S[f]=_,S[d]=y}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const h=arguments[a],f=h.uuid,d=t[f];if(d!==void 0)if(delete t[f],d<r){const p=--r,g=e[p],v=--o,S=e[v];t[g.uuid]=d,e[d]=g,t[S.uuid]=p,e[p]=S,e.pop();for(let _=0,y=s;_!==y;++_){const A=i[_],M=A[p],E=A[v];A[d]=M,A[p]=E,A.pop()}}else{const p=--o,g=e[p];p>0&&(t[g.uuid]=d),e[d]=g,e.pop();for(let v=0,S=s;v!==S;++v){const _=i[v];_[d]=_[p],_.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const r=this._bindings;if(s!==void 0)return r[s];const o=this._paths,a=this._parsedPaths,l=this._objects,h=l.length,f=this.nCachedObjects_,d=new Array(h);s=r.length,i[e]=s,o.push(e),a.push(t),r.push(d);for(let p=f,g=l.length;p!==g;++p){const v=l[p];d[p]=new Ft(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],h=e[a];t[h]=i,o[i]=l,o.pop(),r[i]=r[a],r.pop(),s[i]=s[a],s.pop()}}}class aF{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const r=t.tracks,o=r.length,a=new Array(o),l={endingStart:Pc,endingEnd:Pc};for(let h=0;h!==o;++h){const f=r[h].createInterpolant(null);a[h]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=XN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,r=e._clip.duration,o=r/s,a=s/r;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,r=s.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,h=a.sampleValues;return l[0]=r,l[1]=r+i,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case k1:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),h[f].accumulateAdditive(a);break;case W0:default:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),h[f].accumulate(s,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const o=i===JN;if(e===0)return r===-1?s:o&&(r&1)===1?t-s:s;if(i===jN){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=t||s<0){const a=Math.floor(s/t);s-=t*a,r+=Math.abs(a);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=s;if(o&&(r&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=Dc,s.endingEnd=Dc):(e?s.endingStart=this.zeroSlopeAtStart?Dc:Pc:s.endingStart=Vp,t?s.endingEnd=this.zeroSlopeAtEnd?Dc:Pc:s.endingEnd=Vp)}_scheduleFading(e,t,i){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,l[0]=t,a[1]=r+e,l[1]=i,this}}const nq=new Float32Array(1);class iq extends la{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,r=s.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,h=this._bindingsByRootAndName;let f=h[l];f===void 0&&(f={},h[l]=f);for(let d=0;d!==r;++d){const p=s[d],g=p.name;let v=f[g];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,g));continue}const S=t&&t._propertyBindings[d].binding.parsedPath;v=new oF(Ft.create(i,g,S),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,g),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=s.length,s.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],l=a.knownActions,h=l[l.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,l[f]=h,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,r=this._bindings;let o=s[t];o===void 0&&(o={},s[t]=o),o[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[s],l=t[t.length-1],h=e._cacheIndex;l._cacheIndex=h,t[h]=l,t.pop(),delete a[r],Object.keys(a).length===0&&delete o[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new dw(new Float32Array(2),new Float32Array(2),1,nq),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const s=t||this._root,r=s.uuid;let o=typeof e=="string"?Tf.findByName(s,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let h=null;if(i===void 0&&(o!==null?i=o.blendMode:i=W0),l!==void 0){const d=l.actionByRoot[r];if(d!==void 0&&d.blendMode===i)return d;h=l.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const f=new aF(this,o,t,i);return this._bindAction(f,h),this._addInactiveAction(f,a,r),f}existingAction(e,t){const i=t||this._root,s=i.uuid,r=typeof e=="string"?Tf.findByName(i,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(s,e,r,o);const a=this._bindings,l=this._nActiveBindings;for(let h=0;h!==l;++h)a[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,r=s[i];if(r!==void 0){const o=r.knownActions;for(let a=0,l=o.length;a!==l;++a){const h=o[a];this._deactivateAction(h);const f=h._cacheIndex,d=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,d._cacheIndex=f,t[f]=d,t.pop(),this._removeInactiveBindingsForAction(h)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const o in r){const a=r[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class bw{constructor(e){this.value=e}clone(){return new bw(this.value.clone===void 0?this.value:this.value.clone())}}let sq=0;class rq extends la{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:sq++}),this.name="",this.usage=Jp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++){const r=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<r.length;o++)this.uniforms.push(r[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class oq extends xm{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class aq{constructor(e,t,i,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class lF{constructor(e,t,i=0,s=1/0){this.ray=new mu(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new wf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Vb(e,this,i,t),i.sort(PP),i}intersectObjects(e,t=!0,i=[]){for(let s=0,r=e.length;s<r;s++)Vb(e[s],this,i,t);return i.sort(PP),i}}function PP(n,e){return n.distance-e.distance}function Vb(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const s=n.children;for(let r=0,o=s.length;r<o;r++)Vb(s[r],e,t,!0)}}class Wb{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(On(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class lq{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const DP=new pe;class cq{constructor(e=new pe(1/0,1/0),t=new pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=DP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,DP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const LP=new U,Sy=new U;class uq{constructor(e=new U,t=new U){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){LP.subVectors(e,this.start),Sy.subVectors(this.end,this.start);const i=Sy.dot(Sy);let r=Sy.dot(LP)/i;return t&&(r=On(r,0,1)),r}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const OP=new U;class hq extends zt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Mt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const h=o/l*Math.PI*2,f=a/l*Math.PI*2;s.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new nt(s,3));const r=new ki({fog:!1,toneMapped:!1});this.cone=new Hr(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),OP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(OP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Da=new U,My=new ut,uS=new ut;class fq extends Hr{constructor(e){const t=cF(e),i=new Mt,s=[],r=[],o=new He(0,0,1),a=new He(0,1,0);for(let h=0;h<t.length;h++){const f=t[h];f.parent&&f.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new nt(s,3)),i.setAttribute("color",new nt(r,3));const l=new ki({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");uS.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const a=t[r];a.parent&&a.parent.isBone&&(My.multiplyMatrices(uS,a.matrixWorld),Da.setFromMatrixPosition(My),s.setXYZ(o,Da.x,Da.y,Da.z),My.multiplyMatrices(uS,a.parent.matrixWorld),Da.setFromMatrixPosition(My),s.setXYZ(o+1,Da.x,Da.y,Da.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function cF(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,cF(n.children[t]));return e}class dq extends Hn{constructor(e,t,i){const s=new Mm(t,4,2),r=new Ls({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const pq=new U,IP=new He,NP=new He;class mq extends zt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new Sm(t);s.rotateY(Math.PI*.5),this.material=new Ls({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),o=new Float32Array(r.count*3);s.setAttribute("color",new kt(o,3)),this.add(new Hn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");IP.copy(this.light.color),NP.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const r=i<s/2?IP:NP;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(pq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gq extends Hr{constructor(e=10,t=10,i=4473924,s=8947848){i=new He(i),s=new He(s);const r=t/2,o=e/t,a=e/2,l=[],h=[];for(let p=0,g=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const S=p===r?i:s;S.toArray(h,g),g+=3,S.toArray(h,g),g+=3,S.toArray(h,g),g+=3,S.toArray(h,g),g+=3}const f=new Mt;f.setAttribute("position",new nt(l,3)),f.setAttribute("color",new nt(h,3));const d=new ki({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class yq extends Hr{constructor(e=10,t=16,i=8,s=64,r=4473924,o=8947848){r=new He(r),o=new He(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),g=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(g,0,v);const S=d&1?r:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let d=0;d<i;d++){const p=d&1?r:o,g=e-e/i*d;for(let v=0;v<s;v++){let S=v/s*(Math.PI*2),_=Math.sin(S)*g,y=Math.cos(S)*g;a.push(_,0,y),l.push(p.r,p.g,p.b),S=(v+1)/s*(Math.PI*2),_=Math.sin(S)*g,y=Math.cos(S)*g,a.push(_,0,y),l.push(p.r,p.g,p.b)}}const h=new Mt;h.setAttribute("position",new nt(a,3)),h.setAttribute("color",new nt(l,3));const f=new ki({vertexColors:!0,toneMapped:!1});super(h,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const UP=new U,by=new U,FP=new U;class vq extends zt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new Mt;s.setAttribute("position",new nt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new ki({fog:!1,toneMapped:!1});this.lightPlane=new ra(s,r),this.add(this.lightPlane),s=new Mt,s.setAttribute("position",new nt([0,0,0,0,0,1],3)),this.targetLine=new ra(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),UP.setFromMatrixPosition(this.light.matrixWorld),by.setFromMatrixPosition(this.light.target.matrixWorld),FP.subVectors(by,UP),this.lightPlane.lookAt(by),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(by),this.targetLine.scale.z=FP.length()}}const Ey=new U,Bn=new J0;class xq extends Hr{constructor(e){const t=new Mt,i=new ki({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,S){l(v),l(S)}function l(v){s.push(0,0,0),r.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(s.length/3-1)}t.setAttribute("position",new nt(s,3)),t.setAttribute("color",new nt(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new He(16755200),f=new He(16711680),d=new He(43775),p=new He(16777215),g=new He(3355443);this.setColors(h,f,d,p,g)}setColors(e,t,i,s,r){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,s.r,s.g,s.b),a.setXYZ(39,s.r,s.g,s.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;Bn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Un("c",t,e,Bn,0,0,-1),Un("t",t,e,Bn,0,0,1),Un("n1",t,e,Bn,-i,-s,-1),Un("n2",t,e,Bn,i,-s,-1),Un("n3",t,e,Bn,-i,s,-1),Un("n4",t,e,Bn,i,s,-1),Un("f1",t,e,Bn,-i,-s,1),Un("f2",t,e,Bn,i,-s,1),Un("f3",t,e,Bn,-i,s,1),Un("f4",t,e,Bn,i,s,1),Un("u1",t,e,Bn,i*.7,s*1.1,-1),Un("u2",t,e,Bn,-i*.7,s*1.1,-1),Un("u3",t,e,Bn,0,s*2,-1),Un("cf1",t,e,Bn,-i,0,1),Un("cf2",t,e,Bn,i,0,1),Un("cf3",t,e,Bn,0,-s,1),Un("cf4",t,e,Bn,0,s,1),Un("cn1",t,e,Bn,-i,0,-1),Un("cn2",t,e,Bn,i,0,-1),Un("cn3",t,e,Bn,0,-s,-1),Un("cn4",t,e,Bn,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Un(n,e,t,i,s,r,o){Ey.set(s,r,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let h=0,f=a.length;h<f;h++)l.setXYZ(a[h],Ey.x,Ey.y,Ey.z)}}const wy=new Oi;class _q extends Hr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new Mt;r.setIndex(new kt(i,1)),r.setAttribute("position",new kt(s,3)),super(r,new ki({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&wy.setFromObject(this.object),wy.isEmpty())return;const t=wy.min,i=wy.max,s=this.geometry.attributes.position,r=s.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Aq extends Hr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Mt;r.setIndex(new kt(i,1)),r.setAttribute("position",new nt(s,3)),super(r,new ki({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sq extends ra{constructor(e,t=1,i=16776960){const s=i,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mt;o.setAttribute("position",new nt(r,3)),o.computeBoundingSphere(),super(o,new ki({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Mt;l.setAttribute("position",new nt(a,3)),l.computeBoundingSphere(),this.add(new Hn(l,new Ls({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const zP=new U;let Cy,hS;class Mq extends zt{constructor(e=new U(0,0,1),t=new U(0,0,0),i=1,s=16776960,r=i*.2,o=r*.2){super(),this.type="ArrowHelper",Cy===void 0&&(Cy=new Mt,Cy.setAttribute("position",new nt([0,0,0,0,1,0],3)),hS=new Hf(0,.5,1,5,1),hS.translate(0,-.5,0)),this.position.copy(t),this.line=new ra(Cy,new ki({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Hn(hS,new Ls({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{zP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(zP,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class bq extends Hr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Mt;s.setAttribute("position",new nt(t,3)),s.setAttribute("color",new nt(i,3));const r=new ki({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,i){const s=new He,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(i),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Eq{constructor(){this.type="ShapePath",this.color=new He,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new qp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,r,o){return this.currentPath.bezierCurveTo(e,t,i,s,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const A=[];for(let M=0,E=y.length;M<E;M++){const R=y[M],T=new Jc;T.curves=R.curves,A.push(T)}return A}function i(y,A){const M=A.length;let E=!1;for(let R=M-1,T=0;T<M;R=T++){let B=A[R],L=A[T],F=L.x-B.x,C=L.y-B.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(B=A[T],F=-F,L=A[R],C=-C),y.y<B.y||y.y>L.y)continue;if(y.y===B.y){if(y.x===B.x)return!0}else{const D=C*(y.x-B.x)-F*(y.y-B.y);if(D===0)return!0;if(D<0)continue;E=!E}}else{if(y.y!==B.y)continue;if(L.x<=y.x&&y.x<=B.x||B.x<=y.x&&y.x<=L.x)return!0}}return E}const s=fo.isClockWise,r=this.subPaths;if(r.length===0)return[];let o,a,l;const h=[];if(r.length===1)return a=r[0],l=new Jc,l.curves=a.curves,h.push(l),h;let f=!s(r[0].getPoints());f=e?!f:f;const d=[],p=[];let g=[],v=0,S;p[v]=void 0,g[v]=[];for(let y=0,A=r.length;y<A;y++)a=r[y],S=a.getPoints(),o=s(S),o=e?!o:o,o?(!f&&p[v]&&v++,p[v]={s:new Jc,p:S},p[v].s.curves=a.curves,f&&v++,g[v]=[]):g[v].push({h:a,p:S[0]});if(!p[0])return t(r);if(p.length>1){let y=!1,A=0;for(let M=0,E=p.length;M<E;M++)d[M]=[];for(let M=0,E=p.length;M<E;M++){const R=g[M];for(let T=0;T<R.length;T++){const B=R[T];let L=!0;for(let F=0;F<p.length;F++)i(B.p,p[F].p)&&(M!==F&&A++,L?(L=!1,d[F].push(B)):y=!0);L&&d[M].push(B)}}A>0&&y===!1&&(g=d)}let _;for(let y=0,A=p.length;y<A;y++){l=p[y].s,h.push(l),_=g[y];for(let M=0,E=_.length;M<E;M++)l.holes.push(_[M].h)}return h}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:dm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=dm);const wq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:D1,AddEquation:ka,AddOperation:BN,AdditiveAnimationBlendMode:k1,AdditiveBlending:ib,AgXToneMapping:IN,AlphaFormat:zN,AlwaysCompare:sU,AlwaysDepth:MN,AlwaysStencilFunc:Ob,AmbientLight:ZU,AnimationAction:aF,AnimationClip:Tf,AnimationLoader:BK,AnimationMixer:iq,AnimationObjectGroup:tq,AnimationUtils:wK,ArcCurve:CU,ArrayCamera:AU,ArrowHelper:Mq,AttachedBindMode:lb,Audio:rF,AudioAnalyser:jK,AudioContext:_w,AudioListener:GK,AudioLoader:zK,AxesHelper:bq,BackSide:es,BasicDepthPacking:KN,BasicShadowMap:rN,BatchedMesh:wU,Bone:Q0,BooleanKeyframeTrack:yu,Box2:cq,Box3:Oi,Box3Helper:Aq,BoxGeometry:gu,BoxHelper:_q,BufferAttribute:kt,BufferGeometry:Mt,BufferGeometryLoader:iF,ByteType:UN,Cache:Xo,Camera:J0,CameraHelper:xq,CanvasTexture:qY,CapsuleGeometry:tx,CatmullRomCurve3:TU,CineonToneMapping:LN,CircleGeometry:nx,ClampToEdgeWrapping:mi,Clock:Aw,Color:He,ColorKeyframeTrack:pw,ColorManagement:Xt,CompressedArrayTexture:YY,CompressedCubeTexture:KY,CompressedTexture:$0,CompressedTextureLoader:PK,ConeGeometry:ix,ConstantAlphaFactor:_N,ConstantColorFactor:vN,CubeCamera:fU,CubeReflectionMapping:sa,CubeRefractionMapping:dl,CubeTexture:ym,CubeTextureLoader:DK,CubeUVReflectionMapping:Ff,CubicBezierCurve:aw,CubicBezierCurve3:RU,CubicInterpolant:JU,CullFaceBack:nb,CullFaceFront:sN,CullFaceFrontBack:z6,CullFaceNone:iN,Curve:Gr,CurvePath:PU,CustomBlending:oN,CustomToneMapping:ON,CylinderGeometry:Hf,Cylindrical:lq,Data3DTexture:X1,DataArrayTexture:X0,DataTexture:Xc,DataTextureLoader:LK,DataUtils:WW,DecrementStencilOp:J6,DecrementWrapStencilOp:K6,DefaultLoadingManager:Wh,DepthFormat:sl,DepthStencilFormat:eu,DepthTexture:q1,DetachedBindMode:NN,DirectionalLight:xw,DirectionalLightHelper:vq,DiscreteInterpolant:YU,DisplayP3ColorSpace:j0,DodecahedronGeometry:sx,DoubleSide:rr,DstAlphaFactor:dN,DstColorFactor:mN,DynamicCopyUsage:uW,DynamicDrawUsage:sW,DynamicReadUsage:aW,EdgesGeometry:DU,EllipseCurve:ex,EqualCompare:eU,EqualDepth:EN,EqualStencilFunc:$6,EquirectangularReflectionMapping:kp,EquirectangularRefractionMapping:Hp,Euler:gm,EventDispatcher:la,ExtrudeGeometry:ox,FileLoader:zs,Float16BufferAttribute:qW,Float32BufferAttribute:nt,Float64BufferAttribute:QW,FloatType:or,Fog:q0,FogExp2:K0,FramebufferTexture:JY,FrontSide:go,Frustum:vm,GLBufferAttribute:aq,GLSL1:fW,GLSL3:Ib,GreaterCompare:tU,GreaterDepth:CN,GreaterEqualCompare:iU,GreaterEqualDepth:wN,GreaterEqualStencilFunc:iW,GreaterStencilFunc:tW,GridHelper:gq,Group:jo,HalfFloatType:Mf,HemisphereLight:QU,HemisphereLightHelper:mq,IcosahedronGeometry:ax,ImageBitmapLoader:sF,ImageLoader:em,ImageUtils:j1,IncrementStencilOp:X6,IncrementWrapStencilOp:Y6,InstancedBufferAttribute:nu,InstancedBufferGeometry:nF,InstancedInterleavedBuffer:oq,InstancedMesh:iw,Int16BufferAttribute:YW,Int32BufferAttribute:KW,Int8BufferAttribute:jW,IntType:L1,InterleavedBuffer:xm,InterleavedBufferAttribute:ml,Interpolant:Gf,InterpolateDiscrete:bf,InterpolateLinear:tu,InterpolateSmooth:cv,InvertStencilOp:q6,KeepStencilOp:Ac,KeyframeTrack:Vr,LOD:EU,LatheGeometry:Am,Layers:wf,LessCompare:$N,LessDepth:bN,LessEqualCompare:V1,LessEqualDepth:zp,LessEqualStencilFunc:eW,LessStencilFunc:Z6,Light:Tl,LightProbe:tF,Line:ra,Line3:uq,LineBasicMaterial:ki,LineCurve:lw,LineCurve3:BU,LineDashedMaterial:WU,LineLoop:sw,LineSegments:Hr,LinearDisplayP3ColorSpace:mm,LinearEncoding:G1,LinearFilter:un,LinearInterpolant:dw,LinearMipMapLinearFilter:V6,LinearMipMapNearestFilter:G6,LinearMipmapLinearFilter:lr,LinearMipmapNearestFilter:nf,LinearSRGBColorSpace:Ur,LinearToneMapping:PN,LinearTransfer:Wp,Loader:Hi,LoaderUtils:ol,LoadingManager:mw,LoopOnce:jN,LoopPingPong:JN,LoopRepeat:XN,LuminanceAlphaFormat:HN,LuminanceFormat:kN,MOUSE:xc,Material:Qn,MaterialLoader:px,MathUtils:rU,Matrix3:wt,Matrix4:ut,MaxEquation:ab,Mesh:Hn,MeshBasicMaterial:Ls,MeshDepthMaterial:Q1,MeshDistanceMaterial:Z1,MeshLambertMaterial:GU,MeshMatcapMaterial:VU,MeshNormalMaterial:HU,MeshPhongMaterial:zU,MeshPhysicalMaterial:dr,MeshStandardMaterial:bm,MeshToonMaterial:kU,MinEquation:ob,MirroredRepeatWrapping:Sf,MixOperation:RN,MultiplyBlending:rb,MultiplyOperation:pm,NearestFilter:Ln,NearestMipMapLinearFilter:H6,NearestMipMapNearestFilter:k6,NearestMipmapLinearFilter:Ha,NearestMipmapNearestFilter:Gp,NeverCompare:ZN,NeverDepth:SN,NeverStencilFunc:Q6,NoBlending:Qo,NoColorSpace:Bs,NoToneMapping:uo,NormalAnimationBlendMode:W0,NormalBlending:Vc,NotEqualCompare:nU,NotEqualDepth:TN,NotEqualStencilFunc:nW,NumberKeyframeTrack:su,Object3D:zt,ObjectLoader:UK,ObjectSpaceNormalMap:QN,OctahedronGeometry:Sm,OneFactor:uN,OneMinusConstantAlphaFactor:AN,OneMinusConstantColorFactor:xN,OneMinusDstAlphaFactor:pN,OneMinusDstColorFactor:gN,OneMinusSrcAlphaFactor:qv,OneMinusSrcColorFactor:fN,OrthographicCamera:Or,P3Primaries:Xp,PCFShadowMap:H0,PCFSoftShadowMap:hp,PMREMGenerator:Ub,Path:qp,PerspectiveCamera:vn,Plane:zo,PlaneGeometry:zf,PlaneHelper:Sq,PointLight:vw,PointLightHelper:dq,Points:rw,PointsMaterial:Z0,PolarGridHelper:yq,PolyhedronGeometry:Cl,PositionalAudio:WK,PropertyBinding:Ft,PropertyMixer:oF,QuadraticBezierCurve:cw,QuadraticBezierCurve3:uw,Quaternion:li,QuaternionKeyframeTrack:gl,QuaternionLinearInterpolant:KU,RED_GREEN_RGTC2_Format:Db,RED_RGTC1_Format:WN,REVISION:dm,RGBADepthPacking:qN,RGBAFormat:qi,RGBAIntegerFormat:F1,RGBA_ASTC_10x10_Format:wb,RGBA_ASTC_10x5_Format:Mb,RGBA_ASTC_10x6_Format:bb,RGBA_ASTC_10x8_Format:Eb,RGBA_ASTC_12x10_Format:Cb,RGBA_ASTC_12x12_Format:Tb,RGBA_ASTC_4x4_Format:mb,RGBA_ASTC_5x4_Format:gb,RGBA_ASTC_5x5_Format:yb,RGBA_ASTC_6x5_Format:vb,RGBA_ASTC_6x6_Format:xb,RGBA_ASTC_8x5_Format:_b,RGBA_ASTC_8x6_Format:Ab,RGBA_ASTC_8x8_Format:Sb,RGBA_BPTC_Format:lv,RGBA_ETC2_EAC_Format:pb,RGBA_PVRTC_2BPPV1_Format:fb,RGBA_PVRTC_4BPPV1_Format:hb,RGBA_S3TC_DXT1_Format:rv,RGBA_S3TC_DXT3_Format:ov,RGBA_S3TC_DXT5_Format:av,RGB_BPTC_SIGNED_Format:Rb,RGB_BPTC_UNSIGNED_Format:Bb,RGB_ETC1_Format:z1,RGB_ETC2_Format:db,RGB_PVRTC_2BPPV1_Format:ub,RGB_PVRTC_4BPPV1_Format:cb,RGB_S3TC_DXT1_Format:sv,RGFormat:VN,RGIntegerFormat:U1,RawShaderMaterial:FU,Ray:mu,Raycaster:lF,Rec709Primaries:jp,RectAreaLight:$U,RedFormat:GN,RedIntegerFormat:N1,ReinhardToneMapping:DN,RenderTarget:lU,RepeatWrapping:pl,ReplaceStencilOp:j6,ReverseSubtractEquation:lN,RingGeometry:lx,SIGNED_RED_GREEN_RGTC2_Format:Lb,SIGNED_RED_RGTC1_Format:Pb,SRGBColorSpace:Fn,SRGBTransfer:nn,Scene:ew,ShaderChunk:Et,ShaderLib:Br,ShaderMaterial:zr,ShadowMaterial:UU,Shape:Jc,ShapeGeometry:cx,ShapePath:Eq,ShapeUtils:fo,ShortType:FN,Skeleton:_m,SkeletonHelper:fq,SkinnedMesh:nw,Source:Lc,Sphere:vi,SphereGeometry:Mm,Spherical:Wb,SphericalHarmonics3:eF,SplineCurve:hw,SpotLight:yw,SpotLightHelper:hq,Sprite:bU,SpriteMaterial:tw,SrcAlphaFactor:Kv,SrcAlphaSaturateFactor:yN,SrcColorFactor:hN,StaticCopyUsage:cW,StaticDrawUsage:Jp,StaticReadUsage:oW,StereoCamera:kK,StreamCopyUsage:hW,StreamDrawUsage:rW,StreamReadUsage:lW,StringKeyframeTrack:vu,SubtractEquation:aN,SubtractiveBlending:sb,TOUCH:_c,TangentSpaceNormalMap:wl,TetrahedronGeometry:ux,Texture:xn,TextureLoader:qU,TorusGeometry:hx,TorusKnotGeometry:fx,Triangle:Ps,TriangleFanDrawMode:Qv,TriangleStripDrawMode:H1,TrianglesDrawMode:YN,TubeGeometry:dx,UVMapping:G0,Uint16BufferAttribute:J1,Uint32BufferAttribute:Y1,Uint8BufferAttribute:XW,Uint8ClampedBufferAttribute:JW,Uniform:bw,UniformsGroup:rq,UniformsLib:Ie,UniformsUtils:hU,UnsignedByteType:ho,UnsignedInt248Type:il,UnsignedIntType:Wo,UnsignedShort4444Type:O1,UnsignedShort5551Type:I1,UnsignedShortType:V0,VSMShadowMap:wr,Vector2:pe,Vector3:U,Vector4:Yt,VectorKeyframeTrack:ru,VideoTexture:XY,WebGL1Renderer:SU,WebGL3DRenderTarget:DW,WebGLArrayRenderTarget:PW,WebGLCoordinateSystem:so,WebGLCubeRenderTarget:dU,WebGLMultipleRenderTargets:LW,WebGLRenderTarget:Fr,WebGLRenderer:$1,WebGLUtils:_U,WebGPUCoordinateSystem:Yp,WireframeGeometry:NU,WrapAroundEnding:Vp,ZeroCurvatureEnding:Pc,ZeroFactor:cN,ZeroSlopeEnding:Dc,ZeroStencilOp:W6,_SRGBAFormat:Zv,createCanvasElement:aU,sRGBEncoding:rl},Symbol.toStringTag,{value:"Module"}));var uF={exports:{}},hF={},fF={exports:{}},dF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf=fe;function Cq(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Tq=typeof Object.is=="function"?Object.is:Cq,Rq=Rf.useState,Bq=Rf.useEffect,Pq=Rf.useLayoutEffect,Dq=Rf.useDebugValue;function Lq(n,e){var t=e(),i=Rq({inst:{value:t,getSnapshot:e}}),s=i[0].inst,r=i[1];return Pq(function(){s.value=t,s.getSnapshot=e,fS(s)&&r({inst:s})},[n,t,e]),Bq(function(){return fS(s)&&r({inst:s}),n(function(){fS(s)&&r({inst:s})})},[n]),Dq(t),t}function fS(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Tq(n,t)}catch{return!0}}function Oq(n,e){return e()}var Iq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Oq:Lq;dF.useSyncExternalStore=Rf.useSyncExternalStore!==void 0?Rf.useSyncExternalStore:Iq;fF.exports=dF;var Nq=fF.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx=fe,Uq=Nq;function Fq(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var zq=typeof Object.is=="function"?Object.is:Fq,kq=Uq.useSyncExternalStore,Hq=mx.useRef,Gq=mx.useEffect,Vq=mx.useMemo,Wq=mx.useDebugValue;hF.useSyncExternalStoreWithSelector=function(n,e,t,i,s){var r=Hq(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=Vq(function(){function l(g){if(!h){if(h=!0,f=g,g=i(g),s!==void 0&&o.hasValue){var v=o.value;if(s(v,g))return d=v}return d=g}if(v=d,zq(f,g))return v;var S=i(g);return s!==void 0&&s(v,S)?(f=g,v):(f=g,d=S)}var h=!1,f,d,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,i,s]);var a=kq(n,r[0],r[1]);return Gq(function(){o.hasValue=!0,o.value=a},[a]),Wq(a),a};uF.exports=hF;var jq=uF.exports;const Xq=gE(jq),kP=n=>{let e;const t=new Set,i=(h,f)=>{const d=typeof h=="function"?h(e):h;if(!Object.is(d,e)){const p=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(g=>g(e,p))}},s=()=>e,a={setState:i,getState:s,getInitialState:()=>l,subscribe:h=>(t.add(h),()=>t.delete(h))},l=e=n(i,s,a);return a},pF=n=>n?kP(n):kP,{useSyncExternalStoreWithSelector:Jq}=Xq,Yq=n=>n;function Kq(n,e=Yq,t){const i=Jq(n.subscribe,n.getState,n.getInitialState,e,t);return io.useDebugValue(i),i}const HP=(n,e)=>{const t=pF(n),i=(s,r=e)=>Kq(t,s,r);return Object.assign(i,t),i},qq=(n,e)=>n?HP(n,e):HP,Qq=n=>typeof n=="object"&&typeof n.then=="function",Ic=[];function mF(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function gF(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const r of Ic)if(mF(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return i.lifespan&&i.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,i.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:i.equal,remove:()=>{const r=Ic.indexOf(s);r!==-1&&Ic.splice(r,1)},promise:(Qq(n)?n:n(...e)).then(r=>{s.response=r,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(r=>s.error=r)};if(Ic.push(s),!t)throw s.promise}const Zq=(n,e,t)=>gF(n,e,!1,t),$q=(n,e,t)=>void gF(n,e,!0,t),eQ=n=>{if(n===void 0||n.length===0)Ic.splice(0,Ic.length);else{const e=Ic.find(t=>mF(n,t.keys,t.equal));e&&e.remove()}};var yF={exports:{}},vF={exports:{}},xF={exports:{}},_F={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,Y){var V=H.length;H.push(Y);e:for(;0<V;){var X=V-1>>>1,J=H[X];if(0<s(J,Y))H[X]=Y,H[V]=J,V=X;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var Y=H[0],V=H.pop();if(V!==Y){H[0]=V;e:for(var X=0,J=H.length,K=J>>>1;X<K;){var ae=2*(X+1)-1,Be=H[ae],Q=ae+1,de=H[Q];if(0>s(Be,V))Q<J&&0>s(de,Be)?(H[X]=de,H[Q]=V,X=Q):(H[X]=Be,H[ae]=V,X=ae);else if(Q<J&&0>s(de,V))H[X]=de,H[Q]=V,X=Q;else break e}}return Y}function s(H,Y){var V=H.sortIndex-Y.sortIndex;return V!==0?V:H.id-Y.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],h=[],f=1,d=null,p=3,g=!1,v=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function M(H){for(var Y=t(h);Y!==null;){if(Y.callback===null)i(h);else if(Y.startTime<=H)i(h),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(h)}}function E(H){if(S=!1,M(H),!v)if(t(l)!==null)v=!0,k();else{var Y=t(h);Y!==null&&q(E,Y.startTime-H)}}var R=!1,T=-1,B=5,L=-1;function F(){return!(n.unstable_now()-L<B)}function C(){if(R){var H=n.unstable_now();L=H;var Y=!0;try{e:{v=!1,S&&(S=!1,y(T),T=-1),g=!0;var V=p;try{t:{for(M(H),d=t(l);d!==null&&!(d.expirationTime>H&&F());){var X=d.callback;if(typeof X=="function"){d.callback=null,p=d.priorityLevel;var J=X(d.expirationTime<=H);if(H=n.unstable_now(),typeof J=="function"){d.callback=J,M(H),Y=!0;break t}d===t(l)&&i(l),M(H)}else i(l);d=t(l)}if(d!==null)Y=!0;else{var K=t(h);K!==null&&q(E,K.startTime-H),Y=!1}}break e}finally{d=null,p=V,g=!1}Y=void 0}}finally{Y?D():R=!1}}}var D;if(typeof A=="function")D=function(){A(C)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,$=te.port2;te.port1.onmessage=C,D=function(){$.postMessage(null)}}else D=function(){_(C,0)};function k(){R||(R=!0,D())}function q(H,Y){T=_(function(){H(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,k())},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var V=p;p=Y;try{return H()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=p;p=H;try{return Y()}finally{p=V}},n.unstable_scheduleCallback=function(H,Y,V){var X=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,H){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,H={id:f++,callback:Y,priorityLevel:H,startTime:V,expirationTime:J,sortIndex:-1},V>X?(H.sortIndex=V,e(h,H),t(l)===null&&H===t(h)&&(S?(y(T),T=-1):S=!0,q(E,V-X))):(H.sortIndex=J,e(l,H),v||g||(v=!0,k())),H},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(H){var Y=p;return function(){var V=p;p=Y;try{return H.apply(this,arguments)}finally{p=V}}}})(_F);xF.exports=_F;var jb=xF.exports;/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){n.exports=function(e){function t(c,u,m,x){return new ck(c,u,m,x)}function i(){}function s(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return c===null||typeof c!="object"?null:(c=yT&&c[yT]||c["@@iterator"],typeof c=="function"?c:null)}function o(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===mk?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case Bu:return"Fragment";case Ru:return"Portal";case f_:return"Profiler";case pT:return"StrictMode";case p_:return"Suspense";case m_:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case pa:return(c.displayName||"Context")+".Provider";case mT:return(c._context.displayName||"Context")+".Consumer";case d_:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case g_:return u=c.displayName||null,u!==null?u:o(c.type)||"Memo";case ma:u=c._payload,c=c._init;try{return o(c(u))}catch{}}return null}function a(c){if(y_===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);y_=u&&u[1]||"",vT=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+y_+c+vT}function l(c,u){if(!c||v_)return"";v_=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(u){var Ve=function(){throw Error()};if(Object.defineProperty(Ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ve,[])}catch(At){var Ke=At}Reflect.construct(c,[],Ve)}else{try{Ve.call()}catch(At){Ke=At}c.call(Ve.prototype)}}else{try{throw Error()}catch(At){Ke=At}(Ve=c())&&typeof Ve.catch=="function"&&Ve.catch(function(){})}}catch(At){if(At&&Ke&&typeof At.stack=="string")return[At.stack,Ke.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=x.DetermineComponentFrameRoot(),O=w[0],W=w[1];if(O&&W){var ne=O.split(`
`),ge=W.split(`
`);for(b=x=0;x<ne.length&&!ne[x].includes("DetermineComponentFrameRoot");)x++;for(;b<ge.length&&!ge[b].includes("DetermineComponentFrameRoot");)b++;if(x===ne.length||b===ge.length)for(x=ne.length-1,b=ge.length-1;1<=x&&0<=b&&ne[x]!==ge[b];)b--;for(;1<=x&&0<=b;x--,b--)if(ne[x]!==ge[b]){if(x!==1||b!==1)do if(x--,b--,0>b||ne[x]!==ge[b]){var Pe=`
`+ne[x].replace(" at new "," at ");return c.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",c.displayName)),Pe}while(1<=x&&0<=b);break}}}finally{v_=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?a(m):""}function h(c){switch(c.tag){case 26:case 27:case 5:return a(c.type);case 16:return a("Lazy");case 13:return a("Suspense");case 19:return a("SuspenseList");case 0:case 15:return c=l(c.type,!1),c;case 11:return c=l(c.type.render,!1),c;case 1:return c=l(c.type,!0),c;default:return""}}function f(c){try{var u="";do u+=h(c),c=c.return;while(c);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function d(c){var u=c,m=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,u.flags&4098&&(m=u.return),c=u.return;while(c)}return u.tag===3?m:null}function p(c){if(d(c)!==c)throw Error(s(188))}function g(c){var u=c.alternate;if(!u){if(u=d(c),u===null)throw Error(s(188));return u!==c?null:c}for(var m=c,x=u;;){var b=m.return;if(b===null)break;var w=b.alternate;if(w===null){if(x=b.return,x!==null){m=x;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===m)return p(b),c;if(w===x)return p(b),u;w=w.sibling}throw Error(s(188))}if(m.return!==x.return)m=b,x=w;else{for(var O=!1,W=b.child;W;){if(W===m){O=!0,m=b,x=w;break}if(W===x){O=!0,x=b,m=w;break}W=W.sibling}if(!O){for(W=w.child;W;){if(W===m){O=!0,m=w,x=b;break}if(W===x){O=!0,x=w,m=b;break}W=W.sibling}if(!O)throw Error(s(189))}}if(m.alternate!==x)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?c:u}function v(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(u=v(c),u!==null)return u;c=c.sibling}return null}function S(c){var u=c.tag;if(u===5||u===26||u===27||u===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(u=S(c),u!==null))return u;c=c.sibling}return null}function _(c){return{current:c}}function y(c){0>Du||(c.current=b_[Du],b_[Du]=null,Du--)}function A(c,u){Du++,b_[Du]=c.current,c.current=u}function M(c){return c>>>=0,c===0?32:31-(BH(c)/PH|0)|0}function E(c){var u=c&42;if(u!==0)return u;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function R(c,u){var m=c.pendingLanes;if(m===0)return 0;var x=0,b=c.suspendedLanes,w=c.pingedLanes,O=c.warmLanes;c=c.finishedLanes!==0;var W=m&134217727;return W!==0?(m=W&~b,m!==0?x=E(m):(w&=W,w!==0?x=E(w):c||(O=W&~O,O!==0&&(x=E(O))))):(W=m&~b,W!==0?x=E(W):w!==0?x=E(w):c||(O=m&~O,O!==0&&(x=E(O)))),x===0?0:u!==0&&u!==x&&!(u&b)&&(b=x&-x,O=u&-u,b>=O||b===32&&(O&4194176)!==0)?u:x}function T(c,u){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&u)===0}function B(c,u){switch(c){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L(){var c=qm;return qm<<=1,!(qm&4194176)&&(qm=128),c}function F(){var c=Qm;return Qm<<=1,!(Qm&62914560)&&(Qm=4194304),c}function C(c){for(var u=[],m=0;31>m;m++)u.push(c);return u}function D(c,u){c.pendingLanes|=u,u!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function te(c,u,m,x,b,w){var O=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var W=c.entanglements,ne=c.expirationTimes,ge=c.hiddenUpdates;for(m=O&~m;0<m;){var Pe=31-Ss(m),Ve=1<<Pe;W[Pe]=0,ne[Pe]=-1;var Ke=ge[Pe];if(Ke!==null)for(ge[Pe]=null,Pe=0;Pe<Ke.length;Pe++){var At=Ke[Pe];At!==null&&(At.lane&=-536870913)}m&=~Ve}x!==0&&$(c,x,0),w!==0&&b===0&&c.tag!==0&&(c.suspendedLanes|=w&~(O&~u))}function $(c,u,m){c.pendingLanes|=u,c.suspendedLanes&=~u;var x=31-Ss(u);c.entangledLanes|=u,c.entanglements[x]=c.entanglements[x]|1073741824|m&4194218}function k(c,u){var m=c.entangledLanes|=u;for(c=c.entanglements;m;){var x=31-Ss(m),b=1<<x;b&u|c[x]&u&&(c[x]|=u),m&=~b}}function q(c){return c&=-c,2<c?8<c?c&134217727?32:268435456:8:2}function H(c){if(Ms&&typeof Ms.onCommitFiberRoot=="function")try{Ms.onCommitFiberRoot(od,c,void 0,(c.current.flags&128)===128)}catch{}}function Y(c){if(typeof NH=="function"&&UH(c),Ms&&typeof Ms.setStrictMode=="function")try{Ms.setStrictMode(od,c)}catch{}}function V(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}function X(c,u){if(typeof c=="object"&&c!==null){var m=WT.get(c);return m!==void 0?m:(u={value:c,source:u,stack:f(u)},WT.set(c,u),u)}return{value:c,source:u,stack:f(u)}}function J(c,u){Ou[Iu++]=eg,Ou[Iu++]=$m,$m=c,eg=u}function K(c,u,m){js[Xs++]=Mo,js[Xs++]=bo,js[Xs++]=Gl,Gl=c;var x=Mo;c=bo;var b=32-Ss(x)-1;x&=~(1<<b),m+=1;var w=32-Ss(u)+b;if(30<w){var O=b-b%5;w=(x&(1<<O)-1).toString(32),x>>=O,b-=O,Mo=1<<32-Ss(u)+b|m<<b|x,bo=w+c}else Mo=1<<w|m<<b|x,bo=c}function ae(c){c.return!==null&&(J(c,1),K(c,1,0))}function Be(c){for(;c===$m;)$m=Ou[--Iu],Ou[Iu]=null,eg=Ou[--Iu],Ou[Iu]=null;for(;c===Gl;)Gl=js[--Xs],js[Xs]=null,bo=js[--Xs],js[Xs]=null,Mo=js[--Xs],js[Xs]=null}function Q(c,u){A(ya,u),A(ad,c),A(fi,null),c=vk(u),y(fi),A(fi,c)}function de(){y(fi),y(ad),y(ya)}function Ce(c){c.memoizedState!==null&&A(tg,c);var u=fi.current,m=xk(u,c.type);u!==m&&(A(ad,c),A(fi,m))}function ze(c){ad.current===c&&(y(fi),y(ad)),tg.current===c&&(y(tg),So?Hl._currentValue=Pu:Hl._currentValue2=Pu)}function We(c){var u=Error(s(418,""));throw Ae(X(u,c)),C_}function Xe(c,u){if(!Vs)throw Error(s(175));fH(c.stateNode,c.type,c.memoizedProps,u,c)||We(c)}function Ze(c){for(Wi=c.return;Wi;)switch(Wi.tag){case 3:case 27:Yr=!0;return;case 5:case 13:Yr=!1;return;default:Wi=Wi.return}}function Ee(c){if(!Vs||c!==Wi)return!1;if(!Gt)return Ze(c),Gt=!0,!1;var u=!1;if(Mi?c.tag!==3&&c.tag!==27&&(c.tag!==5||LT(c.type)&&!Km(c.type,c.memoizedProps))&&(u=!0):c.tag!==3&&(c.tag!==5||LT(c.type)&&!Km(c.type,c.memoizedProps))&&(u=!0),u&&bi&&We(c),Ze(c),c.tag===13){if(!Vs)throw Error(s(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));bi=mH(c)}else bi=Wi?PT(c.stateNode):null;return!0}function G(){Vs&&(bi=Wi=null,Gt=!1)}function Ae(c){vr===null?vr=[c]:vr.push(c)}function he(){for(var c=Nu,u=T_=Nu=0;u<c;){var m=Js[u];Js[u++]=null;var x=Js[u];Js[u++]=null;var b=Js[u];Js[u++]=null;var w=Js[u];if(Js[u++]=null,x!==null&&b!==null){var O=x.pending;O===null?b.next=b:(b.next=O.next,O.next=b),x.pending=b}w!==0&&Ne(m,b,w)}}function Me(c,u,m,x){Js[Nu++]=c,Js[Nu++]=u,Js[Nu++]=m,Js[Nu++]=x,T_|=x,c.lanes|=x,c=c.alternate,c!==null&&(c.lanes|=x)}function me(c,u,m,x){return Me(c,u,m,x),I(c)}function Ge(c,u){return Me(c,null,null,u),I(c)}function Ne(c,u,m){c.lanes|=m;var x=c.alternate;x!==null&&(x.lanes|=m);for(var b=!1,w=c.return;w!==null;)w.childLanes|=m,x=w.alternate,x!==null&&(x.childLanes|=m),w.tag===22&&(c=w.stateNode,c===null||c._visibility&1||(b=!0)),c=w,w=w.return;b&&u!==null&&c.tag===3&&(w=c.stateNode,b=31-Ss(m),w=w.hiddenUpdates,c=w[b],c===null?w[b]=[u]:c.push(u),u.lane=m|536870912)}function I(c){if(50<gd)throw gd=0,W_=null,Error(s(185));for(var u=c.return;u!==null;)c=u,u=c.return;return c.tag===3?c.stateNode:null}function P(c){c!==Uu&&c.next===null&&(Uu===null?ng=Uu=c:Uu=Uu.next=c),ig=!0,R_||(R_=!0,Oe(_e))}function ee(c,u){if(!B_&&ig){B_=!0;do for(var m=!1,x=ng;x!==null;){if(c!==0){var b=x.pendingLanes;if(b===0)var w=0;else{var O=x.suspendedLanes,W=x.pingedLanes;w=(1<<31-Ss(42|c)+1)-1,w&=b&~(O&~W),w=w&201326677?w&201326677|1:w?w|2:0}w!==0&&(m=!0,qe(x,w))}else w=Ut,w=R(x,x===en?w:0),!(w&3)||T(x,w)||(m=!0,qe(x,w));x=x.next}while(m);B_=!1}}function _e(){ig=R_=!1;var c=0;Fu!==0&&(Ck()&&(c=Fu),Fu=0);for(var u=yr(),m=null,x=ng;x!==null;){var b=x.next,w=xe(x,u);w===0?(x.next=null,m===null?ng=b:m.next=b,b===null&&(Uu=m)):(m=x,(c!==0||w&3)&&(ig=!0)),x=b}ee(c)}function xe(c,u){for(var m=c.suspendedLanes,x=c.pingedLanes,b=c.expirationTimes,w=c.pendingLanes&-62914561;0<w;){var O=31-Ss(w),W=1<<O,ne=b[O];ne===-1?(!(W&m)||W&x)&&(b[O]=B(W,u)):ne<=u&&(c.expiredLanes|=W),w&=~W}if(u=en,m=Ut,m=R(c,c===u?m:0),x=c.callbackNode,m===0||c===u&&tn===2||c.cancelPendingCommit!==null)return x!==null&&x!==null&&E_(x),c.callbackNode=null,c.callbackPriority=0;if(!(m&3)||T(c,m)){if(u=m&-m,u===c.callbackPriority)return u;switch(x!==null&&E_(x),q(m)){case 2:case 8:m=OH;break;case 32:m=w_;break;case 268435456:m=IH;break;default:m=w_}return x=ve.bind(null,c),m=Zm(m,x),c.callbackPriority=u,c.callbackNode=m,u}return x!==null&&x!==null&&E_(x),c.callbackPriority=2,c.callbackNode=null,2}function ve(c,u){var m=c.callbackNode;if(Fl()&&c.callbackNode!==m)return null;var x=Ut;return x=R(c,c===en?x:0),x===0?null:(JC(c,x,u),xe(c,yr()),c.callbackNode!=null&&c.callbackNode===m?ve.bind(null,c):null)}function qe(c,u){if(Fl())return null;JC(c,u,!0)}function Oe(c){Lk?Ok(function(){Zt&6?Zm(VT,c):c()}):Zm(VT,c)}function Ue(){return Fu===0&&(Fu=L()),Fu}function it(c,u){if(ld===null){var m=ld=[];P_=0,zu=Ue(),ku={status:"pending",value:void 0,then:function(x){m.push(x)}}}return P_++,u.then(mt,mt),u}function mt(){if(--P_===0&&ld!==null){ku!==null&&(ku.status="fulfilled");var c=ld;ld=null,zu=0,ku=null;for(var u=0;u<c.length;u++)(0,c[u])()}}function Se(c,u){var m=[],x={status:"pending",value:null,reason:null,then:function(b){m.push(b)}};return c.then(function(){x.status="fulfilled",x.value=u;for(var b=0;b<m.length;b++)(0,m[b])(u)},function(b){for(x.status="rejected",x.reason=b,b=0;b<m.length;b++)(0,m[b])(void 0)}),x}function Rt(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xt(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function rt(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function et(c,u,m){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,Zt&2){var b=x.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),x.pending=u,u=I(c),Ne(c,null,m),u}return Me(c,x,u,m),I(c)}function Je(c,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194176)!==0)){var x=u.lanes;x&=c.pendingLanes,m|=x,u.lanes=m,k(c,m)}}function j(c,u){var m=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var b=null,w=null;if(m=m.firstBaseUpdate,m!==null){do{var O={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};w===null?b=w=O:w=w.next=O,m=m.next}while(m!==null);w===null?b=w=u:w=w.next=u}else b=w=u;m={baseState:x.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:x.shared,callbacks:x.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=u:c.next=u,m.lastBaseUpdate=u}function ye(){if(D_){var c=ku;if(c!==null)throw c}}function Fe(c,u,m,x){D_=!1;var b=c.updateQueue;va=!1;var w=b.firstBaseUpdate,O=b.lastBaseUpdate,W=b.shared.pending;if(W!==null){b.shared.pending=null;var ne=W,ge=ne.next;ne.next=null,O===null?w=ge:O.next=ge,O=ne;var Pe=c.alternate;Pe!==null&&(Pe=Pe.updateQueue,W=Pe.lastBaseUpdate,W!==O&&(W===null?Pe.firstBaseUpdate=ge:W.next=ge,Pe.lastBaseUpdate=ne))}if(w!==null){var Ve=b.baseState;O=0,Pe=ge=ne=null,W=w;do{var Ke=W.lane&-536870913,At=Ke!==W.lane;if(At?(Ut&Ke)===Ke:(x&Ke)===Ke){Ke!==0&&Ke===zu&&(D_=!0),Pe!==null&&(Pe=Pe.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var qs=c,yd=W;Ke=u;var Ql=m;switch(yd.tag){case 1:if(qs=yd.payload,typeof qs=="function"){Ve=qs.call(Ql,Ve,Ke);break e}Ve=qs;break e;case 3:qs.flags=qs.flags&-65537|128;case 0:if(qs=yd.payload,Ke=typeof qs=="function"?qs.call(Ql,Ve,Ke):qs,Ke==null)break e;Ve=h_({},Ve,Ke);break e;case 2:va=!0}}Ke=W.callback,Ke!==null&&(c.flags|=64,At&&(c.flags|=8192),At=b.callbacks,At===null?b.callbacks=[Ke]:At.push(Ke))}else At={lane:Ke,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Pe===null?(ge=Pe=At,ne=Ve):Pe=Pe.next=At,O|=Ke;if(W=W.next,W===null){if(W=b.shared.pending,W===null)break;At=W,W=At.next,At.next=null,b.lastBaseUpdate=At,b.shared.pending=null}}while(!0);Pe===null&&(ne=Ve),b.baseState=ne,b.firstBaseUpdate=ge,b.lastBaseUpdate=Pe,w===null&&(b.shared.lanes=0),Aa|=O,c.lanes=O,c.memoizedState=Ve}}function Ye(c,u){if(typeof c!="function")throw Error(s(191,c));c.call(u)}function ft(c,u){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)Ye(m[c],u)}function z(c,u){if(bs(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var m=Object.keys(c),x=Object.keys(u);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var b=m[x];if(!FH.call(u,b)||!bs(c[b],u[b]))return!1}return!0}function be(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Re(){}function $e(c,u,m){switch(m=c[m],m===void 0?c.push(u):m!==u&&(u.then(Re,Re),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,c===cd?Error(s(483)):c;default:if(typeof u.status=="string")u.then(Re,Re);else{if(c=en,c!==null&&100<c.shellSuspendCounter)throw Error(s(482));c=u,c.status="pending",c.then(function(x){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=x}},function(x){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=x}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw c=u.reason,c===cd?Error(s(483)):c}throw Hu=u,cd}}function tt(){if(Hu===null)throw Error(s(459));var c=Hu;return Hu=null,c}function vt(c){var u=ud;return ud+=1,Gu===null&&(Gu=[]),$e(Gu,c,u)}function Bt(c,u){u=u.props.ref,c.ref=u!==void 0?u:null}function qt(c,u){throw u.$$typeof===fk?Error(s(525)):(c=Object.prototype.toString.call(u),Error(s(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c)))}function In(c){var u=c._init;return u(c._payload)}function Nt(c){function u(se,Z){if(c){var ce=se.deletions;ce===null?(se.deletions=[Z],se.flags|=16):ce.push(Z)}}function m(se,Z){if(!c)return null;for(;Z!==null;)u(se,Z),Z=Z.sibling;return null}function x(se){for(var Z=new Map;se!==null;)se.key!==null?Z.set(se.key,se):Z.set(se.index,se),se=se.sibling;return Z}function b(se,Z){return se=da(se,Z),se.index=0,se.sibling=null,se}function w(se,Z,ce){return se.index=ce,c?(ce=se.alternate,ce!==null?(ce=ce.index,ce<Z?(se.flags|=33554434,Z):ce):(se.flags|=33554434,Z)):(se.flags|=1048576,Z)}function O(se){return c&&se.alternate===null&&(se.flags|=33554434),se}function W(se,Z,ce,Te){return Z===null||Z.tag!==6?(Z=l_(ce,se.mode,Te),Z.return=se,Z):(Z=b(Z,ce),Z.return=se,Z)}function ne(se,Z,ce,Te){var st=ce.type;return st===Bu?Pe(se,Z,ce.props.children,Te,ce.key):Z!==null&&(Z.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===ma&&In(st)===Z.type)?(Z=b(Z,ce.props),Bt(Z,ce),Z.return=se,Z):(Z=Xm(ce.type,ce.key,ce.props,null,se.mode,Te),Bt(Z,ce),Z.return=se,Z)}function ge(se,Z,ce,Te){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ce.containerInfo||Z.stateNode.implementation!==ce.implementation?(Z=c_(ce,se.mode,Te),Z.return=se,Z):(Z=b(Z,ce.children||[]),Z.return=se,Z)}function Pe(se,Z,ce,Te,st){return Z===null||Z.tag!==7?(Z=zl(ce,se.mode,Te,st),Z.return=se,Z):(Z=b(Z,ce),Z.return=se,Z)}function Ve(se,Z,ce){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=l_(""+Z,se.mode,ce),Z.return=se,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Jm:return ce=Xm(Z.type,Z.key,Z.props,null,se.mode,ce),Bt(ce,Z),ce.return=se,ce;case Ru:return Z=c_(Z,se.mode,ce),Z.return=se,Z;case ma:var Te=Z._init;return Z=Te(Z._payload),Ve(se,Z,ce)}if(Ym(Z)||r(Z))return Z=zl(Z,se.mode,ce,null),Z.return=se,Z;if(typeof Z.then=="function")return Ve(se,vt(Z),ce);if(Z.$$typeof===pa)return Ve(se,km(se,Z),ce);qt(se,Z)}return null}function Ke(se,Z,ce,Te){var st=Z!==null?Z.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return st!==null?null:W(se,Z,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Jm:return ce.key===st?ne(se,Z,ce,Te):null;case Ru:return ce.key===st?ge(se,Z,ce,Te):null;case ma:return st=ce._init,ce=st(ce._payload),Ke(se,Z,ce,Te)}if(Ym(ce)||r(ce))return st!==null?null:Pe(se,Z,ce,Te,null);if(typeof ce.then=="function")return Ke(se,Z,vt(ce),Te);if(ce.$$typeof===pa)return Ke(se,Z,km(se,ce),Te);qt(se,ce)}return null}function At(se,Z,ce,Te,st){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return se=se.get(ce)||null,W(Z,se,""+Te,st);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case Jm:return se=se.get(Te.key===null?ce:Te.key)||null,ne(Z,se,Te,st);case Ru:return se=se.get(Te.key===null?ce:Te.key)||null,ge(Z,se,Te,st);case ma:var ln=Te._init;return Te=ln(Te._payload),At(se,Z,ce,Te,st)}if(Ym(Te)||r(Te))return se=se.get(ce)||null,Pe(Z,se,Te,st,null);if(typeof Te.then=="function")return At(se,Z,ce,vt(Te),st);if(Te.$$typeof===pa)return At(se,Z,ce,km(Z,Te),st);qt(Z,Te)}return null}function qs(se,Z,ce,Te){for(var st=null,ln=null,pt=Z,Vt=Z=0,ii=null;pt!==null&&Vt<ce.length;Vt++){pt.index>Vt?(ii=pt,pt=null):ii=pt.sibling;var Wt=Ke(se,pt,ce[Vt],Te);if(Wt===null){pt===null&&(pt=ii);break}c&&pt&&Wt.alternate===null&&u(se,pt),Z=w(Wt,Z,Vt),ln===null?st=Wt:ln.sibling=Wt,ln=Wt,pt=ii}if(Vt===ce.length)return m(se,pt),Gt&&J(se,Vt),st;if(pt===null){for(;Vt<ce.length;Vt++)pt=Ve(se,ce[Vt],Te),pt!==null&&(Z=w(pt,Z,Vt),ln===null?st=pt:ln.sibling=pt,ln=pt);return Gt&&J(se,Vt),st}for(pt=x(pt);Vt<ce.length;Vt++)ii=At(pt,se,Vt,ce[Vt],Te),ii!==null&&(c&&ii.alternate!==null&&pt.delete(ii.key===null?Vt:ii.key),Z=w(ii,Z,Vt),ln===null?st=ii:ln.sibling=ii,ln=ii);return c&&pt.forEach(function(Ma){return u(se,Ma)}),Gt&&J(se,Vt),st}function yd(se,Z,ce,Te){if(ce==null)throw Error(s(151));for(var st=null,ln=null,pt=Z,Vt=Z=0,ii=null,Wt=ce.next();pt!==null&&!Wt.done;Vt++,Wt=ce.next()){pt.index>Vt?(ii=pt,pt=null):ii=pt.sibling;var Ma=Ke(se,pt,Wt.value,Te);if(Ma===null){pt===null&&(pt=ii);break}c&&pt&&Ma.alternate===null&&u(se,pt),Z=w(Ma,Z,Vt),ln===null?st=Ma:ln.sibling=Ma,ln=Ma,pt=ii}if(Wt.done)return m(se,pt),Gt&&J(se,Vt),st;if(pt===null){for(;!Wt.done;Vt++,Wt=ce.next())Wt=Ve(se,Wt.value,Te),Wt!==null&&(Z=w(Wt,Z,Vt),ln===null?st=Wt:ln.sibling=Wt,ln=Wt);return Gt&&J(se,Vt),st}for(pt=x(pt);!Wt.done;Vt++,Wt=ce.next())Wt=At(pt,se,Vt,Wt.value,Te),Wt!==null&&(c&&Wt.alternate!==null&&pt.delete(Wt.key===null?Vt:Wt.key),Z=w(Wt,Z,Vt),ln===null?st=Wt:ln.sibling=Wt,ln=Wt);return c&&pt.forEach(function(jH){return u(se,jH)}),Gt&&J(se,Vt),st}function Ql(se,Z,ce,Te){if(typeof ce=="object"&&ce!==null&&ce.type===Bu&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Jm:e:{for(var st=ce.key;Z!==null;){if(Z.key===st){if(st=ce.type,st===Bu){if(Z.tag===7){m(se,Z.sibling),Te=b(Z,ce.props.children),Te.return=se,se=Te;break e}}else if(Z.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===ma&&In(st)===Z.type){m(se,Z.sibling),Te=b(Z,ce.props),Bt(Te,ce),Te.return=se,se=Te;break e}m(se,Z);break}else u(se,Z);Z=Z.sibling}ce.type===Bu?(Te=zl(ce.props.children,se.mode,Te,ce.key),Te.return=se,se=Te):(Te=Xm(ce.type,ce.key,ce.props,null,se.mode,Te),Bt(Te,ce),Te.return=se,se=Te)}return O(se);case Ru:e:{for(st=ce.key;Z!==null;){if(Z.key===st)if(Z.tag===4&&Z.stateNode.containerInfo===ce.containerInfo&&Z.stateNode.implementation===ce.implementation){m(se,Z.sibling),Te=b(Z,ce.children||[]),Te.return=se,se=Te;break e}else{m(se,Z);break}else u(se,Z);Z=Z.sibling}Te=c_(ce,se.mode,Te),Te.return=se,se=Te}return O(se);case ma:return st=ce._init,ce=st(ce._payload),Ql(se,Z,ce,Te)}if(Ym(ce))return qs(se,Z,ce,Te);if(r(ce)){if(st=r(ce),typeof st!="function")throw Error(s(150));return ce=st.call(ce),yd(se,Z,ce,Te)}if(typeof ce.then=="function")return Ql(se,Z,vt(ce),Te);if(ce.$$typeof===pa)return Ql(se,Z,km(se,ce),Te);qt(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Z!==null&&Z.tag===6?(m(se,Z.sibling),Te=b(Z,ce),Te.return=se,se=Te):(m(se,Z),Te=l_(ce,se.mode,Te),Te.return=se,se=Te),O(se)):m(se,Z)}return function(se,Z,ce,Te){try{ud=0;var st=Ql(se,Z,ce,Te);return Gu=null,st}catch(pt){if(pt===cd)throw pt;var ln=t(29,pt,null,se.mode);return ln.lanes=Te,ln.return=se,ln}finally{}}}function ei(c,u){c=To,A(rg,c),A(Vu,u),To=c|u.baseLanes}function ss(){A(rg,To),A(Vu,Vu.current)}function _u(){To=rg.current,y(Vu),y(rg)}function Xr(c){var u=c.alternate;A(Yn,Yn.current&1),A(Ys,c),Kr===null&&(u===null||Vu.current!==null||u.memoizedState!==null)&&(Kr=c)}function Bl(c){if(c.tag===22){if(A(Yn,Yn.current),A(Ys,c),Kr===null){var u=c.alternate;u!==null&&u.memoizedState!==null&&(Kr=c)}}else pr()}function pr(){A(Yn,Yn.current),A(Ys,Ys.current)}function rs(c){y(Ys),Kr===c&&(Kr=null),y(Yn)}function Pl(c){for(var u=c;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||A_(m)||S_(m)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function pn(){throw Error(s(321))}function jf(c,u){if(u===null)return!1;for(var m=0;m<u.length&&m<c.length;m++)if(!bs(c[m],u[m]))return!1;return!0}function Xf(c,u,m,x,b,w){return xa=w,Ct=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,yt.H=c===null||c.memoizedState===null?jl:_a,Wl=!1,w=m(x,b),Wl=!1,Wu&&(w=N(u,m,x,b)),Lm(c),w}function Lm(c){yt.H=qr;var u=Qt!==null&&Qt.next!==null;if(xa=0,Gn=Qt=Ct=null,og=!1,hd=0,ju=null,u)throw Error(s(300));c===null||ti||(c=c.dependencies,c!==null&&zm(c)&&(ti=!0))}function N(c,u,m,x){Ct=c;var b=0;do{if(Wu&&(ju=null),hd=0,Wu=!1,25<=b)throw Error(s(301));if(b+=1,Gn=Qt=null,c.updateQueue!=null){var w=c.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}yt.H=Xl,w=u(m,x)}while(Wu);return w}function ie(){var c=yt.H,u=c.useState()[0];return u=typeof u.then=="function"?ot(u):u,c=c.useState()[0],(Qt!==null?Qt.memoizedState:null)!==c&&(Ct.flags|=1024),u}function le(){var c=ag!==0;return ag=0,c}function ue(c,u,m){u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~m}function oe(c){if(og){for(c=c.memoizedState;c!==null;){var u=c.queue;u!==null&&(u.pending=null),c=c.next}og=!1}xa=0,Gn=Qt=Ct=null,Wu=!1,hd=ag=0,ju=null}function De(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?Ct.memoizedState=Gn=c:Gn=Gn.next=c,Gn}function ke(){if(Qt===null){var c=Ct.alternate;c=c!==null?c.memoizedState:null}else c=Qt.next;var u=Gn===null?Ct.memoizedState:Gn.next;if(u!==null)Gn=u,Qt=c;else{if(c===null)throw Ct.alternate===null?Error(s(467)):Error(s(310));Qt=c,c={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},Gn===null?Ct.memoizedState=Gn=c:Gn=Gn.next=c}return Gn}function ot(c){var u=hd;return hd+=1,ju===null&&(ju=[]),c=$e(ju,c,u),u=Ct,(Gn===null?u.memoizedState:Gn.next)===null&&(u=u.alternate,yt.H=u===null||u.memoizedState===null?jl:_a),c}function ht(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return ot(c);if(c.$$typeof===pa)return Ai(c)}throw Error(s(438,String(c)))}function _t(c){var u=null,m=Ct.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var x=Ct.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(u={data:x.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=O_(),Ct.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(c),x=0;x<c;x++)m[x]=pk;return u.index++,m}function at(c,u){return typeof u=="function"?u(c):u}function gt(c){var u=ke();return on(u,Qt,c)}function on(c,u,m){var x=c.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=m;var b=c.baseQueue,w=x.pending;if(w!==null){if(b!==null){var O=b.next;b.next=w.next,w.next=O}u.baseQueue=b=w,x.pending=null}if(w=c.baseState,b===null)c.memoizedState=w;else{u=b.next;var W=O=null,ne=null,ge=u,Pe=!1;do{var Ve=ge.lane&-536870913;if(Ve!==ge.lane?(Ut&Ve)===Ve:(xa&Ve)===Ve){var Ke=ge.revertLane;if(Ke===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ve===zu&&(Pe=!0);else if((xa&Ke)===Ke){ge=ge.next,Ke===zu&&(Pe=!0);continue}else Ve={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ne===null?(W=ne=Ve,O=w):ne=ne.next=Ve,Ct.lanes|=Ke,Aa|=Ke;Ve=ge.action,Wl&&m(w,Ve),w=ge.hasEagerState?ge.eagerState:m(w,Ve)}else Ke={lane:Ve,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ne===null?(W=ne=Ke,O=w):ne=ne.next=Ke,Ct.lanes|=Ve,Aa|=Ve;ge=ge.next}while(ge!==null&&ge!==u);if(ne===null?O=w:ne.next=W,!bs(w,c.memoizedState)&&(ti=!0,Pe&&(m=ku,m!==null)))throw m;c.memoizedState=w,c.baseState=O,c.baseQueue=ne,x.lastRenderedState=w}return b===null&&(x.lanes=0),[c.memoizedState,x.dispatch]}function ui(c){var u=ke(),m=u.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=c;var x=m.dispatch,b=m.pending,w=u.memoizedState;if(b!==null){m.pending=null;var O=b=b.next;do w=c(w,O.action),O=O.next;while(O!==b);bs(w,u.memoizedState)||(ti=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),m.lastRenderedState=w}return[w,x]}function Nn(c,u,m){var x=Ct,b=ke(),w=Gt;if(w){if(m===void 0)throw Error(s(407));m=m()}else m=u();var O=!bs((Qt||b).memoizedState,m);if(O&&(b.memoizedState=m,ti=!0),b=b.queue,bx(bt.bind(null,x,b,c),[c]),b.getSnapshot!==u||O||Gn!==null&&Gn.memoizedState.tag&1){if(x.flags|=2048,bu(9,$t.bind(null,x,b,m,u),{destroy:void 0},null),en===null)throw Error(s(349));w||xa&60||Gs(x,u,m)}return m}function Gs(c,u,m){c.flags|=16384,c={getSnapshot:u,value:m},u=Ct.updateQueue,u===null?(u=O_(),Ct.updateQueue=u,u.stores=[c]):(m=u.stores,m===null?u.stores=[c]:m.push(c))}function $t(c,u,m,x){u.value=m,u.getSnapshot=x,Au(u)&&an(c)}function bt(c,u,m){return m(function(){Au(u)&&an(c)})}function Au(c){var u=c.getSnapshot;c=c.value;try{var m=u();return!bs(c,m)}catch{return!0}}function an(c){var u=Ge(c,2);u!==null&&Vi(u,c,2)}function mr(c){var u=De();if(typeof c=="function"){var m=c;if(c=m(),Wl){Y(!0);try{m()}finally{Y(!1)}}}return u.memoizedState=u.baseState=c,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:at,lastRenderedState:c},u}function Jf(c,u,m,x){return c.baseState=m,on(c,Qt,typeof x=="function"?x:at)}function Dl(c,u,m,x,b){if(Um(c))throw Error(s(485));if(c=u.action,c!==null){var w={payload:b,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};yt.T!==null?m(!0):w.isTransition=!1,x(w),m=u.pending,m===null?(w.next=u.pending=w,Su(u,w)):(w.next=m.next,u.pending=m.next=w)}}function Su(c,u){var m=u.action,x=u.payload,b=c.state;if(u.isTransition){var w=yt.T,O={};yt.T=O;try{var W=m(b,x),ne=yt.S;ne!==null&&ne(O,W),Jn(c,u,W)}catch(ge){Ll(c,u,ge)}finally{yt.T=w}}else try{w=m(b,x),Jn(c,u,w)}catch(ge){Ll(c,u,ge)}}function Jn(c,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){Jr(c,u,x)},function(x){return Ll(c,u,x)}):Jr(c,u,m)}function Jr(c,u,m){u.status="fulfilled",u.value=m,Gi(u),c.state=m,u=c.pending,u!==null&&(m=u.next,m===u?c.pending=null:(m=m.next,u.next=m,Su(c,m)))}function Ll(c,u,m){var x=c.pending;if(c.pending=null,x!==null){x=x.next;do u.status="rejected",u.reason=m,Gi(u),u=u.next;while(u!==x)}c.action=null}function Gi(c){c=c.listeners;for(var u=0;u<c.length;u++)(0,c[u])()}function Mu(c,u){return u}function Om(c,u){if(Gt){var m=en.formState;if(m!==null){e:{var x=Ct;if(Gt){if(bi){var b=rH(bi,Yr);if(b){bi=PT(b),x=oH(b);break e}}We(x)}x=!1}x&&(u=m[0])}}m=De(),m.memoizedState=m.baseState=u,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:u},m.queue=x,m=nC.bind(null,Ct,x),x.dispatch=m,x=mr(!1);var w=Tx.bind(null,Ct,!1,x.queue);return x=De(),b={state:u,dispatch:null,action:c,pending:null},x.queue=b,m=Dl.bind(null,Ct,b,w,m),b.dispatch=m,x.memoizedState=c,[u,m,!1]}function Yf(c){var u=ke();return Hw(u,Qt,c)}function Hw(c,u,m){u=on(c,u,Mu)[0],c=gt(at)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?ot(u):u;var x=ke(),b=x.queue,w=b.dispatch;return m!==x.memoizedState&&(Ct.flags|=2048,bu(9,jz.bind(null,b,m),{destroy:void 0},null)),[u,w,c]}function jz(c,u){c.action=u}function Gw(c){var u=ke(),m=Qt;if(m!==null)return Hw(u,m,c);ke(),u=u.memoizedState,m=ke();var x=m.queue.dispatch;return m.memoizedState=c,[u,x,!1]}function bu(c,u,m,x){return c={tag:c,create:u,inst:m,deps:x,next:null},u=Ct.updateQueue,u===null&&(u=O_(),Ct.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=c.next=c:(x=m.next,m.next=c,c.next=x,u.lastEffect=c),c}function Vw(){return ke().memoizedState}function Im(c,u,m,x){var b=De();Ct.flags|=c,b.memoizedState=bu(1|u,m,{destroy:void 0},x===void 0?null:x)}function Nm(c,u,m,x){var b=ke();x=x===void 0?null:x;var w=b.memoizedState.inst;Qt!==null&&x!==null&&jf(x,Qt.memoizedState.deps)?b.memoizedState=bu(u,m,w,x):(Ct.flags|=c,b.memoizedState=bu(1|u,m,w,x))}function Ww(c,u){Im(8390656,8,c,u)}function bx(c,u){Nm(2048,8,c,u)}function jw(c,u){return Nm(4,2,c,u)}function Xw(c,u){return Nm(4,4,c,u)}function Jw(c,u){if(typeof u=="function"){c=c();var m=u(c);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function Yw(c,u,m){m=m!=null?m.concat([c]):null,Nm(4,4,Jw.bind(null,u,c),m)}function Ex(){}function Kw(c,u){var m=ke();u=u===void 0?null:u;var x=m.memoizedState;return u!==null&&jf(u,x[1])?x[0]:(m.memoizedState=[c,u],c)}function qw(c,u){var m=ke();u=u===void 0?null:u;var x=m.memoizedState;if(u!==null&&jf(u,x[1]))return x[0];if(x=c(),Wl){Y(!0);try{c()}finally{Y(!1)}}return m.memoizedState=[x,u],x}function wx(c,u,m){return m===void 0||xa&1073741824?c.memoizedState=u:(c.memoizedState=m,c=XC(),Ct.lanes|=c,Aa|=c,m)}function Qw(c,u,m,x){return bs(m,u)?m:Vu.current!==null?(c=wx(c,m,x),bs(c,u)||(ti=!0),c):xa&42?(c=XC(),Ct.lanes|=c,Aa|=c,u):(ti=!0,c.memoizedState=m)}function Zw(c,u,m,x,b){var w=kl();as(w!==0&&8>w?w:8);var O=yt.T,W={};yt.T=W,Tx(c,!1,u,m);try{var ne=b(),ge=yt.S;if(ge!==null&&ge(W,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Pe=Se(ne,x);Kf(c,u,Pe,_s(c))}else Kf(c,u,x,_s(c))}catch(Ve){Kf(c,u,{then:function(){},status:"rejected",reason:Ve},_s())}finally{as(w),yt.T=O}}function $w(c){var u=c.memoizedState;if(u!==null)return u;u={memoizedState:Pu,baseState:Pu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:at,lastRenderedState:Pu},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:at,lastRenderedState:m},next:null},c.memoizedState=u,c=c.alternate,c!==null&&(c.memoizedState=u),u}function Cx(){return Ai(Hl)}function eC(){return ke().memoizedState}function tC(){return ke().memoizedState}function Xz(c){for(var u=c.return;u!==null;){switch(u.tag){case 24:case 3:var m=_s();c=rt(m);var x=et(u,c,m);x!==null&&(Vi(x,u,m),Je(x,u,m)),u={cache:Hx()},c.payload=u;return}u=u.return}}function Jz(c,u,m){var x=_s();m={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Um(c)?iC(u,m):(m=me(c,u,m,x),m!==null&&(Vi(m,c,x),sC(m,u,x)))}function nC(c,u,m){var x=_s();Kf(c,u,m,x)}function Kf(c,u,m,x){var b={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Um(c))iC(u,b);else{var w=c.alternate;if(c.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var O=u.lastRenderedState,W=w(O,m);if(b.hasEagerState=!0,b.eagerState=W,bs(W,O))return Me(c,u,b,0),en===null&&he(),!1}catch{}finally{}if(m=me(c,u,b,x),m!==null)return Vi(m,c,x),sC(m,u,x),!0}return!1}function Tx(c,u,m,x){if(x={lane:2,revertLane:Ue(),action:x,hasEagerState:!1,eagerState:null,next:null},Um(c)){if(u)throw Error(s(479))}else u=me(c,m,x,2),u!==null&&Vi(u,c,2)}function Um(c){var u=c.alternate;return c===Ct||u!==null&&u===Ct}function iC(c,u){Wu=og=!0;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}function sC(c,u,m){if(m&4194176){var x=u.lanes;x&=c.pendingLanes,m|=x,u.lanes=m,k(c,m)}}function Rx(c,u,m,x){u=c.memoizedState,m=m(x,u),m=m==null?u:h_({},u,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}function rC(c,u,m,x,b,w,O){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,w,O):u.prototype&&u.prototype.isPureReactComponent?!z(m,x)||!z(b,w):!0}function oC(c,u,m,x){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,x),u.state!==c&&I_.enqueueReplaceState(u,u.state,null)}function Ol(c,u){var m=u;if("ref"in u){m={};for(var x in u)x!=="ref"&&(m[x]=u[x])}if(c=c.defaultProps){m===u&&(m=h_({},m));for(var b in c)m[b]===void 0&&(m[b]=c[b])}return m}function Fm(c,u){try{var m=c.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(x){setTimeout(function(){throw x})}}function aC(c,u,m){try{var x=c.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Bx(c,u,m){return m=rt(m),m.tag=3,m.payload={element:null},m.callback=function(){Fm(c,u)},m}function lC(c){return c=rt(c),c.tag=3,c}function cC(c,u,m,x){var b=m.type.getDerivedStateFromError;if(typeof b=="function"){var w=x.value;c.payload=function(){return b(w)},c.callback=function(){aC(u,m,x)}}var O=m.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(c.callback=function(){aC(u,m,x),typeof b!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var W=x.stack;this.componentDidCatch(x.value,{componentStack:W!==null?W:""})})}function Yz(c,u,m,x,b){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(u=m.alternate,u!==null&&Qf(u,m,b,!0),m=Ys.current,m!==null){switch(m.tag){case 13:return Kr===null?s_():m.alternate===null&&Rn===0&&(Rn=3),m.flags&=-257,m.flags|=65536,m.lanes=b,x===sg?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([x]):u.add(x),o_(c,x,b)),!1;case 22:return m.flags|=65536,x===sg?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([x]):m.add(x)),o_(c,x,b)),!1}throw Error(s(435,m.tag))}return o_(c,x,b),s_(),!1}if(Gt)return u=Ys.current,u!==null?(!(u.flags&65536)&&(u.flags|=256),u.flags|=65536,u.lanes=b,x!==C_&&(c=Error(s(422),{cause:x}),Ae(X(c,m)))):(x!==C_&&(u=Error(s(423),{cause:x}),Ae(X(u,m))),c=c.current.alternate,c.flags|=65536,b&=-b,c.lanes|=b,x=X(x,m),b=Bx(c.stateNode,x,b),j(c,b),Rn!==4&&(Rn=2)),!1;var w=Error(s(520),{cause:x});if(w=X(w,m),dd===null?dd=[w]:dd.push(w),Rn!==4&&(Rn=2),u===null)return!0;x=X(x,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,c=b&-b,m.lanes|=c,c=Bx(m.stateNode,x,c),j(m,c),!1;case 1:if(u=m.type,w=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Sa===null||!Sa.has(w))))return m.flags|=65536,b&=-b,m.lanes|=b,b=lC(b),cC(b,c,m,x),j(m,b),!1}m=m.return}while(m!==null);return!1}function hi(c,u,m,x){u.child=c===null?jT(u,null,m,x):Vl(u,c.child,m,x)}function uC(c,u,m,x,b){m=m.render;var w=u.ref;if("ref"in x){var O={};for(var W in x)W!=="ref"&&(O[W]=x[W])}else O=x;return Il(u),x=Xf(c,u,m,O,w,b),W=le(),c!==null&&!ti?(ue(c,u,b),vo(c,u,b)):(Gt&&W&&ae(u),u.flags|=1,hi(c,u,x,b),u.child)}function hC(c,u,m,x,b){if(c===null){var w=m.type;return typeof w=="function"&&!a_(w)&&w.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=w,fC(c,u,w,x,b)):(c=Xm(m.type,null,x,u,u.mode,b),c.ref=u.ref,c.return=u,u.child=c)}if(w=c.child,!Fx(c,b)){var O=w.memoizedProps;if(m=m.compare,m=m!==null?m:z,m(O,x)&&c.ref===u.ref)return vo(c,u,b)}return u.flags|=1,c=da(w,x),c.ref=u.ref,c.return=u,u.child=c}function fC(c,u,m,x,b){if(c!==null){var w=c.memoizedProps;if(z(w,x)&&c.ref===u.ref)if(ti=!1,u.pendingProps=x=w,Fx(c,b))c.flags&131072&&(ti=!0);else return u.lanes=c.lanes,vo(c,u,b)}return Px(c,u,m,x,b)}function dC(c,u,m){var x=u.pendingProps,b=x.children,w=(u.stateNode._pendingVisibility&2)!==0,O=c!==null?c.memoizedState:null;if(qf(c,u),x.mode==="hidden"||w){if(u.flags&128){if(x=O!==null?O.baseLanes|m:m,c!==null){for(b=u.child=c.child,w=0;b!==null;)w=w|b.lanes|b.childLanes,b=b.sibling;u.childLanes=w&~x}else u.childLanes=0,u.child=null;return pC(c,u,x,m)}if(m&536870912)u.memoizedState={baseLanes:0,cachePool:null},c!==null&&Hm(u,O!==null?O.cachePool:null),O!==null?ei(u,O):ss(),Bl(u);else return u.lanes=u.childLanes=536870912,pC(c,u,O!==null?O.baseLanes|m:m,m)}else O!==null?(Hm(u,O.cachePool),ei(u,O),pr(),u.memoizedState=null):(c!==null&&Hm(u,null),ss(),pr());return hi(c,u,b,m),u.child}function pC(c,u,m,x){var b=Gx();return b=b===null?null:{parent:So?Cn._currentValue:Cn._currentValue2,pool:b},u.memoizedState={baseLanes:m,cachePool:b},c!==null&&Hm(u,null),ss(),Bl(u),c!==null&&Qf(c,u,x,!0),null}function qf(c,u){var m=u.ref;if(m===null)c!==null&&c.ref!==null&&(u.flags|=2097664);else{if(typeof m!="function"&&typeof m!="object")throw Error(s(284));(c===null||c.ref!==m)&&(u.flags|=2097664)}}function Px(c,u,m,x,b){return Il(u),m=Xf(c,u,m,x,void 0,b),x=le(),c!==null&&!ti?(ue(c,u,b),vo(c,u,b)):(Gt&&x&&ae(u),u.flags|=1,hi(c,u,m,b),u.child)}function mC(c,u,m,x,b,w){return Il(u),u.updateQueue=null,m=N(u,x,m,b),Lm(c),x=le(),c!==null&&!ti?(ue(c,u,w),vo(c,u,w)):(Gt&&x&&ae(u),u.flags|=1,hi(c,u,m,w),u.child)}function gC(c,u,m,x,b){if(Il(u),u.stateNode===null){var w=Lu,O=m.contextType;typeof O=="object"&&O!==null&&(w=Ai(O)),w=new m(x,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=I_,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=x,w.state=u.memoizedState,w.refs={},Rt(u),O=m.contextType,w.context=typeof O=="object"&&O!==null?Ai(O):Lu,w.state=u.memoizedState,O=m.getDerivedStateFromProps,typeof O=="function"&&(Rx(u,m,O,x),w.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&I_.enqueueReplaceState(w,w.state,null),Fe(u,x,w,b),ye(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),x=!0}else if(c===null){w=u.stateNode;var W=u.memoizedProps,ne=Ol(m,W);w.props=ne;var ge=w.context,Pe=m.contextType;O=Lu,typeof Pe=="object"&&Pe!==null&&(O=Ai(Pe));var Ve=m.getDerivedStateFromProps;Pe=typeof Ve=="function"||typeof w.getSnapshotBeforeUpdate=="function",W=u.pendingProps!==W,Pe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(W||ge!==O)&&oC(u,w,x,O),va=!1;var Ke=u.memoizedState;w.state=Ke,Fe(u,x,w,b),ye(),ge=u.memoizedState,W||Ke!==ge||va?(typeof Ve=="function"&&(Rx(u,m,Ve,x),ge=u.memoizedState),(ne=va||rC(u,m,ne,x,Ke,ge,O))?(Pe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=ge),w.props=x,w.state=ge,w.context=O,x=ne):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{w=u.stateNode,xt(c,u),O=u.memoizedProps,Pe=Ol(m,O),w.props=Pe,Ve=u.pendingProps,Ke=w.context,ge=m.contextType,ne=Lu,typeof ge=="object"&&ge!==null&&(ne=Ai(ge)),W=m.getDerivedStateFromProps,(ge=typeof W=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==Ve||Ke!==ne)&&oC(u,w,x,ne),va=!1,Ke=u.memoizedState,w.state=Ke,Fe(u,x,w,b),ye();var At=u.memoizedState;O!==Ve||Ke!==At||va||c!==null&&c.dependencies!==null&&zm(c.dependencies)?(typeof W=="function"&&(Rx(u,m,W,x),At=u.memoizedState),(Pe=va||rC(u,m,Pe,x,Ke,At,ne)||c!==null&&c.dependencies!==null&&zm(c.dependencies))?(ge||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(x,At,ne),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(x,At,ne)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===c.memoizedProps&&Ke===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===c.memoizedProps&&Ke===c.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=At),w.props=x,w.state=At,w.context=ne,x=Pe):(typeof w.componentDidUpdate!="function"||O===c.memoizedProps&&Ke===c.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===c.memoizedProps&&Ke===c.memoizedState||(u.flags|=1024),x=!1)}return w=x,qf(c,u),x=(u.flags&128)!==0,w||x?(w=u.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,c!==null&&x?(u.child=Vl(u,c.child,null,b),u.child=Vl(u,null,m,b)):hi(c,u,m,b),u.memoizedState=w.state,c=u.child):c=vo(c,u,b),c}function yC(c,u,m,x){return G(),u.flags|=256,hi(c,u,m,x),u.child}function Dx(c){return{baseLanes:c,cachePool:MC()}}function Lx(c,u,m){return c=c!==null?c.childLanes&~m:0,u&&(c|=Ks),c}function vC(c,u,m){var x=u.pendingProps,b=!1,w=(u.flags&128)!==0,O;if((O=w)||(O=c!==null&&c.memoizedState===null?!1:(Yn.current&2)!==0),O&&(b=!0,u.flags&=-129),O=(u.flags&32)!==0,u.flags&=-33,c===null){if(Gt){if(b?Xr(u):pr(),Gt){var W=bi,ne;(ne=W)&&(W=hH(W,Yr),W!==null?(u.memoizedState={dehydrated:W,treeContext:Gl!==null?{id:Mo,overflow:bo}:null,retryLane:536870912},ne=t(18,null,null,0),ne.stateNode=W,ne.return=u,u.child=ne,Wi=u,bi=null,ne=!0):ne=!1),ne||We(u)}if(W=u.memoizedState,W!==null&&(W=W.dehydrated,W!==null))return S_(W)?u.lanes=16:u.lanes=536870912,null;rs(u)}return W=x.children,x=x.fallback,b?(pr(),b=u.mode,W=Ix({mode:"hidden",children:W},b),x=zl(x,b,m,null),W.return=u,x.return=u,W.sibling=x,u.child=W,b=u.child,b.memoizedState=Dx(m),b.childLanes=Lx(c,O,m),u.memoizedState=N_,x):(Xr(u),Ox(u,W))}if(ne=c.memoizedState,ne!==null&&(W=ne.dehydrated,W!==null)){if(w)u.flags&256?(Xr(u),u.flags&=-257,u=Nx(c,u,m)):u.memoizedState!==null?(pr(),u.child=c.child,u.flags|=128,u=null):(pr(),b=x.fallback,W=u.mode,x=Ix({mode:"visible",children:x.children},W),b=zl(b,W,m,null),b.flags|=2,x.return=u,b.return=u,x.sibling=b,u.child=x,Vl(u,c.child,null,m),x=u.child,x.memoizedState=Dx(m),x.childLanes=Lx(c,O,m),u.memoizedState=N_,u=b);else if(Xr(u),S_(W))O=iH(W).digest,x=Error(s(419)),x.stack="",x.digest=O,Ae({value:x,source:null,stack:null}),u=Nx(c,u,m);else if(ti||Qf(c,u,m,!1),O=(m&c.childLanes)!==0,ti||O){if(O=en,O!==null){if(x=m&-m,x&42)x=1;else switch(x){case 2:x=1;break;case 8:x=4;break;case 32:x=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:x=64;break;case 268435456:x=134217728;break;default:x=0}if(x=x&(O.suspendedLanes|m)?0:x,x!==0&&x!==ne.retryLane)throw ne.retryLane=x,Ge(c,x),Vi(O,c,x),JT}A_(W)||s_(),u=Nx(c,u,m)}else A_(W)?(u.flags|=128,u.child=c.child,u=ok.bind(null,c),sH(W,u),u=null):(c=ne.treeContext,Vs&&(bi=lH(W),Wi=u,Gt=!0,vr=null,Yr=!1,c!==null&&(js[Xs++]=Mo,js[Xs++]=bo,js[Xs++]=Gl,Mo=c.id,bo=c.overflow,Gl=u)),u=Ox(u,x.children),u.flags|=4096);return u}return b?(pr(),b=x.fallback,W=u.mode,ne=c.child,w=ne.sibling,x=da(ne,{mode:"hidden",children:x.children}),x.subtreeFlags=ne.subtreeFlags&31457280,w!==null?b=da(w,b):(b=zl(b,W,m,null),b.flags|=2),b.return=u,x.return=u,x.sibling=b,u.child=x,x=b,b=u.child,W=c.child.memoizedState,W===null?W=Dx(m):(ne=W.cachePool,ne!==null?(w=So?Cn._currentValue:Cn._currentValue2,ne=ne.parent!==w?{parent:w,pool:w}:ne):ne=MC(),W={baseLanes:W.baseLanes|m,cachePool:ne}),b.memoizedState=W,b.childLanes=Lx(c,O,m),u.memoizedState=N_,x):(Xr(u),m=c.child,c=m.sibling,m=da(m,{mode:"visible",children:x.children}),m.return=u,m.sibling=null,c!==null&&(O=u.deletions,O===null?(u.deletions=[c],u.flags|=16):O.push(c)),u.child=m,u.memoizedState=null,m)}function Ox(c,u){return u=Ix({mode:"visible",children:u},c.mode),u.return=c,c.child=u}function Ix(c,u){return lT(c,u,0,null)}function Nx(c,u,m){return Vl(u,c.child,null,m),c=Ox(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function xC(c,u,m){c.lanes|=u;var x=c.alternate;x!==null&&(x.lanes|=u),zx(c.return,u,m)}function Ux(c,u,m,x,b){var w=c.memoizedState;w===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:b}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=x,w.tail=m,w.tailMode=b)}function _C(c,u,m){var x=u.pendingProps,b=x.revealOrder,w=x.tail;if(hi(c,u,x.children,m),x=Yn.current,x&2)x=x&1|2,u.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&xC(c,m,u);else if(c.tag===19)xC(c,m,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}x&=1}switch(A(Yn,x),b){case"forwards":for(m=u.child,b=null;m!==null;)c=m.alternate,c!==null&&Pl(c)===null&&(b=m),m=m.sibling;m=b,m===null?(b=u.child,u.child=null):(b=m.sibling,m.sibling=null),Ux(u,!1,b,m,w);break;case"backwards":for(m=null,b=u.child,u.child=null;b!==null;){if(c=b.alternate,c!==null&&Pl(c)===null){u.child=b;break}c=b.sibling,b.sibling=m,m=b,b=c}Ux(u,!0,m,null,w);break;case"together":Ux(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function vo(c,u,m){if(c!==null&&(u.dependencies=c.dependencies),Aa|=u.lanes,!(m&u.childLanes))if(c!==null){if(Qf(c,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(c!==null&&u.child!==c.child)throw Error(s(153));if(u.child!==null){for(c=u.child,m=da(c,c.pendingProps),u.child=m,m.return=u;c.sibling!==null;)c=c.sibling,m=m.sibling=da(c,c.pendingProps),m.return=u;m.sibling=null}return u.child}function Fx(c,u){return c.lanes&u?!0:(c=c.dependencies,!!(c!==null&&zm(c)))}function Kz(c,u,m){switch(u.tag){case 3:Q(u,u.stateNode.containerInfo),ca(u,Cn,c.memoizedState.cache),G();break;case 27:case 5:Ce(u);break;case 4:Q(u,u.stateNode.containerInfo);break;case 10:ca(u,u.type,u.memoizedProps.value);break;case 13:var x=u.memoizedState;if(x!==null)return x.dehydrated!==null?(Xr(u),u.flags|=128,null):m&u.child.childLanes?vC(c,u,m):(Xr(u),c=vo(c,u,m),c!==null?c.sibling:null);Xr(u);break;case 19:var b=(c.flags&128)!==0;if(x=(m&u.childLanes)!==0,x||(Qf(c,u,m,!1),x=(m&u.childLanes)!==0),b){if(x)return _C(c,u,m);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),A(Yn,Yn.current),x)break;return null;case 22:case 23:return u.lanes=0,dC(c,u,m);case 24:ca(u,Cn,c.memoizedState.cache)}return vo(c,u,m)}function AC(c,u,m){if(c!==null)if(c.memoizedProps!==u.pendingProps)ti=!0;else{if(!Fx(c,m)&&!(u.flags&128))return ti=!1,Kz(c,u,m);ti=!!(c.flags&131072)}else ti=!1,Gt&&u.flags&1048576&&K(u,eg,u.index);switch(u.lanes=0,u.tag){case 16:e:{c=u.pendingProps;var x=u.elementType,b=x._init;if(x=b(x._payload),u.type=x,typeof x=="function")a_(x)?(c=Ol(x,c),u.tag=1,u=gC(null,u,x,c,m)):(u.tag=0,u=Px(null,u,x,c,m));else{if(x!=null){if(b=x.$$typeof,b===d_){u.tag=11,u=uC(null,u,x,c,m);break e}else if(b===g_){u.tag=14,u=hC(null,u,x,c,m);break e}}throw u=o(x)||x,Error(s(306,u,""))}}return u;case 0:return Px(c,u,u.type,u.pendingProps,m);case 1:return x=u.type,b=Ol(x,u.pendingProps),gC(c,u,x,b,m);case 3:e:{if(Q(u,u.stateNode.containerInfo),c===null)throw Error(s(387));var w=u.pendingProps;b=u.memoizedState,x=b.element,xt(c,u),Fe(u,w,null,m);var O=u.memoizedState;if(w=O.cache,ca(u,Cn,w),w!==b.cache&&kx(u,[Cn],m,!0),ye(),w=O.element,Vs&&b.isDehydrated)if(b={element:w,isDehydrated:!1,cache:O.cache},u.updateQueue.baseState=b,u.memoizedState=b,u.flags&256){u=yC(c,u,w,m);break e}else if(w!==x){x=X(Error(s(424)),u),Ae(x),u=yC(c,u,w,m);break e}else for(Vs&&(bi=aH(u.stateNode.containerInfo),Wi=u,Gt=!0,vr=null,Yr=!0),m=jT(u,null,w,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(G(),w===x){u=vo(c,u,m);break e}hi(c,u,w,m)}u=u.child}return u;case 26:if(Ws)return qf(c,u),c===null?(m=IT(u.type,null,u.pendingProps,null))?u.memoizedState=m:Gt||(u.stateNode=MH(u.type,u.pendingProps,ya.current,u)):u.memoizedState=IT(u.type,c.memoizedProps,u.pendingProps,c.memoizedState),null;case 27:if(Mi)return Ce(u),c===null&&Mi&&Gt&&(x=u.stateNode=HT(u.type,u.pendingProps,ya.current,fi.current,!1),Wi=u,Yr=!0,bi=DT(x)),x=u.pendingProps.children,c!==null||Gt?hi(c,u,x,m):u.child=Vl(u,null,x,m),qf(c,u),u.child;case 5:return c===null&&Gt&&(_H(u.type,u.pendingProps,fi.current),(b=x=bi)&&(x=cH(x,u.type,u.pendingProps,Yr),x!==null?(u.stateNode=x,Wi=u,bi=DT(x),Yr=!1,b=!0):b=!1),b||We(u)),Ce(u),b=u.type,w=u.pendingProps,O=c!==null?c.memoizedProps:null,x=w.children,Km(b,w)?x=null:O!==null&&Km(b,O)&&(u.flags|=32),u.memoizedState!==null&&(b=Xf(c,u,ie,null,null,m),So?Hl._currentValue=b:Hl._currentValue2=b),qf(c,u),hi(c,u,x,m),u.child;case 6:return c===null&&Gt&&(AH(u.pendingProps,fi.current),(c=m=bi)&&(m=uH(m,u.pendingProps,Yr),m!==null?(u.stateNode=m,Wi=u,bi=null,c=!0):c=!1),c||We(u)),null;case 13:return vC(c,u,m);case 4:return Q(u,u.stateNode.containerInfo),x=u.pendingProps,c===null?u.child=Vl(u,null,x,m):hi(c,u,x,m),u.child;case 11:return uC(c,u,u.type,u.pendingProps,m);case 7:return hi(c,u,u.pendingProps,m),u.child;case 8:return hi(c,u,u.pendingProps.children,m),u.child;case 12:return hi(c,u,u.pendingProps.children,m),u.child;case 10:return x=u.pendingProps,ca(u,u.type,x.value),hi(c,u,x.children,m),u.child;case 9:return b=u.type._context,x=u.pendingProps.children,Il(u),b=Ai(b),x=x(b),u.flags|=1,hi(c,u,x,m),u.child;case 14:return hC(c,u,u.type,u.pendingProps,m);case 15:return fC(c,u,u.type,u.pendingProps,m);case 19:return _C(c,u,m);case 22:return dC(c,u,m);case 24:return Il(u),x=Ai(Cn),c===null?(b=Gx(),b===null&&(b=en,w=Hx(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=m),b=w),u.memoizedState={parent:x,cache:b},Rt(u),ca(u,Cn,b)):(c.lanes&m&&(xt(c,u),Fe(u,null,null,m),ye()),b=c.memoizedState,w=u.memoizedState,b.parent!==x?(b={parent:x,cache:x},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),ca(u,Cn,x)):(x=w.cache,ca(u,Cn,x),x!==b.cache&&kx(u,[Cn],m,!0))),hi(c,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function ca(c,u,m){So?(A(lg,u._currentValue),u._currentValue=m):(A(lg,u._currentValue2),u._currentValue2=m)}function xo(c){var u=lg.current;So?c._currentValue=u:c._currentValue2=u,y(lg)}function zx(c,u,m){for(;c!==null;){var x=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),c===m)break;c=c.return}}function kx(c,u,m,x){var b=c.child;for(b!==null&&(b.return=c);b!==null;){var w=b.dependencies;if(w!==null){var O=b.child;w=w.firstContext;e:for(;w!==null;){var W=w;w=b;for(var ne=0;ne<u.length;ne++)if(W.context===u[ne]){w.lanes|=m,W=w.alternate,W!==null&&(W.lanes|=m),zx(w.return,m,c),x||(O=null);break e}w=W.next}}else if(b.tag===18){if(O=b.return,O===null)throw Error(s(341));O.lanes|=m,w=O.alternate,w!==null&&(w.lanes|=m),zx(O,m,c),O=null}else O=b.child;if(O!==null)O.return=b;else for(O=b;O!==null;){if(O===c){O=null;break}if(b=O.sibling,b!==null){b.return=O.return,O=b;break}O=O.return}b=O}}function Qf(c,u,m,x){c=null;for(var b=u,w=!1;b!==null;){if(!w){if(b.flags&524288)w=!0;else if(b.flags&262144)break}if(b.tag===10){var O=b.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var W=b.type;bs(b.pendingProps.value,O.value)||(c!==null?c.push(W):c=[W])}}else if(b===tg.current){if(O=b.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(c!==null?c.push(Hl):c=[Hl])}b=b.return}c!==null&&kx(u,c,m,x),u.flags|=262144}function zm(c){for(c=c.firstContext;c!==null;){var u=c.context;if(!bs(So?u._currentValue:u._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function Il(c){Jl=c,Eo=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Ai(c){return SC(Jl,c)}function km(c,u){return Jl===null&&Il(c),SC(c,u)}function SC(c,u){var m=So?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:m,next:null},Eo===null){if(c===null)throw Error(s(308));Eo=u,c.dependencies={lanes:0,firstContext:u},c.flags|=524288}else Eo=Eo.next=u;return m}function Hx(){return{controller:new kH,data:new Map,refCount:0}}function Zf(c){c.refCount--,c.refCount===0&&HH(GH,function(){c.controller.abort()})}function Gx(){var c=Yl.current;return c!==null?c:en.pooledCache}function Hm(c,u){u===null?A(Yl,Yl.current):A(Yl,u.pool)}function MC(){var c=Gx();return c===null?null:{parent:So?Cn._currentValue:Cn._currentValue2,pool:c}}function ys(c){c.flags|=4}function bC(c,u){if(c!==null&&c.child===u.child)return!1;if(u.flags&16)return!0;for(c=u.child;c!==null;){if(c.flags&13878||c.subtreeFlags&13878)return!0;c=c.sibling}return!1}function Vx(c,u,m,x){if(Si)for(m=u.child;m!==null;){if(m.tag===5||m.tag===6)x_(c,m.stateNode);else if(!(m.tag===4||Mi&&m.tag===27)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}else if(ga)for(var b=u.child;b!==null;){if(b.tag===5){var w=b.stateNode;m&&x&&(w=RT(w,b.type,b.memoizedProps)),x_(c,w)}else if(b.tag===6)w=b.stateNode,m&&x&&(w=BT(w,b.memoizedProps)),x_(c,w);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)w=b.child,w!==null&&(w.return=b),Vx(c,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===u)break;for(;b.sibling===null;){if(b.return===null||b.return===u)return;b=b.return}b.sibling.return=b.return,b=b.sibling}}function EC(c,u,m,x){if(ga)for(var b=u.child;b!==null;){if(b.tag===5){var w=b.stateNode;m&&x&&(w=RT(w,b.type,b.memoizedProps)),CT(c,w)}else if(b.tag===6)w=b.stateNode,m&&x&&(w=BT(w,b.memoizedProps)),CT(c,w);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)w=b.child,w!==null&&(w.return=b),EC(c,b,!(b.memoizedProps!==null&&b.memoizedProps.mode==="manual"),!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===u)break;for(;b.sibling===null;){if(b.return===null||b.return===u)return;b=b.return}b.sibling.return=b.return,b=b.sibling}}function wC(c,u){if(ga&&bC(c,u)){c=u.stateNode;var m=c.containerInfo,x=wT();EC(x,u,!1,!1),c.pendingChildren=x,ys(u),nH(m,x)}}function Wx(c,u,m,x){if(Si)c.memoizedProps!==x&&ys(u);else if(ga){var b=c.stateNode,w=c.memoizedProps;if((c=bC(c,u))||w!==x){var O=fi.current;w=tH(b,m,w,x,!c,null),w===b?u.stateNode=b:(_T(w,m,x,O)&&ys(u),u.stateNode=w,c?Vx(w,u,!1,!1):ys(u))}else u.stateNode=b}}function jx(c,u,m){if(Rk(u,m)){if(c.flags|=16777216,!MT(u,m))if(QC())c.flags|=8192;else throw Hu=sg,L_}else c.flags&=-16777217}function CC(c,u){if(EH(u)){if(c.flags|=16777216,!kT(u))if(QC())c.flags|=8192;else throw Hu=sg,L_}else c.flags&=-16777217}function Gm(c,u){u!==null&&(c.flags|=4),c.flags&16384&&(u=c.tag!==22?F():536870912,c.lanes|=u,Yu|=u)}function $f(c,u){if(!Gt)switch(c.tailMode){case"hidden":u=c.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function _n(c){var u=c.alternate!==null&&c.alternate.child===c.child,m=0,x=0;if(u)for(var b=c.child;b!==null;)m|=b.lanes|b.childLanes,x|=b.subtreeFlags&31457280,x|=b.flags&31457280,b.return=c,b=b.sibling;else for(b=c.child;b!==null;)m|=b.lanes|b.childLanes,x|=b.subtreeFlags,x|=b.flags,b.return=c,b=b.sibling;return c.subtreeFlags|=x,c.childLanes=m,u}function qz(c,u,m){var x=u.pendingProps;switch(Be(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(u),null;case 1:return _n(u),null;case 3:return m=u.stateNode,x=null,c!==null&&(x=c.memoizedState.cache),u.memoizedState.cache!==x&&(u.flags|=2048),xo(Cn),de(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(Ee(u)?ys(u):c===null||c.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,vr!==null&&(n_(vr),vr=null))),wC(c,u),_n(u),null;case 26:if(Ws){m=u.type;var b=u.memoizedState;return c===null?(ys(u),b!==null?(_n(u),CC(u,b)):(_n(u),jx(u,m,x))):b?b!==c.memoizedState?(ys(u),_n(u),CC(u,b)):(_n(u),u.flags&=-16777217):(Si?c.memoizedProps!==x&&ys(u):Wx(c,u,m,x),_n(u),jx(u,m,x)),null}case 27:if(Mi){if(ze(u),m=ya.current,b=u.type,c!==null&&u.stateNode!=null)Si?c.memoizedProps!==x&&ys(u):Wx(c,u,b,x);else{if(!x){if(u.stateNode===null)throw Error(s(166));return _n(u),null}c=fi.current,Ee(u)?Xe(u,c):(c=HT(b,x,m,c,!0),u.stateNode=c,ys(u))}return _n(u),null}case 5:if(ze(u),m=u.type,c!==null&&u.stateNode!=null)Wx(c,u,m,x);else{if(!x){if(u.stateNode===null)throw Error(s(166));return _n(u),null}c=fi.current,Ee(u)?Xe(u,c):(b=Sk(m,x,ya.current,c,u),Vx(b,u,!1,!1),u.stateNode=b,_T(b,m,x,c)&&ys(u))}return _n(u),jx(u,u.type,u.pendingProps),null;case 6:if(c&&u.stateNode!=null)m=c.memoizedProps,Si?m!==x&&ys(u):ga&&(m!==x?(u.stateNode=AT(x,ya.current,fi.current,u),ys(u)):u.stateNode=c.stateNode);else{if(typeof x!="string"&&u.stateNode===null)throw Error(s(166));if(c=ya.current,m=fi.current,Ee(u)){if(!Vs)throw Error(s(176));if(c=u.stateNode,m=u.memoizedProps,x=null,b=Wi,b!==null)switch(b.tag){case 27:case 5:x=b.memoizedProps}dH(c,m,u,x)||We(u)}else u.stateNode=AT(x,c,m,u)}return _n(u),null;case 13:if(x=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(b=Ee(u),x!==null&&x.dehydrated!==null){if(c===null){if(!b)throw Error(s(318));if(!Vs)throw Error(s(344));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));pH(b,u)}else G(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;_n(u),b=!1}else vr!==null&&(n_(vr),vr=null),b=!0;if(!b)return u.flags&256?(rs(u),u):(rs(u),null)}if(rs(u),u.flags&128)return u.lanes=m,u;if(m=x!==null,c=c!==null&&c.memoizedState!==null,m){x=u.child,b=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(b=x.alternate.memoizedState.cachePool.pool);var w=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(w=x.memoizedState.cachePool.pool),w!==b&&(x.flags|=2048)}return m!==c&&m&&(u.child.flags|=8192),Gm(u,u.updateQueue),_n(u),null;case 4:return de(),wC(c,u),c===null&&Ek(u.stateNode.containerInfo),_n(u),null;case 10:return xo(u.type),_n(u),null;case 19:if(y(Yn),b=u.memoizedState,b===null)return _n(u),null;if(x=(u.flags&128)!==0,w=b.rendering,w===null)if(x)$f(b,!1);else{if(Rn!==0||c!==null&&c.flags&128)for(c=u.child;c!==null;){if(w=Pl(c),w!==null){for(u.flags|=128,$f(b,!1),c=w.updateQueue,u.updateQueue=c,Gm(u,c),u.subtreeFlags=0,c=m,m=u.child;m!==null;)aT(m,c),m=m.sibling;return A(Yn,Yn.current&1|2),u.child}c=c.sibling}b.tail!==null&&yr()>pd&&(u.flags|=128,x=!0,$f(b,!1),u.lanes=4194304)}else{if(!x)if(c=Pl(w),c!==null){if(u.flags|=128,x=!0,c=c.updateQueue,u.updateQueue=c,Gm(u,c),$f(b,!0),b.tail===null&&b.tailMode==="hidden"&&!w.alternate&&!Gt)return _n(u),null}else 2*yr()-b.renderingStartTime>pd&&m!==536870912&&(u.flags|=128,x=!0,$f(b,!1),u.lanes=4194304);b.isBackwards?(w.sibling=u.child,u.child=w):(c=b.last,c!==null?c.sibling=w:u.child=w,b.last=w)}return b.tail!==null?(u=b.tail,b.rendering=u,b.tail=u.sibling,b.renderingStartTime=yr(),u.sibling=null,c=Yn.current,A(Yn,x?c&1|2:c&1),u):(_n(u),null);case 22:case 23:return rs(u),_u(),x=u.memoizedState!==null,c!==null?c.memoizedState!==null!==x&&(u.flags|=8192):x&&(u.flags|=8192),x?m&536870912&&!(u.flags&128)&&(_n(u),u.subtreeFlags&6&&(u.flags|=8192)):_n(u),m=u.updateQueue,m!==null&&Gm(u,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==m&&(u.flags|=2048),c!==null&&y(Yl),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),xo(Cn),_n(u),null;case 25:return null}throw Error(s(156,u.tag))}function Qz(c,u){switch(Be(u),u.tag){case 1:return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return xo(Cn),de(),c=u.flags,c&65536&&!(c&128)?(u.flags=c&-65537|128,u):null;case 26:case 27:case 5:return ze(u),null;case 13:if(rs(u),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(s(340));G()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return y(Yn),null;case 4:return de(),null;case 10:return xo(u.type),null;case 22:case 23:return rs(u),_u(),c!==null&&y(Yl),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 24:return xo(Cn),null;case 25:return null;default:return null}}function TC(c,u){switch(Be(u),u.tag){case 3:xo(Cn),de();break;case 26:case 27:case 5:ze(u);break;case 4:de();break;case 13:rs(u);break;case 19:y(Yn);break;case 10:xo(u.type);break;case 22:case 23:rs(u),_u(),c!==null&&y(Yl);break;case 24:xo(Cn)}}function ed(c,u){try{var m=u.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var b=x.next;m=b;do{if((m.tag&c)===c){x=void 0;var w=m.create,O=m.inst;x=w(),O.destroy=x}m=m.next}while(m!==b)}}catch(W){Jt(u,u.return,W)}}function ua(c,u,m){try{var x=u.updateQueue,b=x!==null?x.lastEffect:null;if(b!==null){var w=b.next;x=w;do{if((x.tag&c)===c){var O=x.inst,W=O.destroy;if(W!==void 0){O.destroy=void 0,b=u;var ne=m;try{W()}catch(ge){Jt(b,ne,ge)}}}x=x.next}while(x!==w)}}catch(ge){Jt(u,u.return,ge)}}function RC(c){var u=c.updateQueue;if(u!==null){var m=c.stateNode;try{ft(u,m)}catch(x){Jt(c,c.return,x)}}}function BC(c,u,m){m.props=Ol(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(x){Jt(c,u,x)}}function Nl(c,u){try{var m=c.ref;if(m!==null){var x=c.stateNode;switch(c.tag){case 26:case 27:case 5:var b=id(x);break;default:b=x}typeof m=="function"?c.refCleanup=m(b):m.current=b}}catch(w){Jt(c,u,w)}}function vs(c,u){var m=c.ref,x=c.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(b){Jt(c,u,b)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(b){Jt(c,u,b)}else m.current=null}function PC(c){var u=c.type,m=c.memoizedProps,x=c.stateNode;try{Wk(x,u,m,c)}catch(b){Jt(c,c.return,b)}}function DC(c,u,m){try{jk(c.stateNode,c.type,m,u,c)}catch(x){Jt(c,c.return,x)}}function LC(c){return c.tag===5||c.tag===3||(Ws?c.tag===26:!1)||(Mi?c.tag===27:!1)||c.tag===4}function Xx(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||LC(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&(!Mi||c.tag!==27)&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Jx(c,u,m){var x=c.tag;if(x===5||x===6)c=c.stateNode,u?Jk(m,c,u):Gk(m,c);else if(!(x===4||Mi&&x===27)&&(c=c.child,c!==null))for(Jx(c,u,m),c=c.sibling;c!==null;)Jx(c,u,m),c=c.sibling}function Vm(c,u,m){var x=c.tag;if(x===5||x===6)c=c.stateNode,u?Xk(m,c,u):Hk(m,c);else if(!(x===4||Mi&&x===27)&&(c=c.child,c!==null))for(Vm(c,u,m),c=c.sibling;c!==null;)Vm(c,u,m),c=c.sibling}function OC(c,u,m){c=c.containerInfo;try{TT(c,m)}catch(x){Jt(u,u.return,x)}}function Zz(c,u){for(_k(c.containerInfo),ni=u;ni!==null;)if(c=ni,u=c.child,(c.subtreeFlags&1028)!==0&&u!==null)u.return=c,ni=u;else for(;ni!==null;){c=ni;var m=c.alternate;switch(u=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if(u&1024&&m!==null){u=void 0;var x=c,b=m.memoizedProps;m=m.memoizedState;var w=x.stateNode;try{var O=Ol(x.type,b,x.elementType===x.type);u=w.getSnapshotBeforeUpdate(O,m),w.__reactInternalSnapshotBeforeUpdate=u}catch(W){Jt(x,x.return,W)}}break;case 3:u&1024&&Si&&eH(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(u&1024)throw Error(s(163))}if(u=c.sibling,u!==null){u.return=c.return,ni=u;break}ni=c.return}return O=qT,qT=!1,O}function IC(c,u,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:_o(c,m),x&4&&ed(5,m);break;case 1:if(_o(c,m),x&4)if(c=m.stateNode,u===null)try{c.componentDidMount()}catch(W){Jt(m,m.return,W)}else{var b=Ol(m.type,u.memoizedProps);u=u.memoizedState;try{c.componentDidUpdate(b,u,c.__reactInternalSnapshotBeforeUpdate)}catch(W){Jt(m,m.return,W)}}x&64&&RC(m),x&512&&Nl(m,m.return);break;case 3:if(_o(c,m),x&64&&(x=m.updateQueue,x!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=id(m.child.stateNode);break;case 1:c=m.child.stateNode}try{ft(x,c)}catch(W){Jt(m,m.return,W)}}break;case 26:if(Ws){_o(c,m),x&512&&Nl(m,m.return);break}case 27:case 5:_o(c,m),u===null&&x&4&&PC(m),x&512&&Nl(m,m.return);break;case 12:_o(c,m);break;case 13:_o(c,m),x&4&&UC(c,m);break;case 22:if(b=m.memoizedState!==null||wo,!b){u=u!==null&&u.memoizedState!==null||Tn;var w=wo,O=Tn;wo=b,(Tn=u)&&!O?ha(c,m,(m.subtreeFlags&8772)!==0):_o(c,m),wo=w,Tn=O}x&512&&(m.memoizedProps.mode==="manual"?Nl(m,m.return):vs(m,m.return));break;default:_o(c,m)}}function NC(c){var u=c.alternate;u!==null&&(c.alternate=null,NC(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&Tk(u)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function gr(c,u,m){for(m=m.child;m!==null;)Yx(c,u,m),m=m.sibling}function Yx(c,u,m){if(Ms&&typeof Ms.onCommitFiberUnmount=="function")try{Ms.onCommitFiberUnmount(od,m)}catch{}switch(m.tag){case 26:if(Ws){Tn||vs(m,u),gr(c,u,m),m.memoizedState?UT(m.memoizedState):m.stateNode&&zT(m.stateNode);break}case 27:if(Mi){Tn||vs(m,u);var x=Vn,b=Es;Vn=m.stateNode,gr(c,u,m),RH(m.stateNode),Vn=x,Es=b;break}case 5:Tn||vs(m,u);case 6:if(Si){if(x=Vn,b=Es,Vn=null,gr(c,u,m),Vn=x,Es=b,Vn!==null)if(Es)try{Kk(Vn,m.stateNode)}catch(w){Jt(m,u,w)}else try{Yk(Vn,m.stateNode)}catch(w){Jt(m,u,w)}}else gr(c,u,m);break;case 18:Si&&Vn!==null&&(Es?xH(Vn,m.stateNode):vH(Vn,m.stateNode));break;case 4:Si?(x=Vn,b=Es,Vn=m.stateNode.containerInfo,Es=!0,gr(c,u,m),Vn=x,Es=b):(ga&&OC(m.stateNode,m,wT()),gr(c,u,m));break;case 0:case 11:case 14:case 15:Tn||ua(2,m,u),Tn||ua(4,m,u),gr(c,u,m);break;case 1:Tn||(vs(m,u),x=m.stateNode,typeof x.componentWillUnmount=="function"&&BC(m,u,x)),gr(c,u,m);break;case 21:gr(c,u,m);break;case 22:Tn||vs(m,u),Tn=(x=Tn)||m.memoizedState!==null,gr(c,u,m),Tn=x;break;default:gr(c,u,m)}}function UC(c,u){if(Vs&&u.memoizedState===null&&(c=u.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{yH(c)}catch(m){Jt(u,u.return,m)}}function $z(c){switch(c.tag){case 13:case 19:var u=c.stateNode;return u===null&&(u=c.stateNode=new KT),u;case 22:return c=c.stateNode,u=c._retryCache,u===null&&(u=c._retryCache=new KT),u;default:throw Error(s(435,c.tag))}}function Kx(c,u){var m=$z(c);u.forEach(function(x){var b=ak.bind(null,c,x);m.has(x)||(m.add(x),x.then(b,b))})}function os(c,u){var m=u.deletions;if(m!==null)for(var x=0;x<m.length;x++){var b=m[x],w=c,O=u;if(Si){var W=O;e:for(;W!==null;){switch(W.tag){case 27:case 5:Vn=W.stateNode,Es=!1;break e;case 3:Vn=W.stateNode.containerInfo,Es=!0;break e;case 4:Vn=W.stateNode.containerInfo,Es=!0;break e}W=W.return}if(Vn===null)throw Error(s(160));Yx(w,O,b),Vn=null,Es=!1}else Yx(w,O,b);w=b.alternate,w!==null&&(w.return=null),b.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)FC(u,c),u=u.sibling}function FC(c,u){var m=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:os(u,c),xs(c),x&4&&(ua(3,c,c.return),ed(3,c),ua(5,c,c.return));break;case 1:os(u,c),xs(c),x&512&&(Tn||m===null||vs(m,m.return)),x&64&&wo&&(c=c.updateQueue,c!==null&&(x=c.callbacks,x!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:if(Ws){var b=xr;os(u,c),xs(c),x&512&&(Tn||m===null||vs(m,m.return)),x&4&&(x=m!==null?m.memoizedState:null,u=c.memoizedState,m===null?u===null?c.stateNode===null?c.stateNode=SH(b,c.type,c.memoizedProps,c):FT(b,c.type,c.stateNode):c.stateNode=NT(b,u,c.memoizedProps):x!==u?(x===null?m.stateNode!==null&&zT(m.stateNode):UT(x),u===null?FT(b,c.type,c.stateNode):NT(b,u,c.memoizedProps)):u===null&&c.stateNode!==null&&DC(c,c.memoizedProps,m.memoizedProps));break}case 27:if(Mi&&x&4&&c.alternate===null){b=c.stateNode;var w=c.memoizedProps;try{CH(b),TH(c.type,w,b,c)}catch(Pe){Jt(c,c.return,Pe)}}case 5:if(os(u,c),xs(c),x&512&&(Tn||m===null||vs(m,m.return)),Si){if(c.flags&32){u=c.stateNode;try{ET(u)}catch(Pe){Jt(c,c.return,Pe)}}x&4&&c.stateNode!=null&&(u=c.memoizedProps,DC(c,u,m!==null?m.memoizedProps:u)),x&1024&&(U_=!0)}break;case 6:if(os(u,c),xs(c),x&4&&Si){if(c.stateNode===null)throw Error(s(162));x=c.memoizedProps,m=m!==null?m.memoizedProps:x,u=c.stateNode;try{Vk(u,m,x)}catch(Pe){Jt(c,c.return,Pe)}}break;case 3:if(Ws?(bH(),b=xr,xr=M_(u.containerInfo),os(u,c),xr=b):os(u,c),xs(c),x&4){if(Si&&Vs&&m!==null&&m.memoizedState.isDehydrated)try{gH(u.containerInfo)}catch(Pe){Jt(c,c.return,Pe)}if(ga){x=u.containerInfo,m=u.pendingChildren;try{TT(x,m)}catch(Pe){Jt(c,c.return,Pe)}}}U_&&(U_=!1,zC(c));break;case 4:Ws?(m=xr,xr=M_(c.stateNode.containerInfo),os(u,c),xs(c),xr=m):(os(u,c),xs(c)),x&4&&ga&&OC(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:os(u,c),xs(c);break;case 13:os(u,c),xs(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(H_=yr()),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,Kx(c,x)));break;case 22:x&512&&(Tn||m===null||vs(m,m.return)),b=c.memoizedState!==null;var O=m!==null&&m.memoizedState!==null,W=wo,ne=Tn;if(wo=W||b,Tn=ne||O,os(u,c),Tn=ne,wo=W,xs(c),u=c.stateNode,u._current=c,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,x&8192&&(u._visibility=b?u._visibility&-2:u._visibility|1,b&&(u=wo||Tn,m===null||O||u||Eu(c)),Si&&(c.memoizedProps===null||c.memoizedProps.mode!=="manual"))){e:if(m=null,Si)for(u=c;;){if(u.tag===5||Ws&&u.tag===26||Mi&&u.tag===27){if(m===null){O=m=u;try{w=O.stateNode,b?qk(w):Zk(O.stateNode,O.memoizedProps)}catch(Pe){Jt(O,O.return,Pe)}}}else if(u.tag===6){if(m===null){O=u;try{var ge=O.stateNode;b?Qk(ge):$k(ge,O.memoizedProps)}catch(Pe){Jt(O,O.return,Pe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===c)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}x&4&&(x=c.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,Kx(c,m))));break;case 19:os(u,c),xs(c),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,Kx(c,x)));break;case 21:break;default:os(u,c),xs(c)}}function xs(c){var u=c.flags;if(u&2){try{if(Si&&(!Mi||c.tag!==27)){e:{for(var m=c.return;m!==null;){if(LC(m)){var x=m;break e}m=m.return}throw Error(s(160))}switch(x.tag){case 27:if(Mi){var b=x.stateNode,w=Xx(c);Vm(c,w,b);break}case 5:var O=x.stateNode;x.flags&32&&(ET(O),x.flags&=-33);var W=Xx(c);Vm(c,W,O);break;case 3:case 4:var ne=x.stateNode.containerInfo,ge=Xx(c);Jx(c,ge,ne);break;default:throw Error(s(161))}}}catch(Pe){Jt(c,c.return,Pe)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function zC(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var u=c;zC(u),u.tag===5&&u.flags&1024&&Dk(u.stateNode),c=c.sibling}}function _o(c,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)IC(c,u.alternate,u),u=u.sibling}function Eu(c){for(c=c.child;c!==null;){var u=c;switch(u.tag){case 0:case 11:case 14:case 15:ua(4,u,u.return),Eu(u);break;case 1:vs(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&BC(u,u.return,m),Eu(u);break;case 26:case 27:case 5:vs(u,u.return),Eu(u);break;case 22:vs(u,u.return),u.memoizedState===null&&Eu(u);break;default:Eu(u)}c=c.sibling}}function ha(c,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var x=u.alternate,b=c,w=u,O=w.flags;switch(w.tag){case 0:case 11:case 15:ha(b,w,m),ed(4,w);break;case 1:if(ha(b,w,m),x=w,b=x.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ge){Jt(x,x.return,ge)}if(x=w,b=x.updateQueue,b!==null){var W=x.stateNode;try{var ne=b.shared.hiddenCallbacks;if(ne!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ne.length;b++)Ye(ne[b],W)}catch(ge){Jt(x,x.return,ge)}}m&&O&64&&RC(w),Nl(w,w.return);break;case 26:case 27:case 5:ha(b,w,m),m&&x===null&&O&4&&PC(w),Nl(w,w.return);break;case 12:ha(b,w,m);break;case 13:ha(b,w,m),m&&O&4&&UC(b,w);break;case 22:w.memoizedState===null&&ha(b,w,m),Nl(w,w.return);break;default:ha(b,w,m)}u=u.sibling}}function qx(c,u){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&Zf(m))}function Qx(c,u){c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&Zf(c))}function fa(c,u,m,x){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)kC(c,u,m,x),u=u.sibling}function kC(c,u,m,x){var b=u.flags;switch(u.tag){case 0:case 11:case 15:fa(c,u,m,x),b&2048&&ed(9,u);break;case 3:fa(c,u,m,x),b&2048&&(c=null,u.alternate!==null&&(c=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==c&&(u.refCount++,c!=null&&Zf(c)));break;case 12:if(b&2048){fa(c,u,m,x),c=u.stateNode;try{var w=u.memoizedProps,O=w.id,W=w.onPostCommit;typeof W=="function"&&W(O,u.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ne){Jt(u,u.return,ne)}}else fa(c,u,m,x);break;case 23:break;case 22:w=u.stateNode,u.memoizedState!==null?w._visibility&4?fa(c,u,m,x):td(c,u):w._visibility&4?fa(c,u,m,x):(w._visibility|=4,wu(c,u,m,x,(u.subtreeFlags&10256)!==0)),b&2048&&qx(u.alternate,u);break;case 24:fa(c,u,m,x),b&2048&&Qx(u.alternate,u);break;default:fa(c,u,m,x)}}function wu(c,u,m,x,b){for(b=b&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=c,O=u,W=m,ne=x,ge=O.flags;switch(O.tag){case 0:case 11:case 15:wu(w,O,W,ne,b),ed(8,O);break;case 23:break;case 22:var Pe=O.stateNode;O.memoizedState!==null?Pe._visibility&4?wu(w,O,W,ne,b):td(w,O):(Pe._visibility|=4,wu(w,O,W,ne,b)),b&&ge&2048&&qx(O.alternate,O);break;case 24:wu(w,O,W,ne,b),b&&ge&2048&&Qx(O.alternate,O);break;default:wu(w,O,W,ne,b)}u=u.sibling}}function td(c,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=c,x=u,b=x.flags;switch(x.tag){case 22:td(m,x),b&2048&&qx(x.alternate,x);break;case 24:td(m,x),b&2048&&Qx(x.alternate,x);break;default:td(m,x)}u=u.sibling}}function Ul(c){if(c.subtreeFlags&Xu)for(c=c.child;c!==null;)HC(c),c=c.sibling}function HC(c){switch(c.tag){case 26:Ul(c),c.flags&Xu&&(c.memoizedState!==null?wH(xr,c.memoizedState,c.memoizedProps):bT(c.type,c.memoizedProps));break;case 5:Ul(c),c.flags&Xu&&bT(c.type,c.memoizedProps);break;case 3:case 4:if(Ws){var u=xr;xr=M_(c.stateNode.containerInfo),Ul(c),xr=u}else Ul(c);break;case 22:c.memoizedState===null&&(u=c.alternate,u!==null&&u.memoizedState!==null?(u=Xu,Xu=16777216,Ul(c),Xu=u):Ul(c));break;default:Ul(c)}}function GC(c){var u=c.alternate;if(u!==null&&(c=u.child,c!==null)){u.child=null;do u=c.sibling,c.sibling=null,c=u;while(c!==null)}}function nd(c){var u=c.deletions;if(c.flags&16){if(u!==null)for(var m=0;m<u.length;m++){var x=u[m];ni=x,WC(x,c)}GC(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)VC(c),c=c.sibling}function VC(c){switch(c.tag){case 0:case 11:case 15:nd(c),c.flags&2048&&ua(9,c,c.return);break;case 3:nd(c);break;case 12:nd(c);break;case 22:var u=c.stateNode;c.memoizedState!==null&&u._visibility&4&&(c.return===null||c.return.tag!==13)?(u._visibility&=-5,Wm(c)):nd(c);break;default:nd(c)}}function Wm(c){var u=c.deletions;if(c.flags&16){if(u!==null)for(var m=0;m<u.length;m++){var x=u[m];ni=x,WC(x,c)}GC(c)}for(c=c.child;c!==null;){switch(u=c,u.tag){case 0:case 11:case 15:ua(8,u,u.return),Wm(u);break;case 22:m=u.stateNode,m._visibility&4&&(m._visibility&=-5,Wm(u));break;default:Wm(u)}c=c.sibling}}function WC(c,u){for(;ni!==null;){var m=ni;switch(m.tag){case 0:case 11:case 15:ua(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Zf(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,ni=x;else e:for(m=c;ni!==null;){x=ni;var b=x.sibling,w=x.return;if(NC(x),x===m){ni=null;break e}if(b!==null){b.return=w,ni=b;break e}ni=w}}}function Zx(c){var u=ST(c);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(c=Ik(c),c===null)throw Error(s(362));return c.stateNode.current}function $x(c,u){var m=c.tag;switch(u.$$typeof){case cg:if(c.type===u.value)return!0;break;case ug:e:{for(u=u.value,c=[c,0],m=0;m<c.length;){var x=c[m++],b=x.tag,w=c[m++],O=u[w];if(b!==5&&b!==26&&b!==27||!rd(x)){for(;O!=null&&$x(x,O);)w++,O=u[w];if(w===u.length){u=!0;break e}else for(x=x.child;x!==null;)c.push(x,w),x=x.sibling}}u=!1}return u;case hg:if((m===5||m===26||m===27)&&Fk(c.stateNode,u.value))return!0;break;case dg:if((m===5||m===6||m===26||m===27)&&(c=Uk(c),c!==null&&0<=c.indexOf(u.value)))return!0;break;case fg:if((m===5||m===26||m===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function e_(c){switch(c.$$typeof){case cg:return"<"+(o(c.value)||"Unknown")+">";case ug:return":has("+(e_(c)||"")+")";case hg:return'[role="'+c.value+'"]';case dg:return'"'+c.value+'"';case fg:return'[data-testname="'+c.value+'"]';default:throw Error(s(365))}}function jC(c,u){var m=[];c=[c,0];for(var x=0;x<c.length;){var b=c[x++],w=b.tag,O=c[x++],W=u[O];if(w!==5&&w!==26&&w!==27||!rd(b)){for(;W!=null&&$x(b,W);)O++,W=u[O];if(O===u.length)m.push(b);else for(b=b.child;b!==null;)c.push(b,O),b=b.sibling}}return m}function t_(c,u){if(!sd)throw Error(s(363));c=Zx(c),c=jC(c,u),u=[],c=Array.from(c);for(var m=0;m<c.length;){var x=c[m++],b=x.tag;if(b===5||b===26||b===27)rd(x)||u.push(x.stateNode);else for(x=x.child;x!==null;)c.push(x),x=x.sibling}return u}function _s(){if(Zt&2&&Ut!==0)return Ut&-Ut;if(yt.T!==null){var c=zu;return c!==0?c:Ue()}return wk()}function XC(){Ks===0&&(Ks=!(Ut&536870912)||Gt?L():536870912);var c=Ys.current;return c!==null&&(c.flags|=32),Ks}function Vi(c,u,m){(c===en&&tn===2||c.cancelPendingCommit!==null)&&(Cu(c,0),Ao(c,Ut,Ks,!1)),D(c,m),(!(Zt&2)||c!==en)&&(c===en&&(!(Zt&2)&&(Kl|=m),Rn===4&&Ao(c,Ut,Ks,!1)),P(c))}function JC(c,u,m){if(Zt&6)throw Error(s(327));var x=!m&&(u&60)===0&&(u&c.expiredLanes)===0||T(c,u),b=x?nk(c,u):r_(c,u,!0),w=x;do{if(b===0){Ju&&!x&&Ao(c,u,0,!1);break}else if(b===6)Ao(c,u,0,!Co);else{if(m=c.current.alternate,w&&!ek(m)){b=r_(c,u,!1),w=!1;continue}if(b===2){if(w=u,c.errorRecoveryDisabledLanes&w)var O=0;else O=c.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){u=O;e:{var W=c;b=dd;var ne=Vs&&W.current.memoizedState.isDehydrated;if(ne&&(Cu(W,O).flags|=256),O=r_(W,O,!1),O!==2){if(F_&&!ne){W.errorRecoveryDisabledLanes|=w,Kl|=w,b=4;break e}w=Qr,Qr=b,w!==null&&n_(w)}b=O}if(w=!1,b!==2)continue}}if(b===1){Cu(c,0),Ao(c,u,0,!0);break}e:{switch(x=c,b){case 0:case 1:throw Error(s(345));case 4:if((u&4194176)===u){Ao(x,u,Ks,!Co);break e}break;case 2:Qr=null;break;case 3:case 5:break;default:throw Error(s(329))}if(x.finishedWork=m,x.finishedLanes=u,(u&62914560)===u&&(w=H_+300-yr(),10<w)){if(Ao(x,u,Ks,!Co),R(x,0)!==0)break e;x.timeoutHandle=Mk(YC.bind(null,x,m,Qr,pg,k_,u,Ks,Kl,Yu,Co,2,-0,0),w);break e}YC(x,m,Qr,pg,k_,u,Ks,Kl,Yu,Co,0,-0,0)}}break}while(!0);P(c)}function n_(c){Qr===null?Qr=c:Qr.push.apply(Qr,c)}function YC(c,u,m,x,b,w,O,W,ne,ge,Pe,Ve,Ke){var At=u.subtreeFlags;if((At&8192||(At&16785408)===16785408)&&(Bk(),HC(u),u=Pk(),u!==null)){c.cancelPendingCommit=u(iT.bind(null,c,m,x,b,O,W,ne,1,Ve,Ke)),Ao(c,w,O,!ge);return}iT(c,m,x,b,O,W,ne,Pe,Ve,Ke)}function ek(c){for(var u=c;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var b=m[x],w=b.getSnapshot;b=b.value;try{if(!bs(w(),b))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ao(c,u,m,x){u&=~z_,u&=~Kl,c.suspendedLanes|=u,c.pingedLanes&=~u,x&&(c.warmLanes|=u),x=c.expirationTimes;for(var b=u;0<b;){var w=31-Ss(b),O=1<<w;x[w]=-1,b&=~O}m!==0&&$(c,m,u)}function KC(){return Zt&6?!0:(ee(0),!1)}function i_(){if(Dt!==null){if(tn===0)var c=Dt.return;else c=Dt,Eo=Jl=null,oe(c),Gu=null,ud=0,c=Dt;for(;c!==null;)TC(c.alternate,c),c=c.return;Dt=null}}function Cu(c,u){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;m!==__&&(c.timeoutHandle=__,bk(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),i_(),en=c,Dt=m=da(c.current,null),Ut=u,tn=0,ws=null,Co=!1,Ju=T(c,u),F_=!1,Yu=Ks=z_=Kl=Aa=Rn=0,Qr=dd=null,k_=!1,u&8&&(u|=u&32);var x=c.entangledLanes;if(x!==0)for(c=c.entanglements,x&=u;0<x;){var b=31-Ss(x),w=1<<b;u|=c[b],x&=~w}return To=u,he(),m}function qC(c,u){Ct=null,yt.H=qr,u===cd?(u=tt(),tn=3):u===L_?(u=tt(),tn=4):tn=u===JT?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ws=u,Dt===null&&(Rn=1,Fm(c,X(u,c.current)))}function QC(){var c=Ys.current;return c===null?!0:(Ut&4194176)===Ut?Kr===null:(Ut&62914560)===Ut||Ut&536870912?c===Kr:!1}function ZC(){var c=yt.H;return yt.H=qr,c===null?qr:c}function $C(){var c=yt.A;return yt.A=VH,c}function s_(){Rn=4,Co||(Ut&4194176)!==Ut&&Ys.current!==null||(Ju=!0),!(Aa&134217727)&&!(Kl&134217727)||en===null||Ao(en,Ut,Ks,!1)}function r_(c,u,m){var x=Zt;Zt|=2;var b=ZC(),w=$C();(en!==c||Ut!==u)&&(pg=null,Cu(c,u)),u=!1;var O=Rn;e:do try{if(tn!==0&&Dt!==null){var W=Dt,ne=ws;switch(tn){case 8:i_(),O=6;break e;case 3:case 2:case 6:Ys.current===null&&(u=!0);var ge=tn;if(tn=0,ws=null,Tu(c,W,ne,ge),m&&Ju){O=0;break e}break;default:ge=tn,tn=0,ws=null,Tu(c,W,ne,ge)}}tk(),O=Rn;break}catch(Pe){qC(c,Pe)}while(!0);return u&&c.shellSuspendCounter++,Eo=Jl=null,Zt=x,yt.H=b,yt.A=w,Dt===null&&(en=null,Ut=0,he()),O}function tk(){for(;Dt!==null;)eT(Dt)}function nk(c,u){var m=Zt;Zt|=2;var x=ZC(),b=$C();en!==c||Ut!==u?(pg=null,pd=yr()+500,Cu(c,u)):Ju=T(c,u);e:do try{if(tn!==0&&Dt!==null){u=Dt;var w=ws;t:switch(tn){case 1:tn=0,ws=null,Tu(c,u,w,1);break;case 2:if(be(w)){tn=0,ws=null,tT(u);break}u=function(){tn===2&&en===c&&(tn=7),P(c)},w.then(u,u);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:be(w)?(tn=0,ws=null,tT(u)):(tn=0,ws=null,Tu(c,u,w,7));break;case 5:var O=null;switch(Dt.tag){case 26:O=Dt.memoizedState;case 5:case 27:var W=Dt,ne=W.type,ge=W.pendingProps;if(O?kT(O):MT(ne,ge)){tn=0,ws=null;var Pe=W.sibling;if(Pe!==null)Dt=Pe;else{var Ve=W.return;Ve!==null?(Dt=Ve,jm(Ve)):Dt=null}break t}}tn=0,ws=null,Tu(c,u,w,5);break;case 6:tn=0,ws=null,Tu(c,u,w,6);break;case 8:i_(),Rn=6;break e;default:throw Error(s(462))}}ik();break}catch(Ke){qC(c,Ke)}while(!0);return Eo=Jl=null,yt.H=x,yt.A=b,Zt=m,Dt!==null?0:(en=null,Ut=0,he(),Rn)}function ik(){for(;Dt!==null&&!DH();)eT(Dt)}function eT(c){var u=AC(c.alternate,c,To);c.memoizedProps=c.pendingProps,u===null?jm(c):Dt=u}function tT(c){var u=c,m=u.alternate;switch(u.tag){case 15:case 0:u=mC(m,u,u.pendingProps,u.type,void 0,Ut);break;case 11:u=mC(m,u,u.pendingProps,u.type.render,u.ref,Ut);break;case 5:oe(u);default:TC(m,u),u=Dt=aT(u,To),u=AC(m,u,To)}c.memoizedProps=c.pendingProps,u===null?jm(c):Dt=u}function Tu(c,u,m,x){Eo=Jl=null,oe(u),Gu=null,ud=0;var b=u.return;try{if(Yz(c,b,u,m,Ut)){Rn=1,Fm(c,X(m,c.current)),Dt=null;return}}catch(w){if(b!==null)throw Dt=b,w;Rn=1,Fm(c,X(m,c.current)),Dt=null;return}u.flags&32768?(Gt||x===1?c=!0:Ju||Ut&536870912?c=!1:(Co=c=!0,(x===2||x===3||x===6)&&(x=Ys.current,x!==null&&x.tag===13&&(x.flags|=16384))),nT(u,c)):jm(u)}function jm(c){var u=c;do{if(u.flags&32768){nT(u,Co);return}c=u.return;var m=qz(u.alternate,u,To);if(m!==null){Dt=m;return}if(u=u.sibling,u!==null){Dt=u;return}Dt=u=c}while(u!==null);Rn===0&&(Rn=5)}function nT(c,u){do{var m=Qz(c.alternate,c);if(m!==null){m.flags&=32767,Dt=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(c=c.sibling,c!==null)){Dt=c;return}Dt=c=m}while(c!==null);Rn=6,Dt=null}function iT(c,u,m,x,b,w,O,W,ne,ge){var Pe=yt.T,Ve=kl();try{as(2),yt.T=null,sk(c,u,m,x,Ve,b,w,O,W,ne,ge)}finally{yt.T=Pe,as(Ve)}}function sk(c,u,m,x,b,w,O,W){do Fl();while(ql!==null);if(Zt&6)throw Error(s(327));var ne=c.finishedWork;if(x=c.finishedLanes,ne===null)return null;if(c.finishedWork=null,c.finishedLanes=0,ne===c.current)throw Error(s(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var ge=ne.lanes|ne.childLanes;if(ge|=T_,te(c,x,ge,w,O,W),c===en&&(Dt=en=null,Ut=0),!(ne.subtreeFlags&10256)&&!(ne.flags&10256)||mg||(mg=!0,G_=ge,V_=m,lk(w_,function(){return Fl(),null})),m=(ne.flags&15990)!==0,ne.subtreeFlags&15990||m?(m=yt.T,yt.T=null,w=kl(),as(2),O=Zt,Zt|=4,Zz(c,ne),FC(ne,c),Ak(c.containerInfo),c.current=ne,IC(c,ne.alternate,ne),LH(),Zt=O,as(w),yt.T=m):c.current=ne,mg?(mg=!1,ql=c,md=x):sT(c,ge),ge=c.pendingLanes,ge===0&&(Sa=null),H(ne.stateNode),P(c),u!==null)for(b=c.onRecoverableError,ne=0;ne<u.length;ne++)ge=u[ne],b(ge.value,{componentStack:ge.stack});return md&3&&Fl(),ge=c.pendingLanes,x&4194218&&ge&42?c===W_?gd++:(gd=0,W_=c):gd=0,ee(0),null}function sT(c,u){(c.pooledCacheLanes&=u)===0&&(u=c.pooledCache,u!=null&&(c.pooledCache=null,Zf(u)))}function Fl(){if(ql!==null){var c=ql,u=G_;G_=0;var m=q(md),x=32>m?32:m;m=yt.T;var b=kl();try{if(as(x),yt.T=null,ql===null)var w=!1;else{x=V_,V_=null;var O=ql,W=md;if(ql=null,md=0,Zt&6)throw Error(s(331));var ne=Zt;if(Zt|=4,VC(O.current),kC(O,O.current,W,x),Zt=ne,ee(0,!1),Ms&&typeof Ms.onPostCommitFiberRoot=="function")try{Ms.onPostCommitFiberRoot(od,O)}catch{}w=!0}return w}finally{as(b),yt.T=m,sT(c,u)}}return!1}function rT(c,u,m){u=X(m,u),u=Bx(c.stateNode,u,2),c=et(c,u,2),c!==null&&(D(c,2),P(c))}function Jt(c,u,m){if(c.tag===3)rT(c,c,m);else for(;u!==null;){if(u.tag===3){rT(u,c,m);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Sa===null||!Sa.has(x))){c=X(m,c),m=lC(2),x=et(u,m,2),x!==null&&(cC(m,x,u,c),D(x,2),P(x));break}}u=u.return}}function o_(c,u,m){var x=c.pingCache;if(x===null){x=c.pingCache=new WH;var b=new Set;x.set(u,b)}else b=x.get(u),b===void 0&&(b=new Set,x.set(u,b));b.has(m)||(F_=!0,b.add(m),c=rk.bind(null,c,u,m),u.then(c,c))}function rk(c,u,m){var x=c.pingCache;x!==null&&x.delete(u),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,en===c&&(Ut&m)===m&&(Rn===4||Rn===3&&(Ut&62914560)===Ut&&300>yr()-H_?!(Zt&2)&&Cu(c,0):z_|=m,Yu===Ut&&(Yu=0)),P(c)}function oT(c,u){u===0&&(u=F()),c=Ge(c,u),c!==null&&(D(c,u),P(c))}function ok(c){var u=c.memoizedState,m=0;u!==null&&(m=u.retryLane),oT(c,m)}function ak(c,u){var m=0;switch(c.tag){case 13:var x=c.stateNode,b=c.memoizedState;b!==null&&(m=b.retryLane);break;case 19:x=c.stateNode;break;case 22:x=c.stateNode._retryCache;break;default:throw Error(s(314))}x!==null&&x.delete(u),oT(c,m)}function lk(c,u){return Zm(c,u)}function ck(c,u,m,x){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function a_(c){return c=c.prototype,!(!c||!c.isReactComponent)}function da(c,u){var m=c.alternate;return m===null?(m=t(c.tag,u,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=u,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&31457280,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,u=c.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function aT(c,u){c.flags&=31457282;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=u,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,u=m.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),c}function Xm(c,u,m,x,b,w){var O=0;if(x=c,typeof c=="function")a_(c)&&(O=1);else if(typeof c=="string")O=Ws&&Mi?OT(c,m,fi.current)?26:GT(c)?27:5:Ws?OT(c,m,fi.current)?26:5:Mi&&GT(c)?27:5;else e:switch(c){case Bu:return zl(m.children,b,w,u);case pT:O=8,b|=24;break;case f_:return c=t(12,m,u,b|2),c.elementType=f_,c.lanes=w,c;case p_:return c=t(13,m,u,b),c.elementType=p_,c.lanes=w,c;case m_:return c=t(19,m,u,b),c.elementType=m_,c.lanes=w,c;case gT:return lT(m,b,w,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case dk:case pa:O=10;break e;case mT:O=9;break e;case d_:O=11;break e;case g_:O=14;break e;case ma:O=16,x=null;break e}O=29,m=Error(s(130,c===null?"null":typeof c,"")),x=null}return u=t(O,m,u,b),u.elementType=c,u.type=x,u.lanes=w,u}function zl(c,u,m,x){return c=t(7,c,x,u),c.lanes=m,c}function lT(c,u,m,x){c=t(22,c,x,u),c.elementType=gT,c.lanes=m;var b={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var w=b._current;if(w===null)throw Error(s(456));if(!(b._pendingVisibility&2)){var O=Ge(w,2);O!==null&&(b._pendingVisibility|=2,Vi(O,w,2))}},attach:function(){var w=b._current;if(w===null)throw Error(s(456));if(b._pendingVisibility&2){var O=Ge(w,2);O!==null&&(b._pendingVisibility&=-3,Vi(O,w,2))}}};return c.stateNode=b,c}function l_(c,u,m){return c=t(6,c,null,u),c.lanes=m,c}function c_(c,u,m){return u=t(4,c.children!==null?c.children:[],c.key,u),u.lanes=m,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function uk(c,u,m,x,b,w,O,W){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=__,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C(0),this.hiddenUpdates=C(null),this.identifierPrefix=x,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function cT(c,u,m,x,b,w,O,W,ne,ge,Pe,Ve){return c=new uk(c,u,m,O,W,ne,ge,Ve),u=1,w===!0&&(u|=24),w=t(3,null,null,u),c.current=w,w.stateNode=c,u=Hx(),u.refCount++,c.pooledCache=u,u.refCount++,w.memoizedState={element:x,isDehydrated:m,cache:u},Rt(w),c}function uT(c){return c?(c=Lu,c):Lu}function hT(c){var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(s(188)):(c=Object.keys(c).join(","),Error(s(268,c)));return c=g(u),c=c!==null?v(c):null,c===null?null:id(c.stateNode)}function fT(c,u,m,x,b,w){b=uT(b),x.context===null?x.context=b:x.pendingContext=b,x=rt(u),x.payload={element:m},w=w===void 0?null:w,w!==null&&(x.callback=w),m=et(c,x,u),m!==null&&(Vi(m,c,u),Je(m,c,u))}function dT(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<u?m:u}}function u_(c,u){dT(c,u),(c=c.alternate)&&dT(c,u)}var Pt={},hk=fe,As=jb,h_=Object.assign,fk=Symbol.for("react.element"),Jm=Symbol.for("react.transitional.element"),Ru=Symbol.for("react.portal"),Bu=Symbol.for("react.fragment"),pT=Symbol.for("react.strict_mode"),f_=Symbol.for("react.profiler"),dk=Symbol.for("react.provider"),mT=Symbol.for("react.consumer"),pa=Symbol.for("react.context"),d_=Symbol.for("react.forward_ref"),p_=Symbol.for("react.suspense"),m_=Symbol.for("react.suspense_list"),g_=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),gT=Symbol.for("react.offscreen"),pk=Symbol.for("react.memo_cache_sentinel"),yT=Symbol.iterator,mk=Symbol.for("react.client.reference"),yt=hk.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,y_,vT,v_=!1,Ym=Array.isArray,gk=e.rendererVersion,yk=e.rendererPackageName,xT=e.extraDevToolsConfig,id=e.getPublicInstance,vk=e.getRootHostContext,xk=e.getChildHostContext,_k=e.prepareForCommit,Ak=e.resetAfterCommit,Sk=e.createInstance,x_=e.appendInitialChild,_T=e.finalizeInitialChildren,Km=e.shouldSetTextContent,AT=e.createTextInstance,Mk=e.scheduleTimeout,bk=e.cancelTimeout,__=e.noTimeout,So=e.isPrimaryRenderer;e.warnsIfNotActing;var Si=e.supportsMutation,ga=e.supportsPersistence,Vs=e.supportsHydration,ST=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Ek=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var as=e.setCurrentUpdatePriority,kl=e.getCurrentUpdatePriority,wk=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Ck=e.shouldAttemptEagerTransition,Tk=e.detachDeletedInstance;e.requestPostPaintCallback;var Rk=e.maySuspendCommit,MT=e.preloadInstance,Bk=e.startSuspendingCommit,bT=e.suspendInstance,Pk=e.waitForCommitToBeReady,Pu=e.NotPendingTransition,Hl=e.HostTransitionContext,Dk=e.resetFormInstance;e.bindToConsole;var Lk=e.supportsMicrotasks,Ok=e.scheduleMicrotask,sd=e.supportsTestSelectors,Ik=e.findFiberRoot,Nk=e.getBoundingRect,Uk=e.getTextContent,rd=e.isHiddenSubtree,Fk=e.matchAccessibilityRole,zk=e.setFocusIfFocusable,kk=e.setupIntersectionObserver,Hk=e.appendChild,Gk=e.appendChildToContainer,Vk=e.commitTextUpdate,Wk=e.commitMount,jk=e.commitUpdate,Xk=e.insertBefore,Jk=e.insertInContainerBefore,Yk=e.removeChild,Kk=e.removeChildFromContainer,ET=e.resetTextContent,qk=e.hideInstance,Qk=e.hideTextInstance,Zk=e.unhideInstance,$k=e.unhideTextInstance,eH=e.clearContainer,tH=e.cloneInstance,wT=e.createContainerChildSet,CT=e.appendChildToContainerChildSet,nH=e.finalizeContainerChildren,TT=e.replaceContainerChildren,RT=e.cloneHiddenInstance,BT=e.cloneHiddenTextInstance,A_=e.isSuspenseInstancePending,S_=e.isSuspenseInstanceFallback,iH=e.getSuspenseInstanceFallbackErrorDetails,sH=e.registerSuspenseInstanceRetry,rH=e.canHydrateFormStateMarker,oH=e.isFormStateMarkerMatching,PT=e.getNextHydratableSibling,DT=e.getFirstHydratableChild,aH=e.getFirstHydratableChildWithinContainer,lH=e.getFirstHydratableChildWithinSuspenseInstance,cH=e.canHydrateInstance,uH=e.canHydrateTextInstance,hH=e.canHydrateSuspenseInstance,fH=e.hydrateInstance,dH=e.hydrateTextInstance,pH=e.hydrateSuspenseInstance,mH=e.getNextHydratableInstanceAfterSuspenseInstance,gH=e.commitHydratedContainer,yH=e.commitHydratedSuspenseInstance,vH=e.clearSuspenseBoundary,xH=e.clearSuspenseBoundaryFromContainer,LT=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var _H=e.validateHydratableInstance,AH=e.validateHydratableTextInstance,Ws=e.supportsResources,OT=e.isHostHoistableType,M_=e.getHoistableRoot,IT=e.getResource,NT=e.acquireResource,UT=e.releaseResource,SH=e.hydrateHoistable,FT=e.mountHoistable,zT=e.unmountHoistable,MH=e.createHoistableInstance,bH=e.prepareToCommitHoistables,EH=e.mayResourceSuspendCommit,kT=e.preloadResource,wH=e.suspendResource,Mi=e.supportsSingletons,HT=e.resolveSingletonInstance,CH=e.clearSingleton,TH=e.acquireSingletonInstance,RH=e.releaseSingletonInstance,GT=e.isHostSingletonType,b_=[],Du=-1,Lu={},Ss=Math.clz32?Math.clz32:M,BH=Math.log,PH=Math.LN2,qm=128,Qm=4194304,Zm=As.unstable_scheduleCallback,E_=As.unstable_cancelCallback,DH=As.unstable_shouldYield,LH=As.unstable_requestPaint,yr=As.unstable_now,VT=As.unstable_ImmediatePriority,OH=As.unstable_UserBlockingPriority,w_=As.unstable_NormalPriority,IH=As.unstable_IdlePriority,NH=As.log,UH=As.unstable_setDisableYieldValue,od=null,Ms=null,bs=typeof Object.is=="function"?Object.is:V,WT=new WeakMap,Ou=[],Iu=0,$m=null,eg=0,js=[],Xs=0,Gl=null,Mo=1,bo="",fi=_(null),ad=_(null),ya=_(null),tg=_(null),Wi=null,bi=null,Gt=!1,vr=null,Yr=!1,C_=Error(s(519)),Js=[],Nu=0,T_=0,ng=null,Uu=null,R_=!1,ig=!1,B_=!1,Fu=0,ld=null,P_=0,zu=0,ku=null,va=!1,D_=!1,FH=Object.prototype.hasOwnProperty,cd=Error(s(460)),L_=Error(s(474)),sg={then:function(){}},Hu=null,Gu=null,ud=0,Vl=Nt(!0),jT=Nt(!1),Vu=_(null),rg=_(0),Ys=_(null),Kr=null,Yn=_(0),xa=0,Ct=null,Qt=null,Gn=null,og=!1,Wu=!1,Wl=!1,ag=0,hd=0,ju=null,zH=0,O_=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},qr={readContext:Ai,use:ht,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn};qr.useCacheRefresh=pn,qr.useMemoCache=pn,qr.useHostTransitionStatus=pn,qr.useFormState=pn,qr.useActionState=pn,qr.useOptimistic=pn;var jl={readContext:Ai,use:ht,useCallback:function(c,u){return De().memoizedState=[c,u===void 0?null:u],c},useContext:Ai,useEffect:Ww,useImperativeHandle:function(c,u,m){m=m!=null?m.concat([c]):null,Im(4194308,4,Jw.bind(null,u,c),m)},useLayoutEffect:function(c,u){return Im(4194308,4,c,u)},useInsertionEffect:function(c,u){Im(4,2,c,u)},useMemo:function(c,u){var m=De();u=u===void 0?null:u;var x=c();if(Wl){Y(!0);try{c()}finally{Y(!1)}}return m.memoizedState=[x,u],x},useReducer:function(c,u,m){var x=De();if(m!==void 0){var b=m(u);if(Wl){Y(!0);try{m(u)}finally{Y(!1)}}}else b=u;return x.memoizedState=x.baseState=b,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:b},x.queue=c,c=c.dispatch=Jz.bind(null,Ct,c),[x.memoizedState,c]},useRef:function(c){var u=De();return c={current:c},u.memoizedState=c},useState:function(c){c=mr(c);var u=c.queue,m=nC.bind(null,Ct,u);return u.dispatch=m,[c.memoizedState,m]},useDebugValue:Ex,useDeferredValue:function(c,u){var m=De();return wx(m,c,u)},useTransition:function(){var c=mr(!1);return c=Zw.bind(null,Ct,c.queue,!0,!1),De().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,u,m){var x=Ct,b=De();if(Gt){if(m===void 0)throw Error(s(407));m=m()}else{if(m=u(),en===null)throw Error(s(349));Ut&60||Gs(x,u,m)}b.memoizedState=m;var w={value:m,getSnapshot:u};return b.queue=w,Ww(bt.bind(null,x,w,c),[c]),x.flags|=2048,bu(9,$t.bind(null,x,w,m,u),{destroy:void 0},null),m},useId:function(){var c=De(),u=en.identifierPrefix;if(Gt){var m=bo,x=Mo;m=(x&~(1<<32-Ss(x)-1)).toString(32)+m,u=":"+u+"R"+m,m=ag++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=zH++,u=":"+u+"r"+m.toString(32)+":";return c.memoizedState=u},useCacheRefresh:function(){return De().memoizedState=Xz.bind(null,Ct)}};jl.useMemoCache=_t,jl.useHostTransitionStatus=Cx,jl.useFormState=Om,jl.useActionState=Om,jl.useOptimistic=function(c){var u=De();u.memoizedState=u.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=Tx.bind(null,Ct,!0,m),m.dispatch=u,[c,u]};var _a={readContext:Ai,use:ht,useCallback:Kw,useContext:Ai,useEffect:bx,useImperativeHandle:Yw,useInsertionEffect:jw,useLayoutEffect:Xw,useMemo:qw,useReducer:gt,useRef:Vw,useState:function(){return gt(at)},useDebugValue:Ex,useDeferredValue:function(c,u){var m=ke();return Qw(m,Qt.memoizedState,c,u)},useTransition:function(){var c=gt(at)[0],u=ke().memoizedState;return[typeof c=="boolean"?c:ot(c),u]},useSyncExternalStore:Nn,useId:eC};_a.useCacheRefresh=tC,_a.useMemoCache=_t,_a.useHostTransitionStatus=Cx,_a.useFormState=Yf,_a.useActionState=Yf,_a.useOptimistic=function(c,u){var m=ke();return Jf(m,Qt,c,u)};var Xl={readContext:Ai,use:ht,useCallback:Kw,useContext:Ai,useEffect:bx,useImperativeHandle:Yw,useInsertionEffect:jw,useLayoutEffect:Xw,useMemo:qw,useReducer:ui,useRef:Vw,useState:function(){return ui(at)},useDebugValue:Ex,useDeferredValue:function(c,u){var m=ke();return Qt===null?wx(m,c,u):Qw(m,Qt.memoizedState,c,u)},useTransition:function(){var c=ui(at)[0],u=ke().memoizedState;return[typeof c=="boolean"?c:ot(c),u]},useSyncExternalStore:Nn,useId:eC};Xl.useCacheRefresh=tC,Xl.useMemoCache=_t,Xl.useHostTransitionStatus=Cx,Xl.useFormState=Gw,Xl.useActionState=Gw,Xl.useOptimistic=function(c,u){var m=ke();return Qt!==null?Jf(m,Qt,c,u):(m.baseState=c,[c,m.queue.dispatch])};var I_={isMounted:function(c){return(c=c._reactInternals)?d(c)===c:!1},enqueueSetState:function(c,u,m){c=c._reactInternals;var x=_s(),b=rt(x);b.payload=u,m!=null&&(b.callback=m),u=et(c,b,x),u!==null&&(Vi(u,c,x),Je(u,c,x))},enqueueReplaceState:function(c,u,m){c=c._reactInternals;var x=_s(),b=rt(x);b.tag=1,b.payload=u,m!=null&&(b.callback=m),u=et(c,b,x),u!==null&&(Vi(u,c,x),Je(u,c,x))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var m=_s(),x=rt(m);x.tag=2,u!=null&&(x.callback=u),u=et(c,x,m),u!==null&&(Vi(u,c,m),Je(u,c,m))}},XT=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},JT=Error(s(461)),ti=!1,N_={dehydrated:null,treeContext:null,retryLane:0},lg=_(null),Jl=null,Eo=null,kH=typeof AbortController<"u"?AbortController:function(){var c=[],u=this.signal={aborted:!1,addEventListener:function(m,x){c.push(x)}};this.abort=function(){u.aborted=!0,c.forEach(function(m){return m()})}},HH=As.unstable_scheduleCallback,GH=As.unstable_NormalPriority,Cn={$$typeof:pa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},YT=yt.S;yt.S=function(c,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&it(c,u),YT!==null&&YT(c,u)};var Yl=_(null),wo=!1,Tn=!1,U_=!1,KT=typeof WeakSet=="function"?WeakSet:Set,ni=null,qT=!1,Vn=null,Es=!1,xr=null,Xu=8192,VH={getCacheForType:function(c){var u=Ai(Cn),m=u.data.get(c);return m===void 0&&(m=c(),u.data.set(c,m)),m}},cg=0,ug=1,hg=2,fg=3,dg=4;if(typeof Symbol=="function"&&Symbol.for){var fd=Symbol.for;cg=fd("selector.component"),ug=fd("selector.has_pseudo_class"),hg=fd("selector.role"),fg=fd("selector.test_id"),dg=fd("selector.text")}var WH=typeof WeakMap=="function"?WeakMap:Map,Zt=0,en=null,Dt=null,Ut=0,tn=0,ws=null,Co=!1,Ju=!1,F_=!1,To=0,Rn=0,Aa=0,Kl=0,z_=0,Ks=0,Yu=0,dd=null,Qr=null,k_=!1,H_=0,pd=1/0,pg=null,Sa=null,mg=!1,ql=null,md=0,G_=0,V_=null,gd=0,W_=null;return Pt.attemptContinuousHydration=function(c){if(c.tag===13){var u=Ge(c,67108864);u!==null&&Vi(u,c,67108864),u_(c,67108864)}},Pt.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var u=_s(),m=Ge(c,u);m!==null&&Vi(m,c,u),u_(c,u)}},Pt.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var u=E(c.pendingLanes);if(u!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;u;){var m=1<<31-Ss(u);c.entanglements[1]|=m,u&=~m}P(c),!(Zt&6)&&(pd=yr()+500,ee(0))}}break;case 13:u=Ge(c,2),u!==null&&Vi(u,c,2),KC(),u_(c,2)}},Pt.batchedUpdates=function(c,u){return c(u)},Pt.createComponentSelector=function(c){return{$$typeof:cg,value:c}},Pt.createContainer=function(c,u,m,x,b,w,O,W,ne,ge){return cT(c,u,!1,null,m,x,w,O,W,ne,ge,null)},Pt.createHasPseudoClassSelector=function(c){return{$$typeof:ug,value:c}},Pt.createHydrationContainer=function(c,u,m,x,b,w,O,W,ne,ge,Pe,Ve,Ke){return c=cT(m,x,!0,c,b,w,W,ne,ge,Pe,Ve,Ke),c.context=uT(null),m=c.current,x=_s(),b=rt(x),b.callback=u??null,et(m,b,x),c.current.lanes=x,D(c,x),P(c),c},Pt.createPortal=function(c,u,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ru,key:x==null?null:""+x,children:c,containerInfo:u,implementation:m}},Pt.createRoleSelector=function(c){return{$$typeof:hg,value:c}},Pt.createTestNameSelector=function(c){return{$$typeof:fg,value:c}},Pt.createTextSelector=function(c){return{$$typeof:dg,value:c}},Pt.defaultOnCaughtError=function(c){console.error(c)},Pt.defaultOnRecoverableError=function(c){XT(c)},Pt.defaultOnUncaughtError=function(c){XT(c)},Pt.deferredUpdates=function(c){var u=yt.T,m=kl();try{return as(32),yt.T=null,c()}finally{as(m),yt.T=u}},Pt.discreteUpdates=function(c,u,m,x,b){var w=yt.T,O=kl();try{return as(2),yt.T=null,c(u,m,x,b)}finally{as(O),yt.T=w,Zt===0&&(pd=yr()+500)}},Pt.findAllNodes=t_,Pt.findBoundingRects=function(c,u){if(!sd)throw Error(s(363));u=t_(c,u),c=[];for(var m=0;m<u.length;m++)c.push(Nk(u[m]));for(u=c.length-1;0<u;u--){m=c[u];for(var x=m.x,b=x+m.width,w=m.y,O=w+m.height,W=u-1;0<=W;W--)if(u!==W){var ne=c[W],ge=ne.x,Pe=ge+ne.width,Ve=ne.y,Ke=Ve+ne.height;if(x>=ge&&w>=Ve&&b<=Pe&&O<=Ke){c.splice(u,1);break}else if(x!==ge||m.width!==ne.width||Ke<w||Ve>O){if(!(w!==Ve||m.height!==ne.height||Pe<x||ge>b)){ge>x&&(ne.width+=ge-x,ne.x=x),Pe<b&&(ne.width=b-ge),c.splice(u,1);break}}else{Ve>w&&(ne.height+=Ve-w,ne.y=w),Ke<O&&(ne.height=O-Ve),c.splice(u,1);break}}}return c},Pt.findHostInstance=hT,Pt.findHostInstanceWithNoPortals=function(c){return c=g(c),c=c!==null?S(c):null,c===null?null:id(c.stateNode)},Pt.findHostInstanceWithWarning=function(c){return hT(c)},Pt.flushPassiveEffects=Fl,Pt.flushSyncFromReconciler=function(c){var u=Zt;Zt|=1;var m=yt.T,x=kl();try{if(as(2),yt.T=null,c)return c()}finally{as(x),yt.T=m,Zt=u,!(Zt&6)&&ee(0)}},Pt.flushSyncWork=KC,Pt.focusWithin=function(c,u){if(!sd)throw Error(s(363));for(c=Zx(c),u=jC(c,u),u=Array.from(u),c=0;c<u.length;){var m=u[c++],x=m.tag;if(!rd(m)){if((x===5||x===26||x===27)&&zk(m.stateNode))return!0;for(m=m.child;m!==null;)u.push(m),m=m.sibling}}return!1},Pt.getFindAllNodesFailureDescription=function(c,u){if(!sd)throw Error(s(363));var m=0,x=[];c=[Zx(c),0];for(var b=0;b<c.length;){var w=c[b++],O=w.tag,W=c[b++],ne=u[W];if((O!==5&&O!==26&&O!==27||!rd(w))&&($x(w,ne)&&(x.push(e_(ne)),W++,W>m&&(m=W)),W<u.length))for(w=w.child;w!==null;)c.push(w,W),w=w.sibling}if(m<u.length){for(c=[];m<u.length;m++)c.push(e_(u[m]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},Pt.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return id(c.child.stateNode);default:return c.child.stateNode}},Pt.injectIntoDevTools=function(){var c={bundleType:0,version:gk,rendererPackageName:yk,currentDispatcherRef:yt,findFiberByHostInstance:ST,reconcilerVersion:"19.0.0"};if(xT!==null&&(c.rendererConfig=xT),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)c=!0;else{try{od=u.inject(c),Ms=u}catch{}c=!!u.checkDCE}}return c},Pt.isAlreadyRendering=function(){return!1},Pt.observeVisibleRects=function(c,u,m,x){if(!sd)throw Error(s(363));c=t_(c,u);var b=kk(c,m,x).disconnect;return{disconnect:function(){b()}}},Pt.shouldError=function(){return null},Pt.shouldSuspend=function(){return!1},Pt.startHostTransition=function(c,u,m,x){if(c.tag!==5)throw Error(s(476));var b=$w(c).queue;Zw(c,b,u,Pu,m===null?i:function(){var w=$w(c).next.queue;return Kf(c,w,{},_s()),m(x)})},Pt.updateContainer=function(c,u,m,x){var b=u.current,w=_s();return fT(b,w,c,u,m,x),w},Pt.updateContainerSync=function(c,u,m,x){return u.tag===0&&Fl(),fT(u.current,2,c,u,m,x),2},Pt},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(vF);var tQ=vF.exports;yF.exports=tQ;var nQ=yF.exports;const iQ=gE(nQ);function Ew(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=Ew(i,e,t);if(s)return s;i=e?null:i.sibling}}function AF(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const ww=AF(fe.createContext(null));class SF extends fe.Component{render(){return fe.createElement(ww.Provider,{value:this._reactInternals},this.props.children)}}function MF(){const n=fe.useContext(ww);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=fe.useId();return fe.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=Ew(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(i)return i}},[n,e])}const sQ=Symbol.for("react.context"),rQ=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===sQ;function oQ(){const n=MF(),[e]=fe.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;rQ(i)&&i!==ww&&!e.has(i)&&e.set(i,fe.use(AF(i))),t=t.return}return e}function aQ(){const n=oQ();return fe.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>fe.createElement(e,null,fe.createElement(t.Provider,{...i,value:n.get(t)})),e=>fe.createElement(SF,{...e})),[n])}function bF(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const EF=n=>n&&n.isOrthographicCamera,lQ=n=>n&&n.hasOwnProperty("current"),cQ=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),Em=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?fe.useLayoutEffect:fe.useEffect;function wF(n){const e=fe.useRef(n);return Em(()=>void(e.current=n),[n]),e}function uQ(){const n=MF(),e=aQ();return fe.useMemo(()=>({children:t})=>{const s=!!Ew(n,!0,r=>r.type===fe.StrictMode)?fe.StrictMode:fe.Fragment;return re.jsx(s,{children:re.jsx(e,{children:t})})},[n,e])}function hQ({set:n}){return Em(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const fQ=(n=>(n=class extends fe.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function CF(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function vh(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const mn={obj:n=>n===Object(n)&&!mn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(mn.str(n)||mn.num(n)||mn.boo(n))return n===e;const r=mn.obj(n);if(r&&i==="reference")return n===e;const o=mn.arr(n);if(o&&t==="reference")return n===e;if((o||r)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(r&&t==="shallow"&&i==="shallow"){for(a in s?e:n)if(!mn.equ(n[a],e[a],{strict:s,objects:"reference"}))return!1}else for(a in s?e:n)if(n[a]!==e[a])return!1;if(mn.und(a)){if(o&&n.length===0&&e.length===0||r&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function dQ(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function pQ(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const TF=["children","key","ref"];function mQ(n){const e={};for(const t in n)TF.includes(t)||(e[t]=n[t]);return e}function t0(n,e,t,i){const s=n;let r=s==null?void 0:s.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:mQ(i),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function tm(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const s of i){if(typeof t!="object"||t===null){if(t!==void 0){const r=i.slice(i.indexOf(s)).join("-");return{root:t,key:r,target:void 0}}return{root:n,key:e,target:void 0}}e=s,n=t,t=t[e]}return{root:n,key:e,target:t}}const GP=/-\d+$/;function n0(n,e){if(mn.str(e.props.attach)){if(GP.test(e.props.attach)){const s=e.props.attach.replace(GP,""),{root:r,key:o}=tm(n.object,s);Array.isArray(r[o])||(r[o]=[])}const{root:t,key:i}=tm(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else mn.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function i0(n,e){if(mn.str(e.props.attach)){const{root:t,key:i}=tm(n.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[i]:t[i]=s}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const Xb=[...TF,"args","dispose","attach","object","onUpdate","dispose"],VP=new Map;function gQ(n){let e=VP.get(n.constructor);try{e||(e=new n.constructor,VP.set(n.constructor,e))}catch{}return e}function yQ(n,e){const t={};for(const i in e)if(!Xb.includes(i)&&!mn.equ(e[i],n.props[i])){t[i]=e[i];for(const s in e)s.startsWith(`${i}-`)&&(t[s]=e[s])}for(const i in n.props){if(Xb.includes(i)||e.hasOwnProperty(i))continue;const{root:s,key:r}=tm(n.object,i);if(s.constructor&&s.constructor.length===0){const o=gQ(s);mn.und(o)||(t[r]=o[r])}else t[r]=0}return t}const vQ=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],xQ=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ga(n,e){var t;const i=n.__r3f,s=i&&bF(i).getState(),r=i==null?void 0:i.eventCount;for(const a in e){let l=e[a];if(Xb.includes(a))continue;if(i&&xQ.test(a)){typeof l=="function"?i.handlers[a]=l:delete i.handlers[a],i.eventCount=Object.keys(i.handlers).length;continue}if(l===void 0)continue;let{root:h,key:f,target:d}=tm(n,a);if(d===void 0&&(typeof h!="object"||h===null))throw Error(`R3F: Cannot set "${a}". Ensure it is an object before setting "${f}".`);if(d instanceof wf&&l instanceof wf)d.mask=l.mask;else if(d instanceof He&&cQ(l))d.set(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof d.copy=="function"&&l!=null&&l.constructor&&d.constructor===l.constructor)d.copy(l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&Array.isArray(l))typeof d.fromArray=="function"?d.fromArray(l):d.set(...l);else if(d!==null&&typeof d=="object"&&typeof d.set=="function"&&typeof l=="number")typeof d.setScalar=="function"?d.setScalar(l):d.set(l);else{var o;h[f]=l,s&&!s.linear&&vQ.includes(f)&&(o=h[f])!=null&&o.isTexture&&h[f].format===qi&&h[f].type===ho&&(h[f].colorSpace=Fn)}}if(i!=null&&i.parent&&s!=null&&s.internal&&(t=i.object)!=null&&t.isObject3D&&r!==i.eventCount){const a=i.object,l=s.internal.interaction.indexOf(a);l>-1&&s.internal.interaction.splice(l,1),i.eventCount&&a.raycast!==null&&s.internal.interaction.push(a)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Vf(i),n}function Vf(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function _Q(n,e){n.manual||(EF(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Ki=n=>n==null?void 0:n.isObject3D;function Ty(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function RF(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function AQ(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{RF(t.capturedMap,e,i,s)})}function SQ(n){function e(l){const{internal:h}=n.getState(),f=l.offsetX-h.initialClick[0],d=l.offsetY-h.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function t(l){return l.filter(h=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=h.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function i(l,h){const f=n.getState(),d=new Set,p=[],g=h?h(f.internal.interaction):f.internal.interaction;for(let y=0;y<g.length;y++){const A=vh(g[y]);A&&(A.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function v(y){const A=vh(y);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var M;A.events.compute==null||A.events.compute(l,A,(M=A.previousRoot)==null?void 0:M.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(y,!0):[]}let S=g.flatMap(v).sort((y,A)=>{const M=vh(y.object),E=vh(A.object);return!M||!E?y.distance-A.distance:E.events.priority-M.events.priority||y.distance-A.distance}).filter(y=>{const A=Ty(y);return d.has(A)?!1:(d.add(A),!0)});f.events.filter&&(S=f.events.filter(S,f));for(const y of S){let A=y.object;for(;A;){var _;(_=A.__r3f)!=null&&_.eventCount&&p.push({...y,eventObject:A}),A=A.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let y of f.internal.capturedMap.get(l.pointerId).values())d.has(Ty(y.intersection))||p.push(y.intersection);return p}function s(l,h,f,d){if(l.length){const p={stopped:!1};for(const g of l){let v=vh(g.object);if(v||g.object.traverseAncestors(S=>{const _=vh(S);if(_)return v=_,!1}),v){const{raycaster:S,pointer:_,camera:y,internal:A}=v,M=new U(_.x,_.y,0).unproject(y),E=F=>{var C,D;return(C=(D=A.capturedMap.get(F))==null?void 0:D.has(g.eventObject))!=null?C:!1},R=F=>{const C={intersection:g,target:h.target};A.capturedMap.has(F)?A.capturedMap.get(F).set(g.eventObject,C):A.capturedMap.set(F,new Map([[g.eventObject,C]])),h.target.setPointerCapture(F)},T=F=>{const C=A.capturedMap.get(F);C&&RF(A.capturedMap,g.eventObject,C,F)};let B={};for(let F in h){let C=h[F];typeof C!="function"&&(B[F]=C)}let L={...g,...B,pointer:_,intersections:l,stopped:p.stopped,delta:f,unprojectedPoint:M,ray:S.ray,camera:y,stopPropagation(){const F="pointerId"in h&&A.capturedMap.get(h.pointerId);if((!F||F.has(g.eventObject))&&(L.stopped=p.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(C=>C.eventObject===g.eventObject))){const C=l.slice(0,l.indexOf(g));r([...C,g])}},target:{hasPointerCapture:E,setPointerCapture:R,releasePointerCapture:T},currentTarget:{hasPointerCapture:E,setPointerCapture:R,releasePointerCapture:T},nativeEvent:h};if(d(L),p.stopped===!0)break}}}return l}function r(l){const{internal:h}=n.getState();for(const f of h.hovered.values())if(!l.length||!l.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const p=f.eventObject.__r3f;if(h.hovered.delete(Ty(f)),p!=null&&p.eventCount){const g=p.handlers,v={...f,intersections:l};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function o(l,h){for(let f=0;f<h.length;f++){const d=h[f].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return h=>{const{internal:f}=n.getState();"pointerId"in h&&f.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(h.pointerId)&&(f.capturedMap.delete(h.pointerId),r([]))})}}return function(f){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=f;const g=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(f,g?t:void 0),y=v?e(f):0;l==="onPointerDown"&&(p.initialClick=[f.offsetX,f.offsetY],p.initialHits=_.map(M=>M.eventObject)),v&&!_.length&&y<=2&&(o(f,p.interaction),d&&d(f)),g&&r(_);function A(M){const E=M.eventObject,R=E.__r3f;if(!(R!=null&&R.eventCount))return;const T=R.handlers;if(g){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const B=Ty(M),L=p.hovered.get(B);L?L.stopped&&M.stopPropagation():(p.hovered.set(B,M),T.onPointerOver==null||T.onPointerOver(M),T.onPointerEnter==null||T.onPointerEnter(M))}T.onPointerMove==null||T.onPointerMove(M)}else{const B=T[l];B?(!v||p.initialHits.includes(E))&&(o(f,p.interaction.filter(L=>!p.initialHits.includes(L))),B(M)):v&&p.initialHits.includes(E)&&o(f,p.interaction.filter(L=>!p.initialHits.includes(L)))}}s(_,f,y,A)}}return{handlePointer:a}}const WP=n=>!!(n!=null&&n.render),BF=fe.createContext(null),MQ=(n,e)=>{const t=qq((a,l)=>{const h=new U,f=new U,d=new U;function p(y=l().camera,A=f,M=l().size){const{width:E,height:R,top:T,left:B}=M,L=E/R;A.isVector3?d.copy(A):d.set(...A);const F=y.getWorldPosition(h).distanceTo(d);if(EF(y))return{width:E/y.zoom,height:R/y.zoom,top:T,left:B,factor:1,distance:F,aspect:L};{const C=y.fov*Math.PI/180,D=2*Math.tan(C/2)*F,te=D*(E/R);return{width:te,height:D,top:T,left:B,factor:E/te,distance:F,aspect:L}}}let g;const v=y=>a(A=>({performance:{...A.performance,current:y}})),S=new pe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(y=1)=>n(l(),y),advance:(y,A)=>e(y,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Aw,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();g&&clearTimeout(g),y.performance.current!==y.performance.min&&v(y.performance.min),g=setTimeout(()=>v(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:y=>a(A=>({...A,events:{...A.events,...y}})),setSize:(y,A,M=0,E=0)=>{const R=l().camera,T={width:y,height:A,top:M,left:E};a(B=>({size:T,viewport:{...B.viewport,...p(R,f,T)}}))},setDpr:y=>a(A=>{const M=CF(y);return{viewport:{...A.viewport,dpr:M,initialDpr:A.viewport.initialDpr||M}}}),setFrameloop:(y="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,y!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:fe.createRef(),active:!1,frames:0,priority:0,subscribe:(y,A,M)=>{const E=l().internal;return E.priority=E.priority+(A>0?1:0),E.subscribers.push({ref:y,priority:A,store:M}),E.subscribers=E.subscribers.sort((R,T)=>R.priority-T.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(A>0?1:0),R.subscribers=R.subscribers.filter(T=>T.ref!==y))}}}}}),i=t.getState();let s=i.size,r=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:h,gl:f,set:d}=t.getState();if(l.width!==s.width||l.height!==s.height||h.dpr!==r){s=l,r=h.dpr,_Q(a,l),h.dpr>0&&f.setPixelRatio(h.dpr);const p=typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,p)}a!==o&&(o=a,d(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function PF(){const n=fe.useContext(BF);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Io(n=t=>t,e){return PF()(n,e)}function Cw(n,e=0){const t=PF(),i=t.getState().internal.subscribe,s=wF(n);return Em(()=>i(s,e,t),[e,i,t]),null}const jP=new WeakMap,bQ=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function DF(n,e){return function(t,...i){let s;return bQ(t)?(s=jP.get(t),s||(s=new t,jP.set(t,s))):s=t,n&&n(s),Promise.all(i.map(r=>new Promise((o,a)=>s.load(r,l=>{Ki(l==null?void 0:l.scene)&&Object.assign(l,dQ(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${r}: ${l==null?void 0:l.message}`))))))}}function wm(n,e,t,i){const s=Array.isArray(e)?e:[e],r=Zq(DF(t,i),[n,...s],{equal:mn.equ});return Array.isArray(e)?r:r[0]}wm.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return $q(DF(t),[n,...i])};wm.clear=function(n,e){const t=Array.isArray(e)?e:[e];return eQ([n,...t])};function EQ(n){const e=iQ(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:fe.version}),e}const LF=0,Bf={},wQ=/^three(?=[A-Z])/,gx=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let CQ=0;const TQ=n=>typeof n=="function";function RQ(n){if(TQ(n)){const e=`${CQ++}`;return Bf[e]=n,e}else Object.assign(Bf,n)}function OF(n,e){const t=gx(n),i=Bf[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function BQ(n,e,t){var i;return n=gx(n)in Bf?n:n.replace(wQ,""),OF(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,t0(e.object,t,n,e)}function PQ(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?i0(n.parent,n):Ki(n.object)&&(n.object.visible=!1),n.isHidden=!0,Vf(n)}}function IF(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?n0(n.parent,n):Ki(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Vf(n)}}function Tw(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var s,r;const o=Bf[gx(e.type)];e.object=(s=e.props.object)!=null?s:new o(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(Ga(e.object,e.props),e.props.attach)n0(n,e);else if(Ki(e.object)&&Ki(n.object)){const o=n.object.children.indexOf(t==null?void 0:t.object);if(t&&o!==-1){const a=n.object.children.indexOf(e.object);if(a!==-1){n.object.children.splice(a,1);const l=a<o?o-1:o;n.object.children.splice(l,0,e.object)}else e.object.parent=n.object,n.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const o of e.children)Tw(e,o);Vf(e)}}function dS(n,e){e&&(e.parent=n,n.children.push(e),Tw(n,e))}function XP(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),Tw(n,e,t)}function NF(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():jb.unstable_scheduleCallback(jb.unstable_IdlePriority,e)}}function Jb(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?i0(n,e):Ki(e.object)&&Ki(n.object)&&(n.object.remove(e.object),AQ(bF(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const o=e.children[r];Jb(e,o,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&NF(e.object),t===void 0&&Vf(e)}function DQ(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const hv=[];function LQ(){for(const[t]of hv){const i=t.parent;if(i){t.props.attach?i0(i,t):Ki(t.object)&&Ki(i.object)&&i.object.remove(t.object);for(const s of t.children)s.props.attach?i0(t,s):Ki(s.object)&&Ki(t.object)&&t.object.remove(s.object)}t.isHidden&&IF(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&NF(t.object)}for(const[t,i,s]of hv){t.props=i;const r=t.parent;if(r){var n,e;const o=Bf[gx(t.type)];t.object=(n=t.props.object)!=null?n:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,DQ(s,t.object),Ga(t.object,t.props),t.props.attach?n0(r,t):Ki(t.object)&&Ki(r.object)&&r.object.add(t.object);for(const a of t.children)a.props.attach?n0(t,a):Ki(a.object)&&Ki(t.object)&&t.object.add(a.object);Vf(t)}}hv.length=0}const pS=()=>{},JP={};let Ry=LF;const OQ=0,IQ=4,Yb=EQ({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:BQ,removeChild:Jb,appendChild:dS,appendInitialChild:dS,insertBefore:XP,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||dS(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||Jb(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||XP(i,e,t)},getRootHostContext:()=>JP,getChildHostContext:()=>JP,commitUpdate(n,e,t,i,s){var r,o,a;OF(e,i);let l=!1;if((n.type==="primitive"&&t.object!==i.object||((r=i.args)==null?void 0:r.length)!==((o=t.args)==null?void 0:o.length)||(a=i.args)!=null&&a.some((f,d)=>{var p;return f!==((p=t.args)==null?void 0:p[d])}))&&(l=!0),l)hv.push([n,{...i},s]);else{const f=yQ(n,i);Object.keys(f).length&&(Object.assign(n.props,f),Ga(n.object,f))}(s.sibling===null||(s.flags&IQ)===OQ)&&LQ()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>t0(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:PQ,unhideInstance:IF,createTextInstance:pS,hideTextInstance:pS,unhideTextInstance:pS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:fe.createContext(null),setCurrentUpdatePriority(n){Ry=n},getCurrentUpdatePriority(){return Ry},resolveUpdatePriority(){var n;if(Ry!==LF)return Ry;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return iv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return iv.ContinuousEventPriority;default:return iv.DefaultEventPriority}},resetFormInstance(){}}),ou=new Map,xh={objects:"shallow",strict:!1};function NQ(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:s,left:r}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function UQ(n){const e=ou.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=i||MQ(Qb,KP),o=t||Yb.createContainer(r,iv.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||ou.set(n,{fiber:o,store:r});let a,l,h=!1,f=null;return{async configure(d={}){let p;f=new Promise(K=>p=K);let{gl:g,size:v,scene:S,events:_,onCreated:y,shadows:A=!1,linear:M=!1,flat:E=!1,legacy:R=!1,orthographic:T=!1,frameloop:B="always",dpr:L=[1,2],performance:F,raycaster:C,camera:D,onPointerMissed:te}=d,$=r.getState(),k=$.gl;if(!$.gl){const K={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ae=typeof g=="function"?await g(K):g;WP(ae)?k=ae:k=new $1({...K,...g}),$.set({gl:k})}let q=$.raycaster;q||$.set({raycaster:q=new lF});const{params:H,...Y}=C||{};if(mn.equ(Y,q,xh)||Ga(q,{...Y}),mn.equ(H,q.params,xh)||Ga(q,{params:{...q.params,...H}}),!$.camera||$.camera===l&&!mn.equ(l,D,xh)){l=D;const K=D==null?void 0:D.isCamera,ae=K?D:T?new Or(0,0,0,0,.1,1e3):new vn(75,0,.1,1e3);K||(ae.position.z=5,D&&(Ga(ae,D),ae.manual||("aspect"in D||"left"in D||"right"in D||"bottom"in D||"top"in D)&&(ae.manual=!0,ae.updateProjectionMatrix())),!$.camera&&!(D!=null&&D.rotation)&&ae.lookAt(0,0,0)),$.set({camera:ae}),q.camera=ae}if(!$.scene){let K;S!=null&&S.isScene?(K=S,t0(K,r,"",{})):(K=new ew,t0(K,r,"",{}),S&&Ga(K,S)),$.set({scene:K})}_&&!$.events.handlers&&$.set({events:_(r)});const V=NQ(n,v);if(mn.equ(V,$.size,xh)||$.setSize(V.width,V.height,V.top,V.left),L&&$.viewport.dpr!==CF(L)&&$.setDpr(L),$.frameloop!==B&&$.setFrameloop(B),$.onPointerMissed||$.set({onPointerMissed:te}),F&&!mn.equ(F,$.performance,xh)&&$.set(K=>({performance:{...K.performance,...F}})),!$.xr){var X;const K=(Q,de)=>{const Ce=r.getState();Ce.frameloop!=="never"&&KP(Q,!0,Ce,de)},ae=()=>{const Q=r.getState();Q.gl.xr.enabled=Q.gl.xr.isPresenting,Q.gl.xr.setAnimationLoop(Q.gl.xr.isPresenting?K:null),Q.gl.xr.isPresenting||Qb(Q)},Be={connect(){const Q=r.getState().gl;Q.xr.addEventListener("sessionstart",ae),Q.xr.addEventListener("sessionend",ae)},disconnect(){const Q=r.getState().gl;Q.xr.removeEventListener("sessionstart",ae),Q.xr.removeEventListener("sessionend",ae)}};typeof((X=k.xr)==null?void 0:X.addEventListener)=="function"&&Be.connect(),$.set({xr:Be})}if(k.shadowMap){const K=k.shadowMap.enabled,ae=k.shadowMap.type;if(k.shadowMap.enabled=!!A,mn.boo(A))k.shadowMap.type=hp;else if(mn.str(A)){var J;const Be={basic:rN,percentage:H0,soft:hp,variance:wr};k.shadowMap.type=(J=Be[A])!=null?J:hp}else mn.obj(A)&&Object.assign(k.shadowMap,A);(K!==k.shadowMap.enabled||ae!==k.shadowMap.type)&&(k.shadowMap.needsUpdate=!0)}return Xt.enabled=!R,h||(k.outputColorSpace=M?Ur:Fn,k.toneMapping=E?uo:D1),$.legacy!==R&&$.set(()=>({legacy:R})),$.linear!==M&&$.set(()=>({linear:M})),$.flat!==E&&$.set(()=>({flat:E})),g&&!mn.fun(g)&&!WP(g)&&!mn.equ(g,k,xh)&&Ga(k,g),a=y,h=!0,p(),this},render(d){return!h&&!f&&this.configure(),f.then(()=>{Yb.updateContainer(re.jsx(FQ,{store:r,children:d,onCreated:a,rootElement:n}),o,null,()=>{})}),r},unmount(){UF(n)}}}function FQ({store:n,children:e,onCreated:t,rootElement:i}){return Em(()=>{const s=n.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),re.jsx(BF.Provider,{value:n,children:e})}function UF(n,e){const t=ou.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),Yb.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var r,o,a,l;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(o=r.renderLists)==null||o.dispose==null||o.dispose(),(a=s.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=s.gl)!=null&&l.xr&&s.xr.disconnect(),pQ(s.scene),ou.delete(n)}catch{}},500)})}}const zQ=new Set,kQ=new Set,HQ=new Set;function mS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function mp(n,e){switch(n){case"before":return mS(zQ,e);case"after":return mS(kQ,e);case"tail":return mS(HQ,e)}}let gS,yS;function Kb(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),gS=e.internal.subscribers;for(let s=0;s<gS.length;s++)yS=gS[s],yS.ref.current(yS.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let s0=!1,qb=!1,vS,YP,_h;function FF(n){YP=requestAnimationFrame(FF),s0=!0,vS=0,mp("before",n),qb=!0;for(const t of ou.values()){var e;_h=t.store.getState(),_h.internal.active&&(_h.frameloop==="always"||_h.internal.frames>0)&&!((e=_h.gl.xr)!=null&&e.isPresenting)&&(vS+=Kb(n,_h))}if(qb=!1,mp("after",n),vS===0)return mp("tail",n),s0=!1,cancelAnimationFrame(YP)}function Qb(n,e=1){var t;if(!n)return ou.forEach(i=>Qb(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):qb?n.internal.frames=2:n.internal.frames=1,s0||(s0=!0,requestAnimationFrame(FF)))}function KP(n,e=!0,t,i){if(e&&mp("before",n),t)Kb(n,t,i);else for(const s of ou.values())Kb(n,s.store.getState());e&&mp("after",n)}const xS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function GQ(n){const{handlePointer:e}=SQ(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(xS).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:i,events:s}=n.getState();if(s.disconnect==null||s.disconnect(),i(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const o=s.handlers[r],[a,l]=xS[r];t.addEventListener(a,o,{passive:l})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const s in i.handlers){const r=i.handlers[s],[o]=xS[s];i.connected.removeEventListener(o,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function qP(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function VQ({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,o]=fe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=fe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,h=n?typeof n=="number"?n:n.resize:null,f=fe.useRef(!1);fe.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,p,g]=fe.useMemo(()=>{const y=()=>{if(!a.current.element)return;const{left:A,top:M,width:E,height:R,bottom:T,right:B,x:L,y:F}=a.current.element.getBoundingClientRect(),C={left:A,top:M,width:E,height:R,bottom:T,right:B,x:L,y:F};a.current.element instanceof HTMLElement&&i&&(C.height=a.current.element.offsetHeight,C.width=a.current.element.offsetWidth),Object.freeze(C),f.current&&!JQ(a.current.lastBounds,C)&&o(a.current.lastBounds=C)};return[y,h?qP(y,h):y,l?qP(y,l):y]},[o,i,l,h]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function S(){a.current.element&&(a.current.resizeObserver=new s(g),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(y=>y.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=y=>{!y||y===a.current.element||(v(),a.current.element=y,a.current.scrollContainers=zF(y),S())};return jQ(g,!!e),WQ(p),fe.useEffect(()=>{v(),S()},[e,g,p]),fe.useEffect(()=>v,[]),[_,r,d]}function WQ(n){fe.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function jQ(n,e){fe.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function zF(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(r=>r==="auto"||r==="scroll")&&e.push(n),[...e,...zF(n.parentElement)]}const XQ=["x","y","top","bottom","left","right","width","height"],JQ=(n,e)=>XQ.every(t=>n[t]===e[t]);function YQ({ref:n,children:e,fallback:t,resize:i,style:s,gl:r,events:o=GQ,eventSource:a,eventPrefix:l,shadows:h,linear:f,flat:d,legacy:p,orthographic:g,frameloop:v,dpr:S,performance:_,raycaster:y,camera:A,scene:M,onPointerMissed:E,onCreated:R,...T}){fe.useMemo(()=>RQ(wq),[]);const B=uQ(),[L,F]=VQ({scroll:!0,debounce:{scroll:50,resize:0},...i}),C=fe.useRef(null),D=fe.useRef(null);fe.useImperativeHandle(n,()=>C.current);const te=wF(E),[$,k]=fe.useState(!1),[q,H]=fe.useState(!1);if($)throw $;if(q)throw q;const Y=fe.useRef(null);Em(()=>{const X=C.current;if(F.width>0&&F.height>0&&X){Y.current||(Y.current=UQ(X));async function J(){await Y.current.configure({gl:r,scene:M,events:o,shadows:h,linear:f,flat:d,legacy:p,orthographic:g,frameloop:v,dpr:S,performance:_,raycaster:y,camera:A,size:F,onPointerMissed:(...K)=>te.current==null?void 0:te.current(...K),onCreated:K=>{K.events.connect==null||K.events.connect(a?lQ(a)?a.current:a:D.current),l&&K.setEvents({compute:(ae,Be)=>{const Q=ae[l+"X"],de=ae[l+"Y"];Be.pointer.set(Q/Be.size.width*2-1,-(de/Be.size.height)*2+1),Be.raycaster.setFromCamera(Be.pointer,Be.camera)}}),R==null||R(K)}}),Y.current.render(re.jsx(B,{children:re.jsx(fQ,{set:H,children:re.jsx(fe.Suspense,{fallback:re.jsx(hQ,{set:k}),children:e??null})})}))}J()}}),fe.useEffect(()=>{const X=C.current;if(X)return()=>UF(X)},[]);const V=a?"none":"auto";return re.jsx("div",{ref:D,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...s},...T,children:re.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:re.jsx("canvas",{ref:C,style:{display:"block"},children:t})})})}function kF(n){return re.jsx(SF,{children:re.jsx(YQ,{...n})})}function KQ(){const n=fe.useRef();return Cw((e,t)=>{n.current&&(n.current.rotation.y+=t*.2)}),re.jsxs("mesh",{ref:n,position:[0,0,0],children:[re.jsx("torusKnotGeometry",{args:[1.2,.28,128,32]}),re.jsx("meshStandardMaterial",{color:"#8b5cf6",emissive:"#22d3ee",emissiveIntensity:.4,metalness:.6,roughness:.2})]})}function qQ(){return re.jsxs(kF,{camera:{position:[0,0,6],fov:50},style:{width:"100%",height:"100%"},children:[re.jsx("ambientLight",{intensity:.6}),re.jsx("pointLight",{color:"#8b5cf6",intensity:.6,position:[-5,5,5]}),re.jsx("pointLight",{color:"#22d3ee",intensity:.4,position:[5,-5,5]}),re.jsx(KQ,{})]})}function r0(){return r0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},r0.apply(null,arguments)}const Cm=new U,Rw=new U,QQ=new U,QP=new pe;function ZQ(n,e,t){const i=Cm.setFromMatrixPosition(n.matrixWorld);i.project(e);const s=t.width/2,r=t.height/2;return[i.x*s+s,-(i.y*r)+r]}function $Q(n,e){const t=Cm.setFromMatrixPosition(n.matrixWorld),i=Rw.setFromMatrixPosition(e.matrixWorld),s=t.sub(i),r=e.getWorldDirection(QQ);return s.angleTo(r)>Math.PI/2}function eZ(n,e,t,i){const s=Cm.setFromMatrixPosition(n.matrixWorld),r=s.clone();r.project(e),QP.set(r.x,r.y),t.setFromCamera(QP,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return s.distanceTo(t.ray.origin)<a}return!0}function tZ(n,e){if(e instanceof Or)return e.zoom;if(e instanceof vn){const t=Cm.setFromMatrixPosition(n.matrixWorld),i=Rw.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,r=t.distanceTo(i);return 1/(2*Math.tan(s/2)*r)}else return 1}function nZ(n,e,t){if(e instanceof vn||e instanceof Or){const i=Cm.setFromMatrixPosition(n.matrixWorld),s=Rw.setFromMatrixPosition(e.matrixWorld),r=i.distanceTo(s),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*r+a)}}const Zb=n=>Math.abs(n)<1e-10?0:n;function HF(n,e,t=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=Zb(e[s]*n.elements[s])+(s!==15?",":")");return t+i}const iZ=(n=>e=>HF(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),sZ=(n=>(e,t)=>HF(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function rZ(n){return n&&typeof n=="object"&&"current"in n}const oZ=fe.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:s,center:r,fullscreen:o,portal:a,distanceFactor:l,sprite:h=!1,transform:f=!1,occlude:d,onOcclude:p,castShadow:g,receiveShadow:v,material:S,geometry:_,zIndexRange:y=[16777271,0],calculatePosition:A=ZQ,as:M="div",wrapperClass:E,pointerEvents:R="auto",...T},B)=>{const{gl:L,camera:F,scene:C,size:D,raycaster:te,events:$,viewport:k}=Io(),[q]=fe.useState(()=>document.createElement(M)),H=fe.useRef(),Y=fe.useRef(null),V=fe.useRef(0),X=fe.useRef([0,0]),J=fe.useRef(null),K=fe.useRef(null),ae=(a==null?void 0:a.current)||$.connected||L.domElement.parentNode,Be=fe.useRef(null),Q=fe.useRef(!1),de=fe.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&rZ(d[0]),[d]);fe.useLayoutEffect(()=>{const Ze=L.domElement;d&&d==="blending"?(Ze.style.zIndex=`${Math.floor(y[0]/2)}`,Ze.style.position="absolute",Ze.style.pointerEvents="none"):(Ze.style.zIndex=null,Ze.style.position=null,Ze.style.pointerEvents=null)},[d]),fe.useLayoutEffect(()=>{if(Y.current){const Ze=H.current=PI(q);if(C.updateMatrixWorld(),f)q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ee=A(Y.current,F,D);q.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ee[0]}px,${Ee[1]}px,0);transform-origin:0 0;`}return ae&&(s?ae.prepend(q):ae.appendChild(q)),()=>{ae&&ae.removeChild(q),Ze.unmount()}}},[ae,f]),fe.useLayoutEffect(()=>{E&&(q.className=E)},[E]);const Ce=fe.useMemo(()=>f?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:r?"translate3d(-50%,-50%,0)":"none",...o&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height},...t},[t,r,o,D,f]),ze=fe.useMemo(()=>({position:"absolute",pointerEvents:R}),[R]);fe.useLayoutEffect(()=>{if(Q.current=!1,f){var Ze;(Ze=H.current)==null||Ze.render(fe.createElement("div",{ref:J,style:Ce},fe.createElement("div",{ref:K,style:ze},fe.createElement("div",{ref:B,className:i,style:t,children:n}))))}else{var Ee;(Ee=H.current)==null||Ee.render(fe.createElement("div",{ref:B,style:Ce,className:i,children:n}))}});const We=fe.useRef(!0);Cw(Ze=>{if(Y.current){F.updateMatrixWorld(),Y.current.updateWorldMatrix(!0,!1);const Ee=f?X.current:A(Y.current,F,D);if(f||Math.abs(V.current-F.zoom)>e||Math.abs(X.current[0]-Ee[0])>e||Math.abs(X.current[1]-Ee[1])>e){const G=$Q(Y.current,F);let Ae=!1;de&&(Array.isArray(d)?Ae=d.map(Ge=>Ge.current):d!=="blending"&&(Ae=[C]));const he=We.current;if(Ae){const Ge=eZ(Y.current,F,te,Ae);We.current=Ge&&!G}else We.current=!G;he!==We.current&&(p?p(!We.current):q.style.display=We.current?"block":"none");const Me=Math.floor(y[0]/2),me=d?de?[y[0],Me]:[Me-1,0]:y;if(q.style.zIndex=`${nZ(Y.current,F,me)}`,f){const[Ge,Ne]=[D.width/2,D.height/2],I=F.projectionMatrix.elements[5]*Ne,{isOrthographicCamera:P,top:ee,left:_e,bottom:xe,right:ve}=F,qe=iZ(F.matrixWorldInverse),Oe=P?`scale(${I})translate(${Zb(-(ve+_e)/2)}px,${Zb((ee+xe)/2)}px)`:`translateZ(${I}px)`;let Ue=Y.current.matrixWorld;h&&(Ue=F.matrixWorldInverse.clone().transpose().copyPosition(Ue).scale(Y.current.scale),Ue.elements[3]=Ue.elements[7]=Ue.elements[11]=0,Ue.elements[15]=1),q.style.width=D.width+"px",q.style.height=D.height+"px",q.style.perspective=P?"":`${I}px`,J.current&&K.current&&(J.current.style.transform=`${Oe}${qe}translate(${Ge}px,${Ne}px)`,K.current.style.transform=sZ(Ue,1/((l||10)/400)))}else{const Ge=l===void 0?1:tZ(Y.current,F)*l;q.style.transform=`translate3d(${Ee[0]}px,${Ee[1]}px,0) scale(${Ge})`}X.current=Ee,V.current=F.zoom}}if(!de&&Be.current&&!Q.current)if(f){if(J.current){const Ee=J.current.children[0];if(Ee!=null&&Ee.clientWidth&&Ee!=null&&Ee.clientHeight){const{isOrthographicCamera:G}=F;if(G||_)T.scale&&(Array.isArray(T.scale)?T.scale instanceof U?Be.current.scale.copy(T.scale.clone().divideScalar(1)):Be.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):Be.current.scale.setScalar(1/T.scale));else{const Ae=(l||10)/400,he=Ee.clientWidth*Ae,Me=Ee.clientHeight*Ae;Be.current.scale.set(he,Me,1)}Q.current=!0}}}else{const Ee=q.children[0];if(Ee!=null&&Ee.clientWidth&&Ee!=null&&Ee.clientHeight){const G=1/k.factor,Ae=Ee.clientWidth*G,he=Ee.clientHeight*G;Be.current.scale.set(Ae,he,1),Q.current=!0}Be.current.lookAt(Ze.camera.position)}});const Xe=fe.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return fe.createElement("group",r0({},T,{ref:Y}),d&&!de&&fe.createElement("mesh",{castShadow:g,receiveShadow:v,ref:Be},_||fe.createElement("planeGeometry",null),S||fe.createElement("shaderMaterial",{side:rr,vertexShader:Xe.vertexShader,fragmentShader:Xe.fragmentShader})))}),aZ=n=>n;function lZ(n,e=aZ){const t=io.useSyncExternalStore(n.subscribe,io.useCallback(()=>e(n.getState()),[n,e]),io.useCallback(()=>e(n.getInitialState()),[n,e]));return io.useDebugValue(t),t}const ZP=n=>{const e=pF(n),t=i=>lZ(e,i);return Object.assign(t,e),t},cZ=n=>n?ZP(n):ZP;let zd=0;const uZ=cZ(n=>(Wh.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-zd)/(i-zd)*100})},Wh.onLoad=()=>{n({active:!1})},Wh.onError=e=>n(t=>({errors:[...t.errors,e]})),Wh.onProgress=(e,t,i)=>{t===i&&(zd=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-zd)/(i-zd)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),hZ=parseInt(dm.replace(/\D+/g,""));function $P(n,e){if(e===YN)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Qv||e===H1){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(t)if(e===Qv)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var fZ=Object.defineProperty,dZ=(n,e,t)=>e in n?fZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pZ=(n,e,t)=>(dZ(n,e+"",t),t);let mZ=class{constructor(){pZ(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}};var gZ=Object.defineProperty,yZ=(n,e,t)=>e in n?gZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lt=(n,e,t)=>(yZ(n,typeof e!="symbol"?e+"":e,t),t);const By=new mu,eD=new zo,vZ=Math.cos(70*(Math.PI/180)),tD=(n,e)=>(n%e+e)%e;let xZ=class extends mZ{constructor(e,t){super(),lt(this,"object"),lt(this,"domElement"),lt(this,"enabled",!0),lt(this,"target",new U),lt(this,"minDistance",0),lt(this,"maxDistance",1/0),lt(this,"minZoom",0),lt(this,"maxZoom",1/0),lt(this,"minPolarAngle",0),lt(this,"maxPolarAngle",Math.PI),lt(this,"minAzimuthAngle",-1/0),lt(this,"maxAzimuthAngle",1/0),lt(this,"enableDamping",!1),lt(this,"dampingFactor",.05),lt(this,"enableZoom",!0),lt(this,"zoomSpeed",1),lt(this,"enableRotate",!0),lt(this,"rotateSpeed",1),lt(this,"enablePan",!0),lt(this,"panSpeed",1),lt(this,"screenSpacePanning",!0),lt(this,"keyPanSpeed",7),lt(this,"zoomToCursor",!1),lt(this,"autoRotate",!1),lt(this,"autoRotateSpeed",2),lt(this,"reverseOrbit",!1),lt(this,"reverseHorizontalOrbit",!1),lt(this,"reverseVerticalOrbit",!1),lt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),lt(this,"mouseButtons",{LEFT:xc.ROTATE,MIDDLE:xc.DOLLY,RIGHT:xc.PAN}),lt(this,"touches",{ONE:_c.ROTATE,TWO:_c.DOLLY_PAN}),lt(this,"target0"),lt(this,"position0"),lt(this,"zoom0"),lt(this,"_domElementKeyEvents",null),lt(this,"getPolarAngle"),lt(this,"getAzimuthalAngle"),lt(this,"setPolarAngle"),lt(this,"setAzimuthalAngle"),lt(this,"getDistance"),lt(this,"getZoomScale"),lt(this,"listenToKeyEvents"),lt(this,"stopListenToKeyEvents"),lt(this,"saveState"),lt(this,"reset"),lt(this,"update"),lt(this,"connect"),lt(this,"dispose"),lt(this,"dollyIn"),lt(this,"dollyOut"),lt(this,"getScale"),lt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=j=>{let ye=tD(j,2*Math.PI),Fe=f.phi;Fe<0&&(Fe+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let Ye=Math.abs(ye-Fe);2*Math.PI-Ye<Ye&&(ye<Fe?ye+=2*Math.PI:Fe+=2*Math.PI),d.phi=ye-Fe,i.update()},this.setAzimuthalAngle=j=>{let ye=tD(j,2*Math.PI),Fe=f.theta;Fe<0&&(Fe+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let Ye=Math.abs(ye-Fe);2*Math.PI-Ye<Ye&&(ye<Fe?ye+=2*Math.PI:Fe+=2*Math.PI),d.theta=ye-Fe,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=j=>{j.addEventListener("keydown",it),this._domElementKeyEvents=j},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",it),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(s),i.update(),l=a.NONE},this.update=(()=>{const j=new U,ye=new U(0,1,0),Fe=new li().setFromUnitVectors(e.up,ye),Ye=Fe.clone().invert(),ft=new U,z=new li,be=2*Math.PI;return function(){const $e=i.object.position;Fe.setFromUnitVectors(e.up,ye),Ye.copy(Fe).invert(),j.copy($e).sub(i.target),j.applyQuaternion(Fe),f.setFromVector3(j),i.autoRotate&&l===a.NONE&&k(te()),i.enableDamping?(f.theta+=d.theta*i.dampingFactor,f.phi+=d.phi*i.dampingFactor):(f.theta+=d.theta,f.phi+=d.phi);let tt=i.minAzimuthAngle,vt=i.maxAzimuthAngle;isFinite(tt)&&isFinite(vt)&&(tt<-Math.PI?tt+=be:tt>Math.PI&&(tt-=be),vt<-Math.PI?vt+=be:vt>Math.PI&&(vt-=be),tt<=vt?f.theta=Math.max(tt,Math.min(vt,f.theta)):f.theta=f.theta>(tt+vt)/2?Math.max(tt,f.theta):Math.min(vt,f.theta)),f.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,f.phi)),f.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(g,i.dampingFactor):i.target.add(g),i.zoomToCursor&&F||i.object.isOrthographicCamera?f.radius=Be(f.radius):f.radius=Be(f.radius*p),j.setFromSpherical(f),j.applyQuaternion(Ye),$e.copy(i.target).add(j),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,g.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),g.set(0,0,0));let Bt=!1;if(i.zoomToCursor&&F){let qt=null;if(i.object instanceof vn&&i.object.isPerspectiveCamera){const In=j.length();qt=Be(In*p);const Nt=In-qt;i.object.position.addScaledVector(B,Nt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const In=new U(L.x,L.y,0);In.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),Bt=!0;const Nt=new U(L.x,L.y,0);Nt.unproject(i.object),i.object.position.sub(Nt).add(In),i.object.updateMatrixWorld(),qt=j.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;qt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(qt).add(i.object.position):(By.origin.copy(i.object.position),By.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(By.direction))<vZ?e.lookAt(i.target):(eD.setFromNormalAndCoplanarPoint(i.object.up,i.target),By.intersectPlane(eD,i.target))))}else i.object instanceof Or&&i.object.isOrthographicCamera&&(Bt=p!==1,Bt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,F=!1,Bt||ft.distanceToSquared(i.object.position)>h||8*(1-z.dot(i.object.quaternion))>h?(i.dispatchEvent(s),ft.copy(i.object.position),z.copy(i.object.quaternion),Bt=!1,!0):!1}})(),this.connect=j=>{i.domElement=j,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Rt),i.domElement.addEventListener("pointerdown",_e),i.domElement.addEventListener("pointercancel",ve),i.domElement.addEventListener("wheel",Ue)},this.dispose=()=>{var j,ye,Fe,Ye,ft,z;i.domElement&&(i.domElement.style.touchAction="auto"),(j=i.domElement)==null||j.removeEventListener("contextmenu",Rt),(ye=i.domElement)==null||ye.removeEventListener("pointerdown",_e),(Fe=i.domElement)==null||Fe.removeEventListener("pointercancel",ve),(Ye=i.domElement)==null||Ye.removeEventListener("wheel",Ue),(ft=i.domElement)==null||ft.ownerDocument.removeEventListener("pointermove",xe),(z=i.domElement)==null||z.ownerDocument.removeEventListener("pointerup",ve),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",it)};const i=this,s={type:"change"},r={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const h=1e-6,f=new Wb,d=new Wb;let p=1;const g=new U,v=new pe,S=new pe,_=new pe,y=new pe,A=new pe,M=new pe,E=new pe,R=new pe,T=new pe,B=new U,L=new pe;let F=!1;const C=[],D={};function te(){return 2*Math.PI/60/60*i.autoRotateSpeed}function $(){return Math.pow(.95,i.zoomSpeed)}function k(j){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=j:d.theta-=j}function q(j){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=j:d.phi-=j}const H=(()=>{const j=new U;return function(Fe,Ye){j.setFromMatrixColumn(Ye,0),j.multiplyScalar(-Fe),g.add(j)}})(),Y=(()=>{const j=new U;return function(Fe,Ye){i.screenSpacePanning===!0?j.setFromMatrixColumn(Ye,1):(j.setFromMatrixColumn(Ye,0),j.crossVectors(i.object.up,j)),j.multiplyScalar(Fe),g.add(j)}})(),V=(()=>{const j=new U;return function(Fe,Ye){const ft=i.domElement;if(ft&&i.object instanceof vn&&i.object.isPerspectiveCamera){const z=i.object.position;j.copy(z).sub(i.target);let be=j.length();be*=Math.tan(i.object.fov/2*Math.PI/180),H(2*Fe*be/ft.clientHeight,i.object.matrix),Y(2*Ye*be/ft.clientHeight,i.object.matrix)}else ft&&i.object instanceof Or&&i.object.isOrthographicCamera?(H(Fe*(i.object.right-i.object.left)/i.object.zoom/ft.clientWidth,i.object.matrix),Y(Ye*(i.object.top-i.object.bottom)/i.object.zoom/ft.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function X(j){i.object instanceof vn&&i.object.isPerspectiveCamera||i.object instanceof Or&&i.object.isOrthographicCamera?p=j:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function J(j){X(p/j)}function K(j){X(p*j)}function ae(j){if(!i.zoomToCursor||!i.domElement)return;F=!0;const ye=i.domElement.getBoundingClientRect(),Fe=j.clientX-ye.left,Ye=j.clientY-ye.top,ft=ye.width,z=ye.height;L.x=Fe/ft*2-1,L.y=-(Ye/z)*2+1,B.set(L.x,L.y,1).unproject(i.object).sub(i.object.position).normalize()}function Be(j){return Math.max(i.minDistance,Math.min(i.maxDistance,j))}function Q(j){v.set(j.clientX,j.clientY)}function de(j){ae(j),E.set(j.clientX,j.clientY)}function Ce(j){y.set(j.clientX,j.clientY)}function ze(j){S.set(j.clientX,j.clientY),_.subVectors(S,v).multiplyScalar(i.rotateSpeed);const ye=i.domElement;ye&&(k(2*Math.PI*_.x/ye.clientHeight),q(2*Math.PI*_.y/ye.clientHeight)),v.copy(S),i.update()}function We(j){R.set(j.clientX,j.clientY),T.subVectors(R,E),T.y>0?J($()):T.y<0&&K($()),E.copy(R),i.update()}function Xe(j){A.set(j.clientX,j.clientY),M.subVectors(A,y).multiplyScalar(i.panSpeed),V(M.x,M.y),y.copy(A),i.update()}function Ze(j){ae(j),j.deltaY<0?K($()):j.deltaY>0&&J($()),i.update()}function Ee(j){let ye=!1;switch(j.code){case i.keys.UP:V(0,i.keyPanSpeed),ye=!0;break;case i.keys.BOTTOM:V(0,-i.keyPanSpeed),ye=!0;break;case i.keys.LEFT:V(i.keyPanSpeed,0),ye=!0;break;case i.keys.RIGHT:V(-i.keyPanSpeed,0),ye=!0;break}ye&&(j.preventDefault(),i.update())}function G(){if(C.length==1)v.set(C[0].pageX,C[0].pageY);else{const j=.5*(C[0].pageX+C[1].pageX),ye=.5*(C[0].pageY+C[1].pageY);v.set(j,ye)}}function Ae(){if(C.length==1)y.set(C[0].pageX,C[0].pageY);else{const j=.5*(C[0].pageX+C[1].pageX),ye=.5*(C[0].pageY+C[1].pageY);y.set(j,ye)}}function he(){const j=C[0].pageX-C[1].pageX,ye=C[0].pageY-C[1].pageY,Fe=Math.sqrt(j*j+ye*ye);E.set(0,Fe)}function Me(){i.enableZoom&&he(),i.enablePan&&Ae()}function me(){i.enableZoom&&he(),i.enableRotate&&G()}function Ge(j){if(C.length==1)S.set(j.pageX,j.pageY);else{const Fe=Je(j),Ye=.5*(j.pageX+Fe.x),ft=.5*(j.pageY+Fe.y);S.set(Ye,ft)}_.subVectors(S,v).multiplyScalar(i.rotateSpeed);const ye=i.domElement;ye&&(k(2*Math.PI*_.x/ye.clientHeight),q(2*Math.PI*_.y/ye.clientHeight)),v.copy(S)}function Ne(j){if(C.length==1)A.set(j.pageX,j.pageY);else{const ye=Je(j),Fe=.5*(j.pageX+ye.x),Ye=.5*(j.pageY+ye.y);A.set(Fe,Ye)}M.subVectors(A,y).multiplyScalar(i.panSpeed),V(M.x,M.y),y.copy(A)}function I(j){const ye=Je(j),Fe=j.pageX-ye.x,Ye=j.pageY-ye.y,ft=Math.sqrt(Fe*Fe+Ye*Ye);R.set(0,ft),T.set(0,Math.pow(R.y/E.y,i.zoomSpeed)),J(T.y),E.copy(R)}function P(j){i.enableZoom&&I(j),i.enablePan&&Ne(j)}function ee(j){i.enableZoom&&I(j),i.enableRotate&&Ge(j)}function _e(j){var ye,Fe;i.enabled!==!1&&(C.length===0&&((ye=i.domElement)==null||ye.ownerDocument.addEventListener("pointermove",xe),(Fe=i.domElement)==null||Fe.ownerDocument.addEventListener("pointerup",ve)),xt(j),j.pointerType==="touch"?mt(j):qe(j))}function xe(j){i.enabled!==!1&&(j.pointerType==="touch"?Se(j):Oe(j))}function ve(j){var ye,Fe,Ye;rt(j),C.length===0&&((ye=i.domElement)==null||ye.releasePointerCapture(j.pointerId),(Fe=i.domElement)==null||Fe.ownerDocument.removeEventListener("pointermove",xe),(Ye=i.domElement)==null||Ye.ownerDocument.removeEventListener("pointerup",ve)),i.dispatchEvent(o),l=a.NONE}function qe(j){let ye;switch(j.button){case 0:ye=i.mouseButtons.LEFT;break;case 1:ye=i.mouseButtons.MIDDLE;break;case 2:ye=i.mouseButtons.RIGHT;break;default:ye=-1}switch(ye){case xc.DOLLY:if(i.enableZoom===!1)return;de(j),l=a.DOLLY;break;case xc.ROTATE:if(j.ctrlKey||j.metaKey||j.shiftKey){if(i.enablePan===!1)return;Ce(j),l=a.PAN}else{if(i.enableRotate===!1)return;Q(j),l=a.ROTATE}break;case xc.PAN:if(j.ctrlKey||j.metaKey||j.shiftKey){if(i.enableRotate===!1)return;Q(j),l=a.ROTATE}else{if(i.enablePan===!1)return;Ce(j),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(r)}function Oe(j){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;ze(j);break;case a.DOLLY:if(i.enableZoom===!1)return;We(j);break;case a.PAN:if(i.enablePan===!1)return;Xe(j);break}}function Ue(j){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(j.preventDefault(),i.dispatchEvent(r),Ze(j),i.dispatchEvent(o))}function it(j){i.enabled===!1||i.enablePan===!1||Ee(j)}function mt(j){switch(et(j),C.length){case 1:switch(i.touches.ONE){case _c.ROTATE:if(i.enableRotate===!1)return;G(),l=a.TOUCH_ROTATE;break;case _c.PAN:if(i.enablePan===!1)return;Ae(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case _c.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Me(),l=a.TOUCH_DOLLY_PAN;break;case _c.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(r)}function Se(j){switch(et(j),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ge(j),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ne(j),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;P(j),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ee(j),i.update();break;default:l=a.NONE}}function Rt(j){i.enabled!==!1&&j.preventDefault()}function xt(j){C.push(j)}function rt(j){delete D[j.pointerId];for(let ye=0;ye<C.length;ye++)if(C[ye].pointerId==j.pointerId){C.splice(ye,1);return}}function et(j){let ye=D[j.pointerId];ye===void 0&&(ye=new pe,D[j.pointerId]=ye),ye.set(j.pageX,j.pageY)}function Je(j){const ye=j.pointerId===C[0].pointerId?C[1]:C[0];return D[ye.pointerId]}this.dollyIn=(j=$())=>{K(j),i.update()},this.dollyOut=(j=$())=>{J(j),i.update()},this.getScale=()=>p,this.setScale=j=>{X(j),i.update()},this.getZoomScale=()=>$(),t!==void 0&&this.connect(t),this.update()}};function o0(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Nc="srgb",Zo="srgb-linear",nD=3001,_Z=3e3;class Bw extends Hi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new EZ(t)}),this.register(function(t){return new wZ(t)}),this.register(function(t){return new IZ(t)}),this.register(function(t){return new NZ(t)}),this.register(function(t){return new UZ(t)}),this.register(function(t){return new TZ(t)}),this.register(function(t){return new RZ(t)}),this.register(function(t){return new BZ(t)}),this.register(function(t){return new PZ(t)}),this.register(function(t){return new bZ(t)}),this.register(function(t){return new DZ(t)}),this.register(function(t){return new CZ(t)}),this.register(function(t){return new OZ(t)}),this.register(function(t){return new LZ(t)}),this.register(function(t){return new SZ(t)}),this.register(function(t){return new FZ(t)}),this.register(function(t){return new zZ(t)})}load(e,t,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const h=ol.extractUrlBase(e);o=ol.resolveURL(h,this.path)}else o=ol.extractUrlBase(e);this.manager.itemStart(e);const a=function(h){s?s(h):console.error(h),r.manager.itemError(e),r.manager.itemEnd(e)},l=new zs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){try{r.parse(h,o,function(f){t(f),r.manager.itemEnd(e)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(o0(new Uint8Array(e.slice(0,4)))===GF){try{o[Lt.KHR_BINARY_GLTF]=new kZ(e)}catch(f){s&&s(f);return}r=JSON.parse(o[Lt.KHR_BINARY_GLTF].content)}else r=JSON.parse(o0(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new $Z(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const f=this.pluginCallbacks[h](l);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,o[f.name]=!0}if(r.extensionsUsed)for(let h=0;h<r.extensionsUsed.length;++h){const f=r.extensionsUsed[h],d=r.extensionsRequired||[];switch(f){case Lt.KHR_MATERIALS_UNLIT:o[f]=new MZ;break;case Lt.KHR_DRACO_MESH_COMPRESSION:o[f]=new HZ(r,this.dracoLoader);break;case Lt.KHR_TEXTURE_TRANSFORM:o[f]=new GZ;break;case Lt.KHR_MESH_QUANTIZATION:o[f]=new VZ;break;default:d.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function AZ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Lt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class SZ{constructor(e){this.parser=e,this.name=Lt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let h;const f=new He(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],Zo);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":h=new xw(f),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new vw(f),h.distance=d;break;case"spot":h=new yw(f),h.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,h.angle=l.spot.outerConeAngle,h.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return h.position.set(0,0,0),h.decay=2,Uo(h,l),l.intensity!==void 0&&(h.intensity=l.intensity),h.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(h),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class MZ{constructor(){this.name=Lt.KHR_MATERIALS_UNLIT}getMaterialType(){return Ls}extendParams(e,t,i){const s=[];e.color=new He(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Zo),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,Nc))}return Promise.all(s)}}class bZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class EZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new pe(a,a)}return Promise.all(r)}}class wZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class CZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class TZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new He(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Zo)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Nc)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class RZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class BZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new He().setRGB(a[0],a[1],a[2],Zo),Promise.all(r)}}class PZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class DZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new He().setRGB(a[0],a[1],a[2],Zo),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Nc)),Promise.all(r)}}class LZ{constructor(e){this.parser=e,this.name=Lt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class OZ{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:dr}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class IZ{constructor(e){this.parser=e,this.name=Lt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class NZ{constructor(e){this.parser=e,this.name=Lt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const h=i.options.manager.getHandler(a.uri);h!==null&&(l=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class UZ{constructor(e){this.parser=e,this.name=Lt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const h=i.options.manager.getHandler(a.uri);h!==null&&(l=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class FZ{constructor(e){this.name=Lt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,h=s.byteLength||0,f=s.count,d=s.byteStride,p=new Uint8Array(a,l,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,d,p,s.mode,s.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(f*d);return o.decodeGltfBuffer(new Uint8Array(g),f,d,p,s.mode,s.filter),g})})}else return null}}class zZ{constructor(e){this.name=Lt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const h of s.primitives)if(h.mode!==tr.TRIANGLES&&h.mode!==tr.TRIANGLE_STRIP&&h.mode!==tr.TRIANGLE_FAN&&h.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const h in o)a.push(this.parser.getDependency("accessor",o[h]).then(f=>(l[h]=f,l[h])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(h=>{const f=h.pop(),d=f.isGroup?f.children:[f],p=h[0].count,g=[];for(const v of d){const S=new ut,_=new U,y=new li,A=new U(1,1,1),M=new iw(v.geometry,v.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&y.fromBufferAttribute(l.ROTATION,E),l.SCALE&&A.fromBufferAttribute(l.SCALE,E),M.setMatrixAt(E,S.compose(_,y,A));for(const E in l)if(E==="_COLOR_0"){const R=l[E];M.instanceColor=new nu(R.array,R.itemSize,R.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&v.geometry.setAttribute(E,l[E]);zt.prototype.copy.call(M,v),this.parser.assignFinalMaterial(M),g.push(M)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}}const GF="glTF",kd=12,iD={JSON:1313821514,BIN:5130562};class kZ{constructor(e){this.name=Lt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,kd);if(this.header={magic:o0(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==GF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-kd,s=new DataView(e,kd);let r=0;for(;r<i;){const o=s.getUint32(r,!0);r+=4;const a=s.getUint32(r,!0);if(r+=4,a===iD.JSON){const l=new Uint8Array(e,kd+r,o);this.content=o0(l)}else if(a===iD.BIN){const l=kd+r;this.body=e.slice(l,l+o)}r+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class HZ{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Lt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},h={};for(const f in o){const d=$b[f]||f.toLowerCase();a[d]=o[f]}for(const f in e.attributes){const d=$b[f]||f.toLowerCase();if(o[f]!==void 0){const p=i.accessors[e.attributes[f]],g=rf[p.componentType];h[d]=g.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",r).then(function(f){return new Promise(function(d,p){s.decodeDracoFile(f,function(g){for(const v in g.attributes){const S=g.attributes[v],_=l[v];_!==void 0&&(S.normalized=_)}d(g)},a,h,Zo,p)})})}}class GZ{constructor(){this.name=Lt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class VZ{constructor(){this.name=Lt.KHR_MESH_QUANTIZATION}}class VF extends Gf{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,h=a*3,f=s-t,d=(i-t)/f,p=d*d,g=p*d,v=e*h,S=v-h,_=-2*g+3*p,y=g-p,A=1-_,M=y-p+d;for(let E=0;E!==a;E++){const R=o[S+E+a],T=o[S+E+l]*f,B=o[v+E+a],L=o[v+E]*f;r[E]=A*R+M*T+_*B+y*L}return r}}const WZ=new li;class jZ extends VF{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return WZ.fromArray(r).normalize().toArray(r),r}}const tr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},rf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},sD={9728:Ln,9729:un,9984:Gp,9985:nf,9986:Ha,9987:lr},rD={33071:mi,33648:Sf,10497:pl},_S={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$b={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...hZ>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},La={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},XZ={CUBICSPLINE:void 0,LINEAR:tu,STEP:bf},AS={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function JZ(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new bm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:go})),n.DefaultMaterial}function cc(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Uo(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function YZ(n,e,t){let i=!1,s=!1,r=!1;for(let h=0,f=e.length;h<f;h++){const d=e[h];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let h=0,f=e.length;h<f;h++){const d=e[h];if(i){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(s){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(r){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(h){const f=h[0],d=h[1],p=h[2];return i&&(n.morphAttributes.position=f),s&&(n.morphAttributes.normal=d),r&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function KZ(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function qZ(n){let e;const t=n.extensions&&n.extensions[Lt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+SS(t.attributes):e=n.indices+":"+SS(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+SS(n.targets[i]);return e}function SS(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function eE(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function QZ(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ZZ=new ut;class $Z{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new AZ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&r<98?this.textureLoader=new qU(this.options.manager):this.textureLoader=new sF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new zs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return cc(r,a,s),Uo(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[h,f]of o.children.entries())r(f,a.children[h])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Lt.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(ol.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=_S[s.type],a=rf[s.componentType],l=s.normalized===!0,h=new a(s.count*o);return Promise.resolve(new kt(h,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=_S[s.type],h=rf[s.componentType],f=h.BYTES_PER_ELEMENT,d=f*l,p=s.byteOffset||0,g=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,v=s.normalized===!0;let S,_;if(g&&g!==d){const y=Math.floor(p/g),A="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+y+":"+s.count;let M=t.cache.get(A);M||(S=new h(a,y*g,s.count*g/f),M=new xm(S,g/f),t.cache.add(A,M)),_=new ml(M,l,p%g/f,v)}else a===null?S=new h(s.count*l):S=new h(a,p,s.count*l),_=new kt(S,l,v);if(s.sparse!==void 0){const y=_S.SCALAR,A=rf[s.sparse.indices.componentType],M=s.sparse.indices.byteOffset||0,E=s.sparse.values.byteOffset||0,R=new A(o[1],M,s.sparse.count*y),T=new h(o[2],E,s.sparse.count*l);a!==null&&(_=new kt(_.array.slice(),_.itemSize,_.normalized));for(let B=0,L=R.length;B<L;B++){const F=R[B];if(_.setX(F,T[B*l]),l>=2&&_.setY(F,T[B*l+1]),l>=3&&_.setZ(F,T[B*l+2]),l>=4&&_.setW(F,T[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const h=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=o.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);const p=(r.samplers||{})[o.sampler]||{};return f.magFilter=sD[p.magFilter]||un,f.minFilter=sD[p.minFilter]||lr,f.wrapS=rD[p.wrapS]||pl,f.wrapT=rD[p.wrapT]||pl,s.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=h,h}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",h=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){h=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(l).then(function(d){return new Promise(function(p,g){let v=p;t.isImageBitmapLoader===!0&&(v=function(S){const _=new xn(S);_.needsUpdate=!0,p(_)}),t.load(ol.resolveURL(d,r.path),v,void 0,g)})}).then(function(d){return h===!0&&a.revokeObjectURL(l),Uo(d,o),d.userData.mimeType=o.mimeType||QZ(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=f,f}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[Lt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Lt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[Lt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(typeof s=="number"&&(s=s===nD?Nc:Zo),"colorSpace"in o?o.colorSpace=s:o.encoding=s===Nc?nD:_Z),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Z0,Qn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new ki,Qn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return bm}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},h=[];if(l[Lt.KHR_MATERIALS_UNLIT]){const d=s[Lt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),h.push(d.extendParams(a,r,t))}else{const d=r.pbrMetallicRoughness||{};if(a.color=new He(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Zo),a.opacity=p[3]}d.baseColorTexture!==void 0&&h.push(t.assignTexture(a,"map",d.baseColorTexture,Nc)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),h.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=rr);const f=r.alphaMode||AS.OPAQUE;if(f===AS.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===AS.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Ls&&(h.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new pe(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;a.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&o!==Ls&&(h.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Ls){const d=r.emissiveFactor;a.emissive=new He().setRGB(d[0],d[1],d[2],Zo)}return r.emissiveTexture!==void 0&&o!==Ls&&h.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,Nc)),Promise.all(h).then(function(){const d=new o(a);return r.name&&(d.name=r.name),Uo(d,r),t.associations.set(d,{materials:e}),r.extensions&&cc(s,d,r),d})}createUniqueName(e){const t=Ft.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[Lt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return oD(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const h=e[a],f=qZ(h),d=s[f];if(d)o.push(d.promise);else{let p;h.extensions&&h.extensions[Lt.KHR_DRACO_MESH_COMPRESSION]?p=r(h):p=oD(new Mt,h,t),s[f]={primitive:h,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,h=o.length;l<h;l++){const f=o[l].material===void 0?JZ(this.cache):this.getDependency("material",o[l].material);a.push(f)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const h=l.slice(0,l.length-1),f=l[l.length-1],d=[];for(let g=0,v=f.length;g<v;g++){const S=f[g],_=o[g];let y;const A=h[g];if(_.mode===tr.TRIANGLES||_.mode===tr.TRIANGLE_STRIP||_.mode===tr.TRIANGLE_FAN||_.mode===void 0)y=r.isSkinnedMesh===!0?new nw(S,A):new Hn(S,A),y.isSkinnedMesh===!0&&y.normalizeSkinWeights(),_.mode===tr.TRIANGLE_STRIP?y.geometry=$P(y.geometry,H1):_.mode===tr.TRIANGLE_FAN&&(y.geometry=$P(y.geometry,Qv));else if(_.mode===tr.LINES)y=new Hr(S,A);else if(_.mode===tr.LINE_STRIP)y=new ra(S,A);else if(_.mode===tr.LINE_LOOP)y=new sw(S,A);else if(_.mode===tr.POINTS)y=new rw(S,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(y.geometry.morphAttributes).length>0&&KZ(y,r),y.name=t.createUniqueName(r.name||"mesh_"+e),Uo(y,r),_.extensions&&cc(s,y,_),t.assignFinalMaterial(y),d.push(y)}for(let g=0,v=d.length;g<v;g++)t.associations.set(d[g],{meshes:e,primitives:g});if(d.length===1)return r.extensions&&cc(s,d[0],r),d[0];const p=new jo;r.extensions&&cc(s,p,r),t.associations.set(p,{meshes:e});for(let g=0,v=d.length;g<v;g++)p.add(d[g]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new vn(rU.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new Or(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Uo(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let h=0,f=o.length;h<f;h++){const d=o[h];if(d){a.push(d);const p=new ut;r!==null&&p.fromArray(r.array,h*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new _m(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],h=[],f=[];for(let d=0,p=s.channels.length;d<p;d++){const g=s.channels[d],v=s.samplers[g.sampler],S=g.target,_=S.node,y=s.parameters!==void 0?s.parameters[v.input]:v.input,A=s.parameters!==void 0?s.parameters[v.output]:v.output;S.node!==void 0&&(o.push(this.getDependency("node",_)),a.push(this.getDependency("accessor",y)),l.push(this.getDependency("accessor",A)),h.push(v),f.push(S))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(h),Promise.all(f)]).then(function(d){const p=d[0],g=d[1],v=d[2],S=d[3],_=d[4],y=[];for(let A=0,M=p.length;A<M;A++){const E=p[A],R=g[A],T=v[A],B=S[A],L=_[A];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const F=i._createAnimationTracks(E,R,T,B,L);if(F)for(let C=0;C<F.length;C++)y.push(F[C])}return new Tf(r,void 0,y)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,h=s.weights.length;l<h;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let h=0,f=a.length;h<f;h++)o.push(i.getDependency("node",a[h]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(h){const f=h[0],d=h[1],p=h[2];p!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(p,ZZ)});for(let g=0,v=d.length;g<v;g++)f.add(d[g]);return f})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(h){return s._getNodeRef(s.cameraCache,r.camera,h)})),s._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){a.push(h)}),this.nodeCache[e]=Promise.all(a).then(function(h){let f;if(r.isBone===!0?f=new Q0:h.length>1?f=new jo:h.length===1?f=h[0]:f=new zt,f!==h[0])for(let d=0,p=h.length;d<p;d++)f.add(h[d]);if(r.name&&(f.userData.name=r.name,f.name=o),Uo(f,r),r.extensions&&cc(i,f,r),r.matrix!==void 0){const d=new ut;d.fromArray(r.matrix),f.applyMatrix4(d)}else r.translation!==void 0&&f.position.fromArray(r.translation),r.rotation!==void 0&&f.quaternion.fromArray(r.rotation),r.scale!==void 0&&f.scale.fromArray(r.scale);return s.associations.has(f)||s.associations.set(f,{}),s.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new jo;i.name&&(r.name=s.createUniqueName(i.name)),Uo(r,i),i.extensions&&cc(t,r,i);const o=i.nodes||[],a=[];for(let l=0,h=o.length;l<h;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let f=0,d=l.length;f<d;f++)r.add(l[f]);const h=f=>{const d=new Map;for(const[p,g]of s.associations)(p instanceof Qn||p instanceof xn)&&d.set(p,g);return f.traverse(p=>{const g=s.associations.get(p);g!=null&&d.set(p,g)}),d};return s.associations=h(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];La[r.path]===La.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let h;switch(La[r.path]){case La.weights:h=su;break;case La.rotation:h=gl;break;case La.position:case La.scale:h=ru;break;default:switch(i.itemSize){case 1:h=su;break;case 2:case 3:default:h=ru;break}break}const f=s.interpolation!==void 0?XZ[s.interpolation]:tu,d=this._getArrayFromAccessor(i);for(let p=0,g=l.length;p<g;p++){const v=new h(l[p]+"."+La[r.path],t.array,d,f);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=eE(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof gl?jZ:VF;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function e$(n,e,t){const i=e.attributes,s=new Oi;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,h=a.max;if(l!==void 0&&h!==void 0){if(s.set(new U(l[0],l[1],l[2]),new U(h[0],h[1],h[2])),a.normalized){const f=eE(rf[a.componentType]);s.min.multiplyScalar(f),s.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new U,l=new U;for(let h=0,f=r.length;h<f;h++){const d=r[h];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],g=p.min,v=p.max;if(g!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){const S=eE(rf[p.componentType]);l.multiplyScalar(S)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new vi;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function oD(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=$b[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return Uo(n,e),e$(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?YZ(n,e.targets,t):n})}const MS=new WeakMap;class t$ extends Hi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new zs(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const r={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const h=t.attributeTypes[l];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=h.name)}const i=JSON.stringify(t);if(MS.has(e)){const l=MS.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(l=>(s=l,new Promise((h,f)=>{s._callbacks[r]={resolve:h,reject:f},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),MS.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new Mt;e.index&&t.setIndex(new kt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,o=s.array,a=s.itemSize;t.setAttribute(r,new kt(o,a))}return t}_loadLibrary(e,t){const i=new zs(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=n$.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function n$(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(f){n.onModuleLoaded=function(d){f({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,h=a.taskConfig;e.then(f=>{const d=f.draco,p=new d.Decoder,g=new d.DecoderBuffer;g.Init(new Int8Array(l),l.byteLength);try{const v=t(d,p,g,h),S=v.attributes.map(_=>_.array.buffer);v.index&&S.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},S)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{d.destroy(g),d.destroy(p)}});break}};function t(o,a,l,h){const f=h.attributeIDs,d=h.attributeTypes;let p,g;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,g=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,g=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!g.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());const S={index:null,attributes:[]};for(const _ in f){const y=self[d[_]];let A,M;if(h.useUniqueIDs)M=f[_],A=a.GetAttributeByUniqueId(p,M);else{if(M=a.GetAttributeId(p,o[f[_]]),M===-1)continue;A=a.GetAttribute(p,M)}S.attributes.push(s(o,a,p,_,y,A))}return v===o.TRIANGULAR_MESH&&(S.index=i(o,a,p)),o.destroy(p),S}function i(o,a,l){const f=l.num_faces()*3,d=f*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const g=new Uint32Array(o.HEAPF32.buffer,p,f).slice();return o._free(p),{array:g,itemSize:1}}function s(o,a,l,h,f,d){const p=d.num_components(),v=l.num_points()*p,S=v*f.BYTES_PER_ELEMENT,_=r(o,f),y=o._malloc(S);a.GetAttributeDataArrayForAllPoints(l,d,_,S,y);const A=new f(o.HEAPF32.buffer,y,v).slice();return o._free(y),{name:h,array:A,itemSize:p}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Py;const bS=()=>{if(Py)return Py;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let r;const o=WebAssembly.instantiate(a(s),{}).then(d=>{r=d.instance,r.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let v=0;v<d.length;++v){const S=d.charCodeAt(v);p[v]=S>96?S-71:S>64?S-65:S>47?S+4:S>46?63:62}let g=0;for(let v=0;v<d.length;++v)p[g++]=p[v]<60?i[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,g)}function l(d,p,g,v,S,_){const y=r.exports.sbrk,A=g+3&-4,M=y(A*v),E=y(S.length),R=new Uint8Array(r.exports.memory.buffer);R.set(S,E);const T=d(M,g,v,E,S.length);if(T===0&&_&&_(M,A,v),p.set(R.subarray(M,M+g*v)),y(M-y(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Py={ready:o,supported:!0,decodeVertexBuffer(d,p,g,v,S){l(r.exports.meshopt_decodeVertexBuffer,d,p,g,v,r.exports[h[S]])},decodeIndexBuffer(d,p,g,v){l(r.exports.meshopt_decodeIndexBuffer,d,p,g,v)},decodeIndexSequence(d,p,g,v){l(r.exports.meshopt_decodeIndexSequence,d,p,g,v)},decodeGltfBuffer(d,p,g,v,S,_){l(r.exports[f[S]],d,p,g,v,r.exports[h[_]])}},Py};let Dy=null,WF="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function jF(n=!0,e=!0,t){return i=>{t&&t(i),n&&(Dy||(Dy=new t$),Dy.setDecoderPath(typeof n=="string"?n:WF),i.setDRACOLoader(Dy)),e&&i.setMeshoptDecoder(typeof bS=="function"?bS():bS)}}const yx=(n,e,t,i)=>wm(Bw,n,jF(e,t,i));yx.preload=(n,e,t,i)=>wm.preload(Bw,n,jF(e,t,i));yx.clear=n=>wm.clear(Bw,n);yx.setDecoderPath=n=>{WF=n};const i$=fe.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:s=!0,keyEvents:r=!1,onChange:o,onStart:a,onEnd:l,...h},f)=>{const d=Io(T=>T.invalidate),p=Io(T=>T.camera),g=Io(T=>T.gl),v=Io(T=>T.events),S=Io(T=>T.setEvents),_=Io(T=>T.set),y=Io(T=>T.get),A=Io(T=>T.performance),M=e||p,E=i||v.connected||g.domElement,R=fe.useMemo(()=>new xZ(M),[M]);return Cw(()=>{R.enabled&&R.update()},-1),fe.useEffect(()=>(r&&R.connect(r===!0?E:r),R.connect(E),()=>void R.dispose()),[r,E,t,R,d]),fe.useEffect(()=>{const T=F=>{d(),t&&A.regress(),o&&o(F)},B=F=>{a&&a(F)},L=F=>{l&&l(F)};return R.addEventListener("change",T),R.addEventListener("start",B),R.addEventListener("end",L),()=>{R.removeEventListener("start",B),R.removeEventListener("end",L),R.removeEventListener("change",T)}},[o,a,l,R,d,S]),fe.useEffect(()=>{if(n){const T=y().controls;return _({controls:R}),()=>_({controls:T})}},[n,R]),fe.createElement("primitive",r0({ref:f,object:R,enableDamping:s},h))});function s$({url:n}){const{scene:e}=yx(n);return re.jsx("primitive",{object:e,scale:1.2,position:[0,-.5,0]})}function r$(){const{progress:n}=uZ();return re.jsx(oZ,{center:!0,children:re.jsxs("div",{className:"w-36 p-3 rounded-xl bg-black/60 backdrop-blur text-center text-sm",children:[re.jsx("div",{className:"h-2 bg-white/10 rounded overflow-hidden mb-2",children:re.jsx("div",{className:"h-2 bg-gradient-to-r from-glow1 to-glow2",style:{width:`${n}%`}})}),re.jsxs("div",{className:"text-xs text-zinc-300",children:["Loading 3D  ",Math.round(n),"%"]})]})})}function o$({path:n="/models/hero-model.glb"}){return re.jsxs(kF,{camera:{position:[0,0,6],fov:50},style:{width:"100%",height:"100%"},children:[re.jsx("ambientLight",{intensity:.6}),re.jsx("pointLight",{color:"#8b5cf6",intensity:.6,position:[-5,5,5]}),re.jsx("pointLight",{color:"#22d3ee",intensity:.4,position:[5,-5,5]}),re.jsxs(fe.Suspense,{fallback:re.jsx(r$,{}),children:[re.jsx(s$,{url:n}),re.jsx(i$,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.6})]})]})}function a$(){return re.jsxs("section",{id:"hero",className:"relative h-[90vh] md:h-screen flex items-center justify-center text-center",children:[re.jsx("div",{className:"absolute inset-0 z-0 hidden md:block pointer-events-none",children:re.jsx(fe.Suspense,{fallback:re.jsx("div",{className:"w-full h-full",children:re.jsx(qQ,{})}),children:re.jsx(o$,{})})}),re.jsxs(O6.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1.2},className:"z-10 max-w-4xl mx-auto px-6",children:[re.jsx("h1",{className:"text-4xl md:text-7xl font-extrabold tracking-tight leading-tight",children:re.jsx("span",{className:"bg-gradient-to-r from-glow1 via-glow3 to-glow2 bg-clip-text text-transparent",children:pi.name})}),re.jsx("p",{className:"mt-4 text-lg md:text-2xl text-zinc-300",children:pi.role}),re.jsx("p",{className:"mt-3 text-zinc-400",children:pi.tagline}),re.jsxs("div",{className:"mt-8 flex flex-wrap items-center justify-center gap-3",children:[re.jsxs("a",{href:`mailto:${pi.email}`,className:"px-5 py-3 rounded-2xl bg-gradient-to-r from-glow1 to-glow2 hover:scale-105 transition inline-flex items-center gap-2 shadow-glow",children:[re.jsx(OI,{className:"w-4 h-4"})," Contact"]}),re.jsxs("a",{href:pi.links.resume,className:"px-5 py-3 rounded-2xl border border-white/20 hover:bg-white/10 transition inline-flex items-center gap-2",children:[re.jsx(xV,{className:"w-4 h-4"})," Resume"]}),re.jsxs("a",{href:pi.links.leetcode,target:"_blank",rel:"noreferrer",className:"px-5 py-3 rounded-2xl border border-white/20 hover:bg-white/10 transition inline-flex items-center gap-2",children:[re.jsx(DI,{className:"w-4 h-4"})," LeetCode"]})]})]})]})}function xu({id:n,title:e,children:t}){return re.jsx("section",{id:n,className:"relative py-20",children:re.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[re.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8",children:e}),t]})})}function l$(){return re.jsx(xu,{id:"about",title:"About",children:re.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[re.jsx("div",{className:"rounded-3xl border border-white/10 bg-white/5 backdrop-blur p-6",children:re.jsx("p",{className:"text-zinc-300",children:"Finalyear CSE at IIIT Pune. I design agentic AI systems, efficient backends, and cinematic UIs. I love taking ideas from sketch to deploy with measurable impact."})}),re.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:pi.facts.map(n=>re.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-center",children:[re.jsx("p",{className:"text-xs text-zinc-400",children:n.k}),re.jsx("p",{className:"font-semibold text-zinc-100",children:n.v})]},n.k))})]})})}function c$(){return re.jsx(xu,{id:"experience",title:"Experience",children:re.jsx("div",{className:"relative border-l border-white/10 ml-3 pl-6",children:I6.map((n,e)=>re.jsxs("div",{className:"mb-10",children:[re.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-glow1 to-glow2 relative -left-[1.72rem] top-3"}),re.jsxs("h3",{className:"text-xl font-semibold",children:[n.title,"  ",re.jsx("span",{className:"text-zinc-300",children:n.org})]}),re.jsx("p",{className:"text-sm text-zinc-400",children:n.time}),re.jsx("ul",{className:"mt-3 space-y-1 text-zinc-300 list-disc pl-4",children:n.bullets.map((t,i)=>re.jsx("li",{children:t},i))})]},e))})})}function u$({p:n}){return re.jsxs("a",{href:n.link||"#",target:n.link?"_blank":"_self",rel:"noreferrer",className:"group block rounded-3xl border border-white/10 bg-white/5 backdrop-blur p-6 transition hover:shadow-glow",children:[re.jsx("div",{className:"flex items-start justify-between gap-4",children:re.jsx("h3",{className:"text-lg md:text-xl font-semibold",children:n.name})}),re.jsx("p",{className:"mt-2 text-sm text-zinc-300",children:n.desc}),re.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:n.stack.map((e,t)=>re.jsx("span",{className:"text-xs px-2.5 py-1 rounded-full border border-white/15 bg-black/20",children:e},t))})]})}function h$(){return re.jsx(xu,{id:"projects",title:"Projects",children:re.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:N6.map((n,e)=>re.jsx(u$,{p:n},e))})})}function Hd({label:n,items:e}){return re.jsxs("div",{className:"rounded-3xl border border-white/10 bg-white/5 backdrop-blur p-6",children:[re.jsx("h4",{className:"font-semibold mb-3",children:n}),re.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(t=>re.jsx("span",{className:"text-xs px-2.5 py-1 rounded-full border border-white/15 bg-black/20",children:t},t))})]})}function f$(){return re.jsx(xu,{id:"skills",title:"Skills",children:re.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[re.jsx(Hd,{label:"Languages",items:qu.languages}),re.jsx(Hd,{label:"Frameworks & Libraries",items:qu.frameworks}),re.jsx(Hd,{label:"Cloud & DevOps",items:qu.cloud}),re.jsx(Hd,{label:"Databases",items:qu.db}),re.jsx(Hd,{label:"Concepts & Tools",items:[...qu.concepts,...qu.tools]})]})})}function d$(){return re.jsx(xu,{id:"achievements",title:"Achievements",children:re.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:U6.map((n,e)=>re.jsx("div",{className:`rounded-3xl border p-6 backdrop-blur bg-white/5 ${n.includes("NTSE")?"border-yellow-400/60 shadow-[0_0_30px_rgba(250,204,21,0.25)]":"border-white/10"}`,children:re.jsx("p",{className:"text-zinc-200",children:n})},e))})})}function p$(){return re.jsx(xu,{id:"leadership",title:"Leadership & PORs",children:re.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:F6.map((n,e)=>re.jsxs("div",{className:"rounded-3xl border border-white/10 bg-white/5 backdrop-blur p-6",children:[re.jsx("h3",{className:"font-semibold",children:n.role}),re.jsx("p",{className:"text-sm text-zinc-300",children:n.org}),re.jsx("p",{className:"mt-2 text-sm text-zinc-400",children:n.note})]},e))})})}function m$(){return re.jsx(xu,{id:"contact",title:"Contact",children:re.jsx("div",{className:"rounded-3xl border border-white/10 bg-white/5 backdrop-blur p-6",children:re.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[re.jsxs("div",{children:[re.jsx("p",{className:"font-medium",children:"Lets build something impactful."}),re.jsx("p",{className:"text-sm text-zinc-400",children:"Im open to internships and projects."})]}),re.jsxs("div",{className:"flex flex-wrap gap-3",children:[re.jsxs("a",{href:`mailto:${pi.email}`,className:"border border-white/20 rounded-xl px-4 py-2 inline-flex items-center gap-2 hover:bg-white/10",children:[re.jsx(OI,{className:"w-4 h-4"})," ",pi.email]}),re.jsxs("a",{href:pi.links.linkedin,target:"_blank",rel:"noreferrer",className:"border border-white/20 rounded-xl px-4 py-2 inline-flex items-center gap-2 hover:bg-white/10",children:[re.jsx(LI,{className:"w-4 h-4"})," LinkedIn"]}),re.jsxs("a",{href:`tel:${pi.phone.replace(/\s/g,"")}`,className:"border border-white/20 rounded-xl px-4 py-2 inline-flex items-center gap-2 hover:bg-white/10",children:[re.jsx(SV,{className:"w-4 h-4"})," ",pi.phone]})]})]})})})}const gp="generated",g$="pointerdown",y$="pointerup",aD="pointerleave",v$="pointerout",lD="pointermove",x$="touchstart",cD="touchend",_$="touchmove",A$="touchcancel",S$="resize",M$="visibilitychange",au="tsParticles - Error";let tE=class $r{constructor(e,t,i){if(this._updateFromAngle=(s,r)=>{this.x=Math.cos(s)*r,this.y=Math.sin(s)*r},!Ir(e)&&e){this.x=e.x,this.y=e.y;const s=e;this.z=s.z?s.z:0}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=i??0;else throw new Error(`${au} Vector3d not initialized correctly`)}static get origin(){return $r.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return $r.create(e.x,e.y,e.z)}static create(e,t,i){return new $r(e,t,i)}add(e){return $r.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return $r.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return $r.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return $r.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=0&&this.multTo(1/e)}rotate(e){return $r.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}sub(e){return $r.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}},XF=class fv extends tE{constructor(e,t){super(e,t,0)}static get origin(){return fv.create(0,0)}static clone(e){return fv.create(e.x,e.y)}static create(e,t){return new fv(e,t)}},b$=Math.random;function oa(){return JF(b$(),0,1-1e-16)}function JF(n,e,t){return Math.min(Math.max(n,e),t)}function of(n){const e=Dw(n);let t=Pw(n);return e===t&&(t=0),oa()*(e-t)+t}function sn(n){return Ir(n)?n:of(n)}function Pw(n){return Ir(n)?n:n.min}function Dw(n){return Ir(n)?n:n.max}function jt(n,e){if(n===e||e===void 0&&Ir(n))return n;const t=Pw(n),i=Dw(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:jt(t,i)}function E$(n){const e=n.random,{enable:t,minimumValue:i}=al(e)?{enable:e,minimumValue:0}:e;return sn(t?jt(n.value,i):n.value)}function w$(n,e){const t=n.x-e.x,i=n.y-e.y;return{dx:t,dy:i,distance:Math.sqrt(t**2+i**2)}}function Lw(n,e){return w$(n,e).distance}function C$(n,e,t){if(Ir(n))return n*Math.PI/180;switch(n){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(t.y-e.y,t.x-e.x);case"outside":return Math.atan2(e.y-t.y,e.x-t.x);default:return oa()*Math.PI*2}}function T$(n){const e=XF.origin;return e.length=1,e.angle=n,e}function R$(n){var e,t;return{x:((e=n.position)==null?void 0:e.x)??oa()*n.size.width,y:((t=n.position)==null?void 0:t.y)??oa()*n.size.height}}function YF(n){return n?n.endsWith("%")?parseFloat(n)/100:parseFloat(n):1}const B$={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function nm(){return B$}function vx(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function P$(){return!vx()&&typeof matchMedia<"u"}function KF(n){if(P$())return matchMedia(n)}function D$(n){if(!(vx()||typeof MutationObserver>"u"))return new MutationObserver(n)}function L$(n,e){return n===e||mo(e)&&e.indexOf(n)>-1}function O$(n){return Math.floor(oa()*n.length)}function Ow(n,e,t=!0){return n[e!==void 0&&t?e%n.length:O$(n)]}function Ii(n,...e){for(const t of e){if(t==null)continue;if(!Qd(t)){n=t;continue}const i=Array.isArray(t);i&&(Qd(n)||!n||!Array.isArray(n))?n=[]:!i&&(Qd(n)||!n||Array.isArray(n))&&(n={});for(const s in t){if(s==="__proto__")continue;const r=t,o=r[s],a=n;a[s]=Qd(o)&&Array.isArray(o)?o.map(l=>Ii(a[s],l)):Ii(a[s],o)}}return n}function lu(n,e){return mo(n)?n.map((t,i)=>e(t,i)):e(n,0)}function yp(n,e,t){return mo(n)?Ow(n,e,t):n}function I$(n,e){const t=n.value,i=n.animation,s={delayTime:sn(i.delay)*1e3,enable:i.enable,value:sn(n.value)*e,max:Dw(t)*e,min:Pw(t)*e,loops:0,maxLoops:sn(i.count),time:0};if(i.enable){switch(s.decay=1-sn(i.decay),i.mode){case"increase":s.status="increasing";break;case"decrease":s.status="decreasing";break;case"random":s.status=oa()>=.5?"increasing":"decreasing";break}const r=i.mode==="auto";switch(i.startValue){case"min":s.value=s.min,r&&(s.status="increasing");break;case"max":s.value=s.max,r&&(s.status="decreasing");break;case"random":default:s.value=of(s),r&&(s.status=oa()>=.5?"increasing":"decreasing");break}}return s.initialValue=s.value,s}function N$(n,e){if(!(n.mode==="percent")){const{mode:s,...r}=n;return r}return"x"in n?{x:n.x/100*e.width,y:n.y/100*e.height}:{width:n.width/100*e.width,height:n.height/100*e.height}}function qF(n,e){return N$(n,e)}function al(n){return typeof n=="boolean"}function po(n){return typeof n=="string"}function Ir(n){return typeof n=="number"}function QF(n){return typeof n=="function"}function Qd(n){return typeof n=="object"&&n!==null}function mo(n){return Array.isArray(n)}const U$="random",xx=new Map;function uD(n){xx.set(n.key,n)}function ES(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function F$(n){for(const[,r]of xx)if(n.startsWith(r.stringPrefix))return r.parseString(n);const e=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,t=n.replace(e,(r,o,a,l,h)=>o+o+a+a+l+l+(h!==void 0?h+h:"")),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,s=i.exec(t);return s?{a:s[4]!==void 0?parseInt(s[4],16)/255:1,b:parseInt(s[3],16),g:parseInt(s[2],16),r:parseInt(s[1],16)}:void 0}function af(n,e,t=!0){if(!n)return;const i=po(n)?{value:n}:n;if(po(i.value))return ZF(i.value,e,t);if(mo(i.value))return af({value:Ow(i.value,e,t)});for(const[,s]of xx){const r=s.handleRangeColor(i);if(r)return r}}function ZF(n,e,t=!0){if(!n)return;const i=po(n)?{value:n}:n;if(po(i.value))return i.value===U$?G$():k$(i.value);if(mo(i.value))return ZF({value:Ow(i.value,e,t)});for(const[,s]of xx){const r=s.handleColor(i);if(r)return r}}function hD(n,e,t=!0){const i=af(n,e,t);return i?z$(i):void 0}function z$(n){const e=n.r/255,t=n.g/255,i=n.b/255,s=Math.max(e,t,i),r=Math.min(e,t,i),o={h:0,l:(s+r)/2,s:0};return s!==r&&(o.s=o.l<.5?(s-r)/(s+r):(s-r)/(2-s-r),o.h=e===s?(t-i)/(s-r):o.h=t===s?2+(i-e)/(s-r):4+(e-t)/(s-r)),o.l*=100,o.s*=100,o.h*=60,o.h<0&&(o.h+=360),o.h>=360&&(o.h-=360),o}function k$(n){return F$(n)}function nE(n){const e={b:0,g:0,r:0},t={h:n.h/360,l:n.l/100,s:n.s/100};if(!t.s)e.r=e.g=e.b=t.l;else{const i=t.l<.5?t.l*(1+t.s):t.l+t.s-t.l*t.s,s=2*t.l-i;e.r=ES(s,i,t.h+1/3),e.g=ES(s,i,t.h),e.b=ES(s,i,t.h-1/3)}return e.r=Math.floor(e.r*255),e.g=Math.floor(e.g*255),e.b=Math.floor(e.b*255),e}function H$(n){const e=nE(n);return{a:n.a,b:e.b,g:e.g,r:e.r}}function G$(n){return{b:Math.floor(of(jt(0,256))),g:Math.floor(of(jt(0,256))),r:Math.floor(of(jt(0,256)))}}function dv(n,e){return`rgba(${n.r}, ${n.g}, ${n.b}, ${e??1})`}function fD(n,e){return`hsla(${n.h}, ${n.s}%, ${n.l}%, ${e??1})`}function dD(n){return n!==void 0?{h:n.h.value,s:n.s.value,l:n.l.value}:void 0}function V$(n,e,t){n.fillStyle=t??"rgba(0,0,0,0)",n.fillRect(0,0,e.width,e.height)}function W$(n,e,t,i){t&&(n.globalAlpha=i,n.drawImage(t,0,0,e.width,e.height),n.globalAlpha=1)}function wS(n,e){n.clearRect(0,0,e.width,e.height)}function j$(n){const{container:e,context:t,particle:i,delta:s,colorStyles:r,backgroundMask:o,composite:a,radius:l,opacity:h,shadow:f,transform:d}=n,p=i.getPosition(),g=i.rotation+(i.pathRotation?i.velocity.angle:0),v={sin:Math.sin(g),cos:Math.cos(g)},S={a:v.cos*(d.a??1),b:v.sin*(d.b??1),c:-v.sin*(d.c??1),d:v.cos*(d.d??1)};t.setTransform(S.a,S.b,S.c,S.d,p.x,p.y),t.beginPath(),o&&(t.globalCompositeOperation=a);const _=i.shadowColor;f.enable&&_&&(t.shadowBlur=f.blur,t.shadowColor=dv(_),t.shadowOffsetX=f.offset.x,t.shadowOffsetY=f.offset.y),r.fill&&(t.fillStyle=r.fill);const y=i.strokeWidth??0;t.lineWidth=y,r.stroke&&(t.strokeStyle=r.stroke),X$(e,t,i,l,h,s),y>0&&t.stroke(),i.close&&t.closePath(),i.fill&&t.fill(),J$(e,t,i,l,h,s),t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0)}function X$(n,e,t,i,s,r){if(!t.shape)return;const o=n.drawers.get(t.shape);o&&o.draw(e,t,i,s,r,n.retina.pixelRatio)}function J$(n,e,t,i,s,r){if(!t.shape)return;const o=n.drawers.get(t.shape);!o||!o.afterEffect||o.afterEffect(e,t,i,s,r,n.retina.pixelRatio)}function Y$(n,e,t){e.draw&&e.draw(n,t)}function K$(n,e,t,i){e.drawParticle&&e.drawParticle(n,t,i)}function q$(n,e,t){return{h:n.h,s:n.s,l:n.l+(e==="darken"?-1:1)*t}}function Q$(n,e,t){const i=e[t];i!==void 0&&(n[t]=(n[t]??1)*i)}class Z${constructor(e){this.container=e,this._applyPostDrawUpdaters=t=>{for(const i of this._postDrawUpdaters)i.afterDraw&&i.afterDraw(t)},this._applyPreDrawUpdaters=(t,i,s,r,o,a)=>{for(const l of this._preDrawUpdaters){if(l.getColorStyles){const{fill:h,stroke:f}=l.getColorStyles(i,t,s,r);h&&(o.fill=h),f&&(o.stroke=f)}if(l.getTransformValues){const h=l.getTransformValues(i);for(const f in h)Q$(a,h,f)}l.beforeDraw&&l.beforeDraw(i)}},this._applyResizePlugins=()=>{for(const t of this._resizePlugins)t.resize&&t.resize()},this._getPluginParticleColors=t=>{let i,s;for(const r of this._colorPlugins)if(!i&&r.particleFillColor&&(i=hD(r.particleFillColor(t))),!s&&r.particleStrokeColor&&(s=hD(r.particleStrokeColor(t))),i&&s)break;return[i,s]},this._initCover=()=>{const t=this.container.actualOptions,i=t.backgroundMask.cover,s=i.color,r=af(s);if(r){const o={...r,a:i.opacity};this._coverColorStyle=dv(o,o.a)}},this._initStyle=()=>{const t=this.element,i=this.container.actualOptions;if(t){this._fullScreen?(this._originalStyle=Ii({},t.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const s in i.style){if(!s||!i.style)continue;const r=i.style[s];r&&t.style.setProperty(s,r,"important")}}},this._initTrail=async()=>{const t=this.container.actualOptions,i=t.particles.move.trail,s=i.fill;if(i.enable)if(s.color){const r=af(s.color);if(!r)return;const o=t.particles.move.trail;this._trailFill={color:{...r},opacity:1/o.length}}else await new Promise((r,o)=>{if(!s.image)return;const a=document.createElement("img");a.addEventListener("load",()=>{this._trailFill={image:a,opacity:1/i.length},r()}),a.addEventListener("error",l=>{o(l.error)}),a.src=s.image})},this._paintBase=t=>{this.draw(i=>V$(i,this.size,t))},this._paintImage=(t,i)=>{this.draw(s=>W$(s,this.size,t,i))},this._repairStyle=()=>{const t=this.element;t&&(this._safeMutationObserver(i=>i.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(i=>i.observe(t,{attributes:!0})))},this._resetOriginalStyle=()=>{const t=this.element,i=this._originalStyle;if(!(t&&i))return;const s=t.style;s.position=i.position,s.zIndex=i.zIndex,s.top=i.top,s.left=i.left,s.width=i.width,s.height=i.height},this._safeMutationObserver=t=>{this._mutationObserver&&t(this._mutationObserver)},this._setFullScreenStyle=()=>{const t=this.element;if(!t)return;const i="important",s=t.style;s.setProperty("position","fixed",i),s.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),i),s.setProperty("top","0",i),s.setProperty("left","0",i),s.setProperty("width","100%",i),s.setProperty("height","100%",i)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,i=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>0&&i?i.color?this._paintBase(dv(i.color,i.opacity)):i.image&&this._paintImage(i.image,i.opacity):this.draw(s=>{wS(s,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e&&e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){if(e.spawning||e.destroyed)return;const i=e.getRadius();if(i<=0)return;const s=e.getFillColor(),r=e.getStrokeColor()??s;let[o,a]=this._getPluginParticleColors(e);o||(o=s),a||(a=r),!(!o&&!a)&&this.draw(l=>{var M;const h=this.container,f=h.actualOptions,d=e.options.zIndex,p=(1-e.zIndexFactor)**d.opacityRate,g=e.bubble.opacity??((M=e.opacity)==null?void 0:M.value)??1,v=e.strokeOpacity??g,S=g*p,_=v*p,y={},A={fill:o?fD(o,S):void 0};A.stroke=a?fD(a,_):A.fill,this._applyPreDrawUpdaters(l,e,i,S,A,y),j$({container:h,context:l,particle:e,delta:t,colorStyles:A,backgroundMask:f.backgroundMask.enable,composite:f.backgroundMask.composite,radius:i*(1-e.zIndexFactor)**d.sizeRate,opacity:S,shadow:e.options.shadow,transform:y}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,t,i){this.draw(s=>K$(s,e,t,i))}drawPlugin(e,t){this.draw(i=>Y$(i,e,t))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=D$(e=>{for(const t of e)t.type==="attributes"&&t.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(e){nm().error(e)}this.initBackground(),this._safeMutationObserver(e=>{this.element&&e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,t=e.background,i=this.element;if(!i)return;const s=i.style;if(s){if(t.color){const r=af(t.color);s.backgroundColor=r?dv(r,t.opacity):""}else s.backgroundColor="";s.backgroundImage=t.image||"",s.backgroundPosition=t.position||"",s.backgroundRepeat=t.repeat||"",s.backgroundSize=t.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor||e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles||e.getTransformValues||e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&gp in e.dataset?e.dataset[gp]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=Ii({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(t=>{this.element&&t.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw(t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(wS(t,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,t=e.retina.pixelRatio,i=e.canvas.size,s={width:this.element.offsetWidth*t,height:this.element.offsetHeight*t};if(s.height===i.height&&s.width===i.width&&s.height===this.element.height&&s.width===this.element.width)return!1;const r={...i};return this.element.width=i.width=this.element.offsetWidth*t,this.element.height=i.height=this.element.offsetHeight*t,this.container.started&&(this.resizeFactor={width:i.width/r.width,height:i.height/r.height}),!0}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>wS(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}function $s(n,e,t,i,s){if(i){let r={passive:!0};al(s)?r.capture=s:s!==void 0&&(r=s),n.addEventListener(e,t,r)}else{const r=s;n.removeEventListener(e,t,r)}}class $${constructor(e){this.container=e,this._doMouseTouchClick=t=>{const i=this.container,s=i.actualOptions;if(this._canPush){const r=i.interactivity.mouse,o=r.position;if(!o)return;r.clickPosition={...o},r.clickTime=new Date().getTime();const a=s.interactivity.events.onClick;lu(a.mode,l=>this.container.handleClickMode(l))}t.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=t=>{const i=t,s=this.container,r=s.options,o=r.defaultThemes,a=i.matches?o.dark:o.light,l=r.themes.find(h=>h.name===a);l&&l.default.auto&&s.loadTheme(a)},this._handleVisibilityChange=()=>{const t=this.container,i=t.actualOptions;this._mouseTouchFinish(),i.pauseOnBlur&&(document&&document.hidden?(t.pageHidden=!0,t.pause()):(t.pageHidden=!1,t.getAnimationStatus()?t.play(!0):t.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const t=this.container.canvas;t&&await t.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(t,i)=>{const s=this._handlers,r=this.container,o=r.actualOptions,a=r.interactivity.element;if(!a)return;const l=a,h=r.canvas.element;h&&(h.style.pointerEvents=l===h?"initial":"none"),(o.interactivity.events.onHover.enable||o.interactivity.events.onClick.enable)&&($s(a,lD,s.mouseMove,i),$s(a,x$,s.touchStart,i),$s(a,_$,s.touchMove,i),o.interactivity.events.onClick.enable?($s(a,cD,s.touchEndClick,i),$s(a,y$,s.mouseUp,i),$s(a,g$,s.mouseDown,i)):$s(a,cD,s.touchEnd,i),$s(a,t,s.mouseLeave,i),$s(a,A$,s.touchCancel,i))},this._manageListeners=t=>{const i=this._handlers,s=this.container,r=s.actualOptions,o=r.interactivity.detectsOn,a=s.canvas.element;let l=aD;o==="window"?(s.interactivity.element=window,l=v$):o==="parent"&&a?s.interactivity.element=a.parentElement??a.parentNode:s.interactivity.element=a,this._manageMediaMatch(t),this._manageResize(t),this._manageInteractivityListeners(l,t),document&&$s(document,M$,i.visibilityChange,t,!1)},this._manageMediaMatch=t=>{const i=this._handlers,s=KF("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){$s(s,"change",i.themeChange,t);return}s.addListener!==void 0&&(t?s.addListener(i.oldThemeChange):s.removeListener(i.oldThemeChange))}},this._manageResize=t=>{const i=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){$s(window,S$,i.resize,t);return}const o=s.canvas.element;this._resizeObserver&&!t?(o&&this._resizeObserver.unobserve(o),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&t&&o&&(this._resizeObserver=new ResizeObserver(async a=>{a.find(h=>h.target===o)&&await this._handleWindowResize()}),this._resizeObserver.observe(o))},this._mouseDown=()=>{const{interactivity:t}=this.container;if(!t)return;const{mouse:i}=t;i.clicking=!0,i.downPosition=i.position},this._mouseTouchClick=t=>{const i=this.container,s=i.actualOptions,{mouse:r}=i.interactivity;r.inside=!0;let o=!1;const a=r.position;if(!(!a||!s.interactivity.events.onClick.enable)){for(const[,l]of i.plugins)if(l.clickPositionValid&&(o=l.clickPositionValid(a),o))break;o||this._doMouseTouchClick(t),r.clicking=!1}},this._mouseTouchFinish=()=>{const t=this.container.interactivity;if(!t)return;const i=t.mouse;delete i.position,delete i.clickPosition,delete i.downPosition,t.status=aD,i.inside=!1,i.clicking=!1},this._mouseTouchMove=t=>{const i=this.container,s=i.actualOptions,r=i.interactivity,o=i.canvas.element;if(!r||!r.element)return;r.mouse.inside=!0;let a;if(t.type.startsWith("pointer")){this._canPush=!0;const h=t;if(r.element===window){if(o){const f=o.getBoundingClientRect();a={x:h.clientX-f.left,y:h.clientY-f.top}}}else if(s.interactivity.detectsOn==="parent"){const f=h.target,d=h.currentTarget;if(f&&d&&o){const p=f.getBoundingClientRect(),g=d.getBoundingClientRect(),v=o.getBoundingClientRect();a={x:h.offsetX+2*p.left-(g.left+v.left),y:h.offsetY+2*p.top-(g.top+v.top)}}else a={x:h.offsetX??h.clientX,y:h.offsetY??h.clientY}}else h.target===o&&(a={x:h.offsetX??h.clientX,y:h.offsetY??h.clientY})}else if(this._canPush=t.type!=="touchmove",o){const h=t,f=h.touches[h.touches.length-1],d=o.getBoundingClientRect();a={x:f.clientX-(d.left??0),y:f.clientY-(d.top??0)}}const l=i.retina.pixelRatio;a&&(a.x*=l,a.y*=l),r.mouse.position=a,r.status=lD},this._touchEnd=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchFinish()},this._touchEndClick=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchClick(t)},this._touchStart=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.set(r.identifier,performance.now());this._mouseTouchMove(t)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:t=>this._mouseTouchMove(t),mouseUp:t=>this._mouseTouchClick(t),touchStart:t=>this._touchStart(t),touchMove:t=>this._mouseTouchMove(t),touchEnd:t=>this._touchEnd(t),touchCancel:t=>this._touchEnd(t),touchEndClick:t=>this._touchEndClick(t),visibilityChange:()=>this._handleVisibilityChange(),themeChange:t=>this._handleThemeChange(t),oldThemeChange:t=>this._handleThemeChange(t),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}let yl=class $F{constructor(){this.value=""}static create(e,t){const i=new $F;return i.load(e),t!==void 0&&(po(t)||mo(t)?i.load({value:t}):i.load(t)),i}load(e){(e==null?void 0:e.value)!==void 0&&(this.value=e.value)}};class eee{constructor(){this.color=new yl,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=yl.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class tee{constructor(){this.color=new yl,this.color.value="#fff",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=yl.create(this.color,e.color)),e.opacity!==void 0&&(this.opacity=e.opacity))}}class nee{constructor(){this.composite="destination-out",this.cover=new tee,this.enable=!1}load(e){if(e){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const t=e.cover,i=po(e.cover)?{color:e.cover}:e.cover;this.cover.load(t.color!==void 0?t:{color:i})}e.enable!==void 0&&(this.enable=e.enable)}}}class iee{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class see{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}class pD{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(e){this.elementId=e}get elementId(){return this.ids}set elementId(e){this.ids=e}get ids(){return lu(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=lu(e,t=>`#${t}`)}load(e){if(!e)return;const t=e.ids??e.elementId??e.el;t!==void 0&&(this.ids=t),e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type)}}class ree{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class oee{constructor(){this.enable=!1,this.mode=[],this.parallax=new ree}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class aee{constructor(){this.delay=.5,this.enable=!0}load(e){e!==void 0&&(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class lee{constructor(){this.onClick=new see,this.onDiv=new pD,this.onHover=new oee,this.resize=new aee}get onclick(){return this.onClick}set onclick(e){this.onClick=e}get ondiv(){return this.onDiv}set ondiv(e){this.onDiv=e}get onhover(){return this.onHover}set onhover(e){this.onHover=e}load(e){if(!e)return;this.onClick.load(e.onClick??e.onclick);const t=e.onDiv??e.ondiv;t!==void 0&&(this.onDiv=lu(t,i=>{const s=new pD;return s.load(i),s})),this.onHover.load(e.onHover??e.onhover),al(e.resize)?this.resize.enable=e.resize:this.resize.load(e.resize)}}class cee{constructor(e,t){this._engine=e,this._container=t}load(e){if(!e||!this._container)return;const t=this._engine.plugins.interactors.get(this._container);if(t)for(const i of t)i.loadModeOptions&&i.loadModeOptions(this,e)}}class ez{constructor(e,t){this.detectsOn="window",this.events=new lee,this.modes=new cee(e,t)}get detect_on(){return this.detectsOn}set detect_on(e){this.detectsOn=e}load(e){if(!e)return;const t=e.detectsOn??e.detect_on;t!==void 0&&(this.detectsOn=t),this.events.load(e.events),this.modes.load(e.modes)}}class uee{load(e){e&&(e.position&&(this.position={x:e.position.x??50,y:e.position.y??50,mode:e.position.mode??"percent"}),e.options&&(this.options=Ii({},e.options)))}}class hee{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(e){e&&(e.maxWidth!==void 0&&(this.maxWidth=e.maxWidth),e.mode!==void 0&&(e.mode==="screen"?this.mode="screen":this.mode="canvas"),e.options!==void 0&&(this.options=Ii({},e.options)))}}class fee{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(e){e&&(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class dee{constructor(){this.name="",this.default=new fee}load(e){e&&(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=Ii({},e.options)))}}let CS=class{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(e){e&&(e.count!==void 0&&(this.count=jt(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(this.offset=jt(e.offset)),e.speed!==void 0&&(this.speed=jt(e.speed)),e.decay!==void 0&&(this.decay=jt(e.decay)),e.delay!==void 0&&(this.delay=jt(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}},pee=class{constructor(){this.h=new CS,this.s=new CS,this.l=new CS}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}},iE=class tz extends yl{constructor(){super(),this.animation=new pee}static create(e,t){const i=new tz;return i.load(e),t!==void 0&&(po(t)||mo(t)?i.load({value:t}):i.load(t)),i}load(e){if(super.load(e),!e)return;const t=e.animation;t!==void 0&&(t.enable!==void 0?this.animation.h.load(t):this.animation.load(e.animation))}},mee=class{constructor(){this.speed=2}load(e){e&&e.speed!==void 0&&(this.speed=e.speed)}},gee=class{constructor(){this.enable=!0,this.retries=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}},yee=class{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(e.count!==void 0&&(this.count=jt(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=jt(e.speed)),e.decay!==void 0&&(this.decay=jt(e.decay)),e.delay!==void 0&&(this.delay=jt(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}},nz=class extends yee{constructor(){super(),this.mode="auto",this.startValue="random"}load(e){super.load(e),e&&(e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue),e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}};class vee{constructor(){this.enable=!1,this.minimumValue=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue))}}let Tm=class{constructor(){this.random=new vee,this.value=0}load(e){e&&(al(e.random)?this.random.enable=e.random:this.random.load(e.random),e.value!==void 0&&(this.value=jt(e.value,this.random.enable?this.random.minimumValue:void 0)))}},mD=class extends Tm{constructor(){super(),this.random.minimumValue=.1,this.value=1}},iz=class{constructor(){this.horizontal=new mD,this.vertical=new mD}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}},xee=class{constructor(){this.absorb=new mee,this.bounce=new iz,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new gee}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=jt(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}},_ee=class{constructor(){this.offset=0,this.value=90}load(e){e&&(e.offset!==void 0&&(this.offset=jt(e.offset)),e.value!==void 0&&(this.value=jt(e.value)))}},Aee=class{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(e){this.rotate.x=e}get rotateY(){return this.rotate.y}set rotateY(e){this.rotate.y=e}load(e){var s,r;if(!e)return;e.distance!==void 0&&(this.distance=jt(e.distance)),e.enable!==void 0&&(this.enable=e.enable);const t=((s=e.rotate)==null?void 0:s.x)??e.rotateX;t!==void 0&&(this.rotate.x=t);const i=((r=e.rotate)==null?void 0:r.y)??e.rotateY;i!==void 0&&(this.rotate.y=i)}},See=class{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}},Mee=class{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=jt(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=jt(e.maxSpeed)))}},bee=class{constructor(){this.clamp=!0,this.delay=new Tm,this.enable=!1,this.options={}}load(e){e&&(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=Ii(this.options,e.options)))}},Eee=class{load(e){e&&(e.color!==void 0&&(this.color=yl.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}},wee=class{constructor(){this.enable=!1,this.length=10,this.fill=new Eee}get fillColor(){return this.fill.color}set fillColor(e){this.fill.load({color:e})}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),(e.fill!==void 0||e.fillColor!==void 0)&&this.fill.load(e.fill||{color:e.fillColor}),e.length!==void 0&&(this.length=e.length))}},Cee=class{constructor(){this.default="out"}load(e){e&&(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}},Tee=class{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=jt(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=Ii({},e.position)))}},Ree=class{constructor(){this.angle=new _ee,this.attract=new Aee,this.center=new See,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new Mee,this.path=new bee,this.outModes=new Cee,this.random=!1,this.size=!1,this.speed=2,this.spin=new Tee,this.straight=!1,this.trail=new wee,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(e){this.collisions=e}get collisions(){return!1}set collisions(e){}get noise(){return this.path}set noise(e){this.path=e}get outMode(){return this.outModes.default}set outMode(e){this.outModes.default=e}get out_mode(){return this.outMode}set out_mode(e){this.outMode=e}load(e){if(!e)return;this.angle.load(Ir(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=jt(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=Ir(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=jt(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes??e.outMode??e.out_mode;t!==void 0&&(Qd(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path??e.noise),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=jt(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}},Bee=class extends nz{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(e){this.minimumValue=e}load(e){(e==null?void 0:e.opacity_min)!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.opacity_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}},Pee=class extends Tm{constructor(){super(),this.animation=new Bee,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(!e)return;super.load(e);const t=e.animation??e.anim;t!==void 0&&(this.animation.load(t),this.value=jt(this.value,this.animation.enable?this.animation.minimumValue:void 0))}},Dee=class{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(e){this.width=e}get factor(){return this.height}set factor(e){this.height=e}get value_area(){return this.area}set value_area(e){this.area=e}load(e){if(!e)return;e.enable!==void 0&&(this.enable=e.enable);const t=e.width??e.area??e.value_area;t!==void 0&&(this.width=t);const i=e.height??e.factor;i!==void 0&&(this.height=i)}},Lee=class{constructor(){this.density=new Dee,this.limit=0,this.value=0}get max(){return this.limit}set max(e){this.limit=e}load(e){if(!e)return;this.density.load(e.density);const t=e.limit??e.max;t!==void 0&&(this.limit=t),e.value!==void 0&&(this.value=e.value)}},Oee=class{constructor(){this.blur=0,this.color=new yl,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=yl.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}};const TS="character",RS="char",BS="image",PS="images",DS="polygon",LS="star";let Iee=class{constructor(){this.loadShape=(e,t,i,s)=>{if(!e)return;const r=mo(e),o=r?[]:{},a=r!==mo(this.options[t]),l=r!==mo(this.options[i]);a&&(this.options[t]=o),l&&s&&(this.options[i]=o),this.options[t]=Ii(this.options[t]??o,e),(!this.options[i]||s)&&(this.options[i]=Ii(this.options[i]??o,e))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[TS]??this.options[RS]}set character(e){this.options[RS]=this.options[TS]=e}get custom(){return this.options}set custom(e){this.options=e}get image(){return this.options[BS]??this.options[PS]}set image(e){this.options[PS]=this.options[BS]=e}get images(){return this.image}set images(e){this.image=e}get polygon(){return this.options[DS]??this.options[LS]}set polygon(e){this.options[LS]=this.options[DS]=e}get stroke(){return[]}set stroke(e){}load(e){if(!e)return;const t=e.options??e.custom;if(t!==void 0)for(const i in t){const s=t[i];s&&(this.options[i]=Ii(this.options[i]??{},s))}this.loadShape(e.character,TS,RS,!0),this.loadShape(e.polygon,DS,LS,!1),this.loadShape(e.image??e.images,BS,PS,!0),e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}},Nee=class extends nz{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(e){this.minimumValue=e}load(e){(e==null?void 0:e.size_min)!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.size_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}},Uee=class extends Tm{constructor(){super(),this.animation=new Nee,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(super.load(e),!e)return;const t=e.animation??e.anim;t!==void 0&&(this.animation.load(t),this.value=jt(this.value,this.animation.enable?this.animation.minimumValue:void 0))}},gD=class{constructor(){this.width=0}load(e){e&&(e.color!==void 0&&(this.color=iE.create(this.color,e.color)),e.width!==void 0&&(this.width=jt(e.width)),e.opacity!==void 0&&(this.opacity=jt(e.opacity)))}},Fee=class extends Tm{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}},zee=class{constructor(e,t){this._engine=e,this._container=t,this.bounce=new iz,this.collisions=new xee,this.color=new iE,this.color.value="#fff",this.groups={},this.move=new Ree,this.number=new Lee,this.opacity=new Pee,this.reduceDuplicates=!1,this.shadow=new Oee,this.shape=new Iee,this.size=new Uee,this.stroke=new gD,this.zIndex=new Fee}load(e){var s,r,o;if(!e)return;if(this.bounce.load(e.bounce),this.color.load(iE.create(this.color,e.color)),e.groups!==void 0)for(const a in e.groups){const l=e.groups[a];l!==void 0&&(this.groups[a]=Ii(this.groups[a]??{},l))}this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex);const t=((s=e.move)==null?void 0:s.collisions)??((r=e.move)==null?void 0:r.bounce);t!==void 0&&(this.collisions.enable=t),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=Ii({},e.interactivity));const i=e.stroke??((o=e.shape)==null?void 0:o.stroke);if(i&&(this.stroke=lu(i,a=>{const l=new gD;return l.load(a),l})),this._container){const a=this._engine.plugins.updaters.get(this._container);if(a)for(const h of a)h.loadOptions&&h.loadOptions(this,e);const l=this._engine.plugins.interactors.get(this._container);if(l)for(const h of l)h.loadParticlesOptions&&h.loadParticlesOptions(this,e)}}};function sz(n,...e){for(const t of e)n.load(t)}function rz(n,e,...t){const i=new zee(n,e);return sz(i,...t),i}class kee{constructor(e,t){this._findDefaultTheme=i=>this.themes.find(s=>s.default.value&&s.default.mode===i)??this.themes.find(s=>s.default.value&&s.default.mode==="any"),this._importPreset=i=>{this.load(this._engine.plugins.getPreset(i))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new eee,this.backgroundMask=new nee,this.defaultThemes={},this.delay=0,this.fullScreen=new iee,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new ez(e,t),this.manualParticles=[],this.particles=rz(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(e){this.fullScreen.load(e)}get fps_limit(){return this.fpsLimit}set fps_limit(e){this.fpsLimit=e}get retina_detect(){return this.detectRetina}set retina_detect(e){this.detectRetina=e}load(e){var o,a;if(!e)return;e.preset!==void 0&&lu(e.preset,l=>this._importPreset(l)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.delay!==void 0&&(this.delay=jt(e.delay));const t=e.detectRetina??e.retina_detect;t!==void 0&&(this.detectRetina=t),e.duration!==void 0&&(this.duration=jt(e.duration));const i=e.fpsLimit??e.fps_limit;i!==void 0&&(this.fpsLimit=i),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const s=e.fullScreen??e.backgroundMode;al(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(l=>{const h=new uee;return h.load(l),h})),this.particles.load(e.particles),this.style=Ii(this.style,e.style),this._engine.plugins.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const r=this._engine.plugins.interactors.get(this._container);if(r)for(const l of r)l.loadOptions&&l.loadOptions(this,e);if(e.responsive!==void 0)for(const l of e.responsive){const h=new hee;h.load(l),this.responsive.push(h)}if(this.responsive.sort((l,h)=>l.maxWidth-h.maxWidth),e.themes!==void 0)for(const l of e.themes){const h=this.themes.find(f=>f.name===l.name);if(h)h.load(l);else{const f=new dee;f.load(l),this.themes.push(f)}}this.defaultThemes.dark=(o=this._findDefaultTheme("dark"))==null?void 0:o.name,this.defaultThemes.light=(a=this._findDefaultTheme("light"))==null?void 0:a.name}setResponsive(e,t,i){this.load(i);const s=this.responsive.find(r=>r.mode==="screen"&&screen?r.maxWidth>screen.availWidth:r.maxWidth*t>e);return this.load(s==null?void 0:s.options),s==null?void 0:s.maxWidth}setTheme(e){if(e){const t=this.themes.find(i=>i.name===e);t&&this.load(t.options)}else{const t=KF("(prefers-color-scheme: dark)"),i=t&&t.matches,s=this._findDefaultTheme(i?"dark":"light");s&&this.load(s.options)}}}class Hee{constructor(e,t){this.container=t,this._engine=e,this._interactors=e.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&await t.interact(e)}handleClickMode(e){for(const t of this._externalInteractors)t.handleClickMode&&t.handleClickMode(e)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case"external":this._externalInteractors.push(e);break;case"particles":this._particleInteractors.push(e);break}e.init()}}async particlesInteract(e,t){for(const i of this._externalInteractors)i.clear(e,t);for(const i of this._particleInteractors)i.isEnabled(e)&&await i.interact(e,t)}async reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}const yD=n=>{if(!L$(n.outMode,n.checkModes))return;const e=n.radius*2;n.coord>n.maxCoord-e?n.setCb(-n.radius):n.coord<e&&n.setCb(n.radius)};class Gee{constructor(e,t,i,s,r,o){this.container=i,this._calcPosition=(a,l,h,f=0)=>{for(const[,A]of a.plugins){const M=A.particlePosition!==void 0?A.particlePosition(l,this):void 0;if(M)return tE.create(M.x,M.y,h)}const d=a.canvas.size,p=R$({size:d,position:l}),g=tE.create(p.x,p.y,h),v=this.getRadius(),S=this.options.move.outModes,_=A=>{yD({outMode:A,checkModes:["bounce","bounce-horizontal"],coord:g.x,maxCoord:a.canvas.size.width,setCb:M=>g.x+=M,radius:v})},y=A=>{yD({outMode:A,checkModes:["bounce","bounce-vertical"],coord:g.y,maxCoord:a.canvas.size.height,setCb:M=>g.y+=M,radius:v})};return _(S.left??S.default),_(S.right??S.default),y(S.top??S.default),y(S.bottom??S.default),this._checkOverlap(g,f)?this._calcPosition(a,void 0,h,f+1):g},this._calculateVelocity=()=>{const a=T$(this.direction),l=a.copy(),h=this.options.move;if(h.direction==="inside"||h.direction==="outside")return l;const f=Math.PI/180*sn(h.angle.value),d=Math.PI/180*sn(h.angle.offset),p={left:d-f/2,right:d+f/2};return h.straight||(l.angle+=of(jt(p.left,p.right))),h.random&&typeof h.speed=="number"&&(l.length*=oa()),l},this._checkOverlap=(a,l=0)=>{const h=this.options.collisions,f=this.getRadius();if(!h.enable)return!1;const d=h.overlap;if(d.enable)return!1;const p=d.retries;if(p>=0&&l>p)throw new Error(`${au} particle is overlapping and can't be placed`);return!!this.container.particles.find(g=>Lw(a,g.position)<f+g.getRadius())},this._getRollColor=a=>{if(!a||!this.roll||!this.backColor&&!this.roll.alter)return a;const l=this.roll.horizontal&&this.roll.vertical?2:1,h=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+h)/(Math.PI/l))%2?this.backColor?this.backColor:this.roll.alter?q$(a,this.roll.alter.type,this.roll.alter.value):a:a},this._initPosition=a=>{const l=this.container,h=sn(this.options.zIndex.value);this.position=this._calcPosition(l,a,JF(h,0,l.zLayers)),this.initialPosition=this.position.copy();const f=l.canvas.size;switch(this.moveCenter={...qF(this.options.move.center,f),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=C$(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=XF.origin},this._loadShapeData=(a,l)=>{const h=a.options[this.shape];if(h)return Ii({close:a.close,fill:a.fill},yp(h,this.id,l))},this._engine=e,this.init(t,s,r,o)}destroy(e){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,i=this.pathGenerator;for(const[,s]of t.plugins)s.particleDestroyed&&s.particleDestroyed(this,e);for(const s of t.particles.updaters)s.particleDestroyed&&s.particleDestroyed(this,e);i&&i.reset(this)}draw(e){const t=this.container;for(const[,i]of t.plugins)t.canvas.drawParticlePlugin(i,this,e);t.canvas.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??dD(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??dD(this.strokeColor))}init(e,t,i,s){const r=this.container,o=this._engine;this.id=e,this.group=s,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const a=r.retina.pixelRatio,l=r.actualOptions,h=rz(this._engine,r,l.particles),f=h.shape.type,{reduceDuplicates:d}=h;this.shape=yp(f,this.id,d);const p=h.shape;if(i&&i.shape&&i.shape.type){const M=i.shape.type,E=yp(M,this.id,d);E&&(this.shape=E,p.load(i.shape))}this.shapeData=this._loadShapeData(p,d),h.load(i);const g=this.shapeData;g&&h.load(g.particles);const v=new ez(o,r);v.load(r.actualOptions.interactivity),v.load(h.interactivity),this.interactivity=v,this.fill=(g==null?void 0:g.fill)??h.shape.fill,this.close=(g==null?void 0:g.close)??h.shape.close,this.options=h;const S=this.options.move.path;this.pathDelay=E$(S.delay)*1e3,S.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(S.generator),this.pathGenerator&&r.addPath(S.generator,this.pathGenerator)&&this.pathGenerator.init(r)),r.retina.initParticle(this),this.size=I$(this.options.size,a),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-sn(this.options.move.decay);const _=r.particles;_.needsSort=_.needsSort||_.lastZIndex<this.position.z,_.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/r.zLayers,this.sides=24;let y=r.drawers.get(this.shape);y||(y=this._engine.plugins.getShapeDrawer(this.shape),y&&r.drawers.set(this.shape,y)),y&&y.loadShape&&y.loadShape(this);const A=y==null?void 0:y.getSidesCount;A&&(this.sides=A(this)),this.spawning=!1,this.shadowColor=af(this.options.shadow.color);for(const M of r.particles.updaters)M.init(this);for(const M of r.particles.movers)M.init&&M.init(this);y&&y.particleInit&&y.particleInit(r,this);for(const[,M]of r.plugins)M.particleCreated&&M.particleCreated(this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,i=this.position;return i.x>=-e&&i.y>=-e&&i.y<=t.height+e&&i.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const e of this.container.particles.updaters)e.reset&&e.reset(this)}}class Vee{constructor(e,t){this.position=e,this.particle=t}}class oz{constructor(e,t){this.position={x:e,y:t}}}let a0=class az extends oz{constructor(e,t,i,s){super(e,t),this.size={height:s,width:i}}contains(e){const t=this.size.width,i=this.size.height,s=this.position;return e.x>=s.x&&e.x<=s.x+t&&e.y>=s.y&&e.y<=s.y+i}intersects(e){e instanceof lz&&e.intersects(this);const t=this.size.width,i=this.size.height,s=this.position,r=e.position,o=e instanceof az?e.size:{width:0,height:0},a=o.width,l=o.height;return r.x<s.x+t&&r.x+a>s.x&&r.y<s.y+i&&r.y+l>s.y}},lz=class cz extends oz{constructor(e,t,i){super(e,t),this.radius=i}contains(e){return Lw(e,this.position)<=this.radius}intersects(e){const t=this.position,i=e.position,s={x:Math.abs(i.x-t.x),y:Math.abs(i.y-t.y)},r=this.radius;if(e instanceof cz){const o=r+e.radius,a=Math.sqrt(s.x**2+s.y**2);return o>a}else if(e instanceof a0){const{width:o,height:a}=e.size;return Math.pow(s.x-o,2)+Math.pow(s.y-a,2)<=r**2||s.x<=r+o&&s.y<=r+a||s.x<=o||s.y<=a}return!1}};class l0{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:i,y:s}=this.rectangle.position,{width:r,height:o}=this.rectangle.size,{capacity:a}=this;for(let l=0;l<4;l++)this._subs.push(new l0(new a0(i+r/2*(l%2),s+o/2*(Math.round(l/2)-l%2),r/2,o/2),a));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(t=>t.insert(e))):!1}query(e,t,i){const s=i||[];if(!e.intersects(this.rectangle))return[];for(const r of this._points)!e.contains(r.position)&&Lw(e.position,r.position)>r.particle.getRadius()&&(!t||t(r.particle))||s.push(r.particle);if(this._divided)for(const r of this._subs)r.query(e,t,s);return s}queryCircle(e,t,i){return this.query(new lz(e.x,e.y,t),i)}queryRectangle(e,t,i){return this.query(new a0(e.x,e.y,t.width,t.height),i)}}const vD=4,xD=n=>new a0(-n.width/4,-n.height/4,n.width*3/2,n.height*3/2);let Wee=class{constructor(e,t){this._applyDensity=(s,r,o)=>{var g;if(!((g=s.number.density)!=null&&g.enable))return;const a=s.number,l=this._initDensityFactor(a.density),h=a.value,f=a.limit>0?a.limit:h,d=Math.min(h,f)*l+r,p=Math.min(this.count,this.filter(v=>v.group===o).length);this.limit=a.limit*l,p<d?this.push(Math.abs(d-p),void 0,s,o):p>d&&this.removeQuantity(p-d,o)},this._initDensityFactor=s=>{const r=this._container;if(!r.canvas.element||!s.enable)return 1;const o=r.canvas.element,a=r.retina.pixelRatio;return o.width*o.height/(s.factor*a**2*s.area)},this._pushParticle=(s,r,o,a)=>{try{let l=this.pool.pop();l?l.init(this._nextId,s,r,o):l=new Gee(this._engine,this._nextId,this._container,s,r,o);let h=!0;return a&&(h=a(l)),h?(this._array.push(l),this._zArray.push(l),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:l}}),l):void 0}catch(l){nm().warning(`${au} adding particle: ${l}`);return}},this._removeParticle=(s,r,o)=>{const a=this._array[s];if(!a||a.group!==r)return!1;a.destroy(o);const l=this._zArray.indexOf(a);return this._array.splice(s,1),this._zArray.splice(l,1),this.pool.push(a),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:a}}),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new Hee(e,t);const i=t.canvas.size;this.quadTree=new l0(xD(i),vD),this.movers=this._engine.plugins.getMovers(t,!0),this.updaters=this._engine.plugins.getUpdaters(t,!0)}get count(){return this._array.length}addManualParticles(){const e=this._container,t=e.actualOptions;for(const i of t.manualParticles)this.addParticle(i.position?qF(i.position,e.canvas.size):void 0,i.options)}addParticle(e,t,i,s){const r=this._container,o=r.actualOptions,a=o.particles.number.limit;if(a>0){const l=this.count+1-a;l>0&&this.removeQuantity(l)}return this._pushParticle(e,t,i,s)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(e){const t=this._container;t.canvas.clear(),await this.update(e);for(const[,i]of t.plugins)t.canvas.drawPlugin(i,e);for(const i of this._zArray)i.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}handleClickMode(e){this._interactionManager.handleClickMode(e)}init(){var s;const e=this._container,t=e.actualOptions;this.lastZIndex=0,this.needsSort=!1;let i=!1;this.updaters=this._engine.plugins.getUpdaters(e,!0),this._interactionManager.init();for(const[,r]of e.plugins)if(r.particlesInitialization!==void 0&&(i=r.particlesInitialization()),i)break;this._interactionManager.init();for(const[,r]of e.pathGenerators)r.init(e);if(this.addManualParticles(),!i){for(const r in t.particles.groups){const o=t.particles.groups[r];for(let a=this.count,l=0;l<((s=o.number)==null?void 0:s.value)&&a<t.particles.number.value;a++,l++)this.addParticle(void 0,o,r)}for(let r=this.count;r<t.particles.number.value;r++)this.addParticle()}}push(e,t,i,s){this.pushing=!0;for(let r=0;r<e;r++)this.addParticle(t==null?void 0:t.position,i,s);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(e,t,i){this.removeAt(this._array.indexOf(e),void 0,t,i)}removeAt(e,t=1,i,s){if(e<0||e>this.count)return;let r=0;for(let o=e;r<t&&o<this.count;o++)this._removeParticle(o--,i,s)&&r++}removeQuantity(e,t){this.removeAt(0,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups;for(const i in t)this._applyDensity(t[i],0,i);this._applyDensity(e.particles,e.manualParticles.length)}async update(e){const t=this._container,i=new Set;this.quadTree=new l0(xD(t.canvas.size),vD);for(const[,s]of t.pathGenerators)s.update();for(const[,s]of t.plugins)s.update&&s.update(e);for(const s of this._array){const r=t.canvas.resizeFactor;r&&!s.ignoresResizeRatio&&(s.position.x*=r.width,s.position.y*=r.height,s.initialPosition.x*=r.width,s.initialPosition.y*=r.height),s.ignoresResizeRatio=!1,await this._interactionManager.reset(s);for(const[,o]of this._container.plugins){if(s.destroyed)break;o.particleUpdate&&o.particleUpdate(s,e)}for(const o of this.movers)o.isEnabled(s)&&o.move(s,e);if(s.destroyed){i.add(s);continue}this.quadTree.insert(new Vee(s.getPosition(),s))}if(i.size){const s=r=>!i.has(r);this._array=this.filter(s),this._zArray=this._zArray.filter(s),this.pool.push(...i)}await this._interactionManager.externalInteract(e);for(const s of this._array){for(const r of this.updaters)r.update(s,e);!s.destroyed&&!s.spawning&&await this._interactionManager.particlesInteract(s,e)}if(delete t.canvas.resizeFactor,this.needsSort){const s=this._zArray;s.sort((r,o)=>o.position.z-r.position.z||r.id-o.id),this.lastZIndex=s[s.length-1].position.z,this.needsSort=!1}}};class jee{constructor(e){this.container=e,this.pixelRatio=1,this.reduceFactor=1}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||vx()?1:window.devicePixelRatio,this.reduceFactor=1;const i=this.pixelRatio;if(e.canvas.element){const o=e.canvas.element;e.canvas.size.width=o.offsetWidth*i,e.canvas.size.height=o.offsetHeight*i}const s=t.particles,r=s.move;this.attractDistance=sn(r.attract.distance)*i,this.maxSpeed=sn(r.gravity.maxSpeed)*i,this.sizeAnimationSpeed=sn(s.size.animation.speed)*i}initParticle(e){const t=e.options,i=this.pixelRatio,s=t.move,r=s.distance,o=e.retina;o.attractDistance=sn(s.attract.distance)*i,o.moveDrift=sn(s.drift)*i,o.moveSpeed=sn(s.speed)*i,o.sizeAnimationSpeed=sn(t.size.animation.speed)*i;const a=o.maxDistance;a.horizontal=r.horizontal!==void 0?r.horizontal*i:void 0,a.vertical=r.vertical!==void 0?r.vertical*i:void 0,o.maxSpeed=sn(s.gravity.maxSpeed)*i}}function An(n){return n&&!n.destroyed}function Xee(n,e=60,t=!1){return{value:n,factor:t?60/e:60*n/1e3}}function Ah(n,e,...t){const i=new kee(n,e);return sz(i,...t),i}const Jee="default",_D={generate:n=>n.velocity,init:()=>{},update:()=>{},reset:()=>{}};class Yee{constructor(e,t,i){this.id=t,this._intersectionManager=s=>{if(!(!An(this)||!this.actualOptions.pauseOnOutsideViewport))for(const r of s)r.target===this.interactivity.element&&(r.isIntersecting?this.play:this.pause)()},this._nextFrame=async s=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&s<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??(this.lastFrameTime=s);const r=Xee(s-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(r.value),this.lastFrameTime=s,r.value>1e3){this.draw(!1);return}if(await this.particles.draw(r),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(r){nm().error(`${au} in animation loop`,r)}},this._engine=e,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=i,this._initialSourceOptions=i,this.retina=new jee(this),this.canvas=new Z$(this),this.particles=new Wee(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=Ah(this._engine,this),this.actualOptions=Ah(this._engine,this),this._eventListeners=new $$(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(s=>this._intersectionManager(s))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!An(this))return;const t=this.interactivity.element;if(!t)return;const i=(d,p,g)=>{if(!An(this))return;const v=this.retina.pixelRatio,S={x:p.x*v,y:p.y*v},_=this.particles.quadTree.queryCircle(S,g*v);e(d,_)},s=d=>{if(!An(this))return;const p=d,g={x:p.offsetX||p.clientX,y:p.offsetY||p.clientY};i(d,g,1)},r=()=>{An(this)&&(h=!0,f=!1)},o=()=>{An(this)&&(f=!0)},a=d=>{if(An(this)){if(h&&!f){const p=d;let g=p.touches[p.touches.length-1];if(!g&&(g=p.changedTouches[p.changedTouches.length-1],!g))return;const v=this.canvas.element,S=v?v.getBoundingClientRect():void 0,_={x:g.clientX-(S?S.left:0),y:g.clientY-(S?S.top:0)};i(d,_,Math.max(g.radiusX,g.radiusY))}h=!1,f=!1}},l=()=>{An(this)&&(h=!1,f=!1)};let h=!1,f=!1;t.addEventListener("click",s),t.addEventListener("touchstart",r),t.addEventListener("touchmove",o),t.addEventListener("touchend",a),t.addEventListener("touchcancel",l)}addLifeTime(e){this._lifeTime+=e}addPath(e,t,i=!1){return!An(this)||!i&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,t??_D),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!An(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,i]of this.drawers)i.destroy&&i.destroy(this);for(const i of this.drawers.keys())this.drawers.delete(i);this._engine.plugins.destroy(this),this.destroyed=!0;const e=this._engine.dom(),t=e.findIndex(i=>i===this);t>=0&&e.splice(t,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(e){if(!An(this))return;let t=e;this._drawAnimationFrame=requestAnimationFrame(async i=>{t&&(this.lastFrameTime=void 0,t=!1),await this._nextFrame(i)})}async export(e,t={}){for(const[,i]of this.plugins){if(!i.export)continue;const s=await i.export(e,t);if(s.supported)return s.blob}nm().error(`${au} - Export plugin with type ${e} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&An(this)}handleClickMode(e){if(An(this)){this.particles.handleClickMode(e);for(const[,t]of this.plugins)t.handleClickMode&&t.handleClickMode(e)}}async init(){if(!An(this))return;const e=this._engine.plugins.getSupportedShapes();for(const i of e){const s=this._engine.plugins.getShapeDrawer(i);s&&this.drawers.set(i,s)}this._options=Ah(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Ah(this._engine,this,this._options);const t=this._engine.plugins.getAvailablePlugins(this);for(const[i,s]of t)this.plugins.set(i,s);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=sn(this.actualOptions.duration)*1e3,this._delay=sn(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,i]of this.drawers)i.init&&await i.init(this);for(const[,i]of this.plugins)i.init&&await i.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,i]of this.plugins)i.particlesSetup&&i.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(e){An(this)&&(this._currentTheme=e,await this.refresh())}pause(){if(An(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,e]of this.plugins)e.pause&&e.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(e){if(!An(this))return;const t=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),t)for(const[,i]of this.plugins)i.play&&i.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(t||!1)}async refresh(){if(An(this))return this.stop(),this.start()}async reset(){if(An(this))return this._initialSourceOptions=void 0,this._options=Ah(this._engine,this),this.actualOptions=Ah(this._engine,this,this._options),this.refresh()}setNoise(e,t,i){An(this)&&this.setPath(e,t,i)}setPath(e,t,i){if(!e||!An(this))return;const s={..._D};if(QF(e))s.generate=e,t&&(s.init=t),i&&(s.update=i);else{const r=s;s.generate=e.generate||r.generate,s.init=e.init||r.init,s.update=e.update||r.update}this.addPath(Jee,s,!0)}async start(){!An(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,t]of this.plugins)t.start&&await t.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),e()},this._delay)}))}stop(){if(!(!An(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,e]of this.plugins)e.stop&&e.stop();for(const e of this.plugins.keys())this.plugins.delete(e);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===e?!1:(this.responsiveMaxWidth=e,!0)}}class Kee{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let i=this._listeners.get(e);i||(i=[],this._listeners.set(e,i)),i.push(t)}dispatchEvent(e,t){const i=this._listeners.get(e);i&&i.forEach(s=>s(t))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const i=this._listeners.get(e);if(!i)return;const s=i.length,r=i.indexOf(t);r<0||(s===1?this._listeners.delete(e):i.splice(r,1))}}function OS(n,e,t,i=!1){let s=e.get(n);return(!s||i)&&(s=[...t.values()].map(r=>r(n)),e.set(n,s)),s}class qee{constructor(e){this._engine=e,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(e,t){this._initializers.interactors.set(e,t)}addParticleMover(e,t){this._initializers.movers.set(e,t)}addParticleUpdater(e,t){this._initializers.updaters.set(e,t)}addPathGenerator(e,t){!this.getPathGenerator(e)&&this.pathGenerators.set(e,t)}addPlugin(e){!this.getPlugin(e.id)&&this.plugins.push(e)}addPreset(e,t,i=!1){(i||!this.getPreset(e))&&this.presets.set(e,t)}addShapeDrawer(e,t){lu(e,i=>{!this.getShapeDrawer(i)&&this.drawers.set(i,t)})}destroy(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}getAvailablePlugins(e){const t=new Map;for(const i of this.plugins)i.needsPlugin(e.actualOptions)&&t.set(i.id,i.getPlugin(e));return t}getInteractors(e,t=!1){return OS(e,this.interactors,this._initializers.interactors,t)}getMovers(e,t=!1){return OS(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(t=>t.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.drawers.get(e)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(e,t=!1){return OS(e,this.updaters,this._initializers.updaters,t)}loadOptions(e,t){for(const i of this.plugins)i.loadOptions(e,t)}loadParticlesOptions(e,t,...i){const s=this.updaters.get(e);if(s)for(const r of s)r.loadOptions&&r.loadOptions(t,...i)}}async function Qee(n){const e=yp(n.url,n.index);if(!e)return n.fallback;const t=await fetch(e);return t.ok?t.json():(nm().error(`${au} ${t.status} while retrieving config file`),n.fallback)}function Zee(n){return!n.id&&!n.element&&!n.url&&!n.options}function $ee(n){return!Zee(n)}class ete{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new Kee,this._initialized=!1,this.plugins=new qee(this)}get configs(){const e={};for(const[t,i]of this._configs)e[t]=i;return e}get version(){return"2.12.0"}addConfig(e,t){po(e)?t&&(t.name=e,this._configs.set(e,t)):this._configs.set(e.name??"default",e)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t,i=!0){this.plugins.addInteractor(e,t),await this.refresh(i)}async addMover(e,t,i=!0){this.plugins.addParticleMover(e,t),await this.refresh(i)}async addParticleUpdater(e,t,i=!0){this.plugins.addParticleUpdater(e,t),await this.refresh(i)}async addPathGenerator(e,t,i=!0){this.plugins.addPathGenerator(e,t),await this.refresh(i)}async addPlugin(e,t=!0){this.plugins.addPlugin(e),await this.refresh(t)}async addPreset(e,t,i=!1,s=!0){this.plugins.addPreset(e,t,i),await this.refresh(s)}async addShape(e,t,i,s,r,o=!0){let a,l=o,h,f,d;al(i)?(l=i,h=void 0):h=i,al(s)?(l=s,f=void 0):f=s,al(r)?(l=r,d=void 0):d=r,QF(t)?a={afterEffect:f,destroy:d,draw:t,init:h}:a=t,this.plugins.addShapeDrawer(e,a),await this.refresh(l)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this._domArray}domItem(e){const t=this.dom(),i=t[e];if(!i||i.destroyed){t.splice(e,1);return}return i}init(){this._initialized||(this._initialized=!0)}async load(e,t){return this.loadFromArray(e,t)}async loadFromArray(e,t,i){let s;return $ee(e)?s=e:(s={},po(e)?s.id=e:s.options=e,Ir(t)?s.index=t:s.options=t??s.options,s.index=i??s.index),this._loadParams(s)}async loadJSON(e,t,i){let s,r;return Ir(t)||t===void 0?s=e:(r=e,s=t),this._loadParams({id:r,url:s,index:i})}async refresh(e=!0){e&&this.dom().forEach(t=>t.refresh())}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}async set(e,t,i,s){const r={index:s};return po(e)?r.id=e:r.element=e,t instanceof HTMLElement?r.element=t:r.options=t,Ir(i)?r.index=i:r.options=i??r.options,this._loadParams(r)}async setJSON(e,t,i,s){const r={};return e instanceof HTMLElement?(r.element=e,r.url=t,r.index=i):(r.id=e,r.element=t,r.url=i,r.index=s),this._loadParams(r)}setOnClickHandler(e){const t=this.dom();if(!t.length)throw new Error(`${au} can only set click handlers after calling tsParticles.load()`);for(const i of t)i.addClickHandler(e)}async _loadParams(e){const t=e.id??`tsparticles${Math.floor(oa()*1e4)}`,{index:i,url:s}=e,r=s?await Qee({fallback:e.options,url:s,index:i}):e.options;let o=e.element??document.getElementById(t);o||(o=document.createElement("div"),o.id=t,document.body.append(o));const a=yp(r,i),l=this.dom(),h=l.findIndex(p=>p.id===t);if(h>=0){const p=this.domItem(h);p&&!p.destroyed&&(p.destroy(),l.splice(h,1))}let f;if(o.tagName.toLowerCase()==="canvas")f=o,f.dataset[gp]="false";else{const p=o.getElementsByTagName("canvas");p.length?(f=p[0],f.dataset[gp]="false"):(f=document.createElement("canvas"),f.dataset[gp]="true",o.appendChild(f))}f.style.width||(f.style.width="100%"),f.style.height||(f.style.height="100%");const d=new Yee(this,t,a);return h>=0?l.splice(h,0,d):l.push(d),d.canvas.loadCanvas(f),await d.start(),d}}let tte=class{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return nE(i)}handleRangeColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.l!==void 0)return nE({h:sn(i.h),l:sn(i.l),s:sn(i.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,i=t.exec(e);return i?H$({a:i.length>4?YF(i[5]):1,h:parseInt(i[1],10),l:parseInt(i[3],10),s:parseInt(i[2],10)}):void 0}},nte=class{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return i}handleRangeColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return{r:sn(i.r),g:sn(i.g),b:sn(i.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,i=t.exec(e);return i?{a:i.length>4?YF(i[5]):1,b:parseInt(i[3],10),g:parseInt(i[2],10),r:parseInt(i[1],10)}:void 0}};function ite(){const n=new nte,e=new tte;uD(n),uD(e);const t=new ete;return t.init(),t}const sE=ite();vx()||(window.tsParticles=sE);const jh=n=>typeof n=="object"&&n!==null;function c0(n,e,t=()=>!1){if(!jh(n)||!jh(e))return n===e;const i=Object.keys(n).filter(r=>!t(r)),s=Object.keys(e).filter(r=>!t(r));if(i.length!==s.length)return!1;for(const r of i){const o=n[r],a=e[r];if(jh(o)&&jh(a)){if(o===e&&a===n)continue;if(!c0(o,a,t))return!1}else if(Array.isArray(o)&&Array.isArray(a)){if(!uz(o,a,t))return!1}else if(o!==a)return!1}return!0}function uz(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){const s=n[i],r=e[i];if(Array.isArray(s)&&Array.isArray(r)){if(!uz(s,r,t))return!1}else if(jh(s)&&jh(r)){if(!c0(s,r,t))return!1}else if(s!==r)return!1}return!0}const hz="tsparticles";class _x extends fe.Component{constructor(e){super(e),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(e){const t=e.options??e.params,i=this.props.options??this.props.params;return e.url!==this.props.url||e.id!==this.props.id||e.canvasClassName!==this.props.canvasClassName||e.className!==this.props.className||e.height!==this.props.height||e.width!==this.props.width||!c0(e.style,this.props.style)||e.init!==this.props.init||e.loaded!==this.props.loaded||!c0(t,i,s=>s.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(sE),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:e,height:t,className:i,canvasClassName:s,id:r}=this.props;return io.createElement("div",{className:i,id:r},io.createElement("canvas",{className:s,style:{...this.props.style,width:e,height:t}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const e=this.props.id??_x.defaultProps.id??hz,t=await sE.load({url:this.props.url,id:e,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=t),this.setState({library:t}),this.props.loaded&&await this.props.loaded(t)}}_x.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:hz};const ste="pointerleave",Rm="pointermove",Pf="tsParticles - Error",gi=100,ms=.5,Di=1e3,nr={x:0,y:0,z:0},u0="random",pv="mid",ro=2,bc=2,rte=1,mv=255,Uc=360,rE=100,oE=100,AD=0,aE=0,ote=60,SD=0,fz=1,ate=0,lte=1,cte=1,ute=0,uc=255,IS=3,NS=6,hte=1,fte=1,dte=0,pte=0,mte=0,gte=0;var lE;(function(n){n.bottom="bottom",n.bottomLeft="bottom-left",n.bottomRight="bottom-right",n.left="left",n.none="none",n.right="right",n.top="top",n.topLeft="top-left",n.topRight="top-right",n.outside="outside",n.inside="inside"})(lE||(lE={}));function cu(n){return typeof n=="string"}function fr(n){return typeof n=="number"}function Xh(n){return typeof n=="object"&&n!==null}function Ni(n){return Array.isArray(n)}function Le(n){return n==null}class br{constructor(e,t,i){if(this._updateFromAngle=(s,r)=>{this.x=Math.cos(s)*r,this.y=Math.sin(s)*r},!fr(e)&&e){this.x=e.x,this.y=e.y;const s=e;this.z=s.z?s.z:nr.z}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=i??nr.z;else throw new Error(`${Pf} Vector3d not initialized correctly`)}static get origin(){return br.create(nr.x,nr.y,nr.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return br.create(e.x,e.y,e.z)}static create(e,t,i){return new br(e,t,i)}add(e){return br.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return br.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return br.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**bc+this.y**bc}mult(e){return br.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=ate&&this.multTo(rte/e)}rotate(e){return br.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),nr.z)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:nr.z}sub(e){return br.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class gn extends br{constructor(e,t){super(e,t,nr.z)}static get origin(){return gn.create(nr.x,nr.y)}static clone(e){return gn.create(e.x,e.y)}static create(e,t){return new gn(e,t)}}let yte=Math.random;function Tt(){return kr(yte(),0,1-Number.EPSILON)}function kr(n,e,t){return Math.min(Math.max(n,e),t)}function US(n,e,t,i){return Math.floor((n*t+e*i)/(t+i))}function Li(n){const e=oo(n),t=0;let i=Ax(n);return e===i&&(i=t),Tt()*(e-i)+i}function je(n){return fr(n)?n:Li(n)}function Ax(n){return fr(n)?n:n.min}function oo(n){return fr(n)?n:n.max}function ct(n,e){if(n===e||e===void 0&&fr(n))return n;const t=Ax(n),i=oo(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:ct(t,i)}function Ui(n,e){const t=n.x-e.x,i=n.y-e.y,s=2;return{dx:t,dy:i,distance:Math.sqrt(t**s+i**s)}}function Ns(n,e){return Ui(n,e).distance}function lf(n){return n*Math.PI/180}function MD(n,e,t,i){return gn.create(n.x*(t-i)/(t+i)+e.x*ro*i/(t+i),n.y)}function dz(n){var e,t;return{x:(((e=n.position)==null?void 0:e.x)??Tt()*gi)*n.size.width/gi,y:(((t=n.position)==null?void 0:t.y)??Tt()*gi)*n.size.height/gi}}function pz(n){var t,i;const e={x:((t=n.position)==null?void 0:t.x)!==void 0?je(n.position.x):void 0,y:((i=n.position)==null?void 0:i.y)!==void 0?je(n.position.y):void 0};return dz({size:n.size,position:e})}function mz(n){return n?n.endsWith("%")?parseFloat(n)/gi:parseFloat(n):1}var Fc;(function(n){n.auto="auto",n.increase="increase",n.decrease="decrease",n.random="random"})(Fc||(Fc={}));var Dn;(function(n){n.increasing="increasing",n.decreasing="decreasing"})(Dn||(Dn={}));var vl;(function(n){n.none="none",n.max="max",n.min="min"})(vl||(vl={}));var Ot;(function(n){n.bottom="bottom",n.left="left",n.right="right",n.top="top"})(Ot||(Ot={}));var xl;(function(n){n.precise="precise",n.percent="percent"})(xl||(xl={}));var cf;(function(n){n.max="max",n.min="min",n.random="random"})(cf||(cf={}));const vte={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function gz(){return vte}function bD(n){const e={bounced:!1},{pSide:t,pOtherSide:i,rectSide:s,rectOtherSide:r,velocity:o,factor:a}=n;return i.min<r.min||i.min>r.max||i.max<r.min||i.max>r.max||(t.max>=s.min&&t.max<=(s.max+s.min)*ms&&o>SD||t.min<=s.max&&t.min>(s.max+s.min)*ms&&o<SD)&&(e.velocity=o*-a,e.bounced=!0),e}function xte(n,e){const t=_i(e,i=>n.matches(i));return Ni(t)?t.some(i=>i):t}function ED(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function dn(n,e){return n===e||Ni(e)&&e.indexOf(n)>-1}async function cE(n,e){try{await document.fonts.load(`${e??"400"} 36px '${n??"Verdana"}'`)}catch{}}function yz(n){return Math.floor(Tt()*n.length)}function Bm(n,e,t=!0){return n[e!==void 0&&t?e%n.length:yz(n)]}function Pm(n,e,t,i,s){return _te(Dm(n,i??0),e,t,s)}function _te(n,e,t,i){let s=!0;return(!i||i===Ot.bottom)&&(s=n.top<e.height+t.x),s&&(!i||i===Ot.left)&&(s=n.right>t.x),s&&(!i||i===Ot.right)&&(s=n.left<e.width+t.y),s&&(!i||i===Ot.top)&&(s=n.bottom>t.y),s}function Dm(n,e){return{bottom:n.y+e,left:n.x-e,right:n.x+e,top:n.y-e}}function zi(n,...e){for(const t of e){if(t==null)continue;if(!Xh(t)){n=t;continue}const i=Array.isArray(t);i&&(Xh(n)||!n||!Array.isArray(n))?n=[]:!i&&(Xh(n)||!n||Array.isArray(n))&&(n={});for(const s in t){if(s==="__proto__")continue;const r=t,o=r[s],a=n;a[s]=Xh(o)&&Array.isArray(o)?o.map(l=>zi(a[s],l)):zi(a[s],o)}}return n}function Iw(n,e){return!!_z(e,t=>t.enable&&dn(n,t.mode))}function Nw(n,e,t){_i(e,i=>{const s=i.mode;i.enable&&dn(n,s)&&Ate(i,t)})}function Ate(n,e){const t=n.selectors;_i(t,i=>{e(i,n)})}function vz(n,e){if(!(!e||!n))return _z(n,t=>xte(e,t.selectors))}function uE(n){return{position:n.getPosition(),radius:n.getRadius(),mass:n.getMass(),velocity:n.velocity,factor:gn.create(je(n.options.bounce.horizontal.value),je(n.options.bounce.vertical.value))}}function xz(n,e){const{x:t,y:i}=n.velocity.sub(e.velocity),[s,r]=[n.position,e.position],{dx:o,dy:a}=Ui(r,s);if(t*o+i*a<0)return;const h=-Math.atan2(a,o),f=n.mass,d=e.mass,p=n.velocity.rotate(h),g=e.velocity.rotate(h),v=MD(p,g,f,d),S=MD(g,p,f,d),_=v.rotate(-h),y=S.rotate(-h);n.velocity.x=_.x*n.factor.x,n.velocity.y=_.y*n.factor.y,e.velocity.x=y.x*e.factor.x,e.velocity.y=y.y*e.factor.y}function Ste(n,e){const t=n.getPosition(),i=n.getRadius(),s=Dm(t,i),r=n.options.bounce,o=bD({pSide:{min:s.left,max:s.right},pOtherSide:{min:s.top,max:s.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:n.velocity.x,factor:je(r.horizontal.value)});o.bounced&&(o.velocity!==void 0&&(n.velocity.x=o.velocity),o.position!==void 0&&(n.position.x=o.position));const a=bD({pSide:{min:s.top,max:s.bottom},pOtherSide:{min:s.left,max:s.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:n.velocity.y,factor:je(r.vertical.value)});a.bounced&&(a.velocity!==void 0&&(n.velocity.y=a.velocity),a.position!==void 0&&(n.position.y=a.position))}function _i(n,e){return Ni(n)?n.map((i,s)=>e(i,s)):e(n,0)}function yo(n,e,t){return Ni(n)?Bm(n,e,t):n}function _z(n,e){return Ni(n)?n.find((i,s)=>e(i,s)):e(n,0)?n:void 0}function Mte(n,e){const t=n.value,i=n.animation,s={delayTime:je(i.delay)*Di,enable:i.enable,value:je(n.value)*e,max:oo(t)*e,min:Ax(t)*e,loops:0,maxLoops:je(i.count),time:0},r=1;if(i.enable){switch(s.decay=r-je(i.decay),i.mode){case Fc.increase:s.status=Dn.increasing;break;case Fc.decrease:s.status=Dn.decreasing;break;case Fc.random:s.status=Tt()>=ms?Dn.increasing:Dn.decreasing;break}const o=i.mode===Fc.auto;switch(i.startValue){case cf.min:s.value=s.min,o&&(s.status=Dn.increasing);break;case cf.max:s.value=s.max,o&&(s.status=Dn.decreasing);break;case cf.random:default:s.value=Li(s),o&&(s.status=Tt()>=ms?Dn.increasing:Dn.decreasing);break}}return s.initialValue=s.value,s}function bte(n,e){if(!(n.mode===xl.percent)){const{mode:s,...r}=n;return r}return"x"in n?{x:n.x/gi*e.width,y:n.y/gi*e.height}:{width:n.width/gi*e.width,height:n.height/gi*e.height}}function wD(n,e){return bte(n,e)}function Ete(n,e,t,i,s){switch(e){case vl.max:t>=s&&n.destroy();break;case vl.min:t<=i&&n.destroy();break}}function Sx(n,e,t,i,s){if(n.destroyed||!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0))return;const f=(e.velocity??0)*s.factor,d=e.min,p=e.max,g=e.decay??1;if(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=s.value),!((e.delayTime??0)>0&&e.time<(e.delayTime??0))){switch(e.status){case Dn.increasing:e.value>=p?(t?e.status=Dn.decreasing:e.value-=p,e.loops||(e.loops=0),e.loops++):e.value+=f;break;case Dn.decreasing:e.value<=d?(t?e.status=Dn.increasing:e.value+=p,e.loops||(e.loops=0),e.loops++):e.value-=f}e.velocity&&g!==1&&(e.velocity*=g),Ete(n,i,e.value,d,p),n.destroyed||(e.value=kr(e.value,d,p))}}var Ec;(function(n){n.darken="darken",n.enlighten="enlighten"})(Ec||(Ec={}));function wte(n,e){if(e){for(const t of n.colorManagers.values())if(e.startsWith(t.stringPrefix))return t.parseString(e)}}function _l(n,e,t,i=!0){if(!e)return;const s=cu(e)?{value:e}:e;if(cu(s.value))return Az(n,s.value,t,i);if(Ni(s.value))return _l(n,{value:Bm(s.value,t,i)});for(const r of n.colorManagers.values()){const o=r.handleRangeColor(s);if(o)return o}}function Az(n,e,t,i=!0){if(!e)return;const s=cu(e)?{value:e}:e;if(cu(s.value))return s.value===u0?Mz():Cte(n,s.value);if(Ni(s.value))return Az(n,{value:Bm(s.value,t,i)});for(const r of n.colorManagers.values()){const o=r.handleColor(s);if(o)return o}}function Wf(n,e,t,i=!0){const s=_l(n,e,t,i);return s?Sz(s):void 0}function Sz(n){const e=n.r/mv,t=n.g/mv,i=n.b/mv,s=Math.max(e,t,i),r=Math.min(e,t,i),o={h:AD,l:(s+r)*ms,s:aE};return s!==r&&(o.s=o.l<ms?(s-r)/(s+r):(s-r)/(ro-s-r),o.h=e===s?(t-i)/(s-r):o.h=t===s?ro+(i-e)/(s-r):ro*ro+(e-t)/(s-r)),o.l*=oE,o.s*=rE,o.h*=ote,o.h<AD&&(o.h+=Uc),o.h>=Uc&&(o.h-=Uc),o}function Cte(n,e){return wte(n,e)}function Df(n){const e=(n.h%Uc+Uc)%Uc,t=Math.max(aE,Math.min(rE,n.s)),i=Math.max(ute,Math.min(oE,n.l)),s=e/Uc,r=t/rE,o=i/oE;if(t===aE){const v=Math.round(o*uc);return{r:v,g:v,b:v}}const a=(v,S,_)=>{if(_<0&&_++,_>1&&_--,_*NS<1)return v+(S-v)*NS*_;if(_*ro<1)return S;if(_*IS<1*ro){const M=ro/IS;return v+(S-v)*(M-_)*NS}return v},l=o<ms?o*(hte+r):o+r-o*r,h=ro*o-l,f=fte/IS,d=Math.min(uc,uc*a(h,l,s+f)),p=Math.min(uc,uc*a(h,l,s)),g=Math.min(uc,uc*a(h,l,s-f));return{r:Math.round(d),g:Math.round(p),b:Math.round(g)}}function Tte(n){const e=Df(n);return{a:n.a,b:e.b,g:e.g,r:e.r}}function Mz(n){const e=dte,t=mv+cte;return{b:Math.floor(Li(ct(e,t))),g:Math.floor(Li(ct(e,t))),r:Math.floor(Li(ct(e,t)))}}function Lf(n,e){return`rgba(${n.r}, ${n.g}, ${n.b}, ${e??fz})`}function h0(n,e){return`hsla(${n.h}, ${n.s}%, ${n.l}%, ${e??fz})`}function Uw(n,e,t,i){let s=n,r=e;return s.r===void 0&&(s=Df(n)),r.r===void 0&&(r=Df(e)),{b:US(s.b,r.b,t,i),g:US(s.g,r.g,t,i),r:US(s.r,r.r,t,i)}}function hE(n,e,t){if(t===u0)return Mz();if(t===pv){const i=n.getFillColor()??n.getStrokeColor(),s=(e==null?void 0:e.getFillColor())??(e==null?void 0:e.getStrokeColor());if(i&&s&&e)return Uw(i,s,n.getRadius(),e.getRadius());{const r=i??s;if(r)return Df(r)}}else return t}function bz(n,e,t,i){const s=cu(e)?e:e.value;return s===u0?i?_l(n,{value:s}):t?u0:pv:s===pv?pv:_l(n,{value:s})}function Ez(n,e,t){const i={h:{enable:!1,value:n.h},s:{enable:!1,value:n.s},l:{enable:!1,value:n.l}};return e&&(FS(i.h,e.h,t),FS(i.s,e.s,t),FS(i.l,e.l,t)),i}function FS(n,e,t){n.enable=e.enable,n.enable?(n.velocity=je(e.speed)/gi*t,n.decay=lte-je(e.decay),n.status=Dn.increasing,n.loops=mte,n.maxLoops=je(e.count),n.time=gte,n.delayTime=je(e.delay)*Di,e.sync||(n.velocity*=Tt(),n.value*=Tt()),n.initialValue=n.value,n.offset=ct(e.offset)):n.velocity=pte}function zS(n,e,t,i){if(!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0)||(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=i.value),(n.delayTime??0)>0&&n.time<(n.delayTime??0)))return;const f=n.offset?Li(n.offset):0,d=(n.velocity??0)*i.factor+f*3.6,p=n.decay??1,g=oo(e),v=Ax(e);!t||n.status===Dn.increasing?(n.value+=d,n.value>g&&(n.loops||(n.loops=0),n.loops++,t?n.status=Dn.decreasing:n.value-=g)):(n.value-=d,n.value<0&&(n.loops||(n.loops=0),n.loops++,n.status=Dn.increasing)),n.velocity&&p!==1&&(n.velocity*=p),n.value=kr(n.value,v,g)}function wz(n,e){if(!n)return;const{h:t,s:i,l:s}=n,r={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};t&&zS(t,r.h,!1,e),i&&zS(i,r.s,!0,e),s&&zS(s,r.l,!0,e)}function vp(n,e,t){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.closePath()}class ci{constructor(){this.value=""}static create(e,t){const i=new ci;return i.load(e),t!==void 0&&(cu(t)||Ni(t)?i.load({value:t}):i.load(t)),i}load(e){Le(e)||Le(e.value)||(this.value=e.value)}}var im;(function(n){n.circle="circle",n.rectangle="rectangle"})(im||(im={}));class Fw{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){Le(e)||(e.count!==void 0&&(this.count=ct(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=ct(e.speed)),e.decay!==void 0&&(this.decay=ct(e.decay)),e.delay!==void 0&&(this.delay=ct(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class zw extends Fw{constructor(){super(),this.mode=Fc.auto,this.startValue=cf.random}load(e){super.load(e),!Le(e)&&(e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class kS extends Fw{constructor(){super(),this.offset=0,this.sync=!0}load(e){super.load(e),!Le(e)&&e.offset!==void 0&&(this.offset=ct(e.offset))}}class Rte{constructor(){this.h=new kS,this.s=new kS,this.l=new kS}load(e){Le(e)||(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class Of extends ci{constructor(){super(),this.animation=new Rte}static create(e,t){const i=new Of;return i.load(e),t!==void 0&&(cu(t)||Ni(t)?i.load({value:t}):i.load(t)),i}load(e){if(super.load(e),Le(e))return;const t=e.animation;t!==void 0&&(t.enable!==void 0?this.animation.h.load(t):this.animation.load(e.animation))}}var uf;(function(n){n.absorb="absorb",n.bounce="bounce",n.destroy="destroy"})(uf||(uf={}));class Bte{constructor(){this.speed=2}load(e){Le(e)||e.speed!==void 0&&(this.speed=e.speed)}}class Pte{constructor(){this.enable=!0,this.retries=0}load(e){Le(e)||(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class Wr{constructor(){this.value=0}load(e){Le(e)||Le(e.value)||(this.value=ct(e.value))}}class Dte extends Wr{constructor(){super(),this.animation=new Fw}load(e){if(super.load(e),Le(e))return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class Cz extends Dte{constructor(){super(),this.animation=new zw}load(e){super.load(e)}}class CD extends Wr{constructor(){super(),this.value=1}}class Tz{constructor(){this.horizontal=new CD,this.vertical=new CD}load(e){Le(e)||(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class Lte{constructor(){this.absorb=new Bte,this.bounce=new Tz,this.enable=!1,this.maxSpeed=50,this.mode=uf.bounce,this.overlap=new Pte}load(e){Le(e)||(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=ct(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class Ote{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(e){if(Le(e))return;const t=e.options;if(t!==void 0)for(const i in t){const s=t[i];s&&(this.options[i]=zi(this.options[i]??{},s))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class Ite{constructor(){this.offset=0,this.value=90}load(e){Le(e)||(e.offset!==void 0&&(this.offset=ct(e.offset)),e.value!==void 0&&(this.value=ct(e.value)))}}class Nte{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(e){if(!Le(e)&&(e.distance!==void 0&&(this.distance=ct(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.rotate)){const t=e.rotate.x;t!==void 0&&(this.rotate.x=t);const i=e.rotate.y;i!==void 0&&(this.rotate.y=i)}}}class Ute{constructor(){this.x=50,this.y=50,this.mode=xl.percent,this.radius=0}load(e){Le(e)||(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class Fte{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){Le(e)||(e.acceleration!==void 0&&(this.acceleration=ct(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=ct(e.maxSpeed)))}}class zte{constructor(){this.clamp=!0,this.delay=new Wr,this.enable=!1,this.options={}}load(e){Le(e)||(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=zi(this.options,e.options)))}}class kte{load(e){Le(e)||(e.color!==void 0&&(this.color=ci.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class Hte{constructor(){this.enable=!1,this.length=10,this.fill=new kte}load(e){Le(e)||(e.enable!==void 0&&(this.enable=e.enable),e.fill!==void 0&&this.fill.load(e.fill),e.length!==void 0&&(this.length=e.length))}}var oi;(function(n){n.bounce="bounce",n.none="none",n.out="out",n.destroy="destroy",n.split="split"})(oi||(oi={}));class Gte{constructor(){this.default=oi.out}load(e){Le(e)||(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class Vte{constructor(){this.acceleration=0,this.enable=!1}load(e){Le(e)||(e.acceleration!==void 0&&(this.acceleration=ct(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=zi({},e.position)))}}class Wte{constructor(){this.angle=new Ite,this.attract=new Nte,this.center=new Ute,this.decay=0,this.distance={},this.direction=lE.none,this.drift=0,this.enable=!1,this.gravity=new Fte,this.path=new zte,this.outModes=new Gte,this.random=!1,this.size=!1,this.speed=2,this.spin=new Vte,this.straight=!1,this.trail=new Hte,this.vibrate=!1,this.warp=!1}load(e){if(Le(e))return;this.angle.load(fr(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=ct(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=fr(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=ct(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes;t!==void 0&&(Xh(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=ct(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class jte extends zw{constructor(){super(),this.destroy=vl.none,this.speed=2}load(e){super.load(e),!Le(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class Xte extends Cz{constructor(){super(),this.animation=new jte,this.value=1}load(e){if(Le(e))return;super.load(e);const t=e.animation;t!==void 0&&this.animation.load(t)}}class Jte{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(e){if(Le(e))return;e.enable!==void 0&&(this.enable=e.enable);const t=e.width;t!==void 0&&(this.width=t);const i=e.height;i!==void 0&&(this.height=i)}}var fE;(function(n){n.delete="delete",n.wait="wait"})(fE||(fE={}));class Yte{constructor(){this.mode=fE.delete,this.value=0}load(e){Le(e)||(e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class Kte{constructor(){this.density=new Jte,this.limit=new Yte,this.value=0}load(e){Le(e)||(this.density.load(e.density),this.limit.load(e.limit),e.value!==void 0&&(this.value=e.value))}}class qte{constructor(){this.blur=0,this.color=new ci,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){Le(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=ci.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}class Qte{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(e){if(Le(e))return;const t=e.options;if(t!==void 0)for(const i in t){const s=t[i];s&&(this.options[i]=zi(this.options[i]??{},s))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class Zte extends zw{constructor(){super(),this.destroy=vl.none,this.speed=5}load(e){super.load(e),!Le(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class $te extends Cz{constructor(){super(),this.animation=new Zte,this.value=3}load(e){if(super.load(e),Le(e))return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class TD{constructor(){this.width=0}load(e){Le(e)||(e.color!==void 0&&(this.color=Of.create(this.color,e.color)),e.width!==void 0&&(this.width=ct(e.width)),e.opacity!==void 0&&(this.opacity=ct(e.opacity)))}}class ene extends Wr{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),!Le(e)&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class tne{constructor(e,t){this._engine=e,this._container=t,this.bounce=new Tz,this.collisions=new Lte,this.color=new Of,this.color.value="#fff",this.effect=new Ote,this.groups={},this.move=new Wte,this.number=new Kte,this.opacity=new Xte,this.reduceDuplicates=!1,this.shadow=new qte,this.shape=new Qte,this.size=new $te,this.stroke=new TD,this.zIndex=new ene}load(e){if(Le(e))return;if(e.groups!==void 0)for(const i of Object.keys(e.groups)){if(!Object.hasOwn(e.groups,i))continue;const s=e.groups[i];s!==void 0&&(this.groups[i]=zi(this.groups[i]??{},s))}e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.bounce.load(e.bounce),this.color.load(Of.create(this.color,e.color)),this.effect.load(e.effect),this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=zi({},e.interactivity));const t=e.stroke;if(t&&(this.stroke=_i(t,i=>{const s=new TD;return s.load(i),s})),this._container){const i=this._engine.updaters.get(this._container);if(i)for(const r of i)r.loadOptions&&r.loadOptions(this,e);const s=this._engine.interactors.get(this._container);if(s)for(const r of s)r.loadParticlesOptions&&r.loadParticlesOptions(this,e)}}}function nne(n,...e){for(const t of e)n.load(t)}function ine(n,e,...t){const i=new tne(n,e);return nne(i,...t),i}var f0;(function(n){n.external="external",n.particles="particles"})(f0||(f0={}));var ll;(function(n){n.normal="normal",n.inside="inside",n.outside="outside"})(ll||(ll={}));var hf;(function(n){n.circle="circle",n.rectangle="rectangle"})(hf||(hf={}));class Rz{constructor(e,t,i){this.position={x:e,y:t},this.type=i}}class ts extends Rz{constructor(e,t,i){super(e,t,hf.circle),this.radius=i}contains(e){return Ns(e,this.position)<=this.radius}intersects(e){const t=this.position,i=e.position,s={x:Math.abs(i.x-t.x),y:Math.abs(i.y-t.y)},r=this.radius;if(e instanceof ts||e.type===hf.circle){const o=e,a=r+o.radius,l=Math.sqrt(s.x**bc+s.y**bc);return a>l}else if(e instanceof Rl||e.type===hf.rectangle){const o=e,{width:a,height:l}=o.size;return Math.pow(s.x-a,bc)+Math.pow(s.y-l,bc)<=r**bc||s.x<=r+a&&s.y<=r+l||s.x<=a||s.y<=l}return!1}}class Rl extends Rz{constructor(e,t,i,s){super(e,t,hf.rectangle),this.size={height:s,width:i}}contains(e){const t=this.size.width,i=this.size.height,s=this.position;return e.x>=s.x&&e.x<=s.x+t&&e.y>=s.y&&e.y<=s.y+i}intersects(e){if(e instanceof ts)return e.intersects(this);const t=this.size.width,i=this.size.height,s=this.position,r=e.position,o=e instanceof Rl?e.size:{width:0,height:0},a=o.width,l=o.height;return r.x<s.x+t&&r.x+a>s.x&&r.y<s.y+i&&r.y+l>s.y}}class jr{constructor(e){this.type=f0.external,this.container=e}}class kw{constructor(e){this.type=f0.particles,this.container=e}}var Zi;(function(n){n.clockwise="clockwise",n.counterClockwise="counter-clockwise",n.random="random"})(Zi||(Zi={}));var Yc;(function(n){n.easeInBack="ease-in-back",n.easeInCirc="ease-in-circ",n.easeInCubic="ease-in-cubic",n.easeInLinear="ease-in-linear",n.easeInQuad="ease-in-quad",n.easeInQuart="ease-in-quart",n.easeInQuint="ease-in-quint",n.easeInExpo="ease-in-expo",n.easeInSine="ease-in-sine",n.easeOutBack="ease-out-back",n.easeOutCirc="ease-out-circ",n.easeOutCubic="ease-out-cubic",n.easeOutLinear="ease-out-linear",n.easeOutQuad="ease-out-quad",n.easeOutQuart="ease-out-quart",n.easeOutQuint="ease-out-quint",n.easeOutExpo="ease-out-expo",n.easeOutSine="ease-out-sine",n.easeInOutBack="ease-in-out-back",n.easeInOutCirc="ease-in-out-circ",n.easeInOutCubic="ease-in-out-cubic",n.easeInOutLinear="ease-in-out-linear",n.easeInOutQuad="ease-in-out-quad",n.easeInOutQuart="ease-in-out-quart",n.easeInOutQuint="ease-in-out-quint",n.easeInOutExpo="ease-in-out-expo",n.easeInOutSine="ease-in-out-sine"})(Yc||(Yc={}));class sne{constructor(){this.radius=0,this.mass=0}load(e){Le(e)||(e.mass!==void 0&&(this.mass=e.mass),e.radius!==void 0&&(this.radius=e.radius))}}class rne extends Wr{constructor(){super(),this.density=5,this.value=50,this.limit=new sne}load(e){Le(e)||(super.load(e),e.density!==void 0&&(this.density=e.density),fr(e.limit)?this.limit.radius=e.limit:this.limit.load(e.limit))}}class d0{constructor(){this.color=new ci,this.color.value="#000000",this.draggable=!1,this.opacity=1,this.destroy=!0,this.orbits=!1,this.size=new rne}load(e){Le(e)||(e.color!==void 0&&(this.color=ci.create(this.color,e.color)),e.draggable!==void 0&&(this.draggable=e.draggable),this.name=e.name,e.opacity!==void 0&&(this.opacity=e.opacity),e.position!==void 0&&(this.position={},e.position.x!==void 0&&(this.position.x=ct(e.position.x)),e.position.y!==void 0&&(this.position.y=ct(e.position.y))),e.size!==void 0&&this.size.load(e.size),e.destroy!==void 0&&(this.destroy=e.destroy),e.orbits!==void 0&&(this.orbits=e.orbits))}}var p0;(function(n){n.absorber="absorber"})(p0||(p0={}));const one=2,ane=.033,lne=0,cne=0,une=0,hne=0,fne=2,RD=Math.PI*fne,BD=0;class dne{constructor(e,t,i,s,r){var a;this._calcPosition=()=>{const l=pz({size:this._container.canvas.size,position:this.options.position});return gn.create(l.x,l.y)},this._updateParticlePosition=(l,h)=>{if(l.destroyed)return;const f=this._container,d=f.canvas.size;if(l.needsNewPosition){const p=dz({size:d});l.position.setTo(p),l.velocity.setTo(l.initialVelocity),l.absorberOrbit=void 0,l.needsNewPosition=!1}if(this.options.orbits){if(l.absorberOrbit===void 0&&(l.absorberOrbit=gn.origin,l.absorberOrbit.length=Ns(l.getPosition(),this.position),l.absorberOrbit.angle=Tt()*RD),l.absorberOrbit.length<=this.size&&!this.options.destroy){const _=Math.min(d.width,d.height),y=1,A=.1,M=.2;l.absorberOrbit.length=_*(y+(Tt()*M-A))}l.absorberOrbitDirection===void 0&&(l.absorberOrbitDirection=l.velocity.x>=BD?Zi.clockwise:Zi.counterClockwise);const p=l.absorberOrbit.length,g=l.absorberOrbit.angle,v=l.absorberOrbitDirection;l.velocity.setTo(gn.origin);const S={x:v===Zi.clockwise?Math.cos:Math.sin,y:v===Zi.clockwise?Math.sin:Math.cos};l.position.x=this.position.x+p*S.x(g),l.position.y=this.position.y+p*S.y(g),l.absorberOrbit.length-=h.length,l.absorberOrbit.angle+=(l.retina.moveSpeed??BD)*f.retina.pixelRatio/gi*f.retina.reduceFactor}else{const p=gn.origin;p.length=h.length,p.angle=h.angle,l.velocity.addTo(p)}},this._absorbers=e,this._container=t,this._engine=i,this.initialPosition=r?gn.create(r.x,r.y):void 0,s instanceof d0?this.options=s:(this.options=new d0,this.options.load(s)),this.dragging=!1,this.name=this.options.name,this.opacity=this.options.opacity,this.size=je(this.options.size.value)*t.retina.pixelRatio,this.mass=this.size*this.options.size.density*t.retina.reduceFactor;const o=this.options.size.limit;this.limit={radius:o.radius*t.retina.pixelRatio*t.retina.reduceFactor,mass:o.mass},this.color=_l(this._engine,this.options.color)??{b:0,g:0,r:0},this.position=((a=this.initialPosition)==null?void 0:a.copy())??this._calcPosition()}attract(e){const t=this._container,i=this.options;if(i.draggable){const h=t.interactivity.mouse;h.clicking&&h.downPosition?Ns(this.position,h.downPosition)<=this.size&&(this.dragging=!0):this.dragging=!1,this.dragging&&h.position&&(this.position.x=h.position.x,this.position.y=h.position.y)}const s=e.getPosition(),{dx:r,dy:o,distance:a}=Ui(this.position,s),l=gn.create(r,o);if(l.length=this.mass/Math.pow(a,one)*t.retina.reduceFactor,a<this.size+e.getRadius()){const h=e.getRadius()*ane*t.retina.pixelRatio;this.size>e.getRadius()&&a<this.size-e.getRadius()||e.absorberOrbit!==void 0&&e.absorberOrbit.length<lne?i.destroy?e.destroy():(e.needsNewPosition=!0,this._updateParticlePosition(e,l)):(i.destroy&&(e.size.value-=h),this._updateParticlePosition(e,l)),(this.limit.radius<=cne||this.size<this.limit.radius)&&(this.size+=h),(this.limit.mass<=une||this.mass<this.limit.mass)&&(this.mass+=h*this.options.size.density*t.retina.reduceFactor)}else this._updateParticlePosition(e,l)}draw(e){e.translate(this.position.x,this.position.y),e.beginPath(),e.arc(nr.x,nr.y,this.size,hne,RD,!1),e.closePath(),e.fillStyle=Lf(this.color,this.opacity),e.fill()}resize(){const e=this.initialPosition;this.position=e&&Pm(e,this._container.canvas.size,gn.origin)?e:this._calcPosition()}}const PD=0;class pne{constructor(e,t){this._container=e,this._engine=t,this.array=[],this.absorbers=[],this.interactivityAbsorbers=[],e.getAbsorber=i=>i===void 0||fr(i)?this.array[i??PD]:this.array.find(s=>s.name===i),e.addAbsorber=async(i,s)=>this.addAbsorber(i,s)}async addAbsorber(e,t){const i=new dne(this,this._container,this._engine,e,t);return this.array.push(i),Promise.resolve(i)}draw(e){for(const t of this.array)t.draw(e)}handleClickMode(e){const t=this.absorbers,i=this.interactivityAbsorbers;if(e===p0.absorber){const s=yo(i),r=s??yo(t),o=this._container.interactivity.mouse.clickPosition;this.addAbsorber(r,o)}}async init(){this.absorbers=this._container.actualOptions.absorbers,this.interactivityAbsorbers=this._container.actualOptions.interactivity.modes.absorbers;const e=_i(this.absorbers,async t=>{await this.addAbsorber(t)});e instanceof Array?await Promise.all(e):await e}particleUpdate(e){for(const t of this.array)if(t.attract(e),e.destroyed)break}removeAbsorber(e){const t=this.array.indexOf(e);t>=PD&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}}class mne{constructor(e){this.id="absorbers",this._engine=e}async getPlugin(e){return Promise.resolve(new pne(e,this._engine))}loadOptions(e,t){var i,s;!this.needsPlugin(e)&&!this.needsPlugin(t)||(t!=null&&t.absorbers&&(e.absorbers=_i(t.absorbers,r=>{const o=new d0;return o.load(r),o})),e.interactivity.modes.absorbers=_i((s=(i=t==null?void 0:t.interactivity)==null?void 0:i.modes)==null?void 0:s.absorbers,r=>{const o=new d0;return o.load(r),o}))}needsPlugin(e){var i,s,r;if(!e)return!1;const t=e.absorbers;return Ni(t)?!!t.length:t?!0:!!((r=(s=(i=e.interactivity)==null?void 0:i.events)==null?void 0:s.onClick)!=null&&r.mode&&dn(p0.absorber,e.interactivity.events.onClick.mode))}}async function gne(n,e=!0){n.checkVersion("3.9.1"),await n.addPlugin(new mne(n),e)}class yne{load(e){Le(e)||(e.bottom!==void 0&&(this.bottom=ct(e.bottom)),e.left!==void 0&&(this.left=ct(e.left)),e.right!==void 0&&(this.right=ct(e.right)),e.top!==void 0&&(this.top=ct(e.top)))}}var m0;(function(n){n.none="none",n.split="split"})(m0||(m0={}));class vne extends Wr{constructor(){super(),this.value=3}}class xne extends Wr{constructor(){super(),this.value={min:4,max:9}}}class _ne{constructor(){this.count=1,this.factor=new vne,this.rate=new xne,this.sizeOffset=!0}load(e){Le(e)||(e.color!==void 0&&(this.color=ci.create(this.color,e.color)),e.count!==void 0&&(this.count=e.count),this.factor.load(e.factor),this.rate.load(e.rate),this.particles=_i(e.particles,t=>zi({},t)),e.sizeOffset!==void 0&&(this.sizeOffset=e.sizeOffset),e.colorOffset&&(this.colorOffset=this.colorOffset??{},e.colorOffset.h!==void 0&&(this.colorOffset.h=e.colorOffset.h),e.colorOffset.s!==void 0&&(this.colorOffset.s=e.colorOffset.s),e.colorOffset.l!==void 0&&(this.colorOffset.l=e.colorOffset.l)))}}class Ane{constructor(){this.bounds=new yne,this.mode=m0.none,this.split=new _ne}load(e){Le(e)||(e.mode&&(this.mode=e.mode),e.bounds&&this.bounds.load(e.bounds),this.split.load(e.split))}}const Ly=0,Sne=.5,Mne=0,bne=1,Ene=500,wne=0;function Cne(n,e,t,i){const s=t.options.destroy;if(!s)return;const r=s.split,o=ine(n,e,t.options),a=je(r.factor.value),l=t.getFillColor();r.color?o.color.load(r.color):r.colorOffset&&l?o.color.load({value:{hsl:{h:l.h+je(r.colorOffset.h??Ly),s:l.s+je(r.colorOffset.s??Ly),l:l.l+je(r.colorOffset.l??Ly)}}}):o.color.load({value:{hsl:t.getFillColor()}}),o.move.load({center:{x:t.position.x,y:t.position.y,mode:xl.precise}}),fr(o.size.value)?o.size.value/=a:(o.size.value.min/=a,o.size.value.max/=a),o.load(i);const h=r.sizeOffset?ct(-t.size.value,t.size.value):Ly,f={x:t.position.x+Li(h),y:t.position.y+Li(h)};return e.particles.addParticle(f,o,t.group,d=>d.size.value<Sne?!1:(d.velocity.length=Li(ct(t.velocity.length,d.velocity.length)),d.splitCount=(t.splitCount??Mne)+bne,d.unbreakable=!0,setTimeout(()=>{d.unbreakable=!1},Ene),!0))}function Tne(n,e,t){const i=t.options.destroy;if(!i)return;const s=i.split;if(s.count>=wne&&(t.splitCount===void 0||t.splitCount++>s.count))return;const r=je(s.rate.value),o=yo(s.particles);for(let a=0;a<r;a++)Cne(n,e,t,o)}class Rne{constructor(e,t){this.container=t,this.engine=e}init(e){const t=this.container,i=e.options,s=i.destroy;if(!s)return;e.splitCount=0;const r=s.bounds;e.destroyBounds||(e.destroyBounds={});const{bottom:o,left:a,right:l,top:h}=r,{destroyBounds:f}=e,d=t.canvas.size;o&&(f.bottom=je(o)*d.height/gi),a&&(f.left=je(a)*d.width/gi),l&&(f.right=je(l)*d.width/gi),h&&(f.top=je(h)*d.height/gi)}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.destroy||(e.destroy=new Ane);for(const i of t)e.destroy.load(i==null?void 0:i.destroy)}particleDestroyed(e,t){if(t)return;const i=e.options.destroy;i&&i.mode===m0.split&&Tne(this.engine,this.container,e)}update(e){if(!this.isEnabled(e))return;const t=e.getPosition(),i=e.destroyBounds;i&&(i.bottom!==void 0&&t.y>=i.bottom||i.left!==void 0&&t.x<=i.left||i.right!==void 0&&t.x>=i.right||i.top!==void 0&&t.y<=i.top)&&e.destroy()}}async function Bne(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("destroy",t=>Promise.resolve(new Rne(n,t)),e)}class Pne{constructor(){this.wait=!1}load(e){Le(e)||(e.count!==void 0&&(this.count=e.count),e.delay!==void 0&&(this.delay=ct(e.delay)),e.duration!==void 0&&(this.duration=ct(e.duration)),e.wait!==void 0&&(this.wait=e.wait))}}class Dne{constructor(){this.quantity=1,this.delay=.1}load(e){Le(e)||(e.quantity!==void 0&&(this.quantity=ct(e.quantity)),e.delay!==void 0&&(this.delay=ct(e.delay)))}}class Lne{constructor(){this.color=!1,this.opacity=!1}load(e){Le(e)||(e.color!==void 0&&(this.color=e.color),e.opacity!==void 0&&(this.opacity=e.opacity))}}class One{constructor(){this.options={},this.replace=new Lne,this.type="square"}load(e){Le(e)||(e.options!==void 0&&(this.options=zi({},e.options??{})),this.replace.load(e.replace),e.type!==void 0&&(this.type=e.type))}}class Bz{constructor(){this.mode=xl.percent,this.height=0,this.width=0}load(e){Le(e)||(e.mode!==void 0&&(this.mode=e.mode),e.height!==void 0&&(this.height=e.height),e.width!==void 0&&(this.width=e.width))}}class Va{constructor(){this.autoPlay=!0,this.fill=!0,this.life=new Pne,this.rate=new Dne,this.shape=new One,this.startCount=0}load(e){Le(e)||(e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.size!==void 0&&(this.size||(this.size=new Bz),this.size.load(e.size)),e.direction!==void 0&&(this.direction=e.direction),this.domId=e.domId,e.fill!==void 0&&(this.fill=e.fill),this.life.load(e.life),this.name=e.name,this.particles=_i(e.particles,t=>zi({},t)),this.rate.load(e.rate),this.shape.load(e.shape),e.position!==void 0&&(this.position={},e.position.x!==void 0&&(this.position.x=ct(e.position.x)),e.position.y!==void 0&&(this.position.y=ct(e.position.y))),e.spawnColor!==void 0&&(this.spawnColor===void 0&&(this.spawnColor=new Of),this.spawnColor.load(e.spawnColor)),e.startCount!==void 0&&(this.startCount=e.startCount))}}var g0;(function(n){n.emitter="emitter"})(g0||(g0={}));const DD=.5,LD=0,Oy=0,OD=0,Ine=0,Nne=-1,Une=1;function ID(n,e){n.color?n.color.value=e:n.color={value:e}}class Fne{constructor(e,t,i,s,r){var h,f;this.emitters=t,this.container=i,this._destroy=()=>{var d,p;(d=this._mutationObserver)==null||d.disconnect(),this._mutationObserver=void 0,(p=this._resizeObserver)==null||p.disconnect(),this._resizeObserver=void 0,this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._prepareToDie=()=>{var v;if(this._paused)return;const d=((v=this.options.life)==null?void 0:v.duration)!==void 0?je(this.options.life.duration):void 0;(this._lifeCount>0||this._immortal)&&d!==void 0&&d>0&&(this._duration=d*Di)},this._setColorAnimation=(d,p,g,v=Une)=>{const S=this.container;if(!d.enable)return p;const _=Li(d.offset),y=je(this.options.rate.delay),A=S.retina.reduceFactor?y*Di/S.retina.reduceFactor:1/0,M=0,E=je(d.speed??M);return(p+E*S.fpsLimit/A+_*v)%g},this._engine=e,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=r,s instanceof Va?this.options=s:(this.options=new Va,this.options.load(s)),this._spawnDelay=i.retina.reduceFactor?je(this.options.life.delay??LD)*Di/i.retina.reduceFactor:1/0,this.position=this._initialPosition??this._calcPosition(),this.name=this.options.name,this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let o=zi({},this.options.particles);if(o??(o={}),o.move??(o.move={}),(h=o.move).direction??(h.direction=this.options.direction),this.options.spawnColor&&(this.spawnColor=Wf(this._engine,this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=o,this._size=this._calcSize(),this.size=wD(this._size,this.container.canvas.size),this._lifeCount=this.options.life.count??Nne,this._immortal=this._lifeCount<=Oy,this.options.domId){const d=document.getElementById(this.options.domId);d&&(this._mutationObserver=new MutationObserver(()=>{this.resize()}),this._resizeObserver=new ResizeObserver(()=>{this.resize()}),this._mutationObserver.observe(d,{attributes:!0,attributeFilter:["style","width","height"]}),this._resizeObserver.observe(d))}const a=this.options.shape,l=(f=this._engine.emitterShapeManager)==null?void 0:f.getShapeGenerator(a.type);l&&(this._shape=l.generate(this.position,this.size,this.fill,a.options)),this._engine.dispatchEvent("emitterCreated",{container:i,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}async init(){var e;await((e=this._shape)==null?void 0:e.init())}pause(){this._paused||delete this._emitDelay}play(){if(this._paused||!((this._lifeCount>Oy||this._immortal||!this.options.life.count)&&(this._firstSpawn||this._currentSpawnDelay>=(this._spawnDelay??OD))))return;const e=this.container;if(this._emitDelay===void 0){const t=je(this.options.rate.delay);this._emitDelay=e.retina.reduceFactor?t*Di/e.retina.reduceFactor:1/0}(this._lifeCount>Oy||this._immortal)&&this._prepareToDie()}resize(){var i;const e=this._initialPosition,t=this.container;this.position=e&&Pm(e,t.canvas.size,gn.origin)?e:this._calcPosition(),this._size=this._calcSize(),this.size=wD(this._size,t.canvas.size),(i=this._shape)==null||i.resize(this.position,this.size)}update(e){var i;if(this._paused)return;const t=this.container;this._firstSpawn&&(this._firstSpawn=!1,this._currentSpawnDelay=this._spawnDelay??OD,this._currentEmitDelay=this._emitDelay??Ine),this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),this._duration!==void 0&&(this._currentDuration+=e.value,this._currentDuration>=this._duration&&(this.pause(),this._spawnDelay!==void 0&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>Oy||this._immortal?(this.position=this._calcPosition(),(i=this._shape)==null||i.resize(this.position,this.size),this._spawnDelay=t.retina.reduceFactor?je(this.options.life.delay??LD)*Di/t.retina.reduceFactor:1/0):this._destroy(),this._currentDuration-=this._duration,delete this._duration)),this._spawnDelay!==void 0&&(this._currentSpawnDelay+=e.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),this._emitDelay!==void 0&&(this._currentEmitDelay+=e.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay))}_calcPosition(){const e=this.container;if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const i=t.getBoundingClientRect(),s=e.retina.pixelRatio;return{x:(i.x+i.width*DD)*s,y:(i.y+i.height*DD)*s}}}return pz({size:e.canvas.size,position:this.options.position})}_calcSize(){const e=this.container;if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const i=t.getBoundingClientRect();return{width:i.width*e.retina.pixelRatio,height:i.height*e.retina.pixelRatio,mode:xl.precise}}}return this.options.size??(()=>{const t=new Bz;return t.load({height:0,mode:xl.percent,width:0}),t})()}_emit(){if(this._paused)return;const e=je(this.options.rate.quantity);this._emitParticles(e)}_emitParticles(e){var s;const t=yo(this._particlesOptions),i=this.container.retina.reduceFactor;for(let r=0;r<e*i;r++){const o=zi({},t);if(this.spawnColor){const h=(s=this.options.spawnColor)==null?void 0:s.animation;if(h){const f={h:360,s:100,l:100},d=3.6;this.spawnColor.h=this._setColorAnimation(h.h,this.spawnColor.h,f.h,d),this.spawnColor.s=this._setColorAnimation(h.s,this.spawnColor.s,f.s),this.spawnColor.l=this._setColorAnimation(h.l,this.spawnColor.l,f.l)}ID(o,this.spawnColor)}const a=this.options.shape;let l=this.position;if(this._shape){const h=this._shape.randomPosition();if(h){l=h.position;const f=a.replace;f.color&&h.color&&ID(o,h.color),f.opacity&&(o.opacity?o.opacity.value=h.opacity:o.opacity={value:h.opacity})}else l=null}l&&this.container.particles.addParticle(l,o)}}}class zne{constructor(e,t){this.container=t,this._engine=e,this.array=[],this.emitters=[],this.interactivityEmitters={random:{count:1,enable:!1},value:[]};const i=0;t.getEmitter=s=>s===void 0||fr(s)?this.array[s??i]:this.array.find(r=>r.name===s),t.addEmitter=async(s,r)=>this.addEmitter(s,r),t.removeEmitter=s=>{const r=t.getEmitter(s);r&&this.removeEmitter(r)},t.playEmitter=s=>{const r=t.getEmitter(s);r&&r.externalPlay()},t.pauseEmitter=s=>{const r=t.getEmitter(s);r&&r.externalPause()}}async addEmitter(e,t){const i=new Va;i.load(e);const s=new Fne(this._engine,this,this.container,i,t);return await s.init(),this.array.push(s),s}handleClickMode(e){const t=this.emitters,i=this.interactivityEmitters;if(e!==g0.emitter)return;let s;if(i&&Ni(i.value))if(i.value.length>0&&i.random.enable){s=[];const l=[];for(let h=0;h<i.random.count;h++){const f=yz(i.value);if(l.includes(f)&&l.length<i.value.length){h--;continue}l.push(f),s.push(Bm(i.value,f))}}else s=i.value;else s=i==null?void 0:i.value;const r=s??t,o=this.container.interactivity.mouse.clickPosition;_i(r,async a=>{await this.addEmitter(a,o)})}async init(){if(this.emitters=this.container.actualOptions.emitters,this.interactivityEmitters=this.container.actualOptions.interactivity.modes.emitters,!!this.emitters)if(Ni(this.emitters))for(const e of this.emitters)await this.addEmitter(e);else await this.addEmitter(this.emitters)}pause(){for(const e of this.array)e.pause()}play(){for(const e of this.array)e.play()}removeEmitter(e){const t=this.array.indexOf(e);t>=0&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}update(e){for(const t of this.array)t.update(e)}}class kne{constructor(e){this._engine=e,this.id="emitters"}getPlugin(e){return Promise.resolve(new zne(this._engine,e))}loadOptions(e,t){var s,r;if(!this.needsPlugin(e)&&!this.needsPlugin(t))return;t!=null&&t.emitters&&(e.emitters=_i(t.emitters,o=>{const a=new Va;return a.load(o),a}));const i=(r=(s=t==null?void 0:t.interactivity)==null?void 0:s.modes)==null?void 0:r.emitters;if(i)if(Ni(i))e.interactivity.modes.emitters={random:{count:1,enable:!0},value:i.map(o=>{const a=new Va;return a.load(o),a})};else{const o=i;if(o.value!==void 0)if(Ni(o.value))e.interactivity.modes.emitters={random:{count:o.random.count??1,enable:o.random.enable??!1},value:o.value.map(l=>{const h=new Va;return h.load(l),h})};else{const l=new Va;l.load(o.value),e.interactivity.modes.emitters={random:{count:o.random.count??1,enable:o.random.enable??!1},value:l}}else(e.interactivity.modes.emitters={random:{count:1,enable:!1},value:new Va}).value.load(i)}}needsPlugin(e){var i,s,r;if(!e)return!1;const t=e.emitters;return Ni(t)&&!!t.length||t!==void 0||!!((r=(s=(i=e.interactivity)==null?void 0:i.events)==null?void 0:s.onClick)!=null&&r.mode)&&dn(g0.emitter,e.interactivity.events.onClick.mode)}}const HS=new Map;class Hne{constructor(e){this._engine=e}addShapeGenerator(e,t){this.getShapeGenerator(e)||HS.set(e,t)}getShapeGenerator(e){return HS.get(e)}getSupportedShapeGenerators(){return HS.keys()}}class Pz{constructor(e,t,i,s){this.position=e,this.size=t,this.fill=i,this.options=s}resize(e,t){this.position=e,this.size=t}}async function Gne(n,e=!0){n.checkVersion("3.9.1"),n.emitterShapeManager||(n.emitterShapeManager=new Hne(n)),n.addEmitterShapeGenerator||(n.addEmitterShapeGenerator=(i,s)=>{var r;(r=n.emitterShapeManager)==null||r.addShapeGenerator(i,s)});const t=new kne(n);await n.addPlugin(t,e)}const Gd=.25,dE=2,Vne=Math.PI*dE,ND=2,UD=.5;class Wne extends Pz{constructor(e,t,i,s){super(e,t,i,s)}async init(){}randomPosition(){const e=this.size,t=this.fill,i=this.position,s=(d,p)=>{const g=Tt()*Gd,v=Math.atan(p/d*Math.tan(Vne*g)),S=Tt();return S<Gd?v:S<dE*Gd?Math.PI-v:S<dE*Gd+Gd?Math.PI+v:-v},r=(d,p,g)=>d*p/Math.sqrt((p*Math.cos(g))**ND+(d*Math.sin(g))**ND),[o,a]=[e.width*UD,e.height*UD],l=s(o,a),h=r(o,a,l),f=t?h*Math.sqrt(Tt()):h;return{position:{x:i.x+f*Math.cos(l),y:i.y+f*Math.sin(l)}}}}class jne{generate(e,t,i,s){return new Wne(e,t,i,s)}}async function Xne(n,e=!0){var i;const t=n;t.checkVersion("3.9.1"),(i=t.addEmitterShapeGenerator)==null||i.call(t,"circle",new jne),await t.refresh(e)}const Jne=4;var Jh;(function(n){n[n.TopLeft=0]="TopLeft",n[n.TopRight=1]="TopRight",n[n.BottomRight=2]="BottomRight",n[n.BottomLeft=3]="BottomLeft"})(Jh||(Jh={}));function FD(n,e){return n+e*(Tt()-ms)}class Yne extends Pz{constructor(e,t,i,s){super(e,t,i,s)}async init(){}randomPosition(){const e=this.fill,t=this.position,i=this.size;if(e)return{position:{x:FD(t.x,i.width),y:FD(t.y,i.height)}};{const s=i.width*ms,r=i.height*ms,o=Math.floor(Tt()*Jne),a=(Tt()-ms)*ro;switch(o){case Jh.TopLeft:return{position:{x:t.x+a*s,y:t.y-r}};case Jh.TopRight:return{position:{x:t.x-s,y:t.y+a*r}};case Jh.BottomRight:return{position:{x:t.x+a*s,y:t.y+r}};case Jh.BottomLeft:default:return{position:{x:t.x+s,y:t.y+a*r}}}}}}class Kne{generate(e,t,i,s){return new Yne(e,t,i,s)}}async function qne(n,e=!0){var i;const t=n;t.checkVersion("3.9.1"),(i=t.addEmitterShapeGenerator)==null||i.call(t,"square",new Kne),await t.refresh(e)}class Qne{constructor(){this.delay=1,this.pauseOnStop=!1,this.quantity=1}load(e){Le(e)||(e.delay!==void 0&&(this.delay=e.delay),e.quantity!==void 0&&(this.quantity=e.quantity),e.particles!==void 0&&(this.particles=zi({},e.particles)),e.pauseOnStop!==void 0&&(this.pauseOnStop=e.pauseOnStop))}}const zD="trail";class Zne extends jr{constructor(e){super(e),this._delay=0}clear(){}init(){}interact(e){var h,f,d,p;const t=this.container,{interactivity:i}=t;if(!t.retina.reduceFactor)return;const s=t.actualOptions,r=s.interactivity.modes.trail;if(!r)return;const o=r.delay*Di/this.container.retina.reduceFactor;if(this._delay<o&&(this._delay+=e.value),this._delay<o)return;const a=!(r.pauseOnStop&&(i.mouse.position===this._lastPosition||((h=i.mouse.position)==null?void 0:h.x)===((f=this._lastPosition)==null?void 0:f.x)&&((d=i.mouse.position)==null?void 0:d.y)===((p=this._lastPosition)==null?void 0:p.y))),l=t.interactivity.mouse.position;l?this._lastPosition={...l}:delete this._lastPosition,a&&t.particles.push(r.quantity,t.interactivity.mouse,r.particles),this._delay-=o}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events;return s.clicking&&s.inside&&!!s.position&&dn(zD,r.onClick.mode)||s.inside&&!!s.position&&dn(zD,r.onHover.mode)}loadModeOptions(e,...t){e.trail||(e.trail=new Qne);for(const i of t)e.trail.load(i==null?void 0:i.trail)}reset(){}}async function $ne(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalTrail",t=>Promise.resolve(new Zne(t)),e)}var zc;(function(n){n.both="both",n.horizontal="horizontal",n.vertical="vertical"})(zc||(zc={}));const eie=2,Dz=Math.PI*eie,tie=360;function nie(n,e){const t=e.options.roll;if(!(t!=null&&t.enable)){e.roll={enable:!1,horizontal:!1,vertical:!1,angle:0,speed:0};return}if(e.roll={enable:t.enable,horizontal:t.mode===zc.horizontal||t.mode===zc.both,vertical:t.mode===zc.vertical||t.mode===zc.both,angle:Tt()*Dz,speed:je(t.speed)/tie},t.backColor)e.backColor=Wf(n,t.backColor);else if(t.darken.enable&&t.enlighten.enable){const i=Tt()>=ms?Ec.darken:Ec.enlighten;e.roll.alter={type:i,value:je(i===Ec.darken?t.darken.value:t.enlighten.value)}}else t.darken.enable?e.roll.alter={type:Ec.darken,value:je(t.darken.value)}:t.enlighten.enable&&(e.roll.alter={type:Ec.enlighten,value:je(t.enlighten.value)})}function iie(n,e){const t=n.options.roll,i=n.roll;if(!i||!(t!=null&&t.enable))return;const s=i.speed*e.factor,r=Dz;i.angle+=s,i.angle>r&&(i.angle-=r)}class kD{constructor(){this.enable=!1,this.value=0}load(e){Le(e)||(e.enable!==void 0&&(this.enable=e.enable),e.value!==void 0&&(this.value=ct(e.value)))}}class sie{constructor(){this.darken=new kD,this.enable=!1,this.enlighten=new kD,this.mode=zc.vertical,this.speed=25}load(e){Le(e)||(e.backColor!==void 0&&(this.backColor=ci.create(this.backColor,e.backColor)),this.darken.load(e.darken),e.enable!==void 0&&(this.enable=e.enable),this.enlighten.load(e.enlighten),e.mode!==void 0&&(this.mode=e.mode),e.speed!==void 0&&(this.speed=ct(e.speed)))}}class rie{constructor(e){this._engine=e}getTransformValues(e){var r;const t=((r=e.roll)==null?void 0:r.enable)&&e.roll,i=t&&t.horizontal,s=t&&t.vertical;return{a:i?Math.cos(t.angle):void 0,d:s?Math.sin(t.angle):void 0}}init(e){nie(this._engine,e)}isEnabled(e){const t=e.options.roll;return!e.destroyed&&!e.spawning&&!!(t!=null&&t.enable)}loadOptions(e,...t){e.roll||(e.roll=new sie);for(const i of t)e.roll.load(i==null?void 0:i.roll)}update(e,t){this.isEnabled(e)&&iie(e,t)}}async function oie(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("roll",()=>Promise.resolve(new rie(n)),e)}const pE=.5,aie=2,Ja=0,Pr=1,HD=60,GD=0,lie=.01,cie=Math.PI*aie;function uie(n){const e=n.initialPosition,{dx:t,dy:i}=Ui(e,n.position),s=Math.abs(t),r=Math.abs(i),{maxDistance:o}=n.retina,a=o.horizontal,l=o.vertical;if(!a&&!l)return;const h=(a&&s>=a)??!1,f=(l&&r>=l)??!1;if((h||f)&&!n.misplaced)n.misplaced=!!a&&s>a||!!l&&r>l,a&&(n.velocity.x=n.velocity.y*pE-n.velocity.x),l&&(n.velocity.y=n.velocity.x*pE-n.velocity.y);else if((!a||s<a)&&(!l||r<l)&&n.misplaced)n.misplaced=!1;else if(n.misplaced){const d=n.position,p=n.velocity;a&&(d.x<e.x&&p.x<Ja||d.x>e.x&&p.x>Ja)&&(p.x*=-Tt()),l&&(d.y<e.y&&p.y<Ja||d.y>e.y&&p.y>Ja)&&(p.y*=-Tt())}}function hie(n,e,t,i,s,r,o){die(n,o);const a=n.gravity,l=a!=null&&a.enable&&a.inverse?-Pr:Pr;s&&t&&(n.velocity.x+=s*o.factor/(HD*t)),a!=null&&a.enable&&t&&(n.velocity.y+=l*(a.acceleration*o.factor)/(HD*t));const h=n.moveDecay;n.velocity.multTo(h);const f=n.velocity.mult(t);a!=null&&a.enable&&i>Ja&&(!a.inverse&&f.y>=Ja&&f.y>=i||a.inverse&&f.y<=Ja&&f.y<=-i)&&(f.y=l*i,t&&(n.velocity.y=f.y/t));const d=n.options.zIndex,p=(Pr-n.zIndexFactor)**d.velocityRate;f.multTo(p),f.multTo(r);const{position:g}=n;g.addTo(f),e.vibrate&&(g.x+=Math.sin(g.x*Math.cos(g.y))*r,g.y+=Math.cos(g.y*Math.sin(g.x))*r)}function fie(n,e,t){const i=n.container;if(!n.spin)return;const s=n.spin.direction===Zi.clockwise,r={x:s?Math.cos:Math.sin,y:s?Math.sin:Math.cos};n.position.x=n.spin.center.x+n.spin.radius*r.x(n.spin.angle)*t,n.position.y=n.spin.center.y+n.spin.radius*r.y(n.spin.angle)*t,n.spin.radius+=n.spin.acceleration*t;const o=Math.max(i.canvas.size.width,i.canvas.size.height),a=o*pE;n.spin.radius>a?(n.spin.radius=a,n.spin.acceleration*=-Pr):n.spin.radius<GD&&(n.spin.radius=GD,n.spin.acceleration*=-Pr),n.spin.angle+=e*lie*(Pr-n.spin.radius/o)}function die(n,e){var o;const t=n.options,i=t.move.path;if(!i.enable)return;if(n.lastPathTime<=n.pathDelay){n.lastPathTime+=e.value;return}const r=(o=n.pathGenerator)==null?void 0:o.generate(n,e);r&&n.velocity.addTo(r),i.clamp&&(n.velocity.x=kr(n.velocity.x,-Pr,Pr),n.velocity.y=kr(n.velocity.y,-Pr,Pr)),n.lastPathTime-=n.pathDelay}function pie(n){return n.slow.inRange?n.slow.factor:Pr}function mie(n){const e=n.container,t=n.options,i=t.move.spin;if(!i.enable)return;const s=i.position??{x:50,y:50},r=.01,o={x:s.x*r*e.canvas.size.width,y:s.y*r*e.canvas.size.height},a=n.getPosition(),l=Ns(a,o),h=je(i.acceleration);n.retina.spinAcceleration=h*e.retina.pixelRatio,n.spin={center:o,direction:n.velocity.x>=Ja?Zi.clockwise:Zi.counterClockwise,angle:Tt()*cie,radius:l,acceleration:n.retina.spinAcceleration}}const gie=2,yie=1,vie=1;class xie{init(e){const t=e.options,i=t.move.gravity;e.gravity={enable:i.enable,acceleration:je(i.acceleration),inverse:i.inverse},mie(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){var _,y;const i=e.options,s=i.move;if(!s.enable)return;const r=e.container,o=r.retina.pixelRatio;(_=e.retina).moveSpeed??(_.moveSpeed=je(s.speed)*o),(y=e.retina).moveDrift??(y.moveDrift=je(e.options.move.drift)*o);const a=pie(e),l=r.retina.reduceFactor,h=e.retina.moveSpeed,f=e.retina.moveDrift,d=oo(i.size.value)*o,p=s.size?e.getRadius()/d:yie,g=t.factor||vie,v=h*p*a*g/gie,S=e.retina.maxSpeed??r.retina.maxSpeed;s.spin.enable?fie(e,v,l):hie(e,s,v,S,f,l,t),uie(e)}}async function _ie(n,e=!0){n.checkVersion("3.9.1"),await n.addMover("base",()=>Promise.resolve(new xie),e)}const Aie=2,Sie=Math.PI*Aie,Mie=0,VD={x:0,y:0};function bie(n){const{context:e,particle:t,radius:i}=n;t.circleRange||(t.circleRange={min:Mie,max:Sie});const s=t.circleRange;e.arc(VD.x,VD.y,i,s.min,s.max,!1)}const Eie=12,wie=360,WD=0;class Cie{constructor(){this.validTypes=["circle"]}draw(e){bie(e)}getSidesCount(){return Eie}particleInit(e,t){const i=t.shapeData,s=(i==null?void 0:i.angle)??{max:wie,min:WD};t.circleRange=Xh(s)?{min:lf(s.min),max:lf(s.max)}:{min:WD,max:lf(s)}}}async function Tie(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new Cie,e)}class Rie{constructor(e,t){this._container=e,this._engine=t}init(e){const t=Wf(this._engine,e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=Ez(t,e.options.color.animation,this._container.retina.reduceFactor))}isEnabled(e){const{h:t,s:i,l:s}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&((r==null?void 0:r.h.value)!==void 0&&t.enable||(r==null?void 0:r.s.value)!==void 0&&i.enable||(r==null?void 0:r.l.value)!==void 0&&s.enable)}update(e,t){wz(e.color,t)}}async function Bie(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("color",t=>Promise.resolve(new Rie(t,n)),e)}var wc;(function(n){n[n.r=1]="r",n[n.g=2]="g",n[n.b=3]="b",n[n.a=4]="a"})(wc||(wc={}));const Pie=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,Die=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,Iy=16,Lie=1,Oie=255;class Iie{constructor(){this.key="hex",this.stringPrefix="#"}handleColor(e){return this._parseString(e.value)}handleRangeColor(e){return this._parseString(e.value)}parseString(e){return this._parseString(e)}_parseString(e){if(typeof e!="string"||!(e!=null&&e.startsWith(this.stringPrefix)))return;const t=e.replace(Pie,(s,r,o,a,l)=>r+r+o+o+a+a+(l!==void 0?l+l:"")),i=Die.exec(t);return i?{a:i[wc.a]!==void 0?parseInt(i[wc.a],Iy)/Oie:Lie,b:parseInt(i[wc.b],Iy),g:parseInt(i[wc.g],Iy),r:parseInt(i[wc.r],Iy)}:void 0}}async function Nie(n,e=!0){n.checkVersion("3.9.1"),await n.addColorManager(new Iie,e)}var Yh;(function(n){n[n.h=1]="h",n[n.s=2]="s",n[n.l=3]="l",n[n.a=5]="a"})(Yh||(Yh={}));class Uie{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return Df(i)}handleRangeColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.l!==void 0)return Df({h:je(i.h),l:je(i.l),s:je(i.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*[\s,]\s*(\d+)%\s*[\s,]\s*(\d+)%\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=t.exec(e),s=4,r=1,o=10;return i?Tte({a:i.length>s?mz(i[Yh.a]):r,h:parseInt(i[Yh.h],o),l:parseInt(i[Yh.l],o),s:parseInt(i[Yh.s],o)}):void 0}}async function Fie(n,e=!0){n.checkVersion("3.9.1"),await n.addColorManager(new Uie,e)}class zie{constructor(e){this.container=e}init(e){const t=e.options.opacity,i=1;e.opacity=Mte(t,i);const s=t.animation;s.enable&&(e.opacity.velocity=je(s.speed)/gi*this.container.retina.reduceFactor,s.sync||(e.opacity.velocity*=Tt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){!this.isEnabled(e)||!e.opacity||Sx(e,e.opacity,!0,e.options.opacity.animation.destroy,t)}}async function kie(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("opacity",t=>Promise.resolve(new zie(t)),e)}const y0=0,ff=0;function Hie(n){if(n.outMode!==oi.bounce&&n.outMode!==oi.split||n.direction!==Ot.left&&n.direction!==Ot.right)return;n.bounds.right<ff&&n.direction===Ot.left?n.particle.position.x=n.size+n.offset.x:n.bounds.left>n.canvasSize.width&&n.direction===Ot.right&&(n.particle.position.x=n.canvasSize.width-n.size-n.offset.x);const e=n.particle.velocity.x;let t=!1;if(n.direction===Ot.right&&n.bounds.right>=n.canvasSize.width&&e>y0||n.direction===Ot.left&&n.bounds.left<=ff&&e<y0){const s=je(n.particle.options.bounce.horizontal.value);n.particle.velocity.x*=-s,t=!0}if(!t)return;const i=n.offset.x+n.size;n.bounds.right>=n.canvasSize.width&&n.direction===Ot.right?n.particle.position.x=n.canvasSize.width-i:n.bounds.left<=ff&&n.direction===Ot.left&&(n.particle.position.x=i),n.outMode===oi.split&&n.particle.destroy()}function Gie(n){if(n.outMode!==oi.bounce&&n.outMode!==oi.split||n.direction!==Ot.bottom&&n.direction!==Ot.top)return;n.bounds.bottom<ff&&n.direction===Ot.top?n.particle.position.y=n.size+n.offset.y:n.bounds.top>n.canvasSize.height&&n.direction===Ot.bottom&&(n.particle.position.y=n.canvasSize.height-n.size-n.offset.y);const e=n.particle.velocity.y;let t=!1;if(n.direction===Ot.bottom&&n.bounds.bottom>=n.canvasSize.height&&e>y0||n.direction===Ot.top&&n.bounds.top<=ff&&e<y0){const s=je(n.particle.options.bounce.vertical.value);n.particle.velocity.y*=-s,t=!0}if(!t)return;const i=n.offset.y+n.size;n.bounds.bottom>=n.canvasSize.height&&n.direction===Ot.bottom?n.particle.position.y=n.canvasSize.height-i:n.bounds.top<=ff&&n.direction===Ot.top&&(n.particle.position.y=i),n.outMode===oi.split&&n.particle.destroy()}class Vie{constructor(e){this.container=e,this.modes=[oi.bounce,oi.split]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;let o=!1;for(const p of r.plugins.values())if(p.particleBounce!==void 0&&(o=p.particleBounce(e,i,t)),o)break;if(o)return;const a=e.getPosition(),l=e.offset,h=e.getRadius(),f=Dm(a,h),d=r.canvas.size;Hie({particle:e,outMode:s,direction:t,bounds:f,canvasSize:d,offset:l,size:h}),Gie({particle:e,outMode:s,direction:t,bounds:f,canvasSize:d,offset:l,size:h})}}const Ny=0;class Wie{constructor(e){this.container=e,this.modes=[oi.destroy]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case ll.normal:case ll.outside:if(Pm(e.position,r.canvas.size,gn.origin,e.getRadius(),t))return;break;case ll.inside:{const{dx:o,dy:a}=Ui(e.position,e.moveCenter),{x:l,y:h}=e.velocity;if(l<Ny&&o>e.moveCenter.radius||h<Ny&&a>e.moveCenter.radius||l>=Ny&&o<-e.moveCenter.radius||h>=Ny&&a<-e.moveCenter.radius)return;break}}r.particles.remove(e,e.group,!0)}}const Uy=0;class jie{constructor(e){this.container=e,this.modes=[oi.none]}update(e,t,i,s){if(!this.modes.includes(s)||((e.options.move.distance.horizontal&&(t===Ot.left||t===Ot.right))??(e.options.move.distance.vertical&&(t===Ot.top||t===Ot.bottom))))return;const r=e.options.move.gravity,o=this.container,a=o.canvas.size,l=e.getRadius();if(r.enable){const h=e.position;(!r.inverse&&h.y>a.height+l&&t===Ot.bottom||r.inverse&&h.y<-l&&t===Ot.top)&&o.particles.remove(e)}else{if(e.velocity.y>Uy&&e.position.y<=a.height+l||e.velocity.y<Uy&&e.position.y>=-l||e.velocity.x>Uy&&e.position.x<=a.width+l||e.velocity.x<Uy&&e.position.x>=-l)return;Pm(e.position,o.canvas.size,gn.origin,l,t)||o.particles.remove(e)}}}const Fy=0,zy=0;class Xie{constructor(e){this.container=e,this.modes=[oi.out]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case ll.inside:{const{x:o,y:a}=e.velocity,l=gn.origin;l.length=e.moveCenter.radius,l.angle=e.velocity.angle+Math.PI,l.addTo(gn.create(e.moveCenter));const{dx:h,dy:f}=Ui(e.position,l);if(o<=Fy&&h>=zy||a<=Fy&&f>=zy||o>=Fy&&h<=zy||a>=Fy&&f<=zy)return;e.position.x=Math.floor(Li({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(Li({min:0,max:r.canvas.size.height}));const{dx:d,dy:p}=Ui(e.position,e.moveCenter);e.direction=Math.atan2(-p,-d),e.velocity.angle=e.direction;break}default:{if(Pm(e.position,r.canvas.size,gn.origin,e.getRadius(),t))return;switch(e.outType){case ll.outside:{e.position.x=Math.floor(Li({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(Li({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:o,dy:a}=Ui(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(a,o),e.velocity.angle=e.direction);break}case ll.normal:{const o=e.options.move.warp,a=r.canvas.size,l={bottom:a.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:a.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},h=e.getRadius(),f=Dm(e.position,h);t===Ot.right&&f.left>a.width+e.offset.x?(e.position.x=l.left,e.initialPosition.x=e.position.x,o||(e.position.y=Tt()*a.height,e.initialPosition.y=e.position.y)):t===Ot.left&&f.right<-e.offset.x&&(e.position.x=l.right,e.initialPosition.x=e.position.x,o||(e.position.y=Tt()*a.height,e.initialPosition.y=e.position.y)),t===Ot.bottom&&f.top>a.height+e.offset.y?(o||(e.position.x=Tt()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.top,e.initialPosition.y=e.position.y):t===Ot.top&&f.bottom<-e.offset.y&&(o||(e.position.x=Tt()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.bottom,e.initialPosition.y=e.position.y);break}}break}}}}const Jie=(n,e)=>n.default===e||n.bottom===e||n.left===e||n.right===e||n.top===e;class Yie{constructor(e){this._addUpdaterIfMissing=(t,i,s)=>{const r=t.options.move.outModes;!this.updaters.has(i)&&Jie(r,i)&&this.updaters.set(i,s(this.container))},this._updateOutMode=(t,i,s,r)=>{for(const o of this.updaters.values())o.update(t,r,i,s)},this.container=e,this.updaters=new Map}init(e){this._addUpdaterIfMissing(e,oi.bounce,t=>new Vie(t)),this._addUpdaterIfMissing(e,oi.out,t=>new Xie(t)),this._addUpdaterIfMissing(e,oi.destroy,t=>new Wie(t)),this._addUpdaterIfMissing(e,oi.none,t=>new jie(t))}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const i=e.options.move.outModes;this._updateOutMode(e,t,i.bottom??i.default,Ot.bottom),this._updateOutMode(e,t,i.left??i.default,Ot.left),this._updateOutMode(e,t,i.right??i.default,Ot.right),this._updateOutMode(e,t,i.top??i.default,Ot.top)}}async function Kie(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("outModes",t=>Promise.resolve(new Yie(t)),e)}var Kh;(function(n){n[n.r=1]="r",n[n.g=2]="g",n[n.b=3]="b",n[n.a=5]="a"})(Kh||(Kh={}));class qie{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return i}handleRangeColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return{r:je(i.r),g:je(i.g),b:je(i.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=t.exec(e),s=10;return i?{a:i.length>4?mz(i[Kh.a]):1,b:parseInt(i[Kh.b],s),g:parseInt(i[Kh.g],s),r:parseInt(i[Kh.r],s)}:void 0}}async function Qie(n,e=!0){n.checkVersion("3.9.1"),await n.addColorManager(new qie,e)}const hc=0;class Zie{init(e){const t=e.container,i=e.options.size,s=i.animation;s.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/gi*t.retina.reduceFactor,s.sync||(e.size.velocity*=Tt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??hc)<=hc||(e.size.maxLoops??hc)>hc&&(e.size.loops??hc)<(e.size.maxLoops??hc))}reset(e){e.size.loops=hc}update(e,t){this.isEnabled(e)&&Sx(e,e.size,!0,e.options.size.animation.destroy,t)}}async function $ie(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("size",()=>Promise.resolve(new Zie),e)}async function ese(n,e=!0){n.checkVersion("3.9.1"),await Nie(n,!1),await Fie(n,!1),await Qie(n,!1),await _ie(n,!1),await Tie(n,!1),await Bie(n,!1),await kie(n,!1),await Kie(n,!1),await $ie(n,!1),await n.refresh(e)}async function tse(n,e=!0){n.checkVersion("3.9.1"),await n.addEasing(Yc.easeInQuad,t=>t**2,!1),await n.addEasing(Yc.easeOutQuad,t=>1-(1-t)**2,!1),await n.addEasing(Yc.easeInOutQuad,t=>t<.5?2*t**2:1-(-2*t+2)**2/2,!1),await n.refresh(e)}function nse(n,e){const{context:t,opacity:i}=n,s=.5,r=t.globalAlpha;if(!e)return;const o=e.width,a=o*s;t.globalAlpha=i,t.drawImage(e,-a,-a,o,o),t.globalAlpha=r}const GS='"Twemoji Mozilla", Apple Color Emoji, "Segoe UI Emoji", "Noto Color Emoji", "EmojiOne Color"',jD=0;class ise{constructor(){this.validTypes=["emoji"],this._emojiShapeDict=new Map}destroy(){for(const[e,t]of this._emojiShapeDict)t instanceof ImageBitmap&&(t==null||t.close()),this._emojiShapeDict.delete(e)}draw(e){const t=e.particle.emojiDataKey;if(!t)return;const i=this._emojiShapeDict.get(t);i&&nse(e,i)}async init(e){const t=e.actualOptions,{validTypes:i}=this;if(!i.find(o=>dn(o,t.particles.shape.type)))return;const s=[cE(GS)],r=i.map(o=>t.particles.shape.options[o]).find(o=>!!o);r&&_i(r,o=>{o.font&&s.push(cE(o.font))}),await Promise.all(s)}particleDestroy(e){e.emojiDataKey=void 0}particleInit(e,t){const s=t.shapeData;if(!(s!=null&&s.value))return;const r=yo(s.value,t.randomIndexData);if(!r)return;const o=typeof r=="string"?{font:s.font??GS,padding:s.padding??jD,value:r}:{font:GS,padding:jD,...s,...r},a=o.font,l=o.value,h=`${l}_${a}`;if(this._emojiShapeDict.has(h)){t.emojiDataKey=h;return}const f=o.padding*2,d=oo(t.size.value),p=d+f,g=p*2;let v;if(typeof OffscreenCanvas<"u"){const S=new OffscreenCanvas(g,g),_=S.getContext("2d");if(!_)return;_.font=`400 ${d*2}px ${a}`,_.textBaseline="middle",_.textAlign="center",_.fillText(l,p,p),v=S.transferToImageBitmap()}else{const S=document.createElement("canvas");S.width=g,S.height=g;const _=S.getContext("2d");if(!_)return;_.font=`400 ${d*2}px ${a}`,_.textBaseline="middle",_.textAlign="center",_.fillText(l,p,p),v=S}this._emojiShapeDict.set(h,v),t.emojiDataKey=h}}async function sse(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new ise,e)}const rse=1,ose=1,Lz=0;function Oz(n,e,t,i,s,r){const o=e.actualOptions.interactivity.modes.attract;if(!o)return;const a=e.particles.quadTree.query(s,r);for(const l of a){const{dx:h,dy:f,distance:d}=Ui(l.position,t),p=o.speed*o.factor,g=kr(n.getEasing(o.easing)(ose-d/i)*p,rse,o.maxSpeed),v=gn.create(d?h/d*g:p,d?f/d*g:p);l.position.subFrom(v)}}function ase(n,e,t){e.attract||(e.attract={particles:[]});const{attract:i}=e;if(i.finish||(i.count||(i.count=0),i.count++,i.count===e.particles.count&&(i.finish=!0)),i.clicking){const s=e.interactivity.mouse.clickPosition,r=e.retina.attractModeDistance;if(!r||r<Lz||!s)return;Oz(n,e,s,r,new ts(s.x,s.y,r),o=>t(o))}else i.clicking===!1&&(i.particles=[])}function lse(n,e,t){const i=e.interactivity.mouse.position,s=e.retina.attractModeDistance;!s||s<Lz||!i||Oz(n,e,i,s,new ts(i.x,i.y,s),r=>t(r))}class cse{constructor(){this.distance=200,this.duration=.4,this.easing=Yc.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(e){Le(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}const Vd="attract";let use=class extends jr{constructor(e,t){super(t),this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.attract;if(!(!r||i!==Vd)){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const o of t.attract.particles)this.isEnabled(o)&&o.velocity.setTo(o.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},r.duration*Di)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===Rm,s=t.interactivity.events,{enable:r,mode:o}=s.onHover,{enable:a,mode:l}=s.onClick;i&&r&&dn(Vd,o)?lse(this._engine,this.container,h=>this.isEnabled(h)):a&&dn(Vd,l)&&ase(this._engine,this.container,h=>this.isEnabled(h))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events;if((!s.position||!r.onHover.enable)&&(!s.clickPosition||!r.onClick.enable))return!1;const o=r.onHover.mode,a=r.onClick.mode;return dn(Vd,o)||dn(Vd,a)}loadModeOptions(e,...t){e.attract||(e.attract=new cse);for(const i of t)e.attract.load(i==null?void 0:i.attract)}reset(){}};async function hse(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalAttract",t=>Promise.resolve(new use(n,t)),e)}const fse=2,gv=.5,dse=Math.PI*gv,XD=2,Iz=10,pse=0;function Nz(n,e,t,i,s){const r=n.particles.quadTree.query(i,s);for(const o of r)i instanceof ts?xz(uE(o),{position:e,mass:t**fse*dse,velocity:gn.origin,factor:gn.origin}):i instanceof Rl&&Ste(o,Dm(e,t))}function mse(n,e,t,i){const s=document.querySelectorAll(e);s.length&&s.forEach(r=>{const o=r,a=n.retina.pixelRatio,l={x:(o.offsetLeft+o.offsetWidth*gv)*a,y:(o.offsetTop+o.offsetHeight*gv)*a},h=o.offsetWidth*gv*a,f=Iz*a,d=t.type===im.circle?new ts(l.x,l.y,h+f):new Rl(o.offsetLeft*a-f,o.offsetTop*a-f,o.offsetWidth*a+f*XD,o.offsetHeight*a+f*XD);i(l,h,d)})}function gse(n,e,t,i){Nw(t,e,(s,r)=>mse(n,s,r,(o,a,l)=>Nz(n,o,a,l,i)))}function yse(n,e){const t=n.retina.pixelRatio,i=Iz*t,s=n.interactivity.mouse.position,r=n.retina.bounceModeDistance;!r||r<pse||!s||Nz(n,s,r,new ts(s.x,s.y,r+i),e)}class vse{constructor(){this.distance=200}load(e){Le(e)||e.distance!==void 0&&(this.distance=e.distance)}}const ky="bounce";class xse extends jr{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=t.interactivity.events,s=e.interactivity.status===Rm,r=i.onHover.enable,o=i.onHover.mode,a=i.onDiv;s&&r&&dn(ky,o)?yse(this.container,l=>this.isEnabled(l)):gse(this.container,a,ky,l=>this.isEnabled(l))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,o=r.onDiv;return!!s.position&&r.onHover.enable&&dn(ky,r.onHover.mode)||Iw(ky,o)}loadModeOptions(e,...t){e.bounce||(e.bounce=new vse);for(const i of t)e.bounce.load(i==null?void 0:i.bounce)}reset(){}}async function _se(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalBounce",t=>Promise.resolve(new xse(t)),e)}class Uz{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(!Le(e)){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const t=Ni(this.color)?void 0:this.color;this.color=_i(e.color,i=>ci.create(t,i))}e.size!==void 0&&(this.size=e.size)}}}class Ase extends Uz{constructor(){super(),this.selectors=[]}load(e){super.load(e),!Le(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class Sse extends Uz{load(e){super.load(e),!Le(e)&&(this.divs=_i(e.divs,t=>{const i=new Ase;return i.load(t),i}))}}var to;(function(n){n.color="color",n.opacity="opacity",n.size="size"})(to||(to={}));function JD(n,e,t,i){if(e>=t){const s=n+(e-t)*i;return kr(s,n,e)}else if(e<t){const s=n-(t-e)*i;return kr(s,e,n)}}const fc="bubble",VS=0,Mse=0,bse=2,YD=1,KD=1,Ese=0,wse=0,WS=.5,jS=1;class Cse extends jr{constructor(e,t){super(e),this._clickBubble=()=>{var f;const i=this.container,s=i.actualOptions,r=i.interactivity.mouse.clickPosition,o=s.interactivity.modes.bubble;if(!o||!r)return;i.bubble||(i.bubble={});const a=i.retina.bubbleModeDistance;if(!a||a<VS)return;const l=i.particles.quadTree.queryCircle(r,a,d=>this.isEnabled(d)),{bubble:h}=i;for(const d of l){if(!h.clicking)continue;d.bubble.inRange=!h.durationEnd;const p=d.getPosition(),g=Ns(p,r),v=(new Date().getTime()-(i.interactivity.mouse.clickTime??Mse))/Di;v>o.duration&&(h.durationEnd=!0),v>o.duration*bse&&(h.clicking=!1,h.durationEnd=!1);const S={bubbleObj:{optValue:i.retina.bubbleModeSize,value:d.bubble.radius},particlesObj:{optValue:oo(d.options.size.value)*i.retina.pixelRatio,value:d.size.value},type:to.size};this._process(d,g,v,S);const _={bubbleObj:{optValue:o.opacity,value:d.bubble.opacity},particlesObj:{optValue:oo(d.options.opacity.value),value:((f=d.opacity)==null?void 0:f.value)??YD},type:to.opacity};this._process(d,g,v,_),!h.durationEnd&&g<=a?this._hoverBubbleColor(d,g):delete d.bubble.color}},this._hoverBubble=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.bubbleModeDistance;if(!r||r<VS||!s)return;const o=i.particles.quadTree.queryCircle(s,r,a=>this.isEnabled(a));for(const a of o){a.bubble.inRange=!0;const l=a.getPosition(),h=Ns(l,s),f=KD-h/r;h<=r?f>=wse&&i.interactivity.status===Rm&&(this._hoverBubbleSize(a,f),this._hoverBubbleOpacity(a,f),this._hoverBubbleColor(a,f)):this.reset(a),i.interactivity.status===ste&&this.reset(a)}},this._hoverBubbleColor=(i,s,r)=>{const o=this.container.actualOptions,a=r??o.interactivity.modes.bubble;if(a){if(!i.bubble.finalColor){const l=a.color;if(!l)return;const h=yo(l);i.bubble.finalColor=Wf(this._engine,h)}if(i.bubble.finalColor)if(a.mix){i.bubble.color=void 0;const l=i.getFillColor();i.bubble.color=l?Sz(Uw(l,i.bubble.finalColor,KD-s,s)):i.bubble.finalColor}else i.bubble.color=i.bubble.finalColor}},this._hoverBubbleOpacity=(i,s,r)=>{var p,g;const o=this.container,a=o.actualOptions,l=(r==null?void 0:r.opacity)??((p=a.interactivity.modes.bubble)==null?void 0:p.opacity);if(!l)return;const h=i.options.opacity.value,f=((g=i.opacity)==null?void 0:g.value)??YD,d=JD(f,l,oo(h),s);d!==void 0&&(i.bubble.opacity=d)},this._hoverBubbleSize=(i,s,r)=>{const o=this.container,a=r!=null&&r.size?r.size*o.retina.pixelRatio:o.retina.bubbleModeSize;if(a===void 0)return;const l=oo(i.options.size.value)*o.retina.pixelRatio,h=i.size.value,f=JD(h,a,l,s);f!==void 0&&(i.bubble.radius=f)},this._process=(i,s,r,o)=>{const a=this.container,l=o.bubbleObj.optValue,h=a.actualOptions,f=h.interactivity.modes.bubble;if(!f||l===void 0)return;const d=f.duration,p=a.retina.bubbleModeDistance,g=o.particlesObj.optValue,v=o.bubbleObj.value,S=o.particlesObj.value??Ese,_=o.type;if(!(!p||p<VS||l===g))if(a.bubble||(a.bubble={}),a.bubble.durationEnd)v&&(_===to.size&&delete i.bubble.radius,_===to.opacity&&delete i.bubble.opacity);else if(s<=p){if((v??S)!==l){const A=S-r*(S-l)/d;_===to.size&&(i.bubble.radius=A),_===to.opacity&&(i.bubble.opacity=A)}}else _===to.size&&delete i.bubble.radius,_===to.opacity&&delete i.bubble.opacity},this._singleSelectorHover=(i,s,r)=>{const o=this.container,a=document.querySelectorAll(s),l=o.actualOptions.interactivity.modes.bubble;!l||!a.length||a.forEach(h=>{const f=h,d=o.retina.pixelRatio,p={x:(f.offsetLeft+f.offsetWidth*WS)*d,y:(f.offsetTop+f.offsetHeight*WS)*d},g=f.offsetWidth*WS*d,v=r.type===im.circle?new ts(p.x,p.y,g):new Rl(f.offsetLeft*d,f.offsetTop*d,f.offsetWidth*d,f.offsetHeight*d),S=o.particles.quadTree.query(v,_=>this.isEnabled(_));for(const _ of S){if(!v.contains(_.getPosition()))continue;_.bubble.inRange=!0;const y=l.divs,A=vz(y,f);(!_.bubble.div||_.bubble.div!==f)&&(this.clear(_,i,!0),_.bubble.div=f),this._hoverBubbleSize(_,jS,A),this._hoverBubbleOpacity(_,jS,A),this._hoverBubbleColor(_,jS,A)}})},this._engine=t,e.bubble||(e.bubble={}),this.handleClickMode=i=>{i===fc&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,i){e.bubble.inRange&&!i||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,t.size!==void 0&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}interact(e){const t=this.container.actualOptions,i=t.interactivity.events,s=i.onHover,r=i.onClick,o=s.enable,a=s.mode,l=r.enable,h=r.mode,f=i.onDiv;o&&dn(fc,a)?this._hoverBubble():l&&dn(fc,h)?this._clickBubble():Nw(fc,f,(d,p)=>this._singleSelectorHover(e,d,p))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,{onClick:o,onDiv:a,onHover:l}=r,h=Iw(fc,a);return h||l.enable&&s.position||o.enable&&s.clickPosition?dn(fc,l.mode)||dn(fc,o.mode)||h:!1}loadModeOptions(e,...t){e.bubble||(e.bubble=new Sse);for(const i of t)e.bubble.load(i==null?void 0:i.bubble)}reset(e){e.bubble.inRange=!1}}async function Tse(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalBubble",t=>Promise.resolve(new Cse(t,n)),e)}class Rse{constructor(){this.opacity=.5}load(e){Le(e)||e.opacity!==void 0&&(this.opacity=e.opacity)}}class Bse{constructor(){this.distance=80,this.links=new Rse,this.radius=60}load(e){Le(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links),e.radius!==void 0&&(this.radius=e.radius))}}const qD=0,QD=1,Pse=0;function Dse(n,e,t,i){const s=Math.floor(t.getRadius()/e.getRadius()),r=e.getFillColor(),o=t.getFillColor();if(!r||!o)return;const a=e.getPosition(),l=t.getPosition(),h=Uw(r,o,e.getRadius(),t.getRadius()),f=n.createLinearGradient(a.x,a.y,l.x,l.y);return f.addColorStop(qD,h0(r,i)),f.addColorStop(kr(s,qD,QD),Lf(h,i)),f.addColorStop(QD,h0(o,i)),f}function Lse(n,e,t,i,s){vp(n,i,s),n.lineWidth=e,n.strokeStyle=t,n.stroke()}function Ose(n,e,t,i){const s=n.actualOptions,r=s.interactivity.modes.connect;if(r)return Dse(e,t,i,r.links.opacity)}function Ise(n,e,t){n.canvas.draw(i=>{const s=Ose(n,i,e,t);if(!s)return;const r=e.getPosition(),o=t.getPosition();Lse(i,e.retina.linksWidth??Pse,s,r,o)})}const Nse="connect",ZD=0;class Use extends jr{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const i=e.interactivity.mouse.position,{connectModeDistance:s,connectModeRadius:r}=e.retina;if(!s||s<ZD||!r||r<ZD||!i)return;const o=Math.abs(r),a=e.particles.quadTree.queryCircle(i,o,l=>this.isEnabled(l));a.forEach((l,h)=>{const f=l.getPosition(),d=1;for(const p of a.slice(h+d)){const g=p.getPosition(),v=Math.abs(s),S=Math.abs(f.x-g.x),_=Math.abs(f.y-g.y);S<v&&_<v&&Ise(e,l,p)}})}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&i.position?dn(Nse,s.onHover.mode):!1}loadModeOptions(e,...t){e.connect||(e.connect=new Bse);for(const i of t)e.connect.load(i==null?void 0:i.connect)}reset(){}}async function Fse(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalConnect",t=>Promise.resolve(new Use(t)),e)}class zse{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){Le(e)||(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=ci.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class kse{constructor(){this.distance=100,this.links=new zse}load(e){Le(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links))}}const Hse=0;function Gse(n,e,t,i,s,r){vp(n,t,i),n.strokeStyle=Lf(s,r),n.lineWidth=e,n.stroke()}function Vse(n,e,t,i,s){n.canvas.draw(r=>{const o=e.getPosition();Gse(r,e.retina.linksWidth??Hse,o,s,t,i)})}const Wse="grab",jse=0,Xse=0;class Jse extends jr{constructor(e,t){super(e),this._engine=t}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}interact(){var a;const e=this.container,t=e.actualOptions,i=t.interactivity;if(!i.modes.grab||!i.events.onHover.enable||e.interactivity.status!==Rm)return;const s=e.interactivity.mouse.position;if(!s)return;const r=e.retina.grabModeDistance;if(!r||r<jse)return;const o=e.particles.quadTree.queryCircle(s,r,l=>this.isEnabled(l));for(const l of o){const h=l.getPosition(),f=Ns(h,s);if(f>r)continue;const d=i.modes.grab.links,p=d.opacity,g=p-f*p/r;if(g<=Xse)continue;const v=d.color??((a=l.options.links)==null?void 0:a.color);if(!e.particles.grabLineColor&&v){const _=i.modes.grab.links;e.particles.grabLineColor=bz(this._engine,v,_.blink,_.consent)}const S=hE(l,void 0,e.particles.grabLineColor);S&&Vse(e,l,S,g,s)}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&dn(Wse,s.onHover.mode)}loadModeOptions(e,...t){e.grab||(e.grab=new kse);for(const i of t)e.grab.load(i==null?void 0:i.grab)}reset(){}}async function Yse(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalGrab",t=>Promise.resolve(new Jse(t,n)),e)}const Kse="pause";class qse extends jr{constructor(e){super(e),this.handleClickMode=t=>{if(t!==Kse)return;const i=this.container;i.animationStatus?i.pause():i.play()}}clear(){}init(){}interact(){}isEnabled(){return!0}reset(){}}async function Qse(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalPause",t=>Promise.resolve(new qse(t)),e)}class Zse{constructor(){this.default=!0,this.groups=[],this.quantity=4}load(e){if(Le(e))return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(i=>i)),this.groups.length||(this.default=!0);const t=e.quantity;t!==void 0&&(this.quantity=ct(t)),this.particles=_i(e.particles,i=>zi({},i))}}const $se="push",ere=0;class tre extends jr{constructor(e){super(e),this.handleClickMode=t=>{if(t!==$se)return;const i=this.container,s=i.actualOptions,r=s.interactivity.modes.push;if(!r)return;const o=je(r.quantity);if(o<=ere)return;const a=Bm([void 0,...r.groups]),l=a!==void 0?i.actualOptions.particles.groups[a]:void 0,h=yo(r.particles),f=zi(l,h);i.particles.push(o,i.interactivity.mouse,f,a)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.push||(e.push=new Zse);for(const i of t)e.push.load(i==null?void 0:i.push)}reset(){}}async function nre(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalPush",t=>Promise.resolve(new tre(t)),e)}class ire{constructor(){this.quantity=2}load(e){if(Le(e))return;const t=e.quantity;t!==void 0&&(this.quantity=ct(t))}}const sre="remove";class rre extends jr{constructor(e){super(e),this.handleClickMode=t=>{const i=this.container,s=i.actualOptions;if(!s.interactivity.modes.remove||t!==sre)return;const r=je(s.interactivity.modes.remove.quantity);i.particles.removeQuantity(r)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.remove||(e.remove=new ire);for(const i of t)e.remove.load(i==null?void 0:i.remove)}reset(){}}async function ore(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalRemove",t=>Promise.resolve(new rre(t)),e)}class Fz{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing=Yc.easeOutQuad}load(e){Le(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class are extends Fz{constructor(){super(),this.selectors=[]}load(e){super.load(e),!Le(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class lre extends Fz{load(e){super.load(e),!Le(e)&&(this.divs=_i(e.divs,t=>{const i=new are;return i.load(t),i}))}}const dc="repulse",cre=0,ure=6,hre=3,fre=2,dre=0,pre=0,mre=1,XS=.5;class gre extends jr{constructor(e,t){super(t),this._clickRepulse=()=>{const i=this.container,s=i.actualOptions.interactivity.modes.repulse;if(!s)return;const r=i.repulse??{particles:[]};if(r.finish||(r.count||(r.count=0),r.count++,r.count===i.particles.count&&(r.finish=!0)),r.clicking){const o=i.retina.repulseModeDistance;if(!o||o<cre)return;const a=Math.pow(o/ure,hre),l=i.interactivity.mouse.clickPosition;if(l===void 0)return;const h=new ts(l.x,l.y,a),f=i.particles.quadTree.query(h,d=>this.isEnabled(d));for(const d of f){const{dx:p,dy:g,distance:v}=Ui(l,d.position),S=v**fre,_=s.speed,y=-a*_/S;if(S<=a){r.particles.push(d);const A=gn.create(p,g);A.length=y,d.velocity.setTo(A)}}}else if(r.clicking===!1){for(const o of r.particles)o.velocity.setTo(o.initialVelocity);r.particles=[]}},this._hoverRepulse=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.repulseModeDistance;!r||r<dre||!s||this._processRepulse(s,r,new ts(s.x,s.y,r))},this._processRepulse=(i,s,r,o)=>{const a=this.container,l=a.particles.quadTree.query(r,_=>this.isEnabled(_)),h=a.actualOptions.interactivity.modes.repulse;if(!h)return;const{easing:f,speed:d,factor:p,maxSpeed:g}=h,v=this._engine.getEasing(f),S=((o==null?void 0:o.speed)??d)*p;for(const _ of l){const{dx:y,dy:A,distance:M}=Ui(_.position,i),E=kr(v(mre-M/s)*S,pre,g),R=gn.create(M?y/M*E:S,M?A/M*E:S);_.position.addTo(R)}},this._singleSelectorRepulse=(i,s)=>{const r=this.container,o=r.actualOptions.interactivity.modes.repulse;if(!o)return;const a=document.querySelectorAll(i);a.length&&a.forEach(l=>{const h=l,f=r.retina.pixelRatio,d={x:(h.offsetLeft+h.offsetWidth*XS)*f,y:(h.offsetTop+h.offsetHeight*XS)*f},p=h.offsetWidth*XS*f,g=s.type===im.circle?new ts(d.x,d.y,p):new Rl(h.offsetLeft*f,h.offsetTop*f,h.offsetWidth*f,h.offsetHeight*f),v=o.divs,S=vz(v,h);this._processRepulse(d,p,g,S)})},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.repulse;if(!r||i!==dc)return;t.repulse||(t.repulse={particles:[]});const o=t.repulse;o.clicking=!0,o.count=0;for(const a of t.repulse.particles)this.isEnabled(a)&&a.velocity.setTo(a.initialVelocity);o.particles=[],o.finish=!1,setTimeout(()=>{t.destroyed||(o.clicking=!1)},r.duration*Di)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===Rm,s=t.interactivity.events,r=s.onHover,o=r.enable,a=r.mode,l=s.onClick,h=l.enable,f=l.mode,d=s.onDiv;i&&o&&dn(dc,a)?this._hoverRepulse():h&&dn(dc,f)?this._clickRepulse():Nw(dc,d,(p,g)=>this._singleSelectorRepulse(p,g))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,o=r.onDiv,a=r.onHover,l=r.onClick,h=Iw(dc,o);if(!(h||a.enable&&s.position||l.enable&&s.clickPosition))return!1;const f=a.mode,d=l.mode;return dn(dc,f)||dn(dc,d)||h}loadModeOptions(e,...t){e.repulse||(e.repulse=new lre);for(const i of t)e.repulse.load(i==null?void 0:i.repulse)}reset(){}}async function yre(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalRepulse",t=>Promise.resolve(new gre(n,t)),e)}class vre{constructor(){this.factor=3,this.radius=200}load(e){Le(e)||(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}const xre="slow",_re=0;class Are extends jr{constructor(e){super(e)}clear(e,t,i){e.slow.inRange&&!i||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}interact(){}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&dn(xre,s.onHover.mode)}loadModeOptions(e,...t){e.slow||(e.slow=new vre);for(const i of t)e.slow.load(i==null?void 0:i.slow)}reset(e){e.slow.inRange=!1;const t=this.container,i=t.actualOptions,s=t.interactivity.mouse.position,r=t.retina.slowModeRadius,o=i.interactivity.modes.slow;if(!o||!r||r<_re||!s)return;const a=e.getPosition(),l=Ns(s,a),h=l/r,f=o.factor,{slow:d}=e;l>r||(d.inRange=!0,d.factor=h/f)}}async function Sre(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalSlow",t=>Promise.resolve(new Are(t)),e)}const Mre=0,bre=1,Ere=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function wre(n,e,t){const{svgData:i}=n;if(!i)return"";const s=h0(e,t);if(i.includes("fill"))return i.replace(Ere,()=>s);const r=i.indexOf(">");return`${i.substring(Mre,r)} fill="${s}"${i.substring(r)}`}async function Mx(n){return new Promise(e=>{n.loading=!0;const t=new Image;n.element=t,t.addEventListener("load",()=>{n.loading=!1,e()}),t.addEventListener("error",()=>{n.element=void 0,n.error=!0,n.loading=!1,gz().error(`${Pf} loading image: ${n.source}`),e()}),t.src=n.source})}async function Cre(n){if(n.type!=="svg"){await Mx(n);return}n.loading=!0;const e=await fetch(n.source);e.ok?n.svgData=await e.text():(gz().error(`${Pf} Image not found`),n.error=!0),n.loading=!1}function Tre(n,e,t,i){var o;const s=wre(n,t,((o=i.opacity)==null?void 0:o.value)??bre),r={color:t,gif:e.gif,data:{...n,svgData:s},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor,source:e.src};return new Promise(a=>{const l=new Blob([s],{type:"image/svg+xml"}),h=URL||window.URL||window.webkitURL||window,f=h.createObjectURL(l),d=new Image;d.addEventListener("load",()=>{r.loaded=!0,r.element=d,a(r),h.revokeObjectURL(f)});const p=async()=>{h.revokeObjectURL(f);const g={...n,error:!1,loading:!0};await Mx(g),r.loaded=!0,r.element=g.element,a(r)};d.addEventListener("error",()=>void p()),d.src=f})}const JS=[0,4,2,1],$D=[8,8,4,2];class Rre{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce((i,s)=>i+String.fromCharCode(s),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;const i=0,s=0;do{t=this.data[this.pos++];for(let r=t;--r>=i;e+=String.fromCharCode(this.data[this.pos++]));}while(t!==s);return e}readSubBlocksBin(){let e=this.data[this.pos],t=0;const i=0,s=1;for(let o=0;e!==i;o+=e+s,e=this.data[this.pos+o])t+=e;const r=new Uint8Array(t);e=this.data[this.pos++];for(let o=0;e!==i;e=this.data[this.pos++])for(let a=e;--a>=i;r[o++]=this.data[this.pos++]);return r}skipSubBlocks(){for(const e=1,t=0;this.data[this.pos]!==t;this.pos+=this.data[this.pos]+e);this.pos++}}var Cr;(function(n){n[n.Replace=0]="Replace",n[n.Combine=1]="Combine",n[n.RestoreBackground=2]="RestoreBackground",n[n.RestorePrevious=3]="RestorePrevious",n[n.UndefinedA=4]="UndefinedA",n[n.UndefinedB=5]="UndefinedB",n[n.UndefinedC=6]="UndefinedC",n[n.UndefinedD=7]="UndefinedD"})(Cr||(Cr={}));var Jo;(function(n){n[n.Extension=33]="Extension",n[n.ApplicationExtension=255]="ApplicationExtension",n[n.GraphicsControlExtension=249]="GraphicsControlExtension",n[n.PlainTextExtension=1]="PlainTextExtension",n[n.CommentExtension=254]="CommentExtension",n[n.Image=44]="Image",n[n.EndOfFile=59]="EndOfFile"})(Jo||(Jo={}));const ls={x:0,y:0},Bre=0,eL=.5,Pre=0,tL=0,mE=0;function zz(n,e){const t=[];for(let i=0;i<e;i++)t.push({r:n.data[n.pos],g:n.data[n.pos+1],b:n.data[n.pos+2]}),n.pos+=3;return t}function Dre(n,e,t,i){switch(n.nextByte()){case Jo.GraphicsControlExtension:{const s=e.frames[t(!1)];n.pos++;const r=n.nextByte();s.GCreserved=(r&224)>>>5,s.disposalMethod=(r&28)>>>2,s.userInputDelayFlag=(r&2)===2;const o=(r&1)===1;s.delayTime=n.nextTwoBytes()*10;const a=n.nextByte();o&&i(a),n.pos++;break}case Jo.ApplicationExtension:{n.pos++;const s={identifier:n.getString(8),authenticationCode:n.getString(3),data:n.readSubBlocksBin()};e.applicationExtensions.push(s);break}case Jo.CommentExtension:{e.comments.push([t(!1),n.readSubBlocks()]);break}case Jo.PlainTextExtension:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");n.pos++,e.frames[t(!1)].plainTextData={left:n.nextTwoBytes(),top:n.nextTwoBytes(),width:n.nextTwoBytes(),height:n.nextTwoBytes(),charSize:{width:n.nextTwoBytes(),height:n.nextTwoBytes()},foregroundColor:n.nextByte(),backgroundColor:n.nextByte(),text:n.readSubBlocks()};break}default:n.skipSubBlocks();break}}async function Lre(n,e,t,i,s,r){const o=e.frames[i(!0)];o.left=n.nextTwoBytes(),o.top=n.nextTwoBytes(),o.width=n.nextTwoBytes(),o.height=n.nextTwoBytes();const a=n.nextByte(),l=(a&128)===128,h=(a&64)===64;o.sortFlag=(a&32)===32,o.reserved=(a&24)>>>3;const f=1<<(a&7)+1;l&&(o.localColorTable=zz(n,f));const d=y=>{const{r:A,g:M,b:E}=(l?o.localColorTable:e.globalColorTable)[y];return y!==s(null)?{r:A,g:M,b:E,a:255}:{r:A,g:M,b:E,a:t?~~((A+M+E)/3):0}},p=(()=>{try{return new ImageData(o.width,o.height,{colorSpace:"srgb"})}catch(y){if(y instanceof DOMException&&y.name==="IndexSizeError")return null;throw y}})();if(p==null)throw new EvalError("GIF frame size is to large");const g=n.nextByte(),v=n.readSubBlocksBin(),S=1<<g,_=(y,A)=>{const M=y>>>3,E=y&7;return(v[M]+(v[M+1]<<8)+(v[M+2]<<16)&(1<<A)-1<<E)>>>E};if(h){for(let y=0,A=g+1,M=0,E=[[0]],R=0;R<4;R++)if(JS[R]<o.height){let T=0,B=0,L=!1;for(;!L;){const F=y;if(y=_(M,A),M+=A+1,y===S){A=g+1,E.length=S+2;for(let C=0;C<E.length;C++)E[C]=C<S?[C]:[]}else{y>=E.length?E.push(E[F].concat(E[F][0])):F!==S&&E.push(E[F].concat(E[y][0]));for(const C of E[y]){const{r:D,g:te,b:$,a:k}=d(C);p.data.set([D,te,$,k],JS[R]*o.width+$D[R]*B+T%(o.width*4)),T+=4}E.length===1<<A&&A<12&&A++}T===o.width*4*(B+1)&&(B++,JS[R]+$D[R]*B>=o.height&&(L=!0))}}o.image=p,o.bitmap=await createImageBitmap(p)}else{let y=0,A=g+1,M=0,E=-4,R=!1;const T=[[0]];for(;!R;){const B=y;if(y=_(M,A),M+=A,y===S){A=g+1,T.length=S+2;for(let L=0;L<T.length;L++)T[L]=L<S?[L]:[]}else{if(y===S+1){R=!0;break}y>=T.length?T.push(T[B].concat(T[B][0])):B!==S&&T.push(T[B].concat(T[y][0]));for(const L of T[y]){const{r:F,g:C,b:D,a:te}=d(L);p.data.set([F,C,D,te],E+=4)}T.length>=1<<A&&A<12&&A++}}o.image=p,o.bitmap=await createImageBitmap(p)}}async function Ore(n,e,t,i,s,r){switch(n.nextByte()){case Jo.EndOfFile:return!0;case Jo.Image:await Lre(n,e,t,i,s);break;case Jo.Extension:Dre(n,e,i,s);break;default:throw new EvalError("undefined block found")}return!1}function Ire(n){for(const e of n.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function Nre(n,e,t){t||(t=!1);const i=await fetch(n);if(!i.ok&&i.status===404)throw new EvalError("file not found");const s=await i.arrayBuffer(),r={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},o=new Rre(new Uint8ClampedArray(s));if(o.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");r.width=o.nextTwoBytes(),r.height=o.nextTwoBytes();const a=o.nextByte(),l=(a&128)===128;r.colorRes=(a&112)>>>4,r.sortFlag=(a&8)===8;const h=1<<(a&7)+1,f=o.nextByte();r.pixelAspectRatio=o.nextByte(),r.pixelAspectRatio!==0&&(r.pixelAspectRatio=(r.pixelAspectRatio+15)/64),l&&(r.globalColorTable=zz(o,h));const d=(()=>{try{return new ImageData(r.width,r.height,{colorSpace:"srgb"})}catch(E){if(E instanceof DOMException&&E.name==="IndexSizeError")return null;throw E}})();if(d==null)throw new Error("GIF frame size is to large");const{r:p,g,b:v}=r.globalColorTable[f];d.data.set(l?[p,g,v,255]:[0,0,0,0]);for(let E=4;E<d.data.length;E*=2)d.data.copyWithin(E,0,E);r.backgroundImage=d;let S=-1,_=!0,y=-1;const A=E=>(E&&(_=!0),S),M=E=>(E!=null&&(y=E),y);try{do _&&(r.frames.push({left:0,top:0,width:0,height:0,disposalMethod:Cr.Replace,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),S++,y=-1,_=!1);while(!await Ore(o,r,t,A,M,e));r.frames.length--;for(const E of r.frames){if(E.userInputDelayFlag&&E.delayTime===0){r.totalTime=1/0;break}r.totalTime+=E.delayTime}return r}catch(E){throw E instanceof EvalError?new Error(`error while parsing frame ${S} "${E.message}"`):E}}function Ure(n){const{context:e,radius:t,particle:i,delta:s}=n,r=i.image;if(!(r!=null&&r.gifData)||!r.gif)return;const o=new OffscreenCanvas(r.gifData.width,r.gifData.height),a=o.getContext("2d");if(!a)throw new Error("could not create offscreen canvas context");a.imageSmoothingQuality="low",a.imageSmoothingEnabled=!1,a.clearRect(ls.x,ls.y,o.width,o.height),i.gifLoopCount===void 0&&(i.gifLoopCount=r.gifLoopCount??mE);let l=i.gifFrame??Bre;const h={x:-r.gifData.width*eL,y:-r.gifData.height*eL},f=r.gifData.frames[l];if(i.gifTime===void 0&&(i.gifTime=Pre),!!f.bitmap){switch(e.scale(t/r.gifData.width,t/r.gifData.height),f.disposalMethod){case Cr.UndefinedA:case Cr.UndefinedB:case Cr.UndefinedC:case Cr.UndefinedD:case Cr.Replace:a.drawImage(f.bitmap,f.left,f.top),e.drawImage(o,h.x,h.y),a.clearRect(ls.x,ls.y,o.width,o.height);break;case Cr.Combine:a.drawImage(f.bitmap,f.left,f.top),e.drawImage(o,h.x,h.y);break;case Cr.RestoreBackground:a.drawImage(f.bitmap,f.left,f.top),e.drawImage(o,h.x,h.y),a.clearRect(ls.x,ls.y,o.width,o.height),r.gifData.globalColorTable.length?a.putImageData(r.gifData.backgroundImage,h.x,h.y):a.putImageData(r.gifData.frames[tL].image,h.x+f.left,h.y+f.top);break;case Cr.RestorePrevious:{const d=a.getImageData(ls.x,ls.y,o.width,o.height);a.drawImage(f.bitmap,f.left,f.top),e.drawImage(o,h.x,h.y),a.clearRect(ls.x,ls.y,o.width,o.height),a.putImageData(d,ls.x,ls.y)}break}if(i.gifTime+=s.value,i.gifTime>f.delayTime){if(i.gifTime-=f.delayTime,++l>=r.gifData.frames.length){if(--i.gifLoopCount<=mE)return;l=tL,a.clearRect(ls.x,ls.y,o.width,o.height)}i.gifFrame=l}e.scale(r.gifData.width/t,r.gifData.height/t)}}async function Fre(n){if(n.type!=="gif"){await Mx(n);return}n.loading=!0;try{n.gifData=await Nre(n.source),n.gifLoopCount=Ire(n.gifData)??mE,n.gifLoopCount||(n.gifLoopCount=1/0)}catch{n.error=!0}n.loading=!1}const zre=2,kre=1,Hre=12,Gre=1;class Vre{constructor(e){this.validTypes=["image","images"],this.loadImageShape=async t=>{if(!this._engine.loadImage)throw new Error(`${Pf} image shape not initialized`);await this._engine.loadImage({gif:t.gif,name:t.name,replaceColor:t.replaceColor??!1,src:t.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e){const{context:t,radius:i,particle:s,opacity:r}=e,o=s.image,a=o==null?void 0:o.element;if(o){if(t.globalAlpha=r,o.gif&&o.gifData)Ure(e);else if(a){const l=o.ratio,h={x:-i,y:-i},f=i*zre;t.drawImage(a,h.x,h.y,f,f/l)}t.globalAlpha=kre}}getSidesCount(){return Hre}async init(e){const t=e.actualOptions;if(!(!t.preload||!this._engine.loadImage))for(const i of t.preload)await this._engine.loadImage(i)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;if(!t)return;this._engine.images.find(s=>s.name===t.name||s.source===t.src)||this.loadImageShape(t).then(()=>{this.loadShape(e)})}particleInit(e,t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,s=t.shapeData;if(!s)return;const r=t.getFillColor(),o=i.find(l=>l.name===s.name||l.source===s.src);if(!o)return;const a=s.replaceColor??o.replaceColor;if(o.loading){setTimeout(()=>{this.particleInit(e,t)});return}(async()=>{let l;o.svgData&&r?l=await Tre(o,s,r,t):l={color:r,data:o,element:o.element,gif:o.gif,gifData:o.gifData,gifLoopCount:o.gifLoopCount,loaded:!0,ratio:s.width&&s.height?s.width/s.height:o.ratio??Gre,replaceColor:a,source:s.src},l.ratio||(l.ratio=1);const h=s.fill??t.shapeFill,f=s.close??t.shapeClose,d={image:l,fill:h,close:f};t.image=d.image,t.shapeFill=d.fill,t.shapeClose=d.close})()}}class Wre{constructor(){this.src="",this.gif=!1}load(e){Le(e)||(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class jre{constructor(e){this.id="imagePreloader",this._engine=e}async getPlugin(){return await Promise.resolve(),{}}loadOptions(e,t){if(!(t!=null&&t.preload))return;e.preload||(e.preload=[]);const i=e.preload;for(const s of t.preload){const r=i.find(o=>o.name===s.name||o.src===s.src);if(r)r.load(s);else{const o=new Wre;o.load(s),i.push(o)}}}needsPlugin(){return!0}}const Xre=3;function Jre(n){n.loadImage||(n.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${Pf} no image source provided`);if(n.images||(n.images=[]),!n.images.find(t=>t.name===e.name||t.source===e.src))try{const t={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-Xre),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};n.images.push(t);let i;e.gif?i=Fre:i=e.replaceColor?Cre:Mx,await i(t)}catch{throw new Error(`${Pf} ${e.name??e.src} not found`)}})}async function Yre(n,e=!0){n.checkVersion("3.9.1"),Jre(n);const t=new jre(n);await n.addPlugin(t,e),await n.addShape(new Vre(n),e)}class Kre extends Wr{constructor(){super(),this.sync=!1}load(e){Le(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class qre extends Wr{constructor(){super(),this.sync=!1}load(e){Le(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Qre{constructor(){this.count=0,this.delay=new Kre,this.duration=new qre}load(e){Le(e)||(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const Sh=0,Zre=-1,nL=0,iL=0;function $re(n,e,t){if(!n.life)return;const i=n.life;let s=!1;if(n.spawning)if(i.delayTime+=e.value,i.delayTime>=n.life.delay)s=!0,n.spawning=!1,i.delayTime=Sh,i.time=Sh;else return;if(i.duration===Zre||n.spawning||(s?i.time=Sh:i.time+=e.value,i.time<i.duration))return;if(i.time=Sh,n.life.count>nL&&n.life.count--,n.life.count===nL){n.destroy();return}const r=ct(iL,t.width),o=ct(iL,t.width);n.position.x=Li(r),n.position.y=Li(o),n.spawning=!0,i.delayTime=Sh,i.time=Sh,n.reset();const a=n.options.life;a&&(i.delay=je(a.delay.value)*Di,i.duration=je(a.duration.value)*Di)}const pc=0,sL=1,rL=-1;class eoe{constructor(e){this.container=e}init(e){const t=this.container,i=e.options,s=i.life;s&&(e.life={delay:t.retina.reduceFactor?je(s.delay.value)*(s.delay.sync?sL:Tt())/t.retina.reduceFactor*Di:pc,delayTime:pc,duration:t.retina.reduceFactor?je(s.duration.value)*(s.duration.sync?sL:Tt())/t.retina.reduceFactor*Di:pc,time:pc,count:s.count},e.life.duration<=pc&&(e.life.duration=rL),e.life.count<=pc&&(e.life.count=rL),e.life&&(e.spawning=e.life.delay>pc))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new Qre);for(const i of t)e.life.load(i==null?void 0:i.life)}update(e,t){!this.isEnabled(e)||!e.life||$re(e,t,this.container.canvas.size)}}async function toe(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("life",async t=>Promise.resolve(new eoe(t)),e)}function noe(n){const{context:e,particle:t,radius:i}=n,s=t.shapeData,r=0;e.moveTo(-i,r),e.lineTo(i,r),e.lineCap=(s==null?void 0:s.cap)??"butt"}const ioe=1;class soe{constructor(){this.validTypes=["line"]}draw(e){noe(e)}getSidesCount(){return ioe}}async function roe(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new soe,e)}const oL=.5;class ooe{init(){}isEnabled(e){return!ED()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,i=t.actualOptions,s=i.interactivity.events.onHover.parallax;if(ED()||!s.enable)return;const r=s.force,o=t.interactivity.mouse.position;if(!o)return;const a=t.canvas.size,l={x:a.width*oL,y:a.height*oL},h=s.smooth,f=e.getRadius()/r,d={x:(o.x-l.x)*f,y:(o.y-l.y)*f},{offset:p}=e;p.x+=(d.x-p.x)/h,p.y+=(d.y-p.y)/h}}async function aoe(n,e=!0){n.checkVersion("3.9.1"),await n.addMover("parallax",()=>Promise.resolve(new ooe),e)}const aL=1e3,loe=1;class coe extends kw{constructor(e){super(e)}clear(){}init(){}interact(e){const t=this.container;e.attractDistance===void 0&&(e.attractDistance=je(e.options.move.attract.distance)*t.retina.pixelRatio);const i=e.attractDistance,s=e.getPosition(),r=t.particles.quadTree.queryCircle(s,i);for(const o of r){if(e===o||!o.options.move.attract.enable||o.destroyed||o.spawning)continue;const a=o.getPosition(),{dx:l,dy:h}=Ui(s,a),f=e.options.move.attract.rotate,d=l/(f.x*aL),p=h/(f.y*aL),g=o.size.value/e.size.value,v=loe/g;e.velocity.x-=d*g,e.velocity.y-=p*g,o.velocity.x+=d*v,o.velocity.y+=p*v}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function uoe(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("particlesAttract",t=>Promise.resolve(new coe(t)),e)}const hoe=.5,foe=10,doe=0;function lL(n,e,t,i,s,r){const o=kr(n.options.collisions.absorb.speed*s.factor/foe,doe,i);n.size.value+=o*hoe,t.size.value-=o,i<=r&&(t.size.value=0,t.destroy())}function poe(n,e,t,i){const s=n.getRadius(),r=e.getRadius();s===void 0&&r!==void 0?n.destroy():s!==void 0&&r===void 0?e.destroy():s!==void 0&&r!==void 0&&(s>=r?lL(n,s,e,r,t,i):lL(e,r,n,s,t,i))}const cL=n=>{n.collisionMaxSpeed===void 0&&(n.collisionMaxSpeed=je(n.options.collisions.maxSpeed)),n.velocity.length>n.collisionMaxSpeed&&(n.velocity.length=n.collisionMaxSpeed)};function kz(n,e){xz(uE(n),uE(e)),cL(n),cL(e)}function moe(n,e){!n.unbreakable&&!e.unbreakable&&kz(n,e),n.getRadius()===void 0&&e.getRadius()!==void 0?n.destroy():n.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():n.getRadius()!==void 0&&e.getRadius()!==void 0&&(n.getRadius()>=e.getRadius()?e:n).destroy()}function goe(n,e,t,i){switch(n.options.collisions.mode){case uf.absorb:{poe(n,e,t,i);break}case uf.bounce:{kz(n,e);break}case uf.destroy:{moe(n,e);break}}}const yoe=2;class voe extends kw{constructor(e){super(e)}clear(){}init(){}interact(e,t){if(e.destroyed||e.spawning)return;const i=this.container,s=e.getPosition(),r=e.getRadius(),o=i.particles.quadTree.queryCircle(s,r*yoe);for(const a of o){if(e===a||!a.options.collisions.enable||e.options.collisions.mode!==a.options.collisions.mode||a.destroyed||a.spawning)continue;const l=a.getPosition(),h=a.getRadius();if(Math.abs(Math.round(s.z)-Math.round(l.z))>r+h)continue;const f=Ns(s,l),d=r+h;f>d||goe(e,a,t,i.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function xoe(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("particlesCollisions",t=>Promise.resolve(new voe(t)),e)}const YS=2;class _oe extends ts{constructor(e,t,i,s){super(e,t,i),this.canvasSize=s,this.canvasSize={...s}}contains(e){const{width:t,height:i}=this.canvasSize,{x:s,y:r}=e;return super.contains(e)||super.contains({x:s-t,y:r})||super.contains({x:s-t,y:r-i})||super.contains({x:s,y:r-i})}intersects(e){if(super.intersects(e))return!0;const t=e,i=e,s={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(i.radius!==void 0){const r=new ts(s.x,s.y,i.radius*YS);return super.intersects(r)}else if(t.size!==void 0){const r=new Rl(s.x,s.y,t.size.width*YS,t.size.height*YS);return super.intersects(r)}return!1}}class Aoe{constructor(){this.blur=5,this.color=new ci,this.color.value="#000",this.enable=!1}load(e){Le(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=ci.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class Soe{constructor(){this.enable=!1,this.frequency=1}load(e){Le(e)||(e.color!==void 0&&(this.color=ci.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Moe{constructor(){this.blink=!1,this.color=new ci,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new Aoe,this.triangles=new Soe,this.width=1,this.warp=!1}load(e){Le(e)||(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=ci.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}const uL=2,boe=1,Hy={x:0,y:0},Eoe=0;function woe(n,e,t,i,s){const{dx:r,dy:o,distance:a}=Ui(n,e);if(!s||a<=t)return a;const l={x:Math.abs(r),y:Math.abs(o)},h={x:Math.min(l.x,i.width-l.x),y:Math.min(l.y,i.height-l.y)};return Math.sqrt(h.x**uL+h.y**uL)}class Coe extends kw{constructor(e,t){super(e),this._setColor=i=>{if(!i.options.links)return;const s=this._linkContainer,r=i.options.links;let o=r.id===void 0?s.particles.linksColor:s.particles.linksColors.get(r.id);if(o)return;const a=r.color;o=bz(this._engine,a,r.blink,r.consent),r.id===void 0?s.particles.linksColor=o:s.particles.linksColors.set(r.id,o)},this._linkContainer=e,this._engine=t}clear(){}init(){this._linkContainer.particles.linksColor=void 0,this._linkContainer.particles.linksColors=new Map}interact(e){if(!e.options.links)return;e.links=[];const t=e.getPosition(),i=this.container,s=i.canvas.size;if(t.x<Hy.x||t.y<Hy.y||t.x>s.width||t.y>s.height)return;const r=e.options.links,o=r.opacity,a=e.retina.linksDistance??Eoe,l=r.warp;let h;l?h=new _oe(t.x,t.y,a,s):h=new ts(t.x,t.y,a);const f=i.particles.quadTree.query(h);for(const d of f){const p=d.options.links;if(e===d||!(p!=null&&p.enable)||r.id!==p.id||d.spawning||d.destroyed||!d.links||e.links.some(_=>_.destination===d)||d.links.some(_=>_.destination===e))continue;const g=d.getPosition();if(g.x<Hy.x||g.y<Hy.y||g.x>s.width||g.y>s.height)continue;const v=woe(t,g,a,s,l&&p.warp);if(v>a)continue;const S=(boe-v/a)*o;this._setColor(e),e.links.push({destination:d,opacity:S})}}isEnabled(e){var t;return!!((t=e.options.links)!=null&&t.enable)}loadParticlesOptions(e,...t){e.links||(e.links=new Moe);for(const i of t)e.links.load(i==null?void 0:i.links)}reset(){}}async function Toe(n,e=!0){await n.addInteractor("particlesLinks",async t=>Promise.resolve(new Coe(t,n)),e)}function Roe(n,e,t,i){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.lineTo(i.x,i.y),n.closePath()}function Boe(n){let e=!1;const{begin:t,end:i,engine:s,maxDistance:r,context:o,canvasSize:a,width:l,backgroundMask:h,colorLine:f,opacity:d,links:p}=n;if(Ns(t,i)<=r)vp(o,t,i),e=!0;else if(p.warp){let v,S;const _={x:i.x-a.width,y:i.y},y=Ui(t,_);if(y.distance<=r){const A=t.y-y.dy/y.dx*t.x;v={x:0,y:A},S={x:a.width,y:A}}else{const A={x:i.x,y:i.y-a.height},M=Ui(t,A);if(M.distance<=r){const R=-(t.y-M.dy/M.dx*t.x)/(M.dy/M.dx);v={x:R,y:0},S={x:R,y:a.height}}else{const E={x:i.x-a.width,y:i.y-a.height},R=Ui(t,E);if(R.distance<=r){const T=t.y-R.dy/R.dx*t.x;v={x:-T/(R.dy/R.dx),y:T},S={x:v.x+a.width,y:v.y+a.height}}}}v&&S&&(vp(o,t,v),vp(o,i,S),e=!0)}if(!e)return;o.lineWidth=l,h.enable&&(o.globalCompositeOperation=h.composite),o.strokeStyle=Lf(f,d);const{shadow:g}=p;if(g.enable){const v=_l(s,g.color);v&&(o.shadowBlur=g.blur,o.shadowColor=Lf(v))}o.stroke()}function Poe(n){const{context:e,pos1:t,pos2:i,pos3:s,backgroundMask:r,colorTriangle:o,opacityTriangle:a}=n;Roe(e,t,i,s),r.enable&&(e.globalCompositeOperation=r.composite),e.fillStyle=Lf(o,a),e.fill()}function Doe(n){return n.sort((e,t)=>e-t),n.join("_")}function hL(n,e){const t=Doe(n.map(s=>s.id));let i=e.get(t);return i===void 0&&(i=Tt(),e.set(t,i)),i}const fL=0,KS=0,dL=0,Loe=.5,Ooe=1;class Ioe{constructor(e,t){this._drawLinkLine=(i,s)=>{const r=i.options.links;if(!(r!=null&&r.enable))return;const o=this._container,a=o.actualOptions,l=s.destination,h=i.getPosition(),f=l.getPosition();let d=s.opacity;o.canvas.draw(p=>{var A;let g;const v=(A=i.options.twinkle)==null?void 0:A.lines;if(v!=null&&v.enable){const M=v.frequency,E=_l(this._engine,v.color);Tt()<M&&E&&(g=E,d=je(v.opacity))}if(!g){const M=r.id!==void 0?o.particles.linksColors.get(r.id):o.particles.linksColor;g=hE(i,l,M)}if(!g)return;const S=i.retina.linksWidth??KS,_=i.retina.linksDistance??dL,{backgroundMask:y}=a;Boe({context:p,width:S,begin:h,end:f,engine:this._engine,maxDistance:_,canvasSize:o.canvas.size,links:r,backgroundMask:y,colorLine:g,opacity:d})})},this._drawLinkTriangle=(i,s,r)=>{const o=i.options.links;if(!(o!=null&&o.enable))return;const a=o.triangles;if(!a.enable)return;const l=this._container,h=l.actualOptions,f=s.destination,d=r.destination,p=a.opacity??(s.opacity+r.opacity)*Loe;p<=fL||l.canvas.draw(g=>{const v=i.getPosition(),S=f.getPosition(),_=d.getPosition(),y=i.retina.linksDistance??dL;if(Ns(v,S)>y||Ns(_,S)>y||Ns(_,v)>y)return;let A=_l(this._engine,a.color);if(!A){const M=o.id!==void 0?l.particles.linksColors.get(o.id):l.particles.linksColor;A=hE(i,f,M)}A&&Poe({context:g,pos1:v,pos2:S,pos3:_,backgroundMask:h.backgroundMask,colorTriangle:A,opacityTriangle:p})})},this._drawTriangles=(i,s,r,o)=>{var h,f,d;const a=r.destination;if(!((h=i.links)!=null&&h.triangles.enable&&((f=a.options.links)!=null&&f.triangles.enable)))return;const l=(d=a.links)==null?void 0:d.filter(p=>{const g=this._getLinkFrequency(a,p.destination);return a.options.links&&g<=a.options.links.frequency&&o.findIndex(S=>S.destination===p.destination)>=0});if(l!=null&&l.length)for(const p of l){const g=p.destination;this._getTriangleFrequency(s,a,g)>i.links.triangles.frequency||this._drawLinkTriangle(s,r,p)}},this._getLinkFrequency=(i,s)=>hL([i,s],this._freqs.links),this._getTriangleFrequency=(i,s,r)=>hL([i,s,r],this._freqs.triangles),this._container=e,this._engine=t,this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:i,options:s}=t;if(!(i!=null&&i.length))return;const r=i.filter(o=>s.links&&(s.links.frequency>=Ooe||this._getLinkFrequency(t,o.destination)<=s.links.frequency));for(const o of r)this._drawTriangles(s,t,o,r),o.opacity>fL&&(t.retina.linksWidth??KS)>KS&&this._drawLinkLine(t,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this._container.retina.pixelRatio,{retina:i}=e,{distance:s,width:r}=e.options.links;i.linksDistance=s*t,i.linksWidth=r*t}particleDestroyed(e){e.links=[]}}class Noe{constructor(e){this.id="links",this._engine=e}getPlugin(e){return Promise.resolve(new Ioe(e,this._engine))}loadOptions(){}needsPlugin(){return!0}}async function Uoe(n,e=!0){const t=new Noe(n);await n.addPlugin(t,e)}async function Foe(n,e=!0){n.checkVersion("3.9.1"),await Toe(n,e),await Uoe(n,e)}const zoe=180,Gy={x:0,y:0},koe=2;function Hoe(n,e,t){const{context:i}=n,s=t.count.numerator*t.count.denominator,r=t.count.numerator/t.count.denominator,o=zoe*(r-koe)/r,a=Math.PI-lf(o);if(i){i.beginPath(),i.translate(e.x,e.y),i.moveTo(Gy.x,Gy.y);for(let l=0;l<s;l++)i.lineTo(t.length,Gy.y),i.translate(t.length,Gy.y),i.rotate(a)}}const Goe=5;class Hz{draw(e){const{particle:t,radius:i}=e,s=this.getCenter(t,i),r=this.getSidesData(t,i);Hoe(e,s,r)}getSidesCount(e){const t=e.shapeData;return Math.round(je((t==null?void 0:t.sides)??Goe))}}const pL=3.5,mL=2.66,Voe=3;class Woe extends Hz{constructor(){super(...arguments),this.validTypes=["polygon"]}getCenter(e,t){return{x:-t/(e.sides/pL),y:-t/(mL/pL)}}getSidesData(e,t){const i=e.sides;return{count:{denominator:1,numerator:i},length:t*mL/(i/Voe)}}}const joe=1.66,Xoe=3,Joe=2;class Yoe extends Hz{constructor(){super(...arguments),this.validTypes=["triangle"]}getCenter(e,t){return{x:-t,y:t/joe}}getSidesCount(){return Xoe}getSidesData(e,t){const i=t*Joe;return{count:{denominator:2,numerator:3},length:i}}}async function Koe(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new Woe,e)}async function qoe(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new Yoe,e)}async function Qoe(n,e=!0){n.checkVersion("3.9.1"),await Koe(n,e),await qoe(n,e)}class Zoe{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){Le(e)||(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=ct(e.speed)),e.decay!==void 0&&(this.decay=ct(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class $oe extends Wr{constructor(){super(),this.animation=new Zoe,this.direction=Zi.clockwise,this.path=!1,this.value=0}load(e){Le(e)||(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}const Gz=2,eae=Math.PI*Gz,tae=1,nae=360;class iae{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:lf(je(t.value)),min:0,max:eae},e.pathRotation=t.path;let i=t.direction;switch(i===Zi.random&&(i=Math.floor(Tt()*Gz)>0?Zi.counterClockwise:Zi.clockwise),i){case Zi.counterClockwise:case"counterClockwise":e.rotate.status=Dn.decreasing;break;case Zi.clockwise:e.rotate.status=Dn.increasing;break}const s=t.animation;s.enable&&(e.rotate.decay=tae-je(s.decay),e.rotate.velocity=je(s.speed)/nae*this.container.retina.reduceFactor,s.sync||(e.rotate.velocity*=Tt())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return t?!e.destroyed&&!e.spawning&&(!!t.value||t.animation.enable||t.path):!1}loadOptions(e,...t){e.rotate||(e.rotate=new $oe);for(const i of t)e.rotate.load(i==null?void 0:i.rotate)}update(e,t){this.isEnabled(e)&&(e.isRotating=!!e.rotate,e.rotate&&(Sx(e,e.rotate,!1,vl.none,t),e.rotation=e.rotate.value))}}async function sae(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("rotate",t=>Promise.resolve(new iae(t)),e)}const rae=2,oae=Math.sqrt(rae),aae=2;function lae(n){const{context:e,radius:t}=n,i=t/oae,s=i*aae;e.rect(-i,-i,s,s)}const cae=4;class uae{constructor(){this.validTypes=["edge","square"]}draw(e){lae(e)}getSidesCount(){return cae}}async function hae(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new uae,e)}const fae=2,Mh={x:0,y:0};function dae(n){const{context:e,particle:t,radius:i}=n,s=t.sides,r=t.starInset??fae;e.moveTo(Mh.x,Mh.y-i);for(let o=0;o<s;o++)e.rotate(Math.PI/s),e.lineTo(Mh.x,Mh.y-i*r),e.rotate(Math.PI/s),e.lineTo(Mh.x,Mh.y-i)}const pae=2,mae=5;class gae{constructor(){this.validTypes=["star"]}draw(e){dae(e)}getSidesCount(e){const t=e.shapeData;return Math.round(je((t==null?void 0:t.sides)??mae))}particleInit(e,t){const i=t.shapeData;t.starInset=je((i==null?void 0:i.inset)??pae)}}async function yae(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new gae,e)}const vae=1;class xae{constructor(e,t){this._container=e,this._engine=t}init(e){var o;const t=this._container,i=e.options,s=yo(i.stroke,e.id,i.reduceDuplicates);e.strokeWidth=je(s.width)*t.retina.pixelRatio,e.strokeOpacity=je(s.opacity??vae),e.strokeAnimation=(o=s.color)==null?void 0:o.animation;const r=Wf(this._engine,s.color)??e.getFillColor();r&&(e.strokeColor=Ez(r,e.strokeAnimation,t.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:i}=e;return!e.destroyed&&!e.spawning&&!!t&&((i==null?void 0:i.h.value)!==void 0&&i.h.enable||(i==null?void 0:i.s.value)!==void 0&&i.s.enable||(i==null?void 0:i.l.value)!==void 0&&i.l.enable)}update(e,t){this.isEnabled(e)&&wz(e.strokeColor,t)}}async function _ae(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("strokeColor",t=>Promise.resolve(new xae(t,n)),e)}async function Aae(n,e=!0){n.checkVersion("3.9.1"),await aoe(n,!1),await hse(n,!1),await _se(n,!1),await Tse(n,!1),await Fse(n,!1),await Yse(n,!1),await Qse(n,!1),await nre(n,!1),await ore(n,!1),await yre(n,!1),await Sre(n,!1),await uoe(n,!1),await xoe(n,!1),await Foe(n,!1),await tse(n,!1),await sse(n,!1),await Yre(n,!1),await roe(n,!1),await Qoe(n,!1),await hae(n,!1),await yae(n,!1),await toe(n,!1),await sae(n,!1),await _ae(n,!1),await ese(n,e)}const Vz=2,gL=.5;function Sae(n){const{context:e,particle:t,radius:i,opacity:s}=n,r=t.shapeData;if(!r)return;const o=r.value;if(o===void 0)return;t.text===void 0&&(t.text=yo(o,t.randomIndexData));const a=t.text,l=r.style??"",h=r.weight??"400",f=Math.round(i)*Vz,d=r.font??"Verdana",p=t.shapeFill,g=a==null?void 0:a.split(`
`);if(g){e.font=`${l} ${h} ${f}px "${d}"`,e.globalAlpha=s;for(let v=0;v<g.length;v++)Mae(e,g[v],i,s,v,p);e.globalAlpha=1}}function Mae(n,e,t,i,s,r){const o=e.length*t*gL,a={x:-o,y:t*gL},l=t*Vz;r?n.fillText(e,a.x,a.y+l*s):n.strokeText(e,a.x,a.y+l*s)}class bae{constructor(){this.validTypes=["text","character","char","multiline-text"]}draw(e){Sae(e)}async init(e){const t=e.actualOptions,{validTypes:i}=this;if(i.find(s=>dn(s,t.particles.shape.type))){const s=i.map(o=>t.particles.shape.options[o]).find(o=>!!o),r=[];_i(s,o=>{r.push(cE(o.font,o.weight))}),await Promise.all(r)}}particleInit(e,t){if(!t.shape||!this.validTypes.includes(t.shape))return;const i=t.shapeData;if(i===void 0)return;const s=i.value;s!==void 0&&(t.text=yo(s,t.randomIndexData))}}async function Eae(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new bae,e)}var Wa;(function(n){n.clockwise="clockwise",n.counterClockwise="counter-clockwise",n.random="random"})(Wa||(Wa={}));class wae{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){Le(e)||(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=ct(e.speed)),e.decay!==void 0&&(this.decay=ct(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class Cae extends Wr{constructor(){super(),this.animation=new wae,this.direction=Wa.clockwise,this.enable=!1,this.value=0}load(e){super.load(e),!Le(e)&&(this.animation.load(e.animation),e.direction!==void 0&&(this.direction=e.direction),e.enable!==void 0&&(this.enable=e.enable))}}const Wd=1,Wz=2,Tae=Math.PI*Wz,Rae=360;class Bae{constructor(e){this.container=e}getTransformValues(e){var i;const t=((i=e.tilt)==null?void 0:i.enable)&&e.tilt;return{b:t?Math.cos(t.value)*t.cosDirection:void 0,c:t?Math.sin(t.value)*t.sinDirection:void 0}}init(e){var r;const t=e.options.tilt;if(!t)return;e.tilt={enable:t.enable,value:lf(je(t.value)),sinDirection:Tt()>=ms?Wd:-Wd,cosDirection:Tt()>=ms?Wd:-Wd,min:0,max:Tae};let i=t.direction;switch(i===Wa.random&&(i=Math.floor(Tt()*Wz)>0?Wa.counterClockwise:Wa.clockwise),i){case Wa.counterClockwise:case"counterClockwise":e.tilt.status=Dn.decreasing;break;case Wa.clockwise:e.tilt.status=Dn.increasing;break}const s=(r=e.options.tilt)==null?void 0:r.animation;s!=null&&s.enable&&(e.tilt.decay=Wd-je(s.decay),e.tilt.velocity=je(s.speed)/Rae*this.container.retina.reduceFactor,s.sync||(e.tilt.velocity*=Tt()))}isEnabled(e){var i;const t=(i=e.options.tilt)==null?void 0:i.animation;return!e.destroyed&&!e.spawning&&!!(t!=null&&t.enable)}loadOptions(e,...t){e.tilt||(e.tilt=new Cae);for(const i of t)e.tilt.load(i==null?void 0:i.tilt)}async update(e,t){!this.isEnabled(e)||!e.tilt||(Sx(e,e.tilt,!1,vl.none,t),await Promise.resolve())}}async function Pae(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("tilt",t=>Promise.resolve(new Bae(t)),e)}class yL{constructor(){this.enable=!1,this.frequency=.05,this.opacity=1}load(e){Le(e)||(e.color!==void 0&&(this.color=ci.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=ct(e.opacity)))}}class Dae{constructor(){this.lines=new yL,this.particles=new yL}load(e){Le(e)||(this.lines.load(e.lines),this.particles.load(e.particles))}}class Lae{constructor(e){this._engine=e}getColorStyles(e,t,i,s){const r=e.options,o=r.twinkle;if(!o)return{};const a=o.particles,l=a.enable&&Tt()<a.frequency,h=e.options.zIndex,f=1,d=(f-e.zIndexFactor)**h.opacityRate,p=l?je(a.opacity)*d:s,g=Wf(this._engine,a.color),v=g?h0(g,p):void 0,S={},_=l&&v;return S.fill=_?v:void 0,S.stroke=_?v:void 0,S}async init(){await Promise.resolve()}isEnabled(e){const t=e.options,i=t.twinkle;return i?i.particles.enable:!1}loadOptions(e,...t){e.twinkle||(e.twinkle=new Dae);for(const i of t)e.twinkle.load(i==null?void 0:i.twinkle)}async update(){await Promise.resolve()}}async function Oae(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("twinkle",()=>Promise.resolve(new Lae(n)),e)}class Iae{constructor(){this.angle=50,this.move=10}load(e){Le(e)||(e.angle!==void 0&&(this.angle=ct(e.angle)),e.move!==void 0&&(this.move=ct(e.move)))}}class Nae{constructor(){this.distance=5,this.enable=!1,this.speed=new Iae}load(e){if(!Le(e)&&(e.distance!==void 0&&(this.distance=ct(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0))if(fr(e.speed))this.speed.load({angle:e.speed});else{const t=e.speed;t.min!==void 0?this.speed.load({angle:t}):this.speed.load(e.speed)}}}const Uae=0,Fae=2,zae=Math.PI*Fae,kae=60;function Hae(n,e){const{wobble:t}=n.options,{container:i,wobble:s}=n;if(!(t!=null&&t.enable)||!s)return;const r=i.retina.reduceFactor,o=s.angleSpeed*e.factor*r,a=s.moveSpeed*e.factor*r,l=a*(n.retina.wobbleDistance??Uae)/(Di/kae),h=zae,{position:f}=n;s.angle+=o,s.angle>h&&(s.angle-=h),f.x+=l*Math.cos(s.angle),f.y+=l*Math.abs(Math.sin(s.angle))}const Gae=2,Vae=Math.PI*Gae,Wae=360,jae=10,Xae=0;class Jae{constructor(e){this.container=e}init(e){const t=e.options.wobble;t!=null&&t.enable?e.wobble={angle:Tt()*Vae,angleSpeed:je(t.speed.angle)/Wae,moveSpeed:je(t.speed.move)/jae}:e.wobble={angle:0,angleSpeed:0,moveSpeed:0},e.retina.wobbleDistance=je((t==null?void 0:t.distance)??Xae)*this.container.retina.pixelRatio}isEnabled(e){var t;return!e.destroyed&&!e.spawning&&!!((t=e.options.wobble)!=null&&t.enable)}loadOptions(e,...t){e.wobble||(e.wobble=new Nae);for(const i of t)e.wobble.load(i==null?void 0:i.wobble)}update(e,t){this.isEnabled(e)&&Hae(e,t)}}async function Yae(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("wobble",t=>Promise.resolve(new Jae(t)),e)}async function Kae(n,e=!0){n.checkVersion("3.9.1"),await Bne(n,!1),await oie(n,!1),await Pae(n,!1),await Oae(n,!1),await Yae(n,!1),await Eae(n,!1),await $ne(n,!1),await gne(n,!1),await Gne(n,!1),await Xne(n,!1),await qne(n,!1),await Aae(n,e)}function qae(){const n=async e=>{await Kae(e)};return re.jsxs("div",{className:"fixed inset-0 -z-10",children:[re.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover opacity-40",children:re.jsx("source",{src:"/cinematic-bg.mp4",type:"video/mp4"})}),re.jsx("div",{className:"absolute inset-0 bg-grid bg-[size:24px_24px] opacity-10"}),re.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-transparent to-black/70"}),re.jsx(_x,{id:"tsparticles",init:n,options:{background:{color:"transparent"},fpsLimit:60,particles:{number:{value:45,density:{enable:!0,area:800}},color:{value:["#8b5cf6","#22d3ee","#f472b6"]},links:{enable:!0,color:"#8b5cf6",opacity:.25,width:1},move:{enable:!0,speed:.6},opacity:{value:.5},size:{value:{min:1,max:3}}},detectRetina:!0},className:"absolute inset-0"})]})}function Qae(){return fe.useEffect(()=>{document.documentElement.classList.add("dark")},[]),re.jsxs("div",{className:"font-sans relative min-h-screen overflow-x-hidden",children:[re.jsx(qae,{}),re.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 backdrop-blur border-b border-white/10 bg-black/30",children:re.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[re.jsx("a",{href:"#hero",className:"font-semibold tracking-tight",children:"Pallavi Bade"}),re.jsx("nav",{className:"hidden md:flex items-center gap-6 text-sm",children:[["About","about"],["Experience","experience"],["Projects","projects"],["Skills","skills"],["Achievements","achievements"],["Leadership","leadership"],["Contact","contact"]].map(([n,e])=>re.jsx("a",{href:`#${e}`,className:"hover:text-glow2",children:n},e))}),re.jsxs("div",{className:"flex items-center gap-3",children:[re.jsx("a",{href:pi.links.github,target:"_blank",rel:"noreferrer","aria-label":"GitHub",children:re.jsx(_V,{className:"w-5 h-5"})}),re.jsx("a",{href:pi.links.linkedin,target:"_blank",rel:"noreferrer","aria-label":"LinkedIn",children:re.jsx(LI,{className:"w-5 h-5"})}),re.jsx("a",{href:pi.links.leetcode,target:"_blank",rel:"noreferrer","aria-label":"LeetCode",children:re.jsx(DI,{className:"w-5 h-5"})})]})]})}),re.jsx(a$,{}),re.jsxs("main",{className:"relative z-10",children:[re.jsx(l$,{}),re.jsx(c$,{}),re.jsx(h$,{}),re.jsx(f$,{}),re.jsx(d$,{}),re.jsx(p$,{}),re.jsx(m$,{}),re.jsxs("footer",{className:"py-10 text-center text-sm text-zinc-400",children:[re.jsxs("div",{className:"flex items-center justify-center gap-2",children:[re.jsx(AV,{className:"w-4 h-4"})," ",pi.location]}),re.jsxs("div",{className:"mt-2",children:[" ",new Date().getFullYear()," ",pi.name,"  Built with React, Tailwind & R3F"]})]})]})]})}qS.createRoot(document.getElementById("root")).render(re.jsx(io.StrictMode,{children:re.jsx(Qae,{})}));
